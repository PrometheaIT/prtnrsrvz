(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8792],{4442:(hn,rt,W)=>{"use strict";W.d(rt,{L:()=>X,a:()=>C,b:()=>pe,c:()=>ue,d:()=>Ke,g:()=>Dt}),W(5531);const X="ionViewWillEnter",C="ionViewDidEnter",pe="ionViewWillLeave",ue="ionViewDidLeave",Ke="ionViewWillUnload",Dt=Te=>Te.classList.contains("ion-page")?Te:Te.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||Te},5531:(hn,rt,W)=>{"use strict";W.d(rt,{a:()=>Qe,c:()=>g,g:()=>Ke});class _{constructor(){this.m=new Map}reset(Te){this.m=new Map(Object.entries(Te))}get(Te,Z){const Y=this.m.get(Te);return void 0!==Y?Y:Z}getBoolean(Te,Z=!1){const Y=this.m.get(Te);return void 0===Y?Z:"string"==typeof Y?"true"===Y:!!Y}getNumber(Te,Z){const Y=parseFloat(this.m.get(Te));return isNaN(Y)?void 0!==Z?Z:NaN:Y}set(Te,Z){this.m.set(Te,Z)}}const g=new _,Ke=Dt=>ye(Dt),Qe=(Dt,Te)=>("string"==typeof Dt&&(Te=Dt,Dt=void 0),Ke(Dt).includes(Te)),ye=(Dt=window)=>{if(typeof Dt>"u")return[];Dt.Ionic=Dt.Ionic||{};let Te=Dt.Ionic.platforms;return null==Te&&(Te=Dt.Ionic.platforms=Ve(Dt),Te.forEach(Z=>Dt.document.documentElement.classList.add(`plt-${Z}`))),Te},Ve=Dt=>{const Te=g.get("platform");return Object.keys(Ut).filter(Z=>{const Y=null==Te?void 0:Te[Z];return"function"==typeof Y?Y(Dt):Ut[Z](Dt)})},Le=Dt=>!!(ft(Dt,/iPad/i)||ft(Dt,/Macintosh/i)&&ut(Dt)),tt=Dt=>ft(Dt,/android|sink/i),ut=Dt=>Pt(Dt,"(any-pointer:coarse)"),Xe=Dt=>_t(Dt)||at(Dt),_t=Dt=>!!(Dt.cordova||Dt.phonegap||Dt.PhoneGap),at=Dt=>{const Te=Dt.Capacitor;return!(null==Te||!Te.isNative)},ft=(Dt,Te)=>Te.test(Dt.navigator.userAgent),Pt=(Dt,Te)=>{var Z;return null===(Z=Dt.matchMedia)||void 0===Z?void 0:Z.call(Dt,Te).matches},Ut={ipad:Le,iphone:Dt=>ft(Dt,/iPhone/i),ios:Dt=>ft(Dt,/iPhone|iPod/i)||Le(Dt),android:tt,phablet:Dt=>{const Te=Dt.innerWidth,Z=Dt.innerHeight,Y=Math.min(Te,Z),oe=Math.max(Te,Z);return Y>390&&Y<520&&oe>620&&oe<800},tablet:Dt=>{const Te=Dt.innerWidth,Z=Dt.innerHeight,Y=Math.min(Te,Z),oe=Math.max(Te,Z);return Le(Dt)||(Dt=>tt(Dt)&&!ft(Dt,/mobile/i))(Dt)||Y>460&&Y<820&&oe>780&&oe<1400},cordova:_t,capacitor:at,electron:Dt=>ft(Dt,/electron/i),pwa:Dt=>{var Te;return!!(null!==(Te=Dt.matchMedia)&&void 0!==Te&&Te.call(Dt,"(display-mode: standalone)").matches||Dt.navigator.standalone)},mobile:ut,mobileweb:Dt=>ut(Dt)&&!Xe(Dt),desktop:Dt=>!ut(Dt),hybrid:Xe}},9986:(hn,rt,W)=>{"use strict";W.d(rt,{c:()=>C});var _=W(8476);let g;const xe=(pe,ue,Ke)=>{const Qe=ue.startsWith("animation")?(pe=>(void 0===g&&(g=void 0===pe.style.animationName&&void 0!==pe.style.webkitAnimationName?"-webkit-":""),g))(pe):"";pe.style.setProperty(Qe+ue,Ke)},X=(pe=[],ue)=>{if(void 0!==ue){const Ke=Array.isArray(ue)?ue:[ue];return[...pe,...Ke]}return pe},C=pe=>{let ue,Ke,Qe,ye,Ve,Oe,nt,It,Ne,ft,Wt,Le=[],Ze=[],ot=[],tt=!1,At={},ct=[],ut=[],Re={},Xe=0,_t=!1,at=!1,Pt=!0,Ut=!1,Gt=!0,Sn=!1;const Dt=pe,Te=[],Z=[],Y=[],oe=[],Ie=[],We=[],Ye=[],je=[],qt=[],On=[],fn=[],Fn="function"==typeof AnimationEffect||void 0!==_.w&&"function"==typeof _.w.AnimationEffect,gn="function"==typeof Element&&"function"==typeof Element.prototype.animate&&Fn,_r=()=>fn,zn=(Q,ne)=>{const we=ne.findIndex(J=>J.c===Q);we>-1&&ne.splice(we,1)},Tt=(Q,ne)=>((null!=ne&&ne.oneTimeCallback?Z:Te).push({c:Q,o:ne}),Wt),un=()=>{gn&&(fn.forEach(Q=>{Q.cancel()}),fn.length=0)},pn=()=>{We.forEach(Q=>{null!=Q&&Q.parentNode&&Q.parentNode.removeChild(Q)}),We.length=0},nr=()=>void 0!==Ve?Ve:nt?nt.getFill():"both",cr=()=>void 0!==It?It:void 0!==Oe?Oe:nt?nt.getDirection():"normal",fr=()=>_t?"linear":void 0!==Qe?Qe:nt?nt.getEasing():"linear",Dn=()=>at?0:void 0!==Ne?Ne:void 0!==Ke?Ke:nt?nt.getDuration():0,Kr=()=>void 0!==ye?ye:nt?nt.getIterations():1,qi=()=>void 0!==ft?ft:void 0!==ue?ue:nt?nt.getDelay():0,Sr=()=>{0!==Xe&&(Xe--,0===Xe&&((()=>{qt.forEach(me=>me()),On.forEach(me=>me());const Q=Pt?1:0,ne=ct,we=ut,J=Re;oe.forEach(me=>{const et=me.classList;ne.forEach(Vt=>et.add(Vt)),we.forEach(Vt=>et.remove(Vt));for(const Vt in J)J.hasOwnProperty(Vt)&&xe(me,Vt,J[Vt])}),Ne=void 0,It=void 0,ft=void 0,Te.forEach(me=>me.c(Q,Wt)),Z.forEach(me=>me.c(Q,Wt)),Z.length=0,Gt=!0,Pt&&(Ut=!0),Pt=!0})(),nt&&nt.animationFinish()))},So=()=>{(()=>{Ye.forEach(J=>J()),je.forEach(J=>J());const Q=Ze,ne=ot,we=At;oe.forEach(J=>{const me=J.classList;Q.forEach(et=>me.add(et)),ne.forEach(et=>me.remove(et));for(const et in we)we.hasOwnProperty(et)&&xe(J,et,we[et])})})(),Le.length>0&&gn&&(oe.forEach(Q=>{const ne=Q.animate(Le,{id:Dt,delay:qi(),duration:Dn(),easing:fr(),iterations:Kr(),fill:nr(),direction:cr()});ne.pause(),fn.push(ne)}),fn.length>0&&(fn[0].onfinish=()=>{Sr()})),tt=!0},Ni=Q=>{Q=Math.min(Math.max(Q,0),.9999),gn&&fn.forEach(ne=>{ne.currentTime=ne.effect.getComputedTiming().delay+Dn()*Q,ne.pause()})},fo=Q=>{fn.forEach(ne=>{ne.effect.updateTiming({delay:qi(),duration:Dn(),easing:fr(),iterations:Kr(),fill:nr(),direction:cr()})}),void 0!==Q&&Ni(Q)},Pn=(Q=!1,ne=!0,we)=>(Q&&Ie.forEach(J=>{J.update(Q,ne,we)}),gn&&fo(we),Wt),go=()=>{tt&&(gn?fn.forEach(Q=>{Q.pause()}):oe.forEach(Q=>{xe(Q,"animation-play-state","paused")}),Sn=!0)},Jo=Q=>new Promise(ne=>{null!=Q&&Q.sync&&(at=!0,Tt(()=>at=!1,{oneTimeCallback:!0})),tt||So(),Ut&&(gn&&(Ni(0),fo()),Ut=!1),Gt&&(Xe=Ie.length+1,Gt=!1);const we=()=>{zn(J,Z),ne()},J=()=>{zn(we,Y),ne()};Tt(J,{oneTimeCallback:!0}),((Q,ne)=>{Y.push({c:Q,o:{oneTimeCallback:!0}})})(we),Ie.forEach(me=>{me.play()}),gn?(fn.forEach(Q=>{Q.play()}),(0===Le.length||0===oe.length)&&Sr()):Sr(),Sn=!1}),Oi=(Q,ne)=>{const we=Le[0];return void 0===we||void 0!==we.offset&&0!==we.offset?Le=[{offset:0,[Q]:ne},...Le]:we[Q]=ne,Wt};return Wt={parentAnimation:nt,elements:oe,childAnimations:Ie,id:Dt,animationFinish:Sr,from:Oi,to:(Q,ne)=>{const we=Le[Le.length-1];return void 0===we||void 0!==we.offset&&1!==we.offset?Le=[...Le,{offset:1,[Q]:ne}]:we[Q]=ne,Wt},fromTo:(Q,ne,we)=>Oi(Q,ne).to(Q,we),parent:Q=>(nt=Q,Wt),play:Jo,pause:()=>(Ie.forEach(Q=>{Q.pause()}),go(),Wt),stop:()=>{Ie.forEach(Q=>{Q.stop()}),tt&&(un(),tt=!1),_t=!1,at=!1,Gt=!0,It=void 0,Ne=void 0,ft=void 0,Xe=0,Ut=!1,Pt=!0,Sn=!1,Y.forEach(Q=>Q.c(0,Wt)),Y.length=0},destroy:Q=>(Ie.forEach(ne=>{ne.destroy(Q)}),(Q=>{un(),Q&&pn()})(Q),oe.length=0,Ie.length=0,Le.length=0,Te.length=0,Z.length=0,tt=!1,Gt=!0,Wt),keyframes:Q=>{const ne=Le!==Q;return Le=Q,ne&&(Q=>{gn&&_r().forEach(ne=>{const we=ne.effect;if(we.setKeyframes)we.setKeyframes(Q);else{const J=new KeyframeEffect(we.target,Q,we.getTiming());ne.effect=J}})})(Le),Wt},addAnimation:Q=>{if(null!=Q)if(Array.isArray(Q))for(const ne of Q)ne.parent(Wt),Ie.push(ne);else Q.parent(Wt),Ie.push(Q);return Wt},addElement:Q=>{if(null!=Q)if(1===Q.nodeType)oe.push(Q);else if(Q.length>=0)for(let ne=0;ne<Q.length;ne++)oe.push(Q[ne]);else console.error("Invalid addElement value");return Wt},update:Pn,fill:Q=>(Ve=Q,Pn(!0),Wt),direction:Q=>(Oe=Q,Pn(!0),Wt),iterations:Q=>(ye=Q,Pn(!0),Wt),duration:Q=>(!gn&&0===Q&&(Q=1),Ke=Q,Pn(!0),Wt),easing:Q=>(Qe=Q,Pn(!0),Wt),delay:Q=>(ue=Q,Pn(!0),Wt),getWebAnimations:_r,getKeyframes:()=>Le,getFill:nr,getDirection:cr,getDelay:qi,getIterations:Kr,getEasing:fr,getDuration:Dn,afterAddRead:Q=>(qt.push(Q),Wt),afterAddWrite:Q=>(On.push(Q),Wt),afterClearStyles:(Q=[])=>{for(const ne of Q)Re[ne]="";return Wt},afterStyles:(Q={})=>(Re=Q,Wt),afterRemoveClass:Q=>(ut=X(ut,Q),Wt),afterAddClass:Q=>(ct=X(ct,Q),Wt),beforeAddRead:Q=>(Ye.push(Q),Wt),beforeAddWrite:Q=>(je.push(Q),Wt),beforeClearStyles:(Q=[])=>{for(const ne of Q)At[ne]="";return Wt},beforeStyles:(Q={})=>(At=Q,Wt),beforeRemoveClass:Q=>(ot=X(ot,Q),Wt),beforeAddClass:Q=>(Ze=X(Ze,Q),Wt),onFinish:Tt,isRunning:()=>0!==Xe&&!Sn,progressStart:(Q=!1,ne)=>(Ie.forEach(we=>{we.progressStart(Q,ne)}),go(),_t=Q,tt||So(),Pn(!1,!0,ne),Wt),progressStep:Q=>(Ie.forEach(ne=>{ne.progressStep(Q)}),Ni(Q),Wt),progressEnd:(Q,ne,we)=>(_t=!1,Ie.forEach(J=>{J.progressEnd(Q,ne,we)}),void 0!==we&&(Ne=we),Ut=!1,Pt=!0,0===Q?(It="reverse"===cr()?"normal":"reverse","reverse"===It&&(Pt=!1),gn?(Pn(),Ni(1-ne)):(ft=(1-ne)*Dn()*-1,Pn(!1,!1))):1===Q&&(gn?(Pn(),Ni(ne)):(ft=ne*Dn()*-1,Pn(!1,!1))),void 0!==Q&&!nt&&Jo(),Wt)}}},464:(hn,rt,W)=>{"use strict";W.d(rt,{E:()=>Qe,a:()=>_,s:()=>ue});const _=ye=>{try{if(ye instanceof pe)return ye.value;if(!xe()||"string"!=typeof ye||""===ye)return ye;if(ye.includes("onload="))return"";const Ve=document.createDocumentFragment(),Oe=document.createElement("div");Ve.appendChild(Oe),Oe.innerHTML=ye,C.forEach(tt=>{const nt=Ve.querySelectorAll(tt);for(let At=nt.length-1;At>=0;At--){const ct=nt[At];ct.parentNode?ct.parentNode.removeChild(ct):Ve.removeChild(ct);const ut=ae(ct);for(let Re=0;Re<ut.length;Re++)g(ut[Re])}});const Le=ae(Ve);for(let tt=0;tt<Le.length;tt++)g(Le[tt]);const Ze=document.createElement("div");Ze.appendChild(Ve);const ot=Ze.querySelector("div");return null!==ot?ot.innerHTML:Ze.innerHTML}catch(Ve){return console.error(Ve),""}},g=ye=>{if(ye.nodeType&&1!==ye.nodeType)return;if(typeof NamedNodeMap<"u"&&!(ye.attributes instanceof NamedNodeMap))return void ye.remove();for(let Oe=ye.attributes.length-1;Oe>=0;Oe--){const Le=ye.attributes.item(Oe),Ze=Le.name;if(!X.includes(Ze.toLowerCase())){ye.removeAttribute(Ze);continue}const ot=Le.value,tt=ye[Ze];(null!=ot&&ot.toLowerCase().includes("javascript:")||null!=tt&&tt.toLowerCase().includes("javascript:"))&&ye.removeAttribute(Ze)}const Ve=ae(ye);for(let Oe=0;Oe<Ve.length;Oe++)g(Ve[Oe])},ae=ye=>null!=ye.children?ye.children:ye.childNodes,xe=()=>{var ye;const Ve=window,Oe=null===(ye=null==Ve?void 0:Ve.Ionic)||void 0===ye?void 0:ye.config;return!Oe||(Oe.get?Oe.get("sanitizerEnabled",!0):!0===Oe.sanitizerEnabled||void 0===Oe.sanitizerEnabled)},X=["class","id","href","src","name","slot"],C=["script","style","iframe","meta","link","object","embed"];class pe{constructor(Ve){this.value=Ve}}const ue=ye=>{const Ve=window,Oe=Ve.Ionic;if(!Oe||!Oe.config||"Object"===Oe.config.constructor.name)return Ve.Ionic=Ve.Ionic||{},Ve.Ionic.config=Object.assign(Object.assign({},Ve.Ionic.config),ye),Ve.Ionic.config},Qe=!1},8621:(hn,rt,W)=>{"use strict";W.d(rt,{C:()=>X,a:()=>ae,d:()=>xe});var _=W(467),g=W(4920);const ae=function(){var C=(0,_.A)(function*(pe,ue,Ke,Qe,ye,Ve){var Oe;if(pe)return pe.attachViewToDom(ue,Ke,ye,Qe);if(!(Ve||"string"==typeof Ke||Ke instanceof HTMLElement))throw new Error("framework delegate is missing");const Le="string"==typeof Ke?null===(Oe=ue.ownerDocument)||void 0===Oe?void 0:Oe.createElement(Ke):Ke;return Qe&&Qe.forEach(Ze=>Le.classList.add(Ze)),ye&&Object.assign(Le,ye),ue.appendChild(Le),yield new Promise(Ze=>(0,g.c)(Le,Ze)),Le});return function(ue,Ke,Qe,ye,Ve,Oe){return C.apply(this,arguments)}}(),xe=(C,pe)=>{if(pe){if(C)return C.removeViewFromDom(pe.parentElement,pe);pe.remove()}return Promise.resolve()},X=()=>{let C,pe;return{attachViewToDom:function(){var Qe=(0,_.A)(function*(ye,Ve,Oe={},Le=[]){var Ze,ot;let tt;if(C=ye,Ve){const At="string"==typeof Ve?null===(Ze=C.ownerDocument)||void 0===Ze?void 0:Ze.createElement(Ve):Ve;Le.forEach(ct=>At.classList.add(ct)),Object.assign(At,Oe),C.appendChild(At),tt=At,yield new Promise(ct=>(0,g.c)(At,ct))}else if(C.children.length>0&&("ION-MODAL"===C.tagName||"ION-POPOVER"===C.tagName)&&!(tt=C.children[0]).classList.contains("ion-delegate-host")){const ct=null===(ot=C.ownerDocument)||void 0===ot?void 0:ot.createElement("div");ct.classList.add("ion-delegate-host"),Le.forEach(ut=>ct.classList.add(ut)),ct.append(...C.children),C.appendChild(ct),tt=ct}const nt=document.querySelector("ion-app")||document.body;return pe=document.createComment("ionic teleport"),C.parentNode.insertBefore(pe,C),nt.appendChild(C),null!=tt?tt:C});return function(Ve,Oe){return Qe.apply(this,arguments)}}(),removeViewFromDom:()=>(C&&pe&&(pe.parentNode.insertBefore(C,pe),pe.remove()),Promise.resolve())}}},1970:(hn,rt,W)=>{"use strict";W.d(rt,{B:()=>xe,G:()=>X});class g{constructor(pe,ue,Ke,Qe,ye){this.id=ue,this.name=Ke,this.disableScroll=ye,this.priority=1e6*Qe+ue,this.ctrl=pe}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const pe=this.ctrl.capture(this.name,this.id,this.priority);return pe&&this.disableScroll&&this.ctrl.disableScroll(this.id),pe}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class ae{constructor(pe,ue,Ke,Qe){this.id=ue,this.disable=Ke,this.disableScroll=Qe,this.ctrl=pe}block(){if(this.ctrl){if(this.disable)for(const pe of this.disable)this.ctrl.disableGesture(pe,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const pe of this.disable)this.ctrl.enableGesture(pe,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const xe="backdrop-no-scroll",X=new class _{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(pe){var ue;return new g(this,this.newID(),pe.name,null!==(ue=pe.priority)&&void 0!==ue?ue:0,!!pe.disableScroll)}createBlocker(pe={}){return new ae(this,this.newID(),pe.disable,!!pe.disableScroll)}start(pe,ue,Ke){return this.canStart(pe)?(this.requestedStart.set(ue,Ke),!0):(this.requestedStart.delete(ue),!1)}capture(pe,ue,Ke){if(!this.start(pe,ue,Ke))return!1;const Qe=this.requestedStart;let ye=-1e4;if(Qe.forEach(Ve=>{ye=Math.max(ye,Ve)}),ye===Ke){this.capturedId=ue,Qe.clear();const Ve=new CustomEvent("ionGestureCaptured",{detail:{gestureName:pe}});return document.dispatchEvent(Ve),!0}return Qe.delete(ue),!1}release(pe){this.requestedStart.delete(pe),this.capturedId===pe&&(this.capturedId=void 0)}disableGesture(pe,ue){let Ke=this.disabledGestures.get(pe);void 0===Ke&&(Ke=new Set,this.disabledGestures.set(pe,Ke)),Ke.add(ue)}enableGesture(pe,ue){const Ke=this.disabledGestures.get(pe);void 0!==Ke&&Ke.delete(ue)}disableScroll(pe){this.disabledScroll.add(pe),1===this.disabledScroll.size&&document.body.classList.add(xe)}enableScroll(pe){this.disabledScroll.delete(pe),0===this.disabledScroll.size&&document.body.classList.remove(xe)}canStart(pe){return!(void 0!==this.capturedId||this.isDisabled(pe))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(pe){const ue=this.disabledGestures.get(pe);return!!(ue&&ue.size>0)}newID(){return this.gestureId++,this.gestureId}}},8669:(hn,rt,W)=>{"use strict";W.r(rt),W.d(rt,{MENU_BACK_BUTTON_PRIORITY:()=>Ke,OVERLAY_BACK_BUTTON_PRIORITY:()=>ue,blockHardwareBackButton:()=>C,shouldUseCloseWatcher:()=>X,startHardwareBackButton:()=>pe});var _=W(467),g=W(8476),ae=W(4921);W(8393);const X=()=>ae.c.get("experimentalCloseWatcher",!1)&&void 0!==g.w&&"CloseWatcher"in g.w,C=()=>{document.addEventListener("backbutton",()=>{})},pe=()=>{const Qe=document;let ye=!1;const Ve=()=>{if(ye)return;let Oe=0,Le=[];const Ze=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(nt,At){Le.push({priority:nt,handler:At,id:Oe++})}}});Qe.dispatchEvent(Ze);const ot=function(){var nt=(0,_.A)(function*(At){try{if(null!=At&&At.handler){const ct=At.handler(tt);null!=ct&&(yield ct)}}catch(ct){console.error(ct)}});return function(ct){return nt.apply(this,arguments)}}(),tt=()=>{if(Le.length>0){let nt={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};Le.forEach(At=>{At.priority>=nt.priority&&(nt=At)}),ye=!0,Le=Le.filter(At=>At.id!==nt.id),ot(nt).then(()=>ye=!1)}};tt()};if(X()){let Oe;const Le=()=>{null==Oe||Oe.destroy(),Oe=new g.w.CloseWatcher,Oe.onclose=()=>{Ve(),Le()}};Le()}else Qe.addEventListener("backbutton",Ve)},ue=100,Ke=99},4920:(hn,rt,W)=>{"use strict";W.d(rt,{a:()=>ue,b:()=>Ke,c:()=>ae,d:()=>Le,e:()=>At,f:()=>Oe,g:()=>Qe,h:()=>X,i:()=>pe,j:()=>Ze,k:()=>xe,l:()=>Ve,m:()=>ot,n:()=>nt,o:()=>ct,p:()=>tt,r:()=>ye,s:()=>ut,t:()=>_});const _=(Re,Xe=0)=>new Promise(_t=>{g(Re,Xe,_t)}),g=(Re,Xe=0,_t)=>{let at,It;const Ne={passive:!0},Pt=()=>{at&&at()},Ut=Gt=>{(void 0===Gt||Re===Gt.target)&&(Pt(),_t(Gt))};return Re&&(Re.addEventListener("webkitTransitionEnd",Ut,Ne),Re.addEventListener("transitionend",Ut,Ne),It=setTimeout(Ut,Xe+500),at=()=>{void 0!==It&&(clearTimeout(It),It=void 0),Re.removeEventListener("webkitTransitionEnd",Ut,Ne),Re.removeEventListener("transitionend",Ut,Ne)}),Pt},ae=(Re,Xe)=>{Re.componentOnReady?Re.componentOnReady().then(_t=>Xe(_t)):ye(()=>Xe(Re))},xe=Re=>void 0!==Re.componentOnReady,X=(Re,Xe=[])=>{const _t={};return Xe.forEach(at=>{Re.hasAttribute(at)&&(null!==Re.getAttribute(at)&&(_t[at]=Re.getAttribute(at)),Re.removeAttribute(at))}),_t},C=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],pe=(Re,Xe)=>{let _t=C;return Xe&&Xe.length>0&&(_t=_t.filter(at=>!Xe.includes(at))),X(Re,_t)},ue=(Re,Xe,_t,at)=>{var It;if(typeof window<"u"){const Ne=window,ft=null===(It=null==Ne?void 0:Ne.Ionic)||void 0===It?void 0:It.config;if(ft){const Pt=ft.get("_ael");if(Pt)return Pt(Re,Xe,_t,at);if(ft._ael)return ft._ael(Re,Xe,_t,at)}}return Re.addEventListener(Xe,_t,at)},Ke=(Re,Xe,_t,at)=>{var It;if(typeof window<"u"){const Ne=window,ft=null===(It=null==Ne?void 0:Ne.Ionic)||void 0===It?void 0:It.config;if(ft){const Pt=ft.get("_rel");if(Pt)return Pt(Re,Xe,_t,at);if(ft._rel)return ft._rel(Re,Xe,_t,at)}}return Re.removeEventListener(Xe,_t,at)},Qe=(Re,Xe=Re)=>Re.shadowRoot||Xe,ye=Re=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Re):"function"==typeof requestAnimationFrame?requestAnimationFrame(Re):setTimeout(Re),Ve=Re=>!!Re.shadowRoot&&!!Re.attachShadow,Oe=Re=>{if(Re.focus(),Re.classList.contains("ion-focusable")){const Xe=Re.closest("ion-app");Xe&&Xe.setFocus([Re])}},Le=(Re,Xe,_t,at,It)=>{if(Re||Ve(Xe)){let Ne=Xe.querySelector("input.aux-input");Ne||(Ne=Xe.ownerDocument.createElement("input"),Ne.type="hidden",Ne.classList.add("aux-input"),Xe.appendChild(Ne)),Ne.disabled=It,Ne.name=_t,Ne.value=at||""}},Ze=(Re,Xe,_t)=>Math.max(Re,Math.min(Xe,_t)),ot=(Re,Xe)=>{if(!Re){const _t="ASSERT: "+Xe;throw console.error(_t),new Error(_t)}},tt=Re=>{if(Re){const Xe=Re.changedTouches;if(Xe&&Xe.length>0){const _t=Xe[0];return{x:_t.clientX,y:_t.clientY}}if(void 0!==Re.pageX)return{x:Re.pageX,y:Re.pageY}}return{x:0,y:0}},nt=Re=>{const Xe="rtl"===document.dir;switch(Re){case"start":return Xe;case"end":return!Xe;default:throw new Error(`"${Re}" is not a valid value for [side]. Use "start" or "end" instead.`)}},At=(Re,Xe)=>{const _t=Re._original||Re;return{_original:Re,emit:ct(_t.emit.bind(_t),Xe)}},ct=(Re,Xe=0)=>{let _t;return(...at)=>{clearTimeout(_t),_t=setTimeout(Re,Xe,...at)}},ut=(Re,Xe)=>{if(null!=Re||(Re={}),null!=Xe||(Xe={}),Re===Xe)return!0;const _t=Object.keys(Re);if(_t.length!==Object.keys(Xe).length)return!1;for(const at of _t)if(!(at in Xe)||Re[at]!==Xe[at])return!1;return!0}},8607:(hn,rt,W)=>{"use strict";W.r(rt),W.d(rt,{GESTURE_CONTROLLER:()=>_.G,createGesture:()=>Ke});var _=W(1970);const g=(Oe,Le,Ze,ot)=>{const tt=ae(Oe)?{capture:!!ot.capture,passive:!!ot.passive}:!!ot.capture;let nt,At;return Oe.__zone_symbol__addEventListener?(nt="__zone_symbol__addEventListener",At="__zone_symbol__removeEventListener"):(nt="addEventListener",At="removeEventListener"),Oe[nt](Le,Ze,tt),()=>{Oe[At](Le,Ze,tt)}},ae=Oe=>{if(void 0===xe)try{const Le=Object.defineProperty({},"passive",{get:()=>{xe=!0}});Oe.addEventListener("optsTest",()=>{},Le)}catch{xe=!1}return!!xe};let xe;const pe=Oe=>Oe instanceof Document?Oe:Oe.ownerDocument,Ke=Oe=>{let Le=!1,Ze=!1,ot=!0,tt=!1;const nt=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},Oe),At=nt.canStart,ct=nt.onWillStart,ut=nt.onStart,Re=nt.onEnd,Xe=nt.notCaptured,_t=nt.onMove,at=nt.threshold,It=nt.passive,Ne=nt.blurOnStart,ft={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},Pt=((Oe,Le,Ze)=>{const ot=Ze*(Math.PI/180),tt="x"===Oe,nt=Math.cos(ot),At=Le*Le;let ct=0,ut=0,Re=!1,Xe=0;return{start(_t,at){ct=_t,ut=at,Xe=0,Re=!0},detect(_t,at){if(!Re)return!1;const It=_t-ct,Ne=at-ut,ft=It*It+Ne*Ne;if(ft<At)return!1;const Pt=Math.sqrt(ft),Ut=(tt?It:Ne)/Pt;return Xe=Ut>nt?1:Ut<-nt?-1:0,Re=!1,!0},isGesture:()=>0!==Xe,getDirection:()=>Xe}})(nt.direction,nt.threshold,nt.maxAngle),Ut=_.G.createGesture({name:Oe.gestureName,priority:Oe.gesturePriority,disableScroll:Oe.disableScroll}),Sn=()=>{Le&&(tt=!1,_t&&_t(ft))},Dt=()=>!!Ut.capture()&&(Le=!0,ot=!1,ft.startX=ft.currentX,ft.startY=ft.currentY,ft.startTime=ft.currentTime,ct?ct(ft).then(Z):Z(),!0),Z=()=>{Ne&&(()=>{if(typeof document<"u"){const Ye=document.activeElement;null!=Ye&&Ye.blur&&Ye.blur()}})(),ut&&ut(ft),ot=!0},Y=()=>{Le=!1,Ze=!1,tt=!1,ot=!0,Ut.release()},oe=Ye=>{const je=Le,qt=ot;if(Y(),qt){if(Qe(ft,Ye),je)return void(Re&&Re(ft));Xe&&Xe(ft)}},Ie=((Oe,Le,Ze,ot,tt)=>{let nt,At,ct,ut,Re,Xe,_t,at=0;const It=Te=>{at=Date.now()+2e3,Le(Te)&&(!At&&Ze&&(At=g(Oe,"touchmove",Ze,tt)),ct||(ct=g(Te.target,"touchend",ft,tt)),ut||(ut=g(Te.target,"touchcancel",ft,tt)))},Ne=Te=>{at>Date.now()||Le(Te)&&(!Xe&&Ze&&(Xe=g(pe(Oe),"mousemove",Ze,tt)),_t||(_t=g(pe(Oe),"mouseup",Pt,tt)))},ft=Te=>{Ut(),ot&&ot(Te)},Pt=Te=>{Gt(),ot&&ot(Te)},Ut=()=>{At&&At(),ct&&ct(),ut&&ut(),At=ct=ut=void 0},Gt=()=>{Xe&&Xe(),_t&&_t(),Xe=_t=void 0},Wt=()=>{Ut(),Gt()},Sn=(Te=!0)=>{Te?(nt||(nt=g(Oe,"touchstart",It,tt)),Re||(Re=g(Oe,"mousedown",Ne,tt))):(nt&&nt(),Re&&Re(),nt=Re=void 0,Wt())};return{enable:Sn,stop:Wt,destroy:()=>{Sn(!1),ot=Ze=Le=void 0}}})(nt.el,Ye=>{const je=Ve(Ye);return!(Ze||!ot||(ye(Ye,ft),ft.startX=ft.currentX,ft.startY=ft.currentY,ft.startTime=ft.currentTime=je,ft.velocityX=ft.velocityY=ft.deltaX=ft.deltaY=0,ft.event=Ye,At&&!1===At(ft))||(Ut.release(),!Ut.start()))&&(Ze=!0,0===at?Dt():(Pt.start(ft.startX,ft.startY),!0))},Ye=>{Le?!tt&&ot&&(tt=!0,Qe(ft,Ye),requestAnimationFrame(Sn)):(Qe(ft,Ye),Pt.detect(ft.currentX,ft.currentY)&&(!Pt.isGesture()||!Dt())&&We())},oe,{capture:!1,passive:It}),We=()=>{Y(),Ie.stop(),Xe&&Xe(ft)};return{enable(Ye=!0){Ye||(Le&&oe(void 0),Y()),Ie.enable(Ye)},destroy(){Ut.destroy(),Ie.destroy()}}},Qe=(Oe,Le)=>{if(!Le)return;const Ze=Oe.currentX,ot=Oe.currentY,tt=Oe.currentTime;ye(Le,Oe);const nt=Oe.currentX,At=Oe.currentY,ut=(Oe.currentTime=Ve(Le))-tt;if(ut>0&&ut<100){const Xe=(At-ot)/ut;Oe.velocityX=(nt-Ze)/ut*.7+.3*Oe.velocityX,Oe.velocityY=.7*Xe+.3*Oe.velocityY}Oe.deltaX=nt-Oe.startX,Oe.deltaY=At-Oe.startY,Oe.event=Le},ye=(Oe,Le)=>{let Ze=0,ot=0;if(Oe){const tt=Oe.changedTouches;if(tt&&tt.length>0){const nt=tt[0];Ze=nt.clientX,ot=nt.clientY}else void 0!==Oe.pageX&&(Ze=Oe.pageX,ot=Oe.pageY)}Le.currentX=Ze,Le.currentY=ot},Ve=Oe=>Oe.timeStamp||Date.now()},6073:(hn,rt,W)=>{"use strict";W.d(rt,{m:()=>Oe});var _=W(467),g=W(8476),ae=W(8669),xe=W(4929),X=W(4920),C=W(4921),pe=W(9986);const ue=Le=>(0,pe.c)().duration(Le?400:300),Ke=Le=>{let Ze,ot;const tt=Le.width+8,nt=(0,pe.c)(),At=(0,pe.c)();Le.isEndSide?(Ze=tt+"px",ot="0px"):(Ze=-tt+"px",ot="0px"),nt.addElement(Le.menuInnerEl).fromTo("transform",`translateX(${Ze})`,`translateX(${ot})`);const ut="ios"===(0,C.b)(Le),Re=ut?.2:.25;return At.addElement(Le.backdropEl).fromTo("opacity",.01,Re),ue(ut).addAnimation([nt,At])},Qe=Le=>{let Ze,ot;const tt=(0,C.b)(Le),nt=Le.width;Le.isEndSide?(Ze=-nt+"px",ot=nt+"px"):(Ze=nt+"px",ot=-nt+"px");const At=(0,pe.c)().addElement(Le.menuInnerEl).fromTo("transform",`translateX(${ot})`,"translateX(0px)"),ct=(0,pe.c)().addElement(Le.contentEl).fromTo("transform","translateX(0px)",`translateX(${Ze})`),ut=(0,pe.c)().addElement(Le.backdropEl).fromTo("opacity",.01,.32);return ue("ios"===tt).addAnimation([At,ct,ut])},ye=Le=>{const Ze=(0,C.b)(Le),ot=Le.width*(Le.isEndSide?-1:1)+"px",tt=(0,pe.c)().addElement(Le.contentEl).fromTo("transform","translateX(0px)",`translateX(${ot})`);return ue("ios"===Ze).addAnimation(tt)},Oe=(()=>{const Le=new Map,Ze=[],ot=function(){var Y=(0,_.A)(function*(oe){const Ie=yield Xe(oe,!0);return!!Ie&&Ie.open()});return function(Ie){return Y.apply(this,arguments)}}(),tt=function(){var Y=(0,_.A)(function*(oe){const Ie=yield void 0!==oe?Xe(oe,!0):_t();return void 0!==Ie&&Ie.close()});return function(Ie){return Y.apply(this,arguments)}}(),nt=function(){var Y=(0,_.A)(function*(oe){const Ie=yield Xe(oe,!0);return!!Ie&&Ie.toggle()});return function(Ie){return Y.apply(this,arguments)}}(),At=function(){var Y=(0,_.A)(function*(oe,Ie){const We=yield Xe(Ie);return We&&(We.disabled=!oe),We});return function(Ie,We){return Y.apply(this,arguments)}}(),ct=function(){var Y=(0,_.A)(function*(oe,Ie){const We=yield Xe(Ie);return We&&(We.swipeGesture=oe),We});return function(Ie,We){return Y.apply(this,arguments)}}(),ut=function(){var Y=(0,_.A)(function*(oe){if(null!=oe){const Ie=yield Xe(oe);return void 0!==Ie&&Ie.isOpen()}return void 0!==(yield _t())});return function(Ie){return Y.apply(this,arguments)}}(),Re=function(){var Y=(0,_.A)(function*(oe){const Ie=yield Xe(oe);return!!Ie&&!Ie.disabled});return function(Ie){return Y.apply(this,arguments)}}(),Xe=function(){var Y=(0,_.A)(function*(oe,Ie=!1){if(yield Z(),"start"===oe||"end"===oe){const Ye=Ze.filter(qt=>qt.side===oe&&!qt.disabled);if(Ye.length>=1)return Ye.length>1&&Ie&&(0,xe.p)(`menuController queried for a menu on the "${oe}" side, but ${Ye.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,Ye.map(qt=>qt.el)),Ye[0].el;const je=Ze.filter(qt=>qt.side===oe);if(je.length>=1)return je.length>1&&Ie&&(0,xe.p)(`menuController queried for a menu on the "${oe}" side, but ${je.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,je.map(qt=>qt.el)),je[0].el}else if(null!=oe)return Te(Ye=>Ye.menuId===oe);return Te(Ye=>!Ye.disabled)||(Ze.length>0?Ze[0].el:void 0)});return function(Ie){return Y.apply(this,arguments)}}(),_t=function(){var Y=(0,_.A)(function*(){return yield Z(),Wt()});return function(){return Y.apply(this,arguments)}}(),at=function(){var Y=(0,_.A)(function*(){return yield Z(),Sn()});return function(){return Y.apply(this,arguments)}}(),It=function(){var Y=(0,_.A)(function*(){return yield Z(),Dt()});return function(){return Y.apply(this,arguments)}}(),Ne=(Y,oe)=>{Le.set(Y,oe)},Ut=function(){var Y=(0,_.A)(function*(oe,Ie,We){if(Dt())return!1;if(Ie){const Ye=yield _t();Ye&&oe.el!==Ye&&(yield Ye.setOpen(!1,!1))}return oe._setOpen(Ie,We)});return function(Ie,We,Ye){return Y.apply(this,arguments)}}(),Wt=()=>Te(Y=>Y._isOpen),Sn=()=>Ze.map(Y=>Y.el),Dt=()=>Ze.some(Y=>Y.isAnimating),Te=Y=>{const oe=Ze.find(Y);if(void 0!==oe)return oe.el},Z=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(Y=>new Promise(oe=>(0,X.c)(Y,oe))));return Ne("reveal",ye),Ne("push",Qe),Ne("overlay",Ke),null==g.d||g.d.addEventListener("ionBackButton",Y=>{const oe=Wt();oe&&Y.detail.register(ae.MENU_BACK_BUTTON_PRIORITY,()=>oe.close())}),{registerAnimation:Ne,get:Xe,getMenus:at,getOpen:_t,isEnabled:Re,swipeGesture:ct,isAnimating:It,isOpen:ut,enable:At,toggle:nt,close:tt,open:ot,_getOpenSync:Wt,_createAnimation:(Y,oe)=>{const Ie=Le.get(Y);if(!Ie)throw new Error("animation not registered");return Ie(oe)},_register:Y=>{Ze.indexOf(Y)<0&&Ze.push(Y)},_unregister:Y=>{const oe=Ze.indexOf(Y);oe>-1&&Ze.splice(oe,1)},_setOpen:Ut}})()},8393:(hn,rt,W)=>{"use strict";W.d(rt,{B:()=>C,a:()=>Gt,b:()=>se,c:()=>nr,d:()=>Kr,e:()=>qt,f:()=>Ot,g:()=>cr,h:()=>Zn,i:()=>Dn,j:()=>mi,k:()=>fn,r:()=>Ke,w:()=>On});var _=W(467);var xe=Object.defineProperty,C={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},pe=new WeakMap,ue=j=>pe.get(j),Ke=(j,re)=>pe.set(re.$lazyInstance$=j,re),ye=(j,re)=>re in j,Ve=(j,re)=>(0,console.error)(j,re),Oe=new Map,Ze=new Map,ot=[],ut="s-id",Re="sty-id",at="slot-fb{display:contents}slot-fb[hidden]{display:none}",It="http://www.w3.org/1999/xlink",Ne=typeof window<"u"?window:{},ft=Ne.document||{head:{}},Ut={$flags$:0,$resourcesUrl$:"",jmp:j=>j(),raf:j=>requestAnimationFrame(j),ael:(j,re,ve,Pe)=>j.addEventListener(re,ve,Pe),rel:(j,re,ve,Pe)=>j.removeEventListener(re,ve,Pe),ce:(j,re)=>new CustomEvent(j,re)},Gt=j=>{Object.assign(Ut,j)},Sn=(()=>{let j=!1;try{ft.addEventListener("e",null,Object.defineProperty({},"passive",{get(){j=!0}}))}catch{}return j})(),Te=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),Z=!1,Y=[],oe=[],Ie=(j,re)=>ve=>{j.push(ve),Z||(Z=!0,re&&4&Ut.$flags$?je(Ye):Ut.raf(Ye))},We=j=>{for(let re=0;re<j.length;re++)try{j[re](performance.now())}catch(ve){Ve(ve)}j.length=0},Ye=()=>{We(Y),We(oe),(Z=Y.length>0)&&Ut.raf(Ye)},je=j=>Promise.resolve(void 0).then(j),qt=Ie(Y,!1),On=Ie(oe,!0),fn=j=>{const re=new URL(j,Ut.$resourcesUrl$);return re.origin!==Ne.location.origin?re.href:re.pathname},Fn={},Gn=j=>"object"==(j=typeof j)||"function"===j;function Jn(j){var re,ve,Pe;return null!=(Pe=null==(ve=null==(re=j.head)?void 0:re.querySelector('meta[name="csp-nonce"]'))?void 0:ve.getAttribute("content"))?Pe:void 0}((j,re)=>{for(var ve in re)xe(j,ve,{get:re[ve],enumerable:!0})})({},{err:()=>$t,map:()=>Tt,ok:()=>zn,unwrap:()=>St,unwrapErr:()=>un});var zn=j=>({isOk:!0,isErr:!1,value:j}),$t=j=>({isOk:!1,isErr:!0,value:j});function Tt(j,re){if(j.isOk){const ve=re(j.value);return ve instanceof Promise?ve.then(Pe=>zn(Pe)):zn(ve)}if(j.isErr)return $t(j.value);throw"should never get here"}var St=j=>{if(j.isOk)return j.value;throw j.value},un=j=>{if(j.isErr)return j.value;throw j.value},Zn=(j,re,...ve)=>{let Pe=null,qe=null,Fe=null,Ft=!1,Lt=!1;const Bt=[],Nt=In=>{for(let xn=0;xn<In.length;xn++)Pe=In[xn],Array.isArray(Pe)?Nt(Pe):null!=Pe&&"boolean"!=typeof Pe&&((Ft="function"!=typeof j&&!Gn(Pe))&&(Pe=String(Pe)),Ft&&Lt?Bt[Bt.length-1].$text$+=Pe:Bt.push(Ft?bn(null,Pe):Pe),Lt=Ft)};if(Nt(ve),re){re.key&&(qe=re.key),re.name&&(Fe=re.name);{const In=re.className||re.class;In&&(re.class="object"!=typeof In?In:Object.keys(In).filter(xn=>In[xn]).join(" "))}}if("function"==typeof j)return j(null===re?{}:re,Bt,fi);const dn=bn(j,null);return dn.$attrs$=re,Bt.length>0&&(dn.$children$=Bt),dn.$key$=qe,dn.$name$=Fe,dn},bn=(j,re)=>({$flags$:0,$tag$:j,$text$:re,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),Ot={},fi={forEach:(j,re)=>j.map(Ir).forEach(re),map:(j,re)=>j.map(Ir).map(re).map(Rr)},Ir=j=>({vattrs:j.$attrs$,vchildren:j.$children$,vkey:j.$key$,vname:j.$name$,vtag:j.$tag$,vtext:j.$text$}),Rr=j=>{if("function"==typeof j.vtag){const ve={...j.vattrs};return j.vkey&&(ve.key=j.vkey),j.vname&&(ve.name=j.vname),Zn(j.vtag,ve,...j.vchildren||[])}const re=bn(j.vtag,j.vtext);return re.$attrs$=j.vattrs,re.$children$=j.vchildren,re.$key$=j.vkey,re.$name$=j.vname,re},so=(j,re,ve,Pe,qe,Fe,Ft)=>{let Lt,Bt,Nt,dn;if(1===Fe.nodeType){for(Lt=Fe.getAttribute("c-id"),Lt&&(Bt=Lt.split("."),(Bt[0]===Ft||"0"===Bt[0])&&(Nt={$flags$:0,$hostId$:Bt[0],$nodeId$:Bt[1],$depth$:Bt[2],$index$:Bt[3],$tag$:Fe.tagName.toLowerCase(),$elm$:Fe,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},re.push(Nt),Fe.removeAttribute("c-id"),j.$children$||(j.$children$=[]),j.$children$[Nt.$index$]=Nt,j=Nt,Pe&&"0"===Nt.$depth$&&(Pe[Nt.$index$]=Nt.$elm$))),dn=Fe.childNodes.length-1;dn>=0;dn--)so(j,re,ve,Pe,qe,Fe.childNodes[dn],Ft);if(Fe.shadowRoot)for(dn=Fe.shadowRoot.childNodes.length-1;dn>=0;dn--)so(j,re,ve,Pe,qe,Fe.shadowRoot.childNodes[dn],Ft)}else if(8===Fe.nodeType)Bt=Fe.nodeValue.split("."),(Bt[1]===Ft||"0"===Bt[1])&&(Lt=Bt[0],Nt={$flags$:0,$hostId$:Bt[1],$nodeId$:Bt[2],$depth$:Bt[3],$index$:Bt[4],$elm$:Fe,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===Lt?(Nt.$elm$=Fe.nextSibling,Nt.$elm$&&3===Nt.$elm$.nodeType&&(Nt.$text$=Nt.$elm$.textContent,re.push(Nt),Fe.remove(),j.$children$||(j.$children$=[]),j.$children$[Nt.$index$]=Nt,Pe&&"0"===Nt.$depth$&&(Pe[Nt.$index$]=Nt.$elm$))):Nt.$hostId$===Ft&&("s"===Lt?(Nt.$tag$="slot",Fe["s-sn"]=Bt[5]?Nt.$name$=Bt[5]:"",Fe["s-sr"]=!0,Pe&&(Nt.$elm$=ft.createElement(Nt.$tag$),Nt.$name$&&Nt.$elm$.setAttribute("name",Nt.$name$),Fe.parentNode.insertBefore(Nt.$elm$,Fe),Fe.remove(),"0"===Nt.$depth$&&(Pe[Nt.$index$]=Nt.$elm$)),ve.push(Nt),j.$children$||(j.$children$=[]),j.$children$[Nt.$index$]=Nt):"r"===Lt&&(Pe?Fe.remove():(qe["s-cr"]=Fe,Fe["s-cn"]=!0))));else if(j&&"style"===j.$tag$){const In=bn(null,Fe.textContent);In.$elm$=Fe,In.$index$="0",j.$children$=[In]}},hr=(j,re)=>{if(1===j.nodeType){let ve=0;for(;ve<j.childNodes.length;ve++)hr(j.childNodes[ve],re);if(j.shadowRoot)for(ve=0;ve<j.shadowRoot.childNodes.length;ve++)hr(j.shadowRoot.childNodes[ve],re)}else if(8===j.nodeType){const ve=j.nodeValue.split(".");"o"===ve[0]&&(re.set(ve[1]+"."+ve[2],j),j.nodeValue="",j["s-en"]=ve[3])}},nr=j=>ot.push(j),cr=j=>ue(j).$modeName$,Dn=j=>ue(j).$hostElement$,Kr=(j,re,ve)=>{const Pe=Dn(j);return{emit:qe=>qi(Pe,re,{bubbles:!!(4&ve),composed:!!(2&ve),cancelable:!!(1&ve),detail:qe})}},qi=(j,re,ve)=>{const Pe=Ut.ce(re,ve);return j.dispatchEvent(Pe),Pe},Fr=new WeakMap,wi=(j,re,ve)=>{let Pe=Ze.get(j);Te&&ve?(Pe=Pe||new CSSStyleSheet,"string"==typeof Pe?Pe=re:Pe.replaceSync(re)):Pe=re,Ze.set(j,Pe)},Ki=(j,re,ve)=>{var Pe;const qe=$e(re,ve),Fe=Ze.get(qe);if(j=11===j.nodeType?j:ft,Fe)if("string"==typeof Fe){let Lt,Ft=Fr.get(j=j.head||j);if(Ft||Fr.set(j,Ft=new Set),!Ft.has(qe)){if(j.host&&(Lt=j.querySelector(`[${Re}="${qe}"]`)))Lt.innerHTML=Fe;else{Lt=ft.createElement("style"),Lt.innerHTML=Fe;const Bt=null!=(Pe=Ut.$nonce$)?Pe:Jn(ft);null!=Bt&&Lt.setAttribute("nonce",Bt),j.insertBefore(Lt,j.querySelector("link"))}4&re.$flags$&&(Lt.innerHTML+=at),Ft&&Ft.add(qe)}}else j.adoptedStyleSheets.includes(Fe)||(j.adoptedStyleSheets=[...j.adoptedStyleSheets,Fe]);return qe},$e=(j,re)=>"sc-"+(re&&32&j.$flags$?j.$tagName$+"-"+re:j.$tagName$),bt=j=>j.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),ke=(j,re,ve,Pe,qe,Fe)=>{if(ve!==Pe){let Ft=ye(j,re),Lt=re.toLowerCase();if("class"===re){const Bt=j.classList,Nt=zt(ve),dn=zt(Pe);Bt.remove(...Nt.filter(In=>In&&!dn.includes(In))),Bt.add(...dn.filter(In=>In&&!Nt.includes(In)))}else if("style"===re){for(const Bt in ve)(!Pe||null==Pe[Bt])&&(Bt.includes("-")?j.style.removeProperty(Bt):j.style[Bt]="");for(const Bt in Pe)(!ve||Pe[Bt]!==ve[Bt])&&(Bt.includes("-")?j.style.setProperty(Bt,Pe[Bt]):j.style[Bt]=Pe[Bt])}else if("key"!==re)if("ref"===re)Pe&&Pe(j);else if(Ft||"o"!==re[0]||"n"!==re[1]){const Bt=Gn(Pe);if((Ft||Bt&&null!==Pe)&&!qe)try{if(j.tagName.includes("-"))j[re]=Pe;else{const dn=null==Pe?"":Pe;"list"===re?Ft=!1:(null==ve||j[re]!=dn)&&(j[re]=dn)}}catch{}let Nt=!1;Lt!==(Lt=Lt.replace(/^xlink\:?/,""))&&(re=Lt,Nt=!0),null==Pe||!1===Pe?(!1!==Pe||""===j.getAttribute(re))&&(Nt?j.removeAttributeNS(It,re):j.removeAttribute(re)):(!Ft||4&Fe||qe)&&!Bt&&(Pe=!0===Pe?"":Pe,Nt?j.setAttributeNS(It,re,Pe):j.setAttribute(re,Pe))}else if(re="-"===re[2]?re.slice(3):ye(Ne,Lt)?Lt.slice(2):Lt[2]+re.slice(3),ve||Pe){const Bt=re.endsWith(En);re=re.replace(Ln,""),ve&&Ut.rel(j,re,ve,Bt),Pe&&Ut.ael(j,re,Pe,Bt)}}},yt=/\s/,zt=j=>j?j.split(yt):[],En="Capture",Ln=new RegExp(En+"$"),vr=(j,re,ve)=>{const Pe=11===re.$elm$.nodeType&&re.$elm$.host?re.$elm$.host:re.$elm$,qe=j&&j.$attrs$||Fn,Fe=re.$attrs$||Fn;for(const Ft of Xt(Object.keys(qe)))Ft in Fe||ke(Pe,Ft,qe[Ft],void 0,ve,re.$flags$);for(const Ft of Xt(Object.keys(Fe)))ke(Pe,Ft,qe[Ft],Fe[Ft],ve,re.$flags$)};function Xt(j){return j.includes("ref")?[...j.filter(re=>"ref"!==re),"ref"]:j}var er,Sr,pi,So=!1,Ni=!1,fo=!1,Pn=!1,Nn=(j,re,ve,Pe)=>{var qe;const Fe=re.$children$[ve];let Lt,Bt,Nt,Ft=0;if(So||(fo=!0,"slot"===Fe.$tag$&&(er&&Pe.classList.add(er+"-s"),Fe.$flags$|=Fe.$children$?2:1)),null!==Fe.$text$)Lt=Fe.$elm$=ft.createTextNode(Fe.$text$);else if(1&Fe.$flags$)Lt=Fe.$elm$=ft.createTextNode("");else{if(Pn||(Pn="svg"===Fe.$tag$),Lt=Fe.$elm$=ft.createElementNS(Pn?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",!So&&2&Fe.$flags$?"slot-fb":Fe.$tag$),Pn&&"foreignObject"===Fe.$tag$&&(Pn=!1),vr(null,Fe,Pn),(j=>null!=j)(er)&&Lt["s-si"]!==er&&Lt.classList.add(Lt["s-si"]=er),me(Lt,Pe),Fe.$children$)for(Ft=0;Ft<Fe.$children$.length;++Ft)Bt=Nn(j,Fe,Ft,Lt),Bt&&Lt.appendChild(Bt);"svg"===Fe.$tag$?Pn=!1:"foreignObject"===Lt.tagName&&(Pn=!0)}return Lt["s-hn"]=pi,3&Fe.$flags$&&(Lt["s-sr"]=!0,Lt["s-cr"]=Sr,Lt["s-sn"]=Fe.$name$||"",Lt["s-rf"]=null==(qe=Fe.$attrs$)?void 0:qe.ref,Nt=j&&j.$children$&&j.$children$[ve],Nt&&Nt.$tag$===Fe.$tag$&&j.$elm$&&Xi(j.$elm$)),Lt},Xi=j=>{Ut.$flags$|=1;const re=j.closest(pi.toLowerCase());if(null!=re){const ve=Array.from(re.childNodes).find(qe=>qe["s-cr"]),Pe=Array.from(j.childNodes);for(const qe of ve?Pe.reverse():Pe)null!=qe["s-sh"]&&(we(re,qe,null!=ve?ve:null),qe["s-sh"]=void 0,fo=!0)}Ut.$flags$&=-2},po=(j,re)=>{Ut.$flags$|=1;const ve=Array.from(j.childNodes);if(j["s-sr"]){let Pe=j;for(;Pe=Pe.nextSibling;)Pe&&Pe["s-sn"]===j["s-sn"]&&Pe["s-sh"]===pi&&ve.push(Pe)}for(let Pe=ve.length-1;Pe>=0;Pe--){const qe=ve[Pe];qe["s-hn"]!==pi&&qe["s-ol"]&&(we(Jo(qe),qe,li(qe)),qe["s-ol"].remove(),qe["s-ol"]=void 0,qe["s-sh"]=void 0,fo=!0),re&&po(qe,re)}Ut.$flags$&=-2},go=(j,re,ve,Pe,qe,Fe)=>{let Lt,Ft=j["s-cr"]&&j["s-cr"].parentNode||j;for(Ft.shadowRoot&&Ft.tagName===pi&&(Ft=Ft.shadowRoot);qe<=Fe;++qe)Pe[qe]&&(Lt=Nn(null,ve,qe,j),Lt&&(Pe[qe].$elm$=Lt,we(Ft,Lt,li(re))))},Do=(j,re,ve)=>{for(let Pe=re;Pe<=ve;++Pe){const qe=j[Pe];if(qe){const Fe=qe.$elm$;ne(qe),Fe&&(Ni=!0,Fe["s-ol"]?Fe["s-ol"].remove():po(Fe,!0),Fe.remove())}}},Ho=(j,re,ve=!1)=>j.$tag$===re.$tag$&&("slot"===j.$tag$?j.$name$===re.$name$:!!ve||j.$key$===re.$key$),li=j=>j&&j["s-ol"]||j,Jo=j=>(j["s-ol"]?j["s-ol"]:j).parentNode,ti=(j,re,ve=!1)=>{const Pe=re.$elm$=j.$elm$,qe=j.$children$,Fe=re.$children$,Ft=re.$tag$,Lt=re.$text$;let Bt;null===Lt?(Pn="svg"===Ft||"foreignObject"!==Ft&&Pn,"slot"!==Ft||So?vr(j,re,Pn):j.$name$!==re.$name$&&(re.$elm$["s-sn"]=re.$name$||"",Xi(re.$elm$.parentElement)),null!==qe&&null!==Fe?((j,re,ve,Pe,qe=!1)=>{let Xr,mr,Fe=0,Ft=0,Lt=0,Bt=0,Nt=re.length-1,dn=re[0],In=re[Nt],xn=Pe.length-1,yn=Pe[0],Ar=Pe[xn];for(;Fe<=Nt&&Ft<=xn;)if(null==dn)dn=re[++Fe];else if(null==In)In=re[--Nt];else if(null==yn)yn=Pe[++Ft];else if(null==Ar)Ar=Pe[--xn];else if(Ho(dn,yn,qe))ti(dn,yn,qe),dn=re[++Fe],yn=Pe[++Ft];else if(Ho(In,Ar,qe))ti(In,Ar,qe),In=re[--Nt],Ar=Pe[--xn];else if(Ho(dn,Ar,qe))("slot"===dn.$tag$||"slot"===Ar.$tag$)&&po(dn.$elm$.parentNode,!1),ti(dn,Ar,qe),we(j,dn.$elm$,In.$elm$.nextSibling),dn=re[++Fe],Ar=Pe[--xn];else if(Ho(In,yn,qe))("slot"===dn.$tag$||"slot"===Ar.$tag$)&&po(In.$elm$.parentNode,!1),ti(In,yn,qe),we(j,In.$elm$,dn.$elm$),In=re[--Nt],yn=Pe[++Ft];else{for(Lt=-1,Bt=Fe;Bt<=Nt;++Bt)if(re[Bt]&&null!==re[Bt].$key$&&re[Bt].$key$===yn.$key$){Lt=Bt;break}Lt>=0?(mr=re[Lt],mr.$tag$!==yn.$tag$?Xr=Nn(re&&re[Ft],ve,Lt,j):(ti(mr,yn,qe),re[Lt]=void 0,Xr=mr.$elm$),yn=Pe[++Ft]):(Xr=Nn(re&&re[Ft],ve,Ft,j),yn=Pe[++Ft]),Xr&&we(Jo(dn.$elm$),Xr,li(dn.$elm$))}Fe>Nt?go(j,null==Pe[xn+1]?null:Pe[xn+1].$elm$,ve,Pe,Ft,xn):Ft>xn&&Do(re,Fe,Nt)})(Pe,qe,re,Fe,ve):null!==Fe?(null!==j.$text$&&(Pe.textContent=""),go(Pe,null,re,Fe,0,Fe.length-1)):null!==qe&&Do(qe,0,qe.length-1),Pn&&"svg"===Ft&&(Pn=!1)):(Bt=Pe["s-cr"])?Bt.parentNode.textContent=Lt:j.$text$!==Lt&&(Pe.data=Lt)},Oi=j=>{const re=j.childNodes;for(const ve of re)if(1===ve.nodeType){if(ve["s-sr"]){const Pe=ve["s-sn"];ve.hidden=!1;for(const qe of re)if(qe!==ve)if(qe["s-hn"]!==ve["s-hn"]||""!==Pe){if(1===qe.nodeType&&(Pe===qe.getAttribute("slot")||Pe===qe["s-sn"])||3===qe.nodeType&&Pe===qe["s-sn"]){ve.hidden=!0;break}}else if(1===qe.nodeType||3===qe.nodeType&&""!==qe.textContent.trim()){ve.hidden=!0;break}}Oi(ve)}},Ci=[],ao=j=>{let re,ve,Pe;for(const qe of j.childNodes){if(qe["s-sr"]&&(re=qe["s-cr"])&&re.parentNode){ve=re.parentNode.childNodes;const Fe=qe["s-sn"];for(Pe=ve.length-1;Pe>=0;Pe--)if(re=ve[Pe],!(re["s-cn"]||re["s-nr"]||re["s-hn"]===qe["s-hn"]||re["s-sh"]&&re["s-sh"]===qe["s-hn"]))if(Q(re,Fe)){let Ft=Ci.find(Lt=>Lt.$nodeToRelocate$===re);Ni=!0,re["s-sn"]=re["s-sn"]||Fe,Ft?(Ft.$nodeToRelocate$["s-sh"]=qe["s-hn"],Ft.$slotRefNode$=qe):(re["s-sh"]=qe["s-hn"],Ci.push({$slotRefNode$:qe,$nodeToRelocate$:re})),re["s-sr"]&&Ci.map(Lt=>{Q(Lt.$nodeToRelocate$,re["s-sn"])&&(Ft=Ci.find(Bt=>Bt.$nodeToRelocate$===re),Ft&&!Lt.$slotRefNode$&&(Lt.$slotRefNode$=Ft.$slotRefNode$))})}else Ci.some(Ft=>Ft.$nodeToRelocate$===re)||Ci.push({$nodeToRelocate$:re})}1===qe.nodeType&&ao(qe)}},Q=(j,re)=>1===j.nodeType?null===j.getAttribute("slot")&&""===re||j.getAttribute("slot")===re:j["s-sn"]===re||""===re,ne=j=>{j.$attrs$&&j.$attrs$.ref&&j.$attrs$.ref(null),j.$children$&&j.$children$.map(ne)},we=(j,re,ve)=>{const Pe=null==j?void 0:j.insertBefore(re,ve);return me(re,j),Pe},J=j=>{const re=[];return j&&re.push(...j["s-scs"]||[],j["s-si"],j["s-sc"],...J(j.parentElement)),re},me=(j,re,ve=!1)=>{var Pe;if(j&&re&&1===j.nodeType){const qe=new Set(J(re).filter(Boolean));if(qe.size&&(null==(Pe=j.classList)||Pe.add(...j["s-scs"]=[...qe]),j["s-ol"]||ve))for(const Fe of Array.from(j.childNodes))me(Fe,j,!0)}},Vt=(j,re)=>{re&&!j.$onRenderResolve$&&re["s-p"]&&re["s-p"].push(new Promise(ve=>j.$onRenderResolve$=ve))},rn=(j,re)=>{if(j.$flags$|=16,!(4&j.$flags$))return Vt(j,j.$ancestorComponent$),On(()=>Tn(j,re));j.$flags$|=512},Tn=(j,re)=>{const qe=j.$lazyInstance$;if(!qe)throw new Error(`Can't render component <${j.$hostElement$.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let Fe;return re&&(j.$flags$|=256,j.$queuedListeners$&&(j.$queuedListeners$.map(([Ft,Lt])=>Bn(qe,Ft,Lt)),j.$queuedListeners$=void 0),Fe=Bn(qe,"componentWillLoad")),Fe=lr(Fe,()=>Bn(qe,"componentWillRender")),lr(Fe,()=>ni(j,qe,re))},lr=(j,re)=>xr(j)?j.then(re).catch(ve=>{console.error(ve),re()}):re(),xr=j=>j instanceof Promise||j&&j.then&&"function"==typeof j.then,ni=function(){var j=(0,_.A)(function*(re,ve,Pe){var qe;const Fe=re.$hostElement$,Lt=Fe["s-rc"];Pe&&(j=>{const re=j.$cmpMeta$,ve=j.$hostElement$,Pe=re.$flags$,Fe=Ki(ve.shadowRoot?ve.shadowRoot:ve.getRootNode(),re,j.$modeName$);10&Pe&&(ve["s-sc"]=Fe,ve.classList.add(Fe+"-h"),2&Pe&&ve.classList.add(Fe+"-s"))})(re);Ai(re,ve,Fe,Pe),Lt&&(Lt.map(Nt=>Nt()),Fe["s-rc"]=void 0);{const Nt=null!=(qe=Fe["s-p"])?qe:[],dn=()=>ci(re);0===Nt.length?dn():(Promise.all(Nt).then(dn),re.$flags$|=4,Nt.length=0)}});return function(ve,Pe,qe){return j.apply(this,arguments)}}(),Ai=(j,re,ve,Pe)=>{try{re=re.render&&re.render(),j.$flags$&=-17,j.$flags$|=2,((j,re,ve=!1)=>{var Pe,qe,Fe,Ft,Lt;const Bt=j.$hostElement$,Nt=j.$cmpMeta$,dn=j.$vnode$||bn(null,null),In=(j=>j&&j.$tag$===Ot)(re)?re:Zn(null,null,re);if(pi=Bt.tagName,Nt.$attrsToReflect$&&(In.$attrs$=In.$attrs$||{},Nt.$attrsToReflect$.map(([xn,yn])=>In.$attrs$[yn]=Bt[xn])),ve&&In.$attrs$)for(const xn of Object.keys(In.$attrs$))Bt.hasAttribute(xn)&&!["key","ref","style","class"].includes(xn)&&(In.$attrs$[xn]=Bt[xn]);if(In.$tag$=null,In.$flags$|=4,j.$vnode$=In,In.$elm$=dn.$elm$=Bt.shadowRoot||Bt,er=Bt["s-sc"],So=!!(1&Nt.$flags$),Sr=Bt["s-cr"],Ni=!1,ti(dn,In,ve),Ut.$flags$|=1,fo){ao(In.$elm$);for(const xn of Ci){const yn=xn.$nodeToRelocate$;if(!yn["s-ol"]){const Ar=ft.createTextNode("");Ar["s-nr"]=yn,we(yn.parentNode,yn["s-ol"]=Ar,yn)}}for(const xn of Ci){const yn=xn.$nodeToRelocate$,Ar=xn.$slotRefNode$;if(Ar){const Xr=Ar.parentNode;let mr=Ar.nextSibling;if(mr&&1===mr.nodeType){let Li=null==(Pe=yn["s-ol"])?void 0:Pe.previousSibling;for(;Li;){let Vi=null!=(qe=Li["s-nr"])?qe:null;if(Vi&&Vi["s-sn"]===yn["s-sn"]&&Xr===Vi.parentNode){for(Vi=Vi.nextSibling;Vi===yn||null!=Vi&&Vi["s-sr"];)Vi=null==Vi?void 0:Vi.nextSibling;if(!Vi||!Vi["s-nr"]){mr=Vi;break}}Li=Li.previousSibling}}(!mr&&Xr!==yn.parentNode||yn.nextSibling!==mr)&&yn!==mr&&(we(Xr,yn,mr),1===yn.nodeType&&(yn.hidden=null!=(Fe=yn["s-ih"])&&Fe)),yn&&"function"==typeof Ar["s-rf"]&&Ar["s-rf"](yn)}else 1===yn.nodeType&&(ve&&(yn["s-ih"]=null!=(Ft=yn.hidden)&&Ft),yn.hidden=!0)}}if(Ni&&Oi(In.$elm$),Ut.$flags$&=-2,Ci.length=0,2&Nt.$flags$)for(const xn of In.$elm$.childNodes)xn["s-hn"]!==pi&&!xn["s-sh"]&&(ve&&null==xn["s-ih"]&&(xn["s-ih"]=null!=(Lt=xn.hidden)&&Lt),xn.hidden=!0);Sr=void 0})(j,re,Pe)}catch(qe){Ve(qe,j.$hostElement$)}return null},ci=j=>{const ve=j.$hostElement$,qe=j.$lazyInstance$,Fe=j.$ancestorComponent$;Bn(qe,"componentDidRender"),64&j.$flags$?Bn(qe,"componentDidUpdate"):(j.$flags$|=64,Ti(ve),Bn(qe,"componentDidLoad"),j.$onReadyResolve$(ve),Fe||Fi()),j.$onInstanceResolve$(ve),j.$onRenderResolve$&&(j.$onRenderResolve$(),j.$onRenderResolve$=void 0),512&j.$flags$&&je(()=>rn(j,!1)),j.$flags$&=-517},mi=j=>{{const re=ue(j),ve=re.$hostElement$.isConnected;return ve&&2==(18&re.$flags$)&&rn(re,!1),ve}},Fi=j=>{Ti(ft.documentElement),je(()=>qi(Ne,"appload",{detail:{namespace:"ionic"}}))},Bn=(j,re,ve)=>{if(j&&j[re])try{return j[re](ve)}catch(Pe){Ve(Pe)}},Ti=j=>j.classList.add(("hydrated","hydrated")),_e=(j,re,ve)=>{var Pe,qe;const Fe=j.prototype;if(re.$members$||re.$watchers$||j.watchers){j.watchers&&!re.$watchers$&&(re.$watchers$=j.watchers);const Ft=Object.entries(null!=(Pe=re.$members$)?Pe:{});if(Ft.map(([Lt,[Bt]])=>{31&Bt||2&ve&&32&Bt?Object.defineProperty(Fe,Lt,{get(){return((j,re)=>ue(this).$instanceValues$.get(re))(0,Lt)},set(Nt){((j,re,ve,Pe)=>{const qe=ue(j);if(!qe)throw new Error(`Couldn't find host element for "${Pe.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/ionic-team/stencil/issues/5457).`);const Fe=qe.$hostElement$,Ft=qe.$instanceValues$.get(re),Lt=qe.$flags$,Bt=qe.$lazyInstance$;ve=((j,re)=>null==j||Gn(j)?j:4&re?"false"!==j&&(""===j||!!j):2&re?parseFloat(j):1&re?String(j):j)(ve,Pe.$members$[re][0]);const Nt=Number.isNaN(Ft)&&Number.isNaN(ve);if((!(8&Lt)||void 0===Ft)&&ve!==Ft&&!Nt&&(qe.$instanceValues$.set(re,ve),Bt)){if(Pe.$watchers$&&128&Lt){const In=Pe.$watchers$[re];In&&In.map(xn=>{try{Bt[xn](ve,Ft,re)}catch(yn){Ve(yn,Fe)}})}2==(18&Lt)&&rn(qe,!1)}})(this,Lt,Nt,re)},configurable:!0,enumerable:!0}):1&ve&&64&Bt&&Object.defineProperty(Fe,Lt,{value(...Nt){var dn;const In=ue(this);return null==(dn=null==In?void 0:In.$onInstancePromise$)?void 0:dn.then(()=>{var xn;return null==(xn=In.$lazyInstance$)?void 0:xn[Lt](...Nt)})}})}),1&ve){const Lt=new Map;Fe.attributeChangedCallback=function(Bt,Nt,dn){Ut.jmp(()=>{var In;const xn=Lt.get(Bt);if(this.hasOwnProperty(xn))dn=this[xn],delete this[xn];else{if(Fe.hasOwnProperty(xn)&&"number"==typeof this[xn]&&this[xn]==dn)return;if(null==xn){const yn=ue(this),Ar=null==yn?void 0:yn.$flags$;if(Ar&&!(8&Ar)&&128&Ar&&dn!==Nt){const Xr=yn.$lazyInstance$,mr=null==(In=re.$watchers$)?void 0:In[Bt];null==mr||mr.forEach(Li=>{null!=Xr[Li]&&Xr[Li].call(Xr,dn,Nt,Bt)})}return}}this[xn]=(null!==dn||"boolean"!=typeof this[xn])&&dn})},j.observedAttributes=Array.from(new Set([...Object.keys(null!=(qe=re.$watchers$)?qe:{}),...Ft.filter(([Bt,Nt])=>15&Nt[0]).map(([Bt,Nt])=>{var dn;const In=Nt[1]||Bt;return Lt.set(In,Bt),512&Nt[0]&&(null==(dn=re.$attrsToReflect$)||dn.push([Bt,In])),In})]))}}return j},Se=function(){var j=(0,_.A)(function*(re,ve,Pe,qe){let Fe;if(!(32&ve.$flags$)){if(ve.$flags$|=32,Pe.$lazyBundleId$){const Nt=((j,re,ve)=>{const Pe=j.$tagName$.replace(/-/g,"_"),qe=j.$lazyBundleId$;if(!qe)return;const Fe=Oe.get(qe);return Fe?Fe[Pe]:W(8996)(`./${qe}.entry.js`).then(Ft=>(Oe.set(qe,Ft),Ft[Pe]),Ve)})(Pe);if(Nt&&"then"in Nt){const In=()=>{};Fe=yield Nt,In()}else Fe=Nt;if(!Fe)throw new Error(`Constructor for "${Pe.$tagName$}#${ve.$modeName$}" was not found`);Fe.isProxied||(Pe.$watchers$=Fe.watchers,_e(Fe,Pe,2),Fe.isProxied=!0);const dn=()=>{};ve.$flags$|=8;try{new Fe(ve)}catch(In){Ve(In)}ve.$flags$&=-9,ve.$flags$|=128,dn(),ze(ve.$lazyInstance$)}else Fe=re.constructor,customElements.whenDefined(re.localName).then(()=>ve.$flags$|=128);if(Fe&&Fe.style){let Nt;"string"==typeof Fe.style?Nt=Fe.style:"string"!=typeof Fe.style&&(ve.$modeName$=(j=>ot.map(re=>re(j)).find(re=>!!re))(re),ve.$modeName$&&(Nt=Fe.style[ve.$modeName$]));const dn=$e(Pe,ve.$modeName$);if(!Ze.has(dn)){const In=()=>{};wi(dn,Nt,!!(1&Pe.$flags$)),In()}}}const Ft=ve.$ancestorComponent$,Lt=()=>rn(ve,!0);Ft&&Ft["s-rc"]?Ft["s-rc"].push(Lt):Lt()});return function(ve,Pe,qe,Fe){return j.apply(this,arguments)}}(),ze=j=>{Bn(j,"connectedCallback")},wn=j=>{const re=j["s-cr"]=ft.createComment("");re["s-cn"]=!0,we(j,re,j.firstChild)},$n=j=>{Bn(j,"disconnectedCallback")},rr=function(){var j=(0,_.A)(function*(re){if(!(1&Ut.$flags$)){const ve=ue(re);ve.$rmListeners$&&(ve.$rmListeners$.map(Pe=>Pe()),ve.$rmListeners$=void 0),null!=ve&&ve.$lazyInstance$?$n(ve.$lazyInstance$):null!=ve&&ve.$onReadyPromise$&&ve.$onReadyPromise$.then(()=>$n(ve.$lazyInstance$))}});return function(ve){return j.apply(this,arguments)}}(),ri=j=>{const re=j.cloneNode;j.cloneNode=function(ve){const Pe=this,qe=Pe.shadowRoot&&true,Fe=re.call(Pe,!!qe&&ve);if(!qe&&ve){let Lt,Bt,Ft=0;const Nt=["s-id","s-cr","s-lr","s-rc","s-sc","s-p","s-cn","s-sr","s-sn","s-hn","s-ol","s-nr","s-si","s-rf","s-scs"];for(;Ft<Pe.childNodes.length;Ft++)Lt=Pe.childNodes[Ft]["s-nr"],Bt=Nt.every(dn=>!Pe.childNodes[Ft][dn]),Lt&&(Fe.__appendChild?Fe.__appendChild(Lt.cloneNode(!0)):Fe.appendChild(Lt.cloneNode(!0))),Bt&&Fe.appendChild(Pe.childNodes[Ft].cloneNode(!0))}return Fe}},ui=j=>{j.__appendChild=j.appendChild,j.appendChild=function(re){const ve=re["s-sn"]=ha(re),Pe=R(this.childNodes,ve,this.tagName);if(Pe){const qe=z(Pe,ve),Fe=qe[qe.length-1],Ft=we(Fe.parentNode,re,Fe.nextSibling);return Oi(this),Ft}return this.__appendChild(re)}},Si=j=>{j.__removeChild=j.removeChild,j.removeChild=function(re){if(re&&typeof re["s-sn"]<"u"){const ve=R(this.childNodes,re["s-sn"],this.tagName);if(ve){const qe=z(ve,re["s-sn"]).find(Fe=>Fe===re);if(qe)return qe.remove(),void Oi(this)}}return this.__removeChild(re)}},Po=j=>{const re=j.prepend;j.prepend=function(...ve){ve.forEach(Pe=>{"string"==typeof Pe&&(Pe=this.ownerDocument.createTextNode(Pe));const qe=Pe["s-sn"]=ha(Pe),Fe=R(this.childNodes,qe,this.tagName);if(Fe){const Ft=document.createTextNode("");Ft["s-nr"]=Pe,Fe["s-cr"].parentNode.__appendChild(Ft),Pe["s-ol"]=Ft;const Bt=z(Fe,qe)[0];return we(Bt.parentNode,Pe,Bt.nextSibling)}return 1===Pe.nodeType&&Pe.getAttribute("slot")&&(Pe.hidden=!0),re.call(this,Pe)})}},ks=j=>{j.append=function(...re){re.forEach(ve=>{"string"==typeof ve&&(ve=this.ownerDocument.createTextNode(ve)),this.appendChild(ve)})}},Os=j=>{const re=j.insertAdjacentHTML;j.insertAdjacentHTML=function(ve,Pe){if("afterbegin"!==ve&&"beforeend"!==ve)return re.call(this,ve,Pe);const qe=this.ownerDocument.createElement("_");let Fe;if(qe.innerHTML=Pe,"afterbegin"===ve)for(;Fe=qe.firstChild;)this.prepend(Fe);else if("beforeend"===ve)for(;Fe=qe.firstChild;)this.append(Fe)}},Zo=j=>{j.insertAdjacentText=function(re,ve){this.insertAdjacentHTML(re,ve)}},ys=j=>{const re=j.insertAdjacentElement;j.insertAdjacentElement=function(ve,Pe){return"afterbegin"!==ve&&"beforeend"!==ve?re.call(this,ve,Pe):"afterbegin"===ve?(this.prepend(Pe),Pe):("beforeend"===ve&&this.append(Pe),Pe)}},zo=j=>{const re=Object.getOwnPropertyDescriptor(Node.prototype,"textContent");Object.defineProperty(j,"__textContent",re),Object.defineProperty(j,"textContent",{get(){return" "+Es(this.childNodes).map(qe=>{var Fe,Ft;const Lt=[];let Bt=qe.nextSibling;for(;Bt&&Bt["s-sn"]===qe["s-sn"];)(3===Bt.nodeType||1===Bt.nodeType)&&Lt.push(null!=(Ft=null==(Fe=Bt.textContent)?void 0:Fe.trim())?Ft:""),Bt=Bt.nextSibling;return Lt.filter(Nt=>""!==Nt).join(" ")}).filter(qe=>""!==qe).join(" ")+" "},set(ve){Es(this.childNodes).forEach(qe=>{let Fe=qe.nextSibling;for(;Fe&&Fe["s-sn"]===qe["s-sn"];){const Ft=Fe;Fe=Fe.nextSibling,Ft.remove()}if(""===qe["s-sn"]){const Ft=this.ownerDocument.createTextNode(ve);Ft["s-sn"]="",we(qe.parentElement,Ft,qe.nextSibling)}else qe.remove()})}})},os=(j,re)=>{class ve extends Array{item(qe){return this[qe]}}if(8&re.$flags$){const Pe=j.__lookupGetter__("childNodes");Object.defineProperty(j,"children",{get(){return this.childNodes.map(qe=>1===qe.nodeType)}}),Object.defineProperty(j,"childElementCount",{get:()=>j.children.length}),Object.defineProperty(j,"childNodes",{get(){const qe=Pe.call(this);if(!(1&Ut.$flags$)&&2&ue(this).$flags$){const Fe=new ve;for(let Ft=0;Ft<qe.length;Ft++){const Lt=qe[Ft]["s-nr"];Lt&&Fe.push(Lt)}return Fe}return ve.from(qe)}})}},Es=j=>{const re=[];for(const ve of Array.from(j))ve["s-sr"]&&re.push(ve),re.push(...Es(ve.childNodes));return re},ha=j=>j["s-sn"]||1===j.nodeType&&j.getAttribute("slot")||"",R=(j,re,ve)=>{let qe,Pe=0;for(;Pe<j.length;Pe++)if(qe=j[Pe],qe["s-sr"]&&qe["s-sn"]===re&&qe["s-hn"]===ve||(qe=R(qe.childNodes,re,ve),qe))return qe;return null},z=(j,re)=>{const ve=[j];for(;(j=j.nextSibling)&&j["s-sn"]===re;)ve.push(j);return ve},se=(j,re={})=>{var ve;const qe=[],Fe=re.exclude||[],Ft=Ne.customElements,Lt=ft.head,Bt=Lt.querySelector("meta[charset]"),Nt=ft.createElement("style"),dn=[],In=ft.querySelectorAll(`[${Re}]`);let xn,yn=!0,Ar=0;for(Object.assign(Ut,re),Ut.$resourcesUrl$=new URL(re.resourcesUrl||"./",ft.baseURI).href,Ut.$flags$|=2;Ar<In.length;Ar++)wi(In[Ar].getAttribute(Re),bt(In[Ar].innerHTML),!0);let Xr=!1;if(j.map(mr=>{mr[1].map(Li=>{var Vi;const en={$flags$:Li[0],$tagName$:Li[1],$members$:Li[2],$listeners$:Li[3]};4&en.$flags$&&(Xr=!0),en.$members$=Li[2],en.$listeners$=Li[3],en.$attrsToReflect$=[],en.$watchers$=null!=(Vi=Li[4])?Vi:{};const Oo=en.$tagName$,fa=class extends HTMLElement{constructor(Qi){if(super(Qi),this.hasRegisteredEventListeners=!1,((j,re)=>{const ve={$flags$:0,$hostElement$:j,$cmpMeta$:re,$instanceValues$:new Map};ve.$onInstancePromise$=new Promise(Pe=>ve.$onInstanceResolve$=Pe),ve.$onReadyPromise$=new Promise(Pe=>ve.$onReadyResolve$=Pe),j["s-p"]=[],j["s-rc"]=[],pe.set(j,ve)})(Qi=this,en),1&en.$flags$)if(Qi.shadowRoot){if("open"!==Qi.shadowRoot.mode)throw new Error(`Unable to re-use existing shadow root for ${en.$tagName$}! Mode is set to ${Qi.shadowRoot.mode} but Stencil only supports open shadow roots.`)}else Qi.attachShadow({mode:"open",delegatesFocus:!!(16&en.$flags$)})}connectedCallback(){const Qi=ue(this);this.hasRegisteredEventListeners||(this.hasRegisteredEventListeners=!0,N(this,Qi,en.$listeners$)),xn&&(clearTimeout(xn),xn=null),yn?dn.push(this):Ut.jmp(()=>(j=>{if(!(1&Ut.$flags$)){const re=ue(j),ve=re.$cmpMeta$,Pe=()=>{};if(1&re.$flags$)N(j,re,ve.$listeners$),null!=re&&re.$lazyInstance$?ze(re.$lazyInstance$):null!=re&&re.$onReadyPromise$&&re.$onReadyPromise$.then(()=>ze(re.$lazyInstance$));else{let qe;if(re.$flags$|=1,qe=j.getAttribute(ut),qe){if(1&ve.$flags$){const Fe=Ki(j.shadowRoot,ve,j.getAttribute("s-mode"));j.classList.remove(Fe+"-h",Fe+"-s")}((j,re,ve,Pe)=>{const Fe=j.shadowRoot,Ft=[],Bt=Fe?[]:null,Nt=Pe.$vnode$=bn(re,null);Ut.$orgLocNodes$||hr(ft.body,Ut.$orgLocNodes$=new Map),j[ut]=ve,j.removeAttribute(ut),so(Nt,Ft,[],Bt,j,j,ve),Ft.map(dn=>{const In=dn.$hostId$+"."+dn.$nodeId$,xn=Ut.$orgLocNodes$.get(In),yn=dn.$elm$;xn&&""===xn["s-en"]&&xn.parentNode.insertBefore(yn,xn.nextSibling),Fe||(yn["s-hn"]=re,xn&&(yn["s-ol"]=xn,yn["s-ol"]["s-nr"]=yn)),Ut.$orgLocNodes$.delete(In)}),Fe&&Bt.map(dn=>{dn&&Fe.appendChild(dn)})})(j,ve.$tagName$,qe,re)}qe||12&ve.$flags$&&wn(j);{let Fe=j;for(;Fe=Fe.parentNode||Fe.host;)if(1===Fe.nodeType&&Fe.hasAttribute("s-id")&&Fe["s-p"]||Fe["s-p"]){Vt(re,re.$ancestorComponent$=Fe);break}}ve.$members$&&Object.entries(ve.$members$).map(([Fe,[Ft]])=>{if(31&Ft&&j.hasOwnProperty(Fe)){const Lt=j[Fe];delete j[Fe],j[Fe]=Lt}}),Se(j,re,ve)}Pe()}})(this))}disconnectedCallback(){Ut.jmp(()=>rr(this))}componentOnReady(){return ue(this).$onReadyPromise$}};2&en.$flags$&&((j,re)=>{ri(j),ui(j),ks(j),Po(j),ys(j),Os(j),Zo(j),zo(j),os(j,re),Si(j)})(fa.prototype,en),en.$lazyBundleId$=mr[0],!Fe.includes(Oo)&&!Ft.get(Oo)&&(qe.push(Oo),Ft.define(Oo,_e(fa,en,1)))})}),qe.length>0&&(Xr&&(Nt.textContent+=at),Nt.textContent+=qe.sort()+"{visibility:hidden}.hydrated{visibility:inherit}",Nt.innerHTML.length)){Nt.setAttribute("data-styles","");const mr=null!=(ve=Ut.$nonce$)?ve:Jn(ft);null!=mr&&Nt.setAttribute("nonce",mr),Lt.insertBefore(Nt,Bt?Bt.nextSibling:Lt.firstChild)}yn=!1,dn.length?dn.map(mr=>mr.connectedCallback()):Ut.jmp(()=>xn=setTimeout(Fi,30))},N=(j,re,ve,Pe)=>{ve&&ve.map(([qe,Fe,Ft])=>{const Lt=Ge(j,qe),Bt=le(re,Ft),Nt=jr(qe);Ut.ael(Lt,Fe,Bt,Nt),(re.$rmListeners$=re.$rmListeners$||[]).push(()=>Ut.rel(Lt,Fe,Bt,Nt))})},le=(j,re)=>ve=>{var Pe;try{256&j.$flags$?null==(Pe=j.$lazyInstance$)||Pe[re](ve):(j.$queuedListeners$=j.$queuedListeners$||[]).push([re,ve])}catch(qe){Ve(qe)}},Ge=(j,re)=>4&re?ft:8&re?Ne:16&re?ft.body:j,jr=j=>Sn?{passive:!!(1&j),capture:!!(2&j)}:!!(2&j)},1331:(hn,rt,W)=>{"use strict";W.d(rt,{b:()=>ue,c:()=>Ke,d:()=>Qe,e:()=>Wt,g:()=>Te,l:()=>Ut,s:()=>Sn,t:()=>nt,w:()=>Gt});var _=W(467),g=W(4921),ae=W(8393),xe=W(4929),X=W(4920);const ue="ionViewWillLeave",Ke="ionViewDidLeave",Qe="ionViewWillUnload",ye=Z=>{Z.tabIndex=-1,Z.focus()},Ve=Z=>null!==Z.offsetParent,Le="ion-last-focus",tt_saveViewFocus=oe=>{if(g.c.get("focusManagerPriority",!1)){const We=document.activeElement;null!==We&&null!=oe&&oe.contains(We)&&We.setAttribute(Le,"true")}},tt_setViewFocus=oe=>{const Ie=g.c.get("focusManagerPriority",!1);if(Array.isArray(Ie)&&!oe.contains(document.activeElement)){const We=oe.querySelector(`[${Le}]`);if(We&&Ve(We))return void ye(We);for(const Ye of Ie)switch(Ye){case"content":const je=oe.querySelector('main, [role="main"]');if(je&&Ve(je))return void ye(je);break;case"heading":const qt=oe.querySelector('h1, [role="heading"][aria-level="1"]');if(qt&&Ve(qt))return void ye(qt);break;case"banner":const On=oe.querySelector('header, [role="banner"]');if(On&&Ve(On))return void ye(On);break;default:(0,xe.p)(`Unrecognized focus manager priority value ${Ye}`)}ye(oe)}},nt=Z=>new Promise((Y,oe)=>{(0,ae.w)(()=>{At(Z),ct(Z).then(Ie=>{Ie.animation&&Ie.animation.destroy(),ut(Z),Y(Ie)},Ie=>{ut(Z),oe(Ie)})})}),At=Z=>{const Y=Z.enteringEl,oe=Z.leavingEl;tt_saveViewFocus(oe),Dt(Y,oe,Z.direction),Z.showGoBack?Y.classList.add("can-go-back"):Y.classList.remove("can-go-back"),Sn(Y,!1),Y.style.setProperty("pointer-events","none"),oe&&(Sn(oe,!1),oe.style.setProperty("pointer-events","none"))},ct=function(){var Z=(0,_.A)(function*(Y){const oe=yield Re(Y);return oe&&ae.B.isBrowser?Xe(oe,Y):_t(Y)});return function(oe){return Z.apply(this,arguments)}}(),ut=Z=>{const Y=Z.enteringEl,oe=Z.leavingEl;Y.classList.remove("ion-page-invisible"),Y.style.removeProperty("pointer-events"),void 0!==oe&&(oe.classList.remove("ion-page-invisible"),oe.style.removeProperty("pointer-events")),tt_setViewFocus(Y)},Re=function(){var Z=(0,_.A)(function*(Y){return Y.leavingEl&&Y.animated&&0!==Y.duration?Y.animationBuilder?Y.animationBuilder:"ios"===Y.mode?(yield Promise.resolve().then(W.bind(W,9856))).iosTransitionAnimation:(yield Promise.resolve().then(W.bind(W,361))).mdTransitionAnimation:void 0});return function(oe){return Z.apply(this,arguments)}}(),Xe=function(){var Z=(0,_.A)(function*(Y,oe){yield at(oe,!0);const Ie=Y(oe.baseEl,oe);ft(oe.enteringEl,oe.leavingEl);const We=yield Ne(Ie,oe);return oe.progressCallback&&oe.progressCallback(void 0),We&&Pt(oe.enteringEl,oe.leavingEl),{hasCompleted:We,animation:Ie}});return function(oe,Ie){return Z.apply(this,arguments)}}(),_t=function(){var Z=(0,_.A)(function*(Y){const oe=Y.enteringEl,Ie=Y.leavingEl,We=g.c.get("focusManagerPriority",!1);return yield at(Y,We),ft(oe,Ie),Pt(oe,Ie),{hasCompleted:!0}});return function(oe){return Z.apply(this,arguments)}}(),at=function(){var Z=(0,_.A)(function*(Y,oe){(void 0!==Y.deepWait?Y.deepWait:oe)&&(yield Promise.all([Wt(Y.enteringEl),Wt(Y.leavingEl)])),yield It(Y.viewIsReady,Y.enteringEl)});return function(oe,Ie){return Z.apply(this,arguments)}}(),It=function(){var Z=(0,_.A)(function*(Y,oe){Y&&(yield Y(oe))});return function(oe,Ie){return Z.apply(this,arguments)}}(),Ne=(Z,Y)=>{const oe=Y.progressCallback,Ie=new Promise(We=>{Z.onFinish(Ye=>We(1===Ye))});return oe?(Z.progressStart(!0),oe(Z)):Z.play(),Ie},ft=(Z,Y)=>{Ut(Y,ue),Ut(Z,"ionViewWillEnter")},Pt=(Z,Y)=>{Ut(Z,"ionViewDidEnter"),Ut(Y,Ke)},Ut=(Z,Y)=>{if(Z){const oe=new CustomEvent(Y,{bubbles:!1,cancelable:!1});Z.dispatchEvent(oe)}},Gt=()=>new Promise(Z=>(0,X.r)(()=>(0,X.r)(()=>Z()))),Wt=function(){var Z=(0,_.A)(function*(Y){const oe=Y;if(oe){if(null!=oe.componentOnReady){if(null!=(yield oe.componentOnReady()))return}else if(null!=oe.__registerHost)return void(yield new Promise(We=>(0,X.r)(We)));yield Promise.all(Array.from(oe.children).map(Wt))}});return function(oe){return Z.apply(this,arguments)}}(),Sn=(Z,Y)=>{Y?(Z.setAttribute("aria-hidden","true"),Z.classList.add("ion-page-hidden")):(Z.hidden=!1,Z.removeAttribute("aria-hidden"),Z.classList.remove("ion-page-hidden"))},Dt=(Z,Y,oe)=>{void 0!==Z&&(Z.style.zIndex="back"===oe?"99":"101"),void 0!==Y&&(Y.style.zIndex="100")},Te=Z=>Z.classList.contains("ion-page")?Z:Z.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||Z},4929:(hn,rt,W)=>{"use strict";W.d(rt,{a:()=>g,b:()=>ae,p:()=>_});const _=(xe,...X)=>console.warn(`[Ionic Warning]: ${xe}`,...X),g=(xe,...X)=>console.error(`[Ionic Error]: ${xe}`,...X),ae=(xe,...X)=>console.error(`<${xe.tagName.toLowerCase()}> must be used inside ${X.join(" or ")}.`)},8476:(hn,rt,W)=>{"use strict";W.d(rt,{d:()=>g,w:()=>_});const _=typeof window<"u"?window:void 0,g=typeof document<"u"?document:void 0},4921:(hn,rt,W)=>{"use strict";W.d(rt,{a:()=>ye,b:()=>Sn,c:()=>ae,i:()=>Dt});var _=W(8393);class g{constructor(){this.m=new Map}reset(Z){this.m=new Map(Object.entries(Z))}get(Z,Y){const oe=this.m.get(Z);return void 0!==oe?oe:Y}getBoolean(Z,Y=!1){const oe=this.m.get(Z);return void 0===oe?Y:"string"==typeof oe?"true"===oe:!!oe}getNumber(Z,Y){const oe=parseFloat(this.m.get(Z));return isNaN(oe)?void 0!==Y?Y:NaN:oe}set(Z,Y){this.m.set(Z,Y)}}const ae=new g,Ke="ionic-persist-config",ye=(Te,Z)=>("string"==typeof Te&&(Z=Te,Te=void 0),(Te=>Ve(Te))(Te).includes(Z)),Ve=(Te=window)=>{if(typeof Te>"u")return[];Te.Ionic=Te.Ionic||{};let Z=Te.Ionic.platforms;return null==Z&&(Z=Te.Ionic.platforms=Oe(Te),Z.forEach(Y=>Te.document.documentElement.classList.add(`plt-${Y}`))),Z},Oe=Te=>{const Z=ae.get("platform");return Object.keys(Gt).filter(Y=>{const oe=null==Z?void 0:Z[Y];return"function"==typeof oe?oe(Te):Gt[Y](Te)})},Ze=Te=>!!(Pt(Te,/iPad/i)||Pt(Te,/Macintosh/i)&&Re(Te)),nt=Te=>Pt(Te,/android|sink/i),Re=Te=>Ut(Te,"(any-pointer:coarse)"),_t=Te=>at(Te)||It(Te),at=Te=>!!(Te.cordova||Te.phonegap||Te.PhoneGap),It=Te=>{const Z=Te.Capacitor;return!(null==Z||!Z.isNative)},Pt=(Te,Z)=>Z.test(Te.navigator.userAgent),Ut=(Te,Z)=>{var Y;return null===(Y=Te.matchMedia)||void 0===Y?void 0:Y.call(Te,Z).matches},Gt={ipad:Ze,iphone:Te=>Pt(Te,/iPhone/i),ios:Te=>Pt(Te,/iPhone|iPod/i)||Ze(Te),android:nt,phablet:Te=>{const Z=Te.innerWidth,Y=Te.innerHeight,oe=Math.min(Z,Y),Ie=Math.max(Z,Y);return oe>390&&oe<520&&Ie>620&&Ie<800},tablet:Te=>{const Z=Te.innerWidth,Y=Te.innerHeight,oe=Math.min(Z,Y),Ie=Math.max(Z,Y);return Ze(Te)||(Te=>nt(Te)&&!Pt(Te,/mobile/i))(Te)||oe>460&&oe<820&&Ie>780&&Ie<1400},cordova:at,capacitor:It,electron:Te=>Pt(Te,/electron/i),pwa:Te=>{var Z;return!!(null!==(Z=Te.matchMedia)&&void 0!==Z&&Z.call(Te,"(display-mode: standalone)").matches||Te.navigator.standalone)},mobile:Re,mobileweb:Te=>Re(Te)&&!_t(Te),desktop:Te=>!Re(Te),hybrid:_t};let Wt;const Sn=Te=>Te&&(0,_.g)(Te)||Wt,Dt=(Te={})=>{if(typeof window>"u")return;const Z=window.document,Y=window,oe=Y.Ionic=Y.Ionic||{},Ie={};Te._ael&&(Ie.ael=Te._ael),Te._rel&&(Ie.rel=Te._rel),Te._ce&&(Ie.ce=Te._ce),(0,_.a)(Ie);const We=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(Te=>{try{const Z=Te.sessionStorage.getItem(Ke);return null!==Z?JSON.parse(Z):{}}catch{return{}}})(Y)),{persistConfig:!1}),oe.config),(Te=>{const Z={};return Te.location.search.slice(1).split("&").map(Y=>Y.split("=")).map(([Y,oe])=>{try{return[decodeURIComponent(Y),decodeURIComponent(oe)]}catch{return["",""]}}).filter(([Y])=>((Te,Z)=>Te.substr(0,Z.length)===Z)(Y,"ionic:")).map(([Y,oe])=>[Y.slice(6),oe]).forEach(([Y,oe])=>{Z[Y]=oe}),Z})(Y)),Te);ae.reset(We),ae.getBoolean("persistConfig")&&((Te,Z)=>{try{Te.sessionStorage.setItem(Ke,JSON.stringify(Z))}catch{return}})(Y,We),Ve(Y),oe.config=ae,oe.mode=Wt=ae.get("mode",Z.documentElement.getAttribute("mode")||(ye(Y,"ios")?"ios":"md")),ae.set("mode",Wt),Z.documentElement.setAttribute("mode",Wt),Z.documentElement.classList.add(Wt),ae.getBoolean("_testing")&&ae.set("animated",!1);const Ye=qt=>{var On;return null===(On=qt.tagName)||void 0===On?void 0:On.startsWith("ION-")},je=qt=>["ios","md"].includes(qt);(0,_.c)(qt=>{for(;qt;){const On=qt.mode||qt.getAttribute("mode");if(On){if(je(On))return On;Ye(qt)&&console.warn('Invalid ionic mode: "'+On+'", expected: "ios" or "md"')}qt=qt.parentElement}return Wt})}},9856:(hn,rt,W)=>{"use strict";W.r(rt),W.d(rt,{iosTransitionAnimation:()=>Le,shadow:()=>ue});var _=W(9986),g=W(1331);W(8476),W(4921),W(8393);const pe=ot=>document.querySelector(`${ot}.ion-cloned-element`),ue=ot=>ot.shadowRoot||ot,Ke=ot=>{const tt="ION-TABS"===ot.tagName?ot:ot.querySelector("ion-tabs"),nt="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=tt){const At=tt.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=At?At.querySelector(nt):null}return ot.querySelector(nt)},Qe=(ot,tt)=>{const nt="ION-TABS"===ot.tagName?ot:ot.querySelector("ion-tabs");let At=[];if(null!=nt){const ct=nt.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=ct&&(At=ct.querySelectorAll("ion-buttons"))}else At=ot.querySelectorAll("ion-buttons");for(const ct of At){const ut=ct.closest("ion-header"),Re=ut&&!ut.classList.contains("header-collapse-condense-inactive"),Xe=ct.querySelector("ion-back-button"),_t=ct.classList.contains("buttons-collapse");if(null!==Xe&&("start"===ct.slot||""===ct.slot)&&(_t&&Re&&tt||!_t))return Xe}return null},Ve=(ot,tt,nt,At,ct,ut,Re,Xe,_t)=>{var at,It;const Ne=tt?`calc(100% - ${ct.right+4}px)`:ct.left-4+"px",ft=tt?"right":"left",Pt=tt?"left":"right",Ut=tt?"right":"left";let Gt=1,Wt=1,Sn=`scale(${Wt})`;const Dt="scale(1)";if(ut&&Re){const St=(null===(at=ut.textContent)||void 0===at?void 0:at.trim())===(null===(It=Xe.textContent)||void 0===It?void 0:It.trim());Gt=_t.width/Re.width,Wt=(_t.height-Ze)/Re.height,Sn=St?`scale(${Gt}, ${Wt})`:`scale(${Wt})`}const Z=ue(At).querySelector("ion-icon").getBoundingClientRect(),Y=tt?Z.width/2-(Z.right-ct.right)+"px":ct.left-Z.width/2+"px",oe=tt?`-${window.innerWidth-ct.right}px`:`${ct.left}px`,Ie=`${_t.top}px`,We=`${ct.top}px`,qt=nt?[{offset:0,transform:`translate3d(${oe}, ${We}, 0)`},{offset:1,transform:`translate3d(${Y}, ${Ie}, 0)`}]:[{offset:0,transform:`translate3d(${Y}, ${Ie}, 0)`},{offset:1,transform:`translate3d(${oe}, ${We}, 0)`}],Fn=nt?[{offset:0,opacity:1,transform:Dt},{offset:1,opacity:0,transform:Sn}]:[{offset:0,opacity:0,transform:Sn},{offset:1,opacity:1,transform:Dt}],Hn=nt?[{offset:0,opacity:1,transform:"scale(1)"},{offset:.2,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:0,transform:"scale(0.6)"}]:[{offset:0,opacity:0,transform:"scale(0.6)"},{offset:.6,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:1,transform:"scale(1)"}],Gn=(0,_.c)(),Jn=(0,_.c)(),Kt=(0,_.c)(),zn=pe("ion-back-button"),$t=ue(zn).querySelector(".button-text"),Tt=ue(zn).querySelector("ion-icon");zn.text=At.text,zn.mode=At.mode,zn.icon=At.icon,zn.color=At.color,zn.disabled=At.disabled,zn.style.setProperty("display","block"),zn.style.setProperty("position","fixed"),Jn.addElement(Tt),Gn.addElement($t),Kt.addElement(zn),Kt.beforeStyles({position:"absolute",top:"0px",[Ut]:"0px"}).beforeAddWrite(()=>{At.style.setProperty("display","none"),zn.style.setProperty(ft,Ne)}).afterAddWrite(()=>{At.style.setProperty("display",""),zn.style.setProperty("display","none"),zn.style.removeProperty(ft)}).keyframes(qt),Gn.beforeStyles({"transform-origin":`${ft} top`}).keyframes(Fn),Jn.beforeStyles({"transform-origin":`${Pt} center`}).keyframes(Hn),ot.addAnimation([Gn,Jn,Kt])},Oe=(ot,tt,nt,At,ct,ut,Re,Xe,_t)=>{var at,It;const Ne=tt?"right":"left",ft=tt?`calc(100% - ${ct.right}px)`:`${ct.left}px`,Ut=`${ct.top}px`;let Wt=tt?`-${window.innerWidth-Re.right-8}px`:`${Re.x+8}px`,Sn=.5;const Dt="scale(1)";let Te=`scale(${Sn})`;if(Xe&&_t){Wt=tt?`-${window.innerWidth-_t.right-8}px`:_t.x-8+"px";const On=(null===(at=Xe.textContent)||void 0===at?void 0:at.trim())===(null===(It=At.textContent)||void 0===It?void 0:It.trim());Sn=_t.height/(ut.height-Ze),Te=On?`scale(${_t.width/ut.width}, ${Sn})`:`scale(${Sn})`}const oe=Re.top+Re.height/2-ct.height*Sn/2+"px",Ye=nt?[{offset:0,opacity:0,transform:`translate3d(${Wt}, ${oe}, 0) ${Te}`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0px, ${Ut}, 0) ${Dt}`}]:[{offset:0,opacity:.99,transform:`translate3d(0px, ${Ut}, 0) ${Dt}`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Wt}, ${oe}, 0) ${Te}`}],je=pe("ion-title"),qt=(0,_.c)();je.innerText=At.innerText,je.size=At.size,je.color=At.color,qt.addElement(je),qt.beforeStyles({"transform-origin":`${Ne} top`,height:`${ct.height}px`,display:"",position:"relative",[Ne]:ft}).beforeAddWrite(()=>{At.style.setProperty("opacity","0")}).afterAddWrite(()=>{At.style.setProperty("opacity",""),je.style.setProperty("display","none")}).keyframes(Ye),ot.addAnimation(qt)},Le=(ot,tt)=>{var nt;try{const At="cubic-bezier(0.32,0.72,0,1)",ct="opacity",ut="transform",Re="0%",_t="rtl"===ot.ownerDocument.dir,at=_t?"-99.5%":"99.5%",It=_t?"33%":"-33%",Ne=tt.enteringEl,ft=tt.leavingEl,Pt="back"===tt.direction,Ut=Ne.querySelector(":scope > ion-content"),Gt=Ne.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),Wt=Ne.querySelectorAll(":scope > ion-header > ion-toolbar"),Sn=(0,_.c)(),Dt=(0,_.c)();if(Sn.addElement(Ne).duration((null!==(nt=tt.duration)&&void 0!==nt?nt:0)||540).easing(tt.easing||At).fill("both").beforeRemoveClass("ion-page-invisible"),ft&&null!=ot){const oe=(0,_.c)();oe.addElement(ot),Sn.addAnimation(oe)}if(Ut||0!==Wt.length||0!==Gt.length?(Dt.addElement(Ut),Dt.addElement(Gt)):Dt.addElement(Ne.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Sn.addAnimation(Dt),Pt?Dt.beforeClearStyles([ct]).fromTo("transform",`translateX(${It})`,`translateX(${Re})`).fromTo(ct,.8,1):Dt.beforeClearStyles([ct]).fromTo("transform",`translateX(${at})`,`translateX(${Re})`),Ut){const oe=ue(Ut).querySelector(".transition-effect");if(oe){const Ie=oe.querySelector(".transition-cover"),We=oe.querySelector(".transition-shadow"),Ye=(0,_.c)(),je=(0,_.c)(),qt=(0,_.c)();Ye.addElement(oe).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),je.addElement(Ie).beforeClearStyles([ct]).fromTo(ct,0,.1),qt.addElement(We).beforeClearStyles([ct]).fromTo(ct,.03,.7),Ye.addAnimation([je,qt]),Dt.addAnimation([Ye])}}const Te=Ne.querySelector("ion-header.header-collapse-condense"),{forward:Z,backward:Y}=((ot,tt,nt,At,ct)=>{const ut=Qe(At,nt),Re=Ke(ct),Xe=Ke(At),_t=Qe(ct,nt),at=null!==ut&&null!==Re&&!nt,It=null!==Xe&&null!==_t&&nt;if(at){const Ne=Re.getBoundingClientRect(),ft=ut.getBoundingClientRect(),Pt=ue(ut).querySelector(".button-text"),Ut=null==Pt?void 0:Pt.getBoundingClientRect(),Wt=ue(Re).querySelector(".toolbar-title").getBoundingClientRect();Oe(ot,tt,nt,Re,Ne,Wt,ft,Pt,Ut),Ve(ot,tt,nt,ut,ft,Pt,Ut,Re,Wt)}else if(It){const Ne=Xe.getBoundingClientRect(),ft=_t.getBoundingClientRect(),Pt=ue(_t).querySelector(".button-text"),Ut=null==Pt?void 0:Pt.getBoundingClientRect(),Wt=ue(Xe).querySelector(".toolbar-title").getBoundingClientRect();Oe(ot,tt,nt,Xe,Ne,Wt,ft,Pt,Ut),Ve(ot,tt,nt,_t,ft,Pt,Ut,Xe,Wt)}return{forward:at,backward:It}})(Sn,_t,Pt,Ne,ft);if(Wt.forEach(oe=>{const Ie=(0,_.c)();Ie.addElement(oe),Sn.addAnimation(Ie);const We=(0,_.c)();We.addElement(oe.querySelector("ion-title"));const Ye=(0,_.c)(),je=Array.from(oe.querySelectorAll("ion-buttons,[menuToggle]")),qt=oe.closest("ion-header"),On=null==qt?void 0:qt.classList.contains("header-collapse-condense-inactive");let fn;fn=je.filter(Pt?Gn=>{const Jn=Gn.classList.contains("buttons-collapse");return Jn&&!On||!Jn}:Gn=>!Gn.classList.contains("buttons-collapse")),Ye.addElement(fn);const Fn=(0,_.c)();Fn.addElement(oe.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const gn=(0,_.c)();gn.addElement(ue(oe).querySelector(".toolbar-background"));const _r=(0,_.c)(),Hn=oe.querySelector("ion-back-button");if(Hn&&_r.addElement(Hn),Ie.addAnimation([We,Ye,Fn,gn,_r]),Ye.fromTo(ct,.01,1),Fn.fromTo(ct,.01,1),Pt)On||We.fromTo("transform",`translateX(${It})`,`translateX(${Re})`).fromTo(ct,.01,1),Fn.fromTo("transform",`translateX(${It})`,`translateX(${Re})`),_r.fromTo(ct,.01,1);else if(Te||We.fromTo("transform",`translateX(${at})`,`translateX(${Re})`).fromTo(ct,.01,1),Fn.fromTo("transform",`translateX(${at})`,`translateX(${Re})`),gn.beforeClearStyles([ct,"transform"]),(null==qt?void 0:qt.translucent)?gn.fromTo("transform",_t?"translateX(-100%)":"translateX(100%)","translateX(0px)"):gn.fromTo(ct,.01,"var(--opacity)"),Z||_r.fromTo(ct,.01,1),Hn&&!Z){const Jn=(0,_.c)();Jn.addElement(ue(Hn).querySelector(".button-text")).fromTo("transform",_t?"translateX(-100px)":"translateX(100px)","translateX(0px)"),Ie.addAnimation(Jn)}}),ft){const oe=(0,_.c)(),Ie=ft.querySelector(":scope > ion-content"),We=ft.querySelectorAll(":scope > ion-header > ion-toolbar"),Ye=ft.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(Ie||0!==We.length||0!==Ye.length?(oe.addElement(Ie),oe.addElement(Ye)):oe.addElement(ft.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Sn.addAnimation(oe),Pt){oe.beforeClearStyles([ct]).fromTo("transform",`translateX(${Re})`,_t?"translateX(-100%)":"translateX(100%)");const je=(0,g.g)(ft);Sn.afterAddWrite(()=>{"normal"===Sn.getDirection()&&je.style.setProperty("display","none")})}else oe.fromTo("transform",`translateX(${Re})`,`translateX(${It})`).fromTo(ct,1,.8);if(Ie){const je=ue(Ie).querySelector(".transition-effect");if(je){const qt=je.querySelector(".transition-cover"),On=je.querySelector(".transition-shadow"),fn=(0,_.c)(),Fn=(0,_.c)(),gn=(0,_.c)();fn.addElement(je).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Fn.addElement(qt).beforeClearStyles([ct]).fromTo(ct,.1,0),gn.addElement(On).beforeClearStyles([ct]).fromTo(ct,.7,.03),fn.addAnimation([Fn,gn]),oe.addAnimation([fn])}}We.forEach(je=>{const qt=(0,_.c)();qt.addElement(je);const On=(0,_.c)();On.addElement(je.querySelector("ion-title"));const fn=(0,_.c)(),Fn=je.querySelectorAll("ion-buttons,[menuToggle]"),gn=je.closest("ion-header"),_r=null==gn?void 0:gn.classList.contains("header-collapse-condense-inactive"),Hn=Array.from(Fn).filter(Tt=>{const St=Tt.classList.contains("buttons-collapse");return St&&!_r||!St});fn.addElement(Hn);const Gn=(0,_.c)(),Jn=je.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");Jn.length>0&&Gn.addElement(Jn);const Kt=(0,_.c)();Kt.addElement(ue(je).querySelector(".toolbar-background"));const zn=(0,_.c)(),$t=je.querySelector("ion-back-button");if($t&&zn.addElement($t),qt.addAnimation([On,fn,Gn,zn,Kt]),Sn.addAnimation(qt),zn.fromTo(ct,.99,0),fn.fromTo(ct,.99,0),Gn.fromTo(ct,.99,0),Pt){if(_r||On.fromTo("transform",`translateX(${Re})`,_t?"translateX(-100%)":"translateX(100%)").fromTo(ct,.99,0),Gn.fromTo("transform",`translateX(${Re})`,_t?"translateX(-100%)":"translateX(100%)"),Kt.beforeClearStyles([ct,"transform"]),(null==gn?void 0:gn.translucent)?Kt.fromTo("transform","translateX(0px)",_t?"translateX(-100%)":"translateX(100%)"):Kt.fromTo(ct,"var(--opacity)",0),$t&&!Y){const St=(0,_.c)();St.addElement(ue($t).querySelector(".button-text")).fromTo("transform",`translateX(${Re})`,`translateX(${(_t?-124:124)+"px"})`),qt.addAnimation(St)}}else _r||On.fromTo("transform",`translateX(${Re})`,`translateX(${It})`).fromTo(ct,.99,0).afterClearStyles([ut,ct]),Gn.fromTo("transform",`translateX(${Re})`,`translateX(${It})`).afterClearStyles([ut,ct]),zn.afterClearStyles([ct]),On.afterClearStyles([ct]),fn.afterClearStyles([ct])})}return Sn}catch(At){throw At}},Ze=10},361:(hn,rt,W)=>{"use strict";W.r(rt),W.d(rt,{mdTransitionAnimation:()=>C});var _=W(9986),g=W(1331);W(8476),W(4921),W(8393);const C=(pe,ue)=>{var Ke,Qe,ye;const Le="back"===ue.direction,ot=ue.leavingEl,tt=(0,g.g)(ue.enteringEl),nt=tt.querySelector("ion-toolbar"),At=(0,_.c)();if(At.addElement(tt).fill("both").beforeRemoveClass("ion-page-invisible"),Le?At.duration((null!==(Ke=ue.duration)&&void 0!==Ke?Ke:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):At.duration((null!==(Qe=ue.duration)&&void 0!==Qe?Qe:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),nt){const ct=(0,_.c)();ct.addElement(nt),At.addAnimation(ct)}if(ot&&Le){At.duration((null!==(ye=ue.duration)&&void 0!==ye?ye:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const ct=(0,_.c)();ct.addElement((0,g.g)(ot)).onFinish(ut=>{1===ut&&ct.elements.length>0&&ct.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),At.addAnimation(ct)}return At}},1070:(hn,rt,W)=>{"use strict";W.d(rt,{B:()=>Fn,F:()=>zn,G:()=>gn,O:()=>_r,a:()=>tt,b:()=>nt,c:()=>Re,d:()=>Hn,e:()=>Gn,f:()=>Z,g:()=>oe,h:()=>Ye,i:()=>qt,j:()=>_t,k:()=>at,m:()=>ct,n:()=>Qe,o:()=>Dt,q:()=>ye,s:()=>fn,t:()=>Xe});var _=W(467),g=W(8476),ae=W(4920),xe=W(8669),X=W(4921),C=W(8621),pe=W(1970),ue=W(4929);const Ke='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',Qe=($t,Tt)=>{const St=$t.querySelector(Ke);Ve(St,null!=Tt?Tt:$t)},ye=($t,Tt)=>{const St=Array.from($t.querySelectorAll(Ke));Ve(St.length>0?St[St.length-1]:null,null!=Tt?Tt:$t)},Ve=($t,Tt)=>{let St=$t;const un=null==$t?void 0:$t.shadowRoot;un&&(St=un.querySelector(Ke)||$t),St?(0,ae.f)(St):Tt.focus()};let Oe=0,Le=0;const Ze=new WeakMap,ot=$t=>({create:Tt=>It($t,Tt),dismiss:(Tt,St,un)=>Gt(document,Tt,St,$t,un),getTop:()=>(0,_.A)(function*(){return Dt(document,$t)})()}),tt=ot("ion-alert"),nt=ot("ion-action-sheet"),ct=ot("ion-modal"),Re=ot("ion-popover"),Xe=ot("ion-toast"),_t=$t=>{typeof document<"u"&&Ut(document);const Tt=Oe++;$t.overlayIndex=Tt},at=$t=>($t.hasAttribute("id")||($t.id="ion-overlay-"+ ++Le),$t.id),It=($t,Tt)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined($t).then(()=>{const St=document.createElement($t);return St.classList.add("overlay-hidden"),Object.assign(St,Object.assign(Object.assign({},Tt),{hasController:!0})),Ie(document).appendChild(St),new Promise(un=>(0,ae.c)(St,un))}):Promise.resolve(),ft=($t,Tt)=>{let St=$t;const un=null==$t?void 0:$t.shadowRoot;un&&(St=un.querySelector(Ke)||$t),St?(0,ae.f)(St):Tt.focus()},Ut=$t=>{0===Oe&&(Oe=1,$t.addEventListener("focus",Tt=>{(($t,Tt)=>{const St=Dt(Tt,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover"),un=$t.target;St&&un&&!St.classList.contains(zn)&&(St.shadowRoot?(()=>{if(St.contains(un))St.lastFocus=un;else if("ION-TOAST"===un.tagName)ft(St.lastFocus,St);else{const Zn=St.lastFocus;Qe(St),Zn===Tt.activeElement&&ye(St),St.lastFocus=Tt.activeElement}})():(()=>{if(St===un)St.lastFocus=void 0;else if("ION-TOAST"===un.tagName)ft(St.lastFocus,St);else{const Zn=(0,ae.g)(St);if(!Zn.contains(un))return;const bn=Zn.querySelector(".ion-overlay-wrapper");if(!bn)return;if(bn.contains(un)||un===Zn.querySelector("ion-backdrop"))St.lastFocus=un;else{const Ot=St.lastFocus;Qe(bn,St),Ot===Tt.activeElement&&ye(bn,St),St.lastFocus=Tt.activeElement}}})())})(Tt,$t)},!0),$t.addEventListener("ionBackButton",Tt=>{const St=Dt($t);null!=St&&St.backdropDismiss&&Tt.detail.register(xe.OVERLAY_BACK_BUTTON_PRIORITY,()=>{St.dismiss(void 0,Fn)})}),(0,xe.shouldUseCloseWatcher)()||$t.addEventListener("keydown",Tt=>{if("Escape"===Tt.key){const St=Dt($t);null!=St&&St.backdropDismiss&&St.dismiss(void 0,Fn)}}))},Gt=($t,Tt,St,un,pn)=>{const yr=Dt($t,un,pn);return yr?yr.dismiss(Tt,St):Promise.reject("overlay does not exist")},Sn=($t,Tt)=>(($t,Tt)=>(void 0===Tt&&(Tt="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover,ion-toast"),Array.from($t.querySelectorAll(Tt)).filter(St=>St.overlayIndex>0)))($t,Tt).filter(St=>!($t=>$t.classList.contains("overlay-hidden"))(St)),Dt=($t,Tt,St)=>{const un=Sn($t,Tt);return void 0===St?un[un.length-1]:un.find(pn=>pn.id===St)},Te=($t=!1)=>{const St=Ie(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");St&&($t?St.setAttribute("aria-hidden","true"):St.removeAttribute("aria-hidden"))},Z=function(){var $t=(0,_.A)(function*(Tt,St,un,pn,yr){var Zn,bn;if(Tt.presented)return;Te(!0),document.body.classList.add(pe.B),Jn(Tt.el),Tt.presented=!0,Tt.willPresent.emit(),null===(Zn=Tt.willPresentShorthand)||void 0===Zn||Zn.emit();const Ot=(0,X.b)(Tt),qr=Tt.enterAnimation?Tt.enterAnimation:X.c.get(St,"ios"===Ot?un:pn);(yield We(Tt,qr,Tt.el,yr))&&(Tt.didPresent.emit(),null===(bn=Tt.didPresentShorthand)||void 0===bn||bn.emit()),"ION-TOAST"!==Tt.el.tagName&&Y(Tt.el),Tt.keyboardClose&&(null===document.activeElement||!Tt.el.contains(document.activeElement))&&Tt.el.focus(),Tt.el.removeAttribute("aria-hidden")});return function(St,un,pn,yr,Zn){return $t.apply(this,arguments)}}(),Y=function(){var $t=(0,_.A)(function*(Tt){let St=document.activeElement;if(!St)return;const un=null==St?void 0:St.shadowRoot;un&&(St=un.querySelector(Ke)||St),yield Tt.onDidDismiss(),(null===document.activeElement||document.activeElement===document.body)&&St.focus()});return function(St){return $t.apply(this,arguments)}}(),oe=function(){var $t=(0,_.A)(function*(Tt,St,un,pn,yr,Zn,bn){var Ot,qr;if(!Tt.presented)return!1;void 0!==g.d&&1===Sn(g.d).length&&(Te(!1),document.body.classList.remove(pe.B)),Tt.presented=!1;try{Tt.el.style.setProperty("pointer-events","none"),Tt.willDismiss.emit({data:St,role:un}),null===(Ot=Tt.willDismissShorthand)||void 0===Ot||Ot.emit({data:St,role:un});const Ir=(0,X.b)(Tt),Rr=Tt.leaveAnimation?Tt.leaveAnimation:X.c.get(pn,"ios"===Ir?yr:Zn);un!==gn&&(yield We(Tt,Rr,Tt.el,bn)),Tt.didDismiss.emit({data:St,role:un}),null===(qr=Tt.didDismissShorthand)||void 0===qr||qr.emit({data:St,role:un}),(Ze.get(Tt)||[]).forEach(so=>so.destroy()),Ze.delete(Tt),Tt.el.classList.add("overlay-hidden"),Tt.el.style.removeProperty("pointer-events"),void 0!==Tt.el.lastFocus&&(Tt.el.lastFocus=void 0)}catch(Ir){console.error(Ir)}return Tt.el.remove(),Kt(),!0});return function(St,un,pn,yr,Zn,bn,Ot){return $t.apply(this,arguments)}}(),Ie=$t=>$t.querySelector("ion-app")||$t.body,We=function(){var $t=(0,_.A)(function*(Tt,St,un,pn){un.classList.remove("overlay-hidden");const Zn=St(Tt.el,pn);(!Tt.animated||!X.c.getBoolean("animated",!0))&&Zn.duration(0),Tt.keyboardClose&&Zn.beforeAddWrite(()=>{const Ot=un.ownerDocument.activeElement;null!=Ot&&Ot.matches("input,ion-input, ion-textarea")&&Ot.blur()});const bn=Ze.get(Tt)||[];return Ze.set(Tt,[...bn,Zn]),yield Zn.play(),!0});return function(St,un,pn,yr){return $t.apply(this,arguments)}}(),Ye=($t,Tt)=>{let St;const un=new Promise(pn=>St=pn);return je($t,Tt,pn=>{St(pn.detail)}),un},je=($t,Tt,St)=>{const un=pn=>{(0,ae.b)($t,Tt,un),St(pn)};(0,ae.a)($t,Tt,un)},qt=$t=>"cancel"===$t||$t===Fn,On=$t=>$t(),fn=($t,Tt)=>{if("function"==typeof $t)return X.c.get("_zoneGate",On)(()=>{try{return $t(Tt)}catch(un){throw un}})},Fn="backdrop",gn="gesture",_r=39,Hn=$t=>{let St,Tt=!1;const un=(0,C.C)(),pn=(bn=!1)=>{if(St&&!bn)return{delegate:St,inline:Tt};const{el:Ot,hasController:qr,delegate:fi}=$t;return Tt=null!==Ot.parentNode&&!qr,St=Tt?fi||un:fi,{inline:Tt,delegate:St}};return{attachViewToDom:function(){var bn=(0,_.A)(function*(Ot){const{delegate:qr}=pn(!0);if(qr)return yield qr.attachViewToDom($t.el,Ot);const{hasController:fi}=$t;if(fi&&void 0!==Ot)throw new Error("framework delegate is missing");return null});return function(qr){return bn.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:bn}=pn();bn&&void 0!==$t.el&&bn.removeViewFromDom($t.el.parentElement,$t.el)}}},Gn=()=>{let $t;const Tt=()=>{$t&&($t(),$t=void 0)};return{addClickListener:(un,pn)=>{Tt();const yr=void 0!==pn?document.getElementById(pn):null;yr?$t=((bn,Ot)=>{const qr=()=>{Ot.present()};return bn.addEventListener("click",qr),()=>{bn.removeEventListener("click",qr)}})(yr,un):(0,ue.p)(`A trigger element with the ID "${pn}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,un)},removeClickListener:Tt}},Jn=$t=>{var Tt;if(void 0===g.d)return;const St=Sn(g.d);for(let un=St.length-1;un>=0;un--){const pn=St[un],yr=null!==(Tt=St[un+1])&&void 0!==Tt?Tt:$t;(yr.hasAttribute("aria-hidden")||"ION-TOAST"!==yr.tagName)&&pn.setAttribute("aria-hidden","true")}},Kt=()=>{if(void 0===g.d)return;const $t=Sn(g.d);for(let Tt=$t.length-1;Tt>=0;Tt--){const St=$t[Tt];if(St.removeAttribute("aria-hidden"),"ION-TOAST"!==St.tagName)break}},zn="ion-disable-focus-trap"},9588:(hn,rt,W)=>{"use strict";W.d(rt,{O:()=>Ro});var _=W(467);const g={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function xe(Ee){return(_e={})=>{const Se=_e.width?String(_e.width):Ee.defaultWidth;return Ee.formats[Se]||Ee.formats[Ee.defaultWidth]}}const ue={date:xe({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:xe({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:xe({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Ke={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function ye(Ee){return(_e,Se)=>{let Ht;if("formatting"===(null!=Se&&Se.context?String(Se.context):"standalone")&&Ee.formattingValues){const $n=Ee.defaultFormattingWidth||Ee.defaultWidth,rr=null!=Se&&Se.width?String(Se.width):$n;Ht=Ee.formattingValues[rr]||Ee.formattingValues[$n]}else{const $n=Ee.defaultWidth,rr=null!=Se&&Se.width?String(Se.width):Ee.defaultWidth;Ht=Ee.values[rr]||Ee.values[$n]}return Ht[Ee.argumentCallback?Ee.argumentCallback(_e):_e]}}function ct(Ee){return(_e,Se={})=>{const ze=Se.width,wn=_e.match(ze&&Ee.matchPatterns[ze]||Ee.matchPatterns[Ee.defaultMatchWidth]);if(!wn)return null;const $n=wn[0],rr=ze&&Ee.parsePatterns[ze]||Ee.parsePatterns[Ee.defaultParseWidth],_i=Array.isArray(rr)?function Re(Ee,_e){for(let Se=0;Se<Ee.length;Se++)if(_e(Ee[Se]))return Se}(rr,Si=>Si.test($n)):function ut(Ee,_e){for(const Se in Ee)if(Object.prototype.hasOwnProperty.call(Ee,Se)&&_e(Ee[Se]))return Se}(rr,Si=>Si.test($n));let ri;return ri=Ee.valueCallback?Ee.valueCallback(_i):_i,ri=Se.valueCallback?Se.valueCallback(ri):ri,{value:ri,rest:_e.slice($n.length)}}}const Y={code:"en-US",formatDistance:(Ee,_e,Se)=>{let ze;const Ht=g[Ee];return ze="string"==typeof Ht?Ht:1===_e?Ht.one:Ht.other.replace("{{count}}",_e.toString()),null!=Se&&Se.addSuffix?Se.comparison&&Se.comparison>0?"in "+ze:ze+" ago":ze},formatLong:ue,formatRelative:(Ee,_e,Se,ze)=>Ke[Ee],localize:{ordinalNumber:(Ee,_e)=>{const Se=Number(Ee),ze=Se%100;if(ze>20||ze<10)switch(ze%10){case 1:return Se+"st";case 2:return Se+"nd";case 3:return Se+"rd"}return Se+"th"},era:ye({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:ye({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:Ee=>Ee-1}),month:ye({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:ye({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:ye({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:function Xe(Ee){return(_e,Se={})=>{const ze=_e.match(Ee.matchPattern);if(!ze)return null;const Ht=ze[0],wn=_e.match(Ee.parsePattern);if(!wn)return null;let $n=Ee.valueCallback?Ee.valueCallback(wn[0]):wn[0];return $n=Se.valueCallback?Se.valueCallback($n):$n,{value:$n,rest:_e.slice(Ht.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:Ee=>parseInt(Ee,10)}),era:ct({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:ct({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:Ee=>Ee+1}),month:ct({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:ct({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:ct({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};let Ie={};function We(){return Ie}Math.pow(10,8);const Fn=6048e5,gn=864e5,Ir=Symbol.for("constructDateFrom");function Rr(Ee,_e){if(_e)return _e(Ee);const Se=Object.prototype.toString.call(Ee);return"object"==typeof Ee&&Ir in Ee?Ee[Ir](Ee):Ee instanceof Date||"object"==typeof Ee&&"[object Date]"===Se?new Ee.constructor(+Ee):"number"==typeof Ee||"[object Number]"===Se||"string"==typeof Ee||"[object String]"===Se?new Date(Ee):new Date(NaN)}function so(Ee){const _e=Rr(Ee),Se=new Date(Date.UTC(_e.getFullYear(),_e.getMonth(),_e.getDate(),_e.getHours(),_e.getMinutes(),_e.getSeconds(),_e.getMilliseconds()));return Se.setUTCFullYear(_e.getFullYear()),+Ee-+Se}function hr(Ee,_e){return"function"==typeof Ee?Ee(_e):"object"==typeof Ee&&Ir in Ee?Ee[Ir](_e):Ee instanceof Date?new Ee.constructor(_e):new Date(_e)}function cr(Ee,_e){const Se=Rr(Ee,null==_e?void 0:_e.in);return Se.setHours(0,0,0,0),Se}function wi(Ee,_e){const Se=Rr(Ee,null==_e?void 0:_e.in);return function Dn(Ee,_e,Se){const[ze,Ht]=function nr(Ee,..._e){const Se=Ee||hr.bind(null,_e.find(ze=>"object"==typeof ze));return _e.map(Se)}(null==Se?void 0:Se.in,Ee,_e),wn=cr(ze),$n=cr(Ht),rr=+wn-so(wn),_i=+$n-so($n);return Math.round((rr-_i)/gn)}(Se,function qi(Ee,_e){const Se=Rr(Ee,null==_e?void 0:_e.in);return Se.setFullYear(Se.getFullYear(),0,1),Se.setHours(0,0,0,0),Se}(Se))+1}function gt(Ee,_e){var Se,ze,Ht,wn,$n,rr;const _i=We(),ri=null!==(Se=null!==(ze=null!==(Ht=null!==(wn=null==_e?void 0:_e.weekStartsOn)&&void 0!==wn?wn:null==_e||null===($n=_e.locale)||void 0===$n||null===($n=$n.options)||void 0===$n?void 0:$n.weekStartsOn)&&void 0!==Ht?Ht:_i.weekStartsOn)&&void 0!==ze?ze:null===(rr=_i.locale)||void 0===rr||null===(rr=rr.options)||void 0===rr?void 0:rr.weekStartsOn)&&void 0!==Se?Se:0,ui=Rr(Ee,null==_e?void 0:_e.in),Si=ui.getDay(),Po=(Si<ri?7:0)+Si-ri;return ui.setDate(ui.getDate()-Po),ui.setHours(0,0,0,0),ui}function bt(Ee,_e){return gt(Ee,{..._e,weekStartsOn:1})}function yt(Ee,_e){const Se=Rr(Ee,null==_e?void 0:_e.in),ze=Se.getFullYear(),Ht=hr(Se,0);Ht.setFullYear(ze+1,0,4),Ht.setHours(0,0,0,0);const wn=bt(Ht),$n=hr(Se,0);$n.setFullYear(ze,0,4),$n.setHours(0,0,0,0);const rr=bt($n);return Se.getTime()>=wn.getTime()?ze+1:Se.getTime()>=rr.getTime()?ze:ze-1}function er(Ee,_e){var Se,ze,Ht,wn,$n,rr;const _i=Rr(Ee,null==_e?void 0:_e.in),ri=_i.getFullYear(),ui=We(),Si=null!==(Se=null!==(ze=null!==(Ht=null!==(wn=null==_e?void 0:_e.firstWeekContainsDate)&&void 0!==wn?wn:null==_e||null===($n=_e.locale)||void 0===$n||null===($n=$n.options)||void 0===$n?void 0:$n.firstWeekContainsDate)&&void 0!==Ht?Ht:ui.firstWeekContainsDate)&&void 0!==ze?ze:null===(rr=ui.locale)||void 0===rr||null===(rr=rr.options)||void 0===rr?void 0:rr.firstWeekContainsDate)&&void 0!==Se?Se:1,Po=hr((null==_e?void 0:_e.in)||Ee,0);Po.setFullYear(ri+1,0,Si),Po.setHours(0,0,0,0);const ks=gt(Po,_e),Os=hr((null==_e?void 0:_e.in)||Ee,0);Os.setFullYear(ri,0,Si),Os.setHours(0,0,0,0);const Zo=gt(Os,_e);return+_i>=+ks?ri+1:+_i>=+Zo?ri:ri-1}function Pn(Ee,_e){return(Ee<0?"-":"")+Math.abs(Ee).toString().padStart(_e,"0")}const Nn={y(Ee,_e){const Se=Ee.getFullYear(),ze=Se>0?Se:1-Se;return Pn("yy"===_e?ze%100:ze,_e.length)},M(Ee,_e){const Se=Ee.getMonth();return"M"===_e?String(Se+1):Pn(Se+1,2)},d:(Ee,_e)=>Pn(Ee.getDate(),_e.length),a(Ee,_e){const Se=Ee.getHours()/12>=1?"pm":"am";switch(_e){case"a":case"aa":return Se.toUpperCase();case"aaa":return Se;case"aaaaa":return Se[0];default:return"am"===Se?"a.m.":"p.m."}},h:(Ee,_e)=>Pn(Ee.getHours()%12||12,_e.length),H:(Ee,_e)=>Pn(Ee.getHours(),_e.length),m:(Ee,_e)=>Pn(Ee.getMinutes(),_e.length),s:(Ee,_e)=>Pn(Ee.getSeconds(),_e.length),S(Ee,_e){const Se=_e.length,ze=Ee.getMilliseconds();return Pn(Math.trunc(ze*Math.pow(10,Se-3)),_e.length)}},po={G:function(Ee,_e,Se){const ze=Ee.getFullYear()>0?1:0;switch(_e){case"G":case"GG":case"GGG":return Se.era(ze,{width:"abbreviated"});case"GGGGG":return Se.era(ze,{width:"narrow"});default:return Se.era(ze,{width:"wide"})}},y:function(Ee,_e,Se){if("yo"===_e){const ze=Ee.getFullYear();return Se.ordinalNumber(ze>0?ze:1-ze,{unit:"year"})}return Nn.y(Ee,_e)},Y:function(Ee,_e,Se,ze){const Ht=er(Ee,ze),wn=Ht>0?Ht:1-Ht;return"YY"===_e?Pn(wn%100,2):"Yo"===_e?Se.ordinalNumber(wn,{unit:"year"}):Pn(wn,_e.length)},R:function(Ee,_e){return Pn(yt(Ee),_e.length)},u:function(Ee,_e){return Pn(Ee.getFullYear(),_e.length)},Q:function(Ee,_e,Se){const ze=Math.ceil((Ee.getMonth()+1)/3);switch(_e){case"Q":return String(ze);case"QQ":return Pn(ze,2);case"Qo":return Se.ordinalNumber(ze,{unit:"quarter"});case"QQQ":return Se.quarter(ze,{width:"abbreviated",context:"formatting"});case"QQQQQ":return Se.quarter(ze,{width:"narrow",context:"formatting"});default:return Se.quarter(ze,{width:"wide",context:"formatting"})}},q:function(Ee,_e,Se){const ze=Math.ceil((Ee.getMonth()+1)/3);switch(_e){case"q":return String(ze);case"qq":return Pn(ze,2);case"qo":return Se.ordinalNumber(ze,{unit:"quarter"});case"qqq":return Se.quarter(ze,{width:"abbreviated",context:"standalone"});case"qqqqq":return Se.quarter(ze,{width:"narrow",context:"standalone"});default:return Se.quarter(ze,{width:"wide",context:"standalone"})}},M:function(Ee,_e,Se){const ze=Ee.getMonth();switch(_e){case"M":case"MM":return Nn.M(Ee,_e);case"Mo":return Se.ordinalNumber(ze+1,{unit:"month"});case"MMM":return Se.month(ze,{width:"abbreviated",context:"formatting"});case"MMMMM":return Se.month(ze,{width:"narrow",context:"formatting"});default:return Se.month(ze,{width:"wide",context:"formatting"})}},L:function(Ee,_e,Se){const ze=Ee.getMonth();switch(_e){case"L":return String(ze+1);case"LL":return Pn(ze+1,2);case"Lo":return Se.ordinalNumber(ze+1,{unit:"month"});case"LLL":return Se.month(ze,{width:"abbreviated",context:"standalone"});case"LLLLL":return Se.month(ze,{width:"narrow",context:"standalone"});default:return Se.month(ze,{width:"wide",context:"standalone"})}},w:function(Ee,_e,Se,ze){const Ht=function Ni(Ee,_e){const Se=Rr(Ee,null==_e?void 0:_e.in),ze=+gt(Se,_e)-+function pi(Ee,_e){var Se,ze,Ht,wn,$n,rr;const _i=We(),ri=null!==(Se=null!==(ze=null!==(Ht=null!==(wn=null==_e?void 0:_e.firstWeekContainsDate)&&void 0!==wn?wn:null==_e||null===($n=_e.locale)||void 0===$n||null===($n=$n.options)||void 0===$n?void 0:$n.firstWeekContainsDate)&&void 0!==Ht?Ht:_i.firstWeekContainsDate)&&void 0!==ze?ze:null===(rr=_i.locale)||void 0===rr||null===(rr=rr.options)||void 0===rr?void 0:rr.firstWeekContainsDate)&&void 0!==Se?Se:1,ui=er(Ee,_e),Si=hr((null==_e?void 0:_e.in)||Ee,0);return Si.setFullYear(ui,0,ri),Si.setHours(0,0,0,0),gt(Si,_e)}(Se,_e);return Math.round(ze/Fn)+1}(Ee,ze);return"wo"===_e?Se.ordinalNumber(Ht,{unit:"week"}):Pn(Ht,_e.length)},I:function(Ee,_e,Se){const ze=function vr(Ee,_e){const Se=Rr(Ee,null==_e?void 0:_e.in),ze=+bt(Se)-+function En(Ee,_e){const Se=yt(Ee,_e),ze=hr((null==_e?void 0:_e.in)||Ee,0);return ze.setFullYear(Se,0,4),ze.setHours(0,0,0,0),bt(ze)}(Se);return Math.round(ze/Fn)+1}(Ee);return"Io"===_e?Se.ordinalNumber(ze,{unit:"week"}):Pn(ze,_e.length)},d:function(Ee,_e,Se){return"do"===_e?Se.ordinalNumber(Ee.getDate(),{unit:"date"}):Nn.d(Ee,_e)},D:function(Ee,_e,Se){const ze=wi(Ee);return"Do"===_e?Se.ordinalNumber(ze,{unit:"dayOfYear"}):Pn(ze,_e.length)},E:function(Ee,_e,Se){const ze=Ee.getDay();switch(_e){case"E":case"EE":case"EEE":return Se.day(ze,{width:"abbreviated",context:"formatting"});case"EEEEE":return Se.day(ze,{width:"narrow",context:"formatting"});case"EEEEEE":return Se.day(ze,{width:"short",context:"formatting"});default:return Se.day(ze,{width:"wide",context:"formatting"})}},e:function(Ee,_e,Se,ze){const Ht=Ee.getDay(),wn=(Ht-ze.weekStartsOn+8)%7||7;switch(_e){case"e":return String(wn);case"ee":return Pn(wn,2);case"eo":return Se.ordinalNumber(wn,{unit:"day"});case"eee":return Se.day(Ht,{width:"abbreviated",context:"formatting"});case"eeeee":return Se.day(Ht,{width:"narrow",context:"formatting"});case"eeeeee":return Se.day(Ht,{width:"short",context:"formatting"});default:return Se.day(Ht,{width:"wide",context:"formatting"})}},c:function(Ee,_e,Se,ze){const Ht=Ee.getDay(),wn=(Ht-ze.weekStartsOn+8)%7||7;switch(_e){case"c":return String(wn);case"cc":return Pn(wn,_e.length);case"co":return Se.ordinalNumber(wn,{unit:"day"});case"ccc":return Se.day(Ht,{width:"abbreviated",context:"standalone"});case"ccccc":return Se.day(Ht,{width:"narrow",context:"standalone"});case"cccccc":return Se.day(Ht,{width:"short",context:"standalone"});default:return Se.day(Ht,{width:"wide",context:"standalone"})}},i:function(Ee,_e,Se){const ze=Ee.getDay(),Ht=0===ze?7:ze;switch(_e){case"i":return String(Ht);case"ii":return Pn(Ht,_e.length);case"io":return Se.ordinalNumber(Ht,{unit:"day"});case"iii":return Se.day(ze,{width:"abbreviated",context:"formatting"});case"iiiii":return Se.day(ze,{width:"narrow",context:"formatting"});case"iiiiii":return Se.day(ze,{width:"short",context:"formatting"});default:return Se.day(ze,{width:"wide",context:"formatting"})}},a:function(Ee,_e,Se){const Ht=Ee.getHours()/12>=1?"pm":"am";switch(_e){case"a":case"aa":return Se.dayPeriod(Ht,{width:"abbreviated",context:"formatting"});case"aaa":return Se.dayPeriod(Ht,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return Se.dayPeriod(Ht,{width:"narrow",context:"formatting"});default:return Se.dayPeriod(Ht,{width:"wide",context:"formatting"})}},b:function(Ee,_e,Se){const ze=Ee.getHours();let Ht;switch(Ht=12===ze?"noon":0===ze?"midnight":ze/12>=1?"pm":"am",_e){case"b":case"bb":return Se.dayPeriod(Ht,{width:"abbreviated",context:"formatting"});case"bbb":return Se.dayPeriod(Ht,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return Se.dayPeriod(Ht,{width:"narrow",context:"formatting"});default:return Se.dayPeriod(Ht,{width:"wide",context:"formatting"})}},B:function(Ee,_e,Se){const ze=Ee.getHours();let Ht;switch(Ht=ze>=17?"evening":ze>=12?"afternoon":ze>=4?"morning":"night",_e){case"B":case"BB":case"BBB":return Se.dayPeriod(Ht,{width:"abbreviated",context:"formatting"});case"BBBBB":return Se.dayPeriod(Ht,{width:"narrow",context:"formatting"});default:return Se.dayPeriod(Ht,{width:"wide",context:"formatting"})}},h:function(Ee,_e,Se){if("ho"===_e){let ze=Ee.getHours()%12;return 0===ze&&(ze=12),Se.ordinalNumber(ze,{unit:"hour"})}return Nn.h(Ee,_e)},H:function(Ee,_e,Se){return"Ho"===_e?Se.ordinalNumber(Ee.getHours(),{unit:"hour"}):Nn.H(Ee,_e)},K:function(Ee,_e,Se){const ze=Ee.getHours()%12;return"Ko"===_e?Se.ordinalNumber(ze,{unit:"hour"}):Pn(ze,_e.length)},k:function(Ee,_e,Se){let ze=Ee.getHours();return 0===ze&&(ze=24),"ko"===_e?Se.ordinalNumber(ze,{unit:"hour"}):Pn(ze,_e.length)},m:function(Ee,_e,Se){return"mo"===_e?Se.ordinalNumber(Ee.getMinutes(),{unit:"minute"}):Nn.m(Ee,_e)},s:function(Ee,_e,Se){return"so"===_e?Se.ordinalNumber(Ee.getSeconds(),{unit:"second"}):Nn.s(Ee,_e)},S:function(Ee,_e){return Nn.S(Ee,_e)},X:function(Ee,_e,Se){const ze=Ee.getTimezoneOffset();if(0===ze)return"Z";switch(_e){case"X":return Do(ze);case"XXXX":case"XX":return gi(ze);default:return gi(ze,":")}},x:function(Ee,_e,Se){const ze=Ee.getTimezoneOffset();switch(_e){case"x":return Do(ze);case"xxxx":case"xx":return gi(ze);default:return gi(ze,":")}},O:function(Ee,_e,Se){const ze=Ee.getTimezoneOffset();switch(_e){case"O":case"OO":case"OOO":return"GMT"+go(ze,":");default:return"GMT"+gi(ze,":")}},z:function(Ee,_e,Se){const ze=Ee.getTimezoneOffset();switch(_e){case"z":case"zz":case"zzz":return"GMT"+go(ze,":");default:return"GMT"+gi(ze,":")}},t:function(Ee,_e,Se){return Pn(Math.trunc(Ee.getTime()/1e3),_e.length)},T:function(Ee,_e,Se){return Pn(Ee.getTime(),_e.length)}};function go(Ee,_e=""){const Se=Ee>0?"-":"+",ze=Math.abs(Ee),Ht=Math.trunc(ze/60),wn=ze%60;return 0===wn?Se+String(Ht):Se+String(Ht)+_e+Pn(wn,2)}function Do(Ee,_e){return Ee%60==0?(Ee>0?"-":"+")+Pn(Math.abs(Ee)/60,2):gi(Ee,_e)}function gi(Ee,_e=""){const Se=Ee>0?"-":"+",ze=Math.abs(Ee);return Se+Pn(Math.trunc(ze/60),2)+_e+Pn(ze%60,2)}const Ho=(Ee,_e)=>{switch(Ee){case"P":return _e.date({width:"short"});case"PP":return _e.date({width:"medium"});case"PPP":return _e.date({width:"long"});default:return _e.date({width:"full"})}},li=(Ee,_e)=>{switch(Ee){case"p":return _e.time({width:"short"});case"pp":return _e.time({width:"medium"});case"ppp":return _e.time({width:"long"});default:return _e.time({width:"full"})}},ti={p:li,P:(Ee,_e)=>{const Se=Ee.match(/(P+)(p+)?/)||[],ze=Se[1],Ht=Se[2];if(!Ht)return Ho(Ee,_e);let wn;switch(ze){case"P":wn=_e.dateTime({width:"short"});break;case"PP":wn=_e.dateTime({width:"medium"});break;case"PPP":wn=_e.dateTime({width:"long"});break;default:wn=_e.dateTime({width:"full"})}return wn.replace("{{date}}",Ho(ze,_e)).replace("{{time}}",li(Ht,_e))}},Oi=/^D+$/,Ci=/^Y+$/,ao=["D","DD","YY","YYYY"];const Tn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,lr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,xr=/^'([^]*?)'?$/,ni=/''/g,Ai=/[a-zA-Z]/;function ci(Ee,_e,Se){var ze,Ht,wn,$n,rr,_i,ri,ui,Si,Po,ks,Os,Zo,ys;const zo=We(),os=null!==(ze=null!==(Ht=null==Se?void 0:Se.locale)&&void 0!==Ht?Ht:zo.locale)&&void 0!==ze?ze:Y,Es=null!==(wn=null!==($n=null!==(rr=null!==(_i=null==Se?void 0:Se.firstWeekContainsDate)&&void 0!==_i?_i:null==Se||null===(ri=Se.locale)||void 0===ri||null===(ri=ri.options)||void 0===ri?void 0:ri.firstWeekContainsDate)&&void 0!==rr?rr:zo.firstWeekContainsDate)&&void 0!==$n?$n:null===(ui=zo.locale)||void 0===ui||null===(ui=ui.options)||void 0===ui?void 0:ui.firstWeekContainsDate)&&void 0!==wn?wn:1,ha=null!==(Si=null!==(Po=null!==(ks=null!==(Os=null==Se?void 0:Se.weekStartsOn)&&void 0!==Os?Os:null==Se||null===(Zo=Se.locale)||void 0===Zo||null===(Zo=Zo.options)||void 0===Zo?void 0:Zo.weekStartsOn)&&void 0!==ks?ks:zo.weekStartsOn)&&void 0!==Po?Po:null===(ys=zo.locale)||void 0===ys||null===(ys=ys.options)||void 0===ys?void 0:ys.weekStartsOn)&&void 0!==Si?Si:0,R=Rr(Ee);if(!function Vt(Ee){return!(!function me(Ee){return Ee instanceof Date||"object"==typeof Ee&&"[object Date]"===Object.prototype.toString.call(Ee)}(Ee)&&"number"!=typeof Ee||isNaN(+Rr(Ee)))}(R))throw new RangeError("Invalid time value");let z=_e.match(lr).map(N=>{const le=N[0];return"p"===le||"P"===le?(0,ti[le])(N,os.formatLong):N}).join("").match(Tn).map(N=>{if("''"===N)return{isToken:!1,value:"'"};const le=N[0];if("'"===le)return{isToken:!1,value:mi(N)};if(po[le])return{isToken:!0,value:N};if(le.match(Ai))throw new RangeError("Format string contains an unescaped latin alphabet character `"+le+"`");return{isToken:!1,value:N}});os.localize.preprocessor&&(z=os.localize.preprocessor(R,z));const se={firstWeekContainsDate:Es,weekStartsOn:ha,locale:os};return z.map(N=>{if(!N.isToken)return N.value;const le=N.value;return((null==Se||!Se.useAdditionalWeekYearTokens)&&function ne(Ee){return Ci.test(Ee)}(le)||(null==Se||!Se.useAdditionalDayOfYearTokens)&&function Q(Ee){return Oi.test(Ee)}(le))&&function we(Ee,_e,Se){const ze=function J(Ee,_e,Se){const ze="Y"===Ee[0]?"years":"days of the month";return`Use \`${Ee.toLowerCase()}\` instead of \`${Ee}\` (in \`${_e}\`) for formatting ${ze} to the input \`${Se}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(Ee,_e,Se);if(console.warn(ze),ao.includes(Ee))throw new RangeError(ze)}(le,_e,String(Ee)),(0,po[le[0]])(R,le,os.localize,se)}).join("")}function mi(Ee){const _e=Ee.match(xr);return _e?_e[1].replace(ni,"'"):Ee}var Bn=W(3953),Ti=W(9465);let Ro=(()=>{var Ee;class _e{constructor(ze){this.toastController=ze}formatTimestamp(ze){return ci(ze,"yyyy-MM-dd HH:mm:ss")}initLogScreen(){document.getElementById("sidebar").style.display="none",document.getElementById("router-outlet-container").style.width="100%"}initNormalScreen(){document.getElementById("sidebar").style.display="flex",document.getElementById("router-outlet-container").style.width="100% - 18rem"}presentToast(ze){var Ht=this;return(0,_.A)(function*(){(yield Ht.toastController.create({message:ze,duration:3e3})).present()})()}}return(Ee=_e).\u0275fac=function(ze){return new(ze||Ee)(Bn.KVO(Ti.K_))},Ee.\u0275prov=Bn.jDH({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),_e})()},867:(hn,rt,W)=>{"use strict";W.d(rt,{w:()=>g});var _=W(3953);let g=(()=>{var ae;class xe{constructor(){}}return(ae=xe).\u0275fac=function(C){return new(C||ae)},ae.\u0275prov=_.jDH({token:ae,factory:ae.\u0275fac,providedIn:"root"}),xe})()},738:(hn,rt,W)=>{"use strict";var _={};W.r(_),W.d(_,{FirebaseError:()=>gn,SDK_VERSION:()=>en,_DEFAULT_ENTRY_NAME:()=>ve,_addComponent:()=>Lt,_addOrOverwriteComponent:()=>Bt,_apps:()=>qe,_clearComponents:()=>Ar,_components:()=>Ft,_getProvider:()=>dn,_isFirebaseApp:()=>xn,_isFirebaseServerApp:()=>yn,_registerComponent:()=>Nt,_removeServiceInstance:()=>In,_serverApps:()=>Fe,deleteApp:()=>zl,getApp:()=>Qi,getApps:()=>yu,initializeApp:()=>Oo,initializeServerApp:()=>fa,onLog:()=>Ga,registerVersion:()=>Hr,setLogLevel:()=>ss});var g=W(345),ae=W(70),xe=W(3656),X=W(9465),C=W(467);const ue=function(r,e){if(!r)throw Ke(e)},Ke=function(r){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+r)},Qe=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=63&s|128):55296==(64512&s)&&n+1<r.length&&56320==(64512&r.charCodeAt(n+1))?(s=65536+((1023&s)<<10)+(1023&r.charCodeAt(++n)),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=63&s|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=63&s|128)}return e},Ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<r.length;s+=3){const l=r[s],u=s+1<r.length,h=u?r[s+1]:0,p=s+2<r.length,E=p?r[s+2]:0;let G=(15&h)<<2|E>>6,ce=63&E;p||(ce=64,u||(G=64)),n.push(t[l>>2],t[(3&l)<<4|h>>4],t[G],t[ce])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Qe(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):function(r){const e=[];let t=0,n=0;for(;t<r.length;){const s=r[t++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const l=r[t++];e[n++]=String.fromCharCode((31&s)<<6|63&l)}else if(s>239&&s<365){const p=((7&s)<<18|(63&r[t++])<<12|(63&r[t++])<<6|63&r[t++])-65536;e[n++]=String.fromCharCode(55296+(p>>10)),e[n++]=String.fromCharCode(56320+(1023&p))}else{const l=r[t++],u=r[t++];e[n++]=String.fromCharCode((15&s)<<12|(63&l)<<6|63&u)}}return e.join("")}(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<r.length;){const l=t[r.charAt(s++)],h=s<r.length?t[r.charAt(s)]:0;++s;const E=s<r.length?t[r.charAt(s)]:64;++s;const x=s<r.length?t[r.charAt(s)]:64;if(++s,null==l||null==h||null==E||null==x)throw new Oe;n.push(l<<2|h>>4),64!==E&&(n.push(h<<4&240|E>>2),64!==x&&n.push(E<<6&192|x))}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Oe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Le=function(r){const e=Qe(r);return Ve.encodeByteArray(e,!0)},Ze=function(r){return Le(r).replace(/\./g,"")},ot=function(r){try{return Ve.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function nt(r,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===r&&(r={});break;case Array:r=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!At(t)||(r[t]=nt(r[t],e[t]));return r}function At(r){return"__proto__"!==r}function ct(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const _t=()=>{try{return ct().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const r=process.env.__FIREBASE_DEFAULTS__;return r?JSON.parse(r):void 0})()||(()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&ot(r[1]);return e&&JSON.parse(e)})()}catch(r){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`)}},Ne=()=>{var r;return null===(r=_t())||void 0===r?void 0:r.config};class Pt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Ut(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",s=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Ze(JSON.stringify({alg:"none",type:"JWT"})),Ze(JSON.stringify(u)),""].join(".")}function Gt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Wt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function Sn(){var r;const e=null===(r=_t())||void 0===r?void 0:r.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Te(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Z(){const r="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof r&&void 0!==r.id}function Y(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ie(){const r=Gt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function je(){return!Sn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qt(){try{return"object"==typeof indexedDB}catch{return!1}}class gn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,gn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_r.prototype.create)}}class _r{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],u=l?function Hn(r,e){return r.replace(Gn,(t,n)=>{const s=e[n];return null!=s?String(s):`<${n}?>`})}(l,n):"Error";return new gn(s,`${this.serviceName}: ${u} (${s}).`,n)}}const Gn=/\{\$([^}]+)}/g;function Jn(r){return JSON.parse(r)}function Kt(r){return JSON.stringify(r)}const zn=function(r){let e={},t={},n={},s="";try{const l=r.split(".");e=Jn(ot(l[0])||""),t=Jn(ot(l[1])||""),s=l[2],n=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:n,signature:s}};function pn(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function yr(r,e){if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}function Zn(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function bn(r,e,t){const n={};for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=e.call(t,r[s],s,r));return n}function Ot(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const s of t){if(!n.includes(s))return!1;const l=r[s],u=e[s];if(qr(l)&&qr(u)){if(!Ot(l,u))return!1}else if(l!==u)return!1}for(const s of n)if(!t.includes(s))return!1;return!0}function qr(r){return null!==r&&"object"==typeof r}function Ir(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Rr(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,l]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(l)}}),e}function ei(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}class so{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"==typeof e)for(let x=0;x<16;x++)n[x]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let x=0;x<16;x++)n[x]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let x=16;x<80;x++){const G=n[x-3]^n[x-8]^n[x-14]^n[x-16];n[x]=4294967295&(G<<1|G>>>31)}let E,w,s=this.chain_[0],l=this.chain_[1],u=this.chain_[2],h=this.chain_[3],p=this.chain_[4];for(let x=0;x<80;x++){x<40?x<20?(E=h^l&(u^h),w=1518500249):(E=l^u^h,w=1859775393):x<60?(E=l&u|h&(l|u),w=2400959708):(E=l^u^h,w=3395469782);const G=(s<<5|s>>>27)+E+p+w+n[x]&4294967295;p=h,h=u,u=4294967295&(l<<30|l>>>2),l=s,s=G}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let s=0;const l=this.buf_;let u=this.inbuf_;for(;s<t;){if(0===u)for(;s<=n;)this.compress_(e,s),s+=this.blockSize;if("string"==typeof e){for(;s<t;)if(l[u]=e.charCodeAt(s),++u,++s,u===this.blockSize){this.compress_(l),u=0;break}}else for(;s<t;)if(l[u]=e[s],++u,++s,u===this.blockSize){this.compress_(l),u=0;break}}this.inbuf_=u,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let s=0;s<5;s++)for(let l=24;l>=0;l-=8)e[n]=this.chain_[s]>>l&255,++n;return e}}function hr(r,e){const t=new Ns(r,e);return t.subscribe.bind(t)}class Ns{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let s;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");s=function cr(r,e){if("object"!=typeof r||null===r)return!1;for(const t of e)if(t in r&&"function"==typeof r[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===s.next&&(s.next=fr),void 0===s.error&&(s.error=fr),void 0===s.complete&&(s.complete=fr);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fr(){}const Dn=function(r,e,t,n){let s;if(n<e?s="at least "+e:n>t&&(s=0===t?"none":"no more than "+t),s)throw new Error(r+" failed: Was called with "+n+(1===n?" argument.":" arguments.")+" Expects "+s+".")};function Kr(r,e){return`${r} failed: ${e} argument `}function Fr(r,e,t,n){if((!n||t)&&"function"!=typeof t)throw new Error(Kr(r,e)+"must be a valid function.")}function wi(r,e,t,n){if((!n||t)&&("object"!=typeof t||null===t))throw new Error(Kr(r,e)+"must be a valid context object.")}const gt=function(r){let e=0;for(let t=0;t<r.length;t++){const n=r.charCodeAt(t);n<128?e++:n<2048?e+=2:n>=55296&&n<=56319?(e+=4,t++):e+=3}return e};function Xt(r){return r&&r._delegate?r._delegate:r}class er{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Sr="[DEFAULT]";class pi{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new Pt;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),s=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(s)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function Ni(r){return"EAGER"===r.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Sr})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});n.resolve(l)}catch{}}}}clearInstance(e=Sr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,C.A)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Sr){return this.instances.has(e)}getOptions(e=Sr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[l,u]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(l)&&u.resolve(s);return s}onInit(e,t){var n;const s=this.normalizeInstanceIdentifier(t),l=null!==(n=this.onInitCallbacks.get(s))&&void 0!==n?n:new Set;l.add(e),this.onInitCallbacks.set(s,l);const u=this.instances.get(s);return u&&e(u,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===Sr?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}var r;return n||null}normalizeInstanceIdentifier(e=Sr){return this.component?this.component.multipleInstances?e:Sr:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fo{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new pi(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Pn=[];var Nn=function(r){return r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT",r}(Nn||{});const Xi={debug:Nn.DEBUG,verbose:Nn.VERBOSE,info:Nn.INFO,warn:Nn.WARN,error:Nn.ERROR,silent:Nn.SILENT},po=Nn.INFO,go={[Nn.DEBUG]:"log",[Nn.VERBOSE]:"log",[Nn.INFO]:"info",[Nn.WARN]:"warn",[Nn.ERROR]:"error"},Do=(r,e,...t)=>{if(e<r.logLevel)return;const n=(new Date).toISOString(),s=go[e];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[s](`[${n}]  ${r.name}:`,...t)};class gi{constructor(e){this.name=e,this._logLevel=po,this._logHandler=Do,this._userLogHandler=null,Pn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Nn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Xi[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Nn.DEBUG,...e),this._logHandler(this,Nn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Nn.VERBOSE,...e),this._logHandler(this,Nn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Nn.INFO,...e),this._logHandler(this,Nn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Nn.WARN,...e),this._logHandler(this,Nn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Nn.ERROR,...e),this._logHandler(this,Nn.ERROR,...e)}}const Jo=(r,e)=>e.some(t=>r instanceof t);let ti,Oi;const Q=new WeakMap,ne=new WeakMap,we=new WeakMap,J=new WeakMap,me=new WeakMap;let rn={get(r,e,t){if(r instanceof IDBTransaction){if("done"===e)return ne.get(r);if("objectStoreNames"===e)return r.objectStoreNames||we.get(r);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ni(r[e])},set:(r,e,t)=>(r[e]=t,!0),has:(r,e)=>r instanceof IDBTransaction&&("done"===e||"store"===e)||e in r};function xr(r){return"function"==typeof r?function lr(r){return r!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ao(){return Oi||(Oi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(r)?function(...e){return r.apply(Ai(this),e),ni(Q.get(this))}:function(...e){return ni(r.apply(Ai(this),e))}:function(e,...t){const n=r.call(Ai(this),e,...t);return we.set(n,e.sort?e.sort():[e]),ni(n)}}(r):(r instanceof IDBTransaction&&function Vt(r){if(ne.has(r))return;const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",u),r.removeEventListener("abort",u)},l=()=>{t(),s()},u=()=>{n(r.error||new DOMException("AbortError","AbortError")),s()};r.addEventListener("complete",l),r.addEventListener("error",u),r.addEventListener("abort",u)});ne.set(r,e)}(r),Jo(r,function Ci(){return ti||(ti=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(r,rn):r)}function ni(r){if(r instanceof IDBRequest)return function et(r){const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("success",l),r.removeEventListener("error",u)},l=()=>{t(ni(r.result)),s()},u=()=>{n(r.error),s()};r.addEventListener("success",l),r.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&Q.set(t,r)}).catch(()=>{}),me.set(e,r),e}(r);if(J.has(r))return J.get(r);const e=xr(r);return e!==r&&(J.set(r,e),me.set(e,r)),e}const Ai=r=>me.get(r),Fi=["get","getKey","getAll","getAllKeys","count"],Bn=["put","add","delete","clear"],Ti=new Map;function Ro(r,e){if(!(r instanceof IDBDatabase)||e in r||"string"!=typeof e)return;if(Ti.get(e))return Ti.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,s=Bn.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!s&&!Fi.includes(t))return;const l=function(){var u=(0,C.A)(function*(h,...p){const E=this.transaction(h,s?"readwrite":"readonly");let w=E.store;return n&&(w=w.index(p.shift())),(yield Promise.all([w[t](...p),s&&E.done]))[0]});return function(p){return u.apply(this,arguments)}}();return Ti.set(e,l),l}!function Tn(r){rn=r(rn)}(r=>({...r,get:(e,t,n)=>Ro(e,t)||r.get(e,t,n),has:(e,t)=>!!Ro(e,t)||r.has(e,t)}));class Ee{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function _e(r){const e=r.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}return null}).filter(t=>t).join(" ")}}const Se="@firebase/app",ze="0.10.10",Ht=new gi("@firebase/app"),ve="[DEFAULT]",Pe={[Se]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},qe=new Map,Fe=new Map,Ft=new Map;function Lt(r,e){try{r.container.addComponent(e)}catch(t){Ht.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Bt(r,e){r.container.addOrOverwriteComponent(e)}function Nt(r){const e=r.name;if(Ft.has(e))return Ht.debug(`There were multiple attempts to register component ${e}.`),!1;Ft.set(e,r);for(const t of qe.values())Lt(t,r);for(const t of Fe.values())Lt(t,r);return!0}function dn(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function In(r,e,t=ve){dn(r,e).clearInstance(t)}function xn(r){return void 0!==r.options}function yn(r){return void 0!==r.settings}function Ar(){Ft.clear()}const mr=new _r("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Li{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new er("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}}class Vi extends Li{constructor(e,t,n,s){const l=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,u={name:n,automaticDataCollectionEnabled:l};super(void 0!==e.apiKey?e:e.options,u,s),this._serverConfig=Object.assign({automaticDataCollectionEnabled:l},t),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Hr(Se,ze,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){zl(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw mr.create("server-app-deleted")}}const en="10.13.1";function Oo(r,e={}){let t=r;"object"!=typeof e&&(e={name:e});const n=Object.assign({name:ve,automaticDataCollectionEnabled:!1},e),s=n.name;if("string"!=typeof s||!s)throw mr.create("bad-app-name",{appName:String(s)});if(t||(t=Ne()),!t)throw mr.create("no-options");const l=qe.get(s);if(l){if(Ot(t,l.options)&&Ot(n,l.config))return l;throw mr.create("duplicate-app",{appName:s})}const u=new fo(s);for(const p of Ft.values())u.addComponent(p);const h=new Li(t,n,u);return qe.set(s,h),h}function fa(r,e){if(function Dt(){return typeof window<"u"||Te()}()&&!Te())throw mr.create("invalid-server-app-environment");let t;void 0===e.automaticDataCollectionEnabled&&(e.automaticDataCollectionEnabled=!1),t=xn(r)?r.options:r;const n=Object.assign(Object.assign({},e),t);if(void 0!==n.releaseOnDeref&&delete n.releaseOnDeref,void 0!==e.releaseOnDeref&&typeof FinalizationRegistry>"u")throw mr.create("finalization-registry-not-supported",{});const l=""+(E=JSON.stringify(n),[...E].reduce((w,x)=>Math.imul(31,w)+x.charCodeAt(0)|0,0)),u=Fe.get(l);var E;if(u)return u.incRefCount(e.releaseOnDeref),u;const h=new fo(l);for(const E of Ft.values())h.addComponent(E);const p=new Vi(t,e,l,h);return Fe.set(l,p),p}function Qi(r=ve){const e=qe.get(r);if(!e&&r===ve&&Ne())return Oo();if(!e)throw mr.create("no-app",{appName:r});return e}function yu(){return Array.from(qe.values())}function zl(r){return pa.apply(this,arguments)}function pa(){return(pa=(0,C.A)(function*(r){let e=!1;const t=r.name;qe.has(t)?(e=!0,qe.delete(t)):Fe.has(t)&&r.decRefCount()<=0&&(Fe.delete(t),e=!0),e&&(yield Promise.all(r.container.getProviders().map(n=>n.delete())),r.isDeleted=!0)})).apply(this,arguments)}function Hr(r,e,t){var n;let s=null!==(n=Pe[r])&&void 0!==n?n:r;t&&(s+=`-${t}`);const l=s.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const h=[`Unable to register library "${s}" with version "${e}":`];return l&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Ht.warn(h.join(" "))}Nt(new er(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function Ga(r,e){if(null!==r&&"function"!=typeof r)throw mr.create("invalid-log-argument");!function li(r,e){for(const t of Pn){let n=null;e&&e.level&&(n=Xi[e.level]),t.userLogHandler=null===r?null:(s,l,...u)=>{const h=u.map(p=>{if(null==p)return null;if("string"==typeof p)return p;if("number"==typeof p||"boolean"==typeof p)return p.toString();if(p instanceof Error)return p.message;try{return JSON.stringify(p)}catch{return null}}).filter(p=>p).join(" ");l>=(null!=n?n:s.logLevel)&&r({level:Nn[l].toLowerCase(),message:h,args:u,type:s.name})}}}(r,e)}function ss(r){!function Ho(r){Pn.forEach(e=>{e.setLogLevel(r)})}(r)}const Wa="firebase-heartbeat-database",Gl=1,Zs="firebase-heartbeat-store";let ga=null;function hl(){return ga||(ga=function ci(r,e,{blocked:t,upgrade:n,blocking:s,terminated:l}={}){const u=indexedDB.open(r,e),h=ni(u);return n&&u.addEventListener("upgradeneeded",p=>{n(ni(u.result),p.oldVersion,p.newVersion,ni(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{l&&p.addEventListener("close",()=>l()),s&&p.addEventListener("versionchange",E=>s(E.oldVersion,E.newVersion,E))}).catch(()=>{}),h}(Wa,Gl,{upgrade:(r,e)=>{if(0===e)try{r.createObjectStore(Zs)}catch(t){console.warn(t)}}}).catch(r=>{throw mr.create("idb-open",{originalErrorMessage:r.message})})),ga}function Eu(){return(Eu=(0,C.A)(function*(r){try{const t=(yield hl()).transaction(Zs),n=yield t.objectStore(Zs).get(Iu(r));return yield t.done,n}catch(e){if(e instanceof gn)Ht.warn(e.message);else{const t=mr.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});Ht.warn(t.message)}}})).apply(this,arguments)}function xc(r,e){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,C.A)(function*(r,e){try{const n=(yield hl()).transaction(Zs,"readwrite");yield n.objectStore(Zs).put(e,Iu(r)),yield n.done}catch(t){if(t instanceof gn)Ht.warn(t.message);else{const n=mr.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});Ht.warn(n.message)}}})).apply(this,arguments)}function Iu(r){return`${r.name}!${r.options.appId}`}class Mc{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Wn(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}triggerHeartbeat(){var e=this;return(0,C.A)(function*(){var t,n;try{const l=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=bu();return null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(e._heartbeatsCache=yield e._heartbeatsCachePromise,null==(null===(n=e._heartbeatsCache)||void 0===n?void 0:n.heartbeats))||e._heartbeatsCache.lastSentHeartbeatDate===u||e._heartbeatsCache.heartbeats.some(h=>h.date===u)?void 0:(e._heartbeatsCache.heartbeats.push({date:u,agent:l}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(h=>{const p=new Date(h.date).valueOf();return Date.now()-p<=2592e6}),e._storage.overwrite(e._heartbeatsCache))}catch(s){Ht.warn(s)}})()}getHeartbeatsHeader(){var e=this;return(0,C.A)(function*(){var t;try{if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const n=bu(),{heartbeatsToSend:s,unsentEntries:l}=function wu(r,e=1024){const t=[];let n=r.slice();for(const s of r){const l=t.find(u=>u.agent===s.agent);if(l){if(l.dates.push(s.date),ma(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),ma(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}(e._heartbeatsCache.heartbeats),u=Ze(JSON.stringify({version:2,heartbeats:s}));return e._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(e._heartbeatsCache.heartbeats=l,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),u}catch(n){return Ht.warn(n),""}})()}}function bu(){return(new Date).toISOString().substring(0,10)}class Wn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,C.A)(function*(){return!!qt()&&function On(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e((null===(l=s.error)||void 0===l?void 0:l.message)||"")}}catch(t){e(t)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,C.A)(function*(){if(yield e._canUseIndexedDBPromise){const n=yield function Di(r){return Eu.apply(this,arguments)}(e.app);return null!=n&&n.heartbeats?n:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var t=this;return(0,C.A)(function*(){var n;if(yield t._canUseIndexedDBPromise){const l=yield t.read();return xc(t.app,{lastSentHeartbeatDate:null!==(n=e.lastSentHeartbeatDate)&&void 0!==n?n:l.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,C.A)(function*(){var n;if(yield t._canUseIndexedDBPromise){const l=yield t.read();return xc(t.app,{lastSentHeartbeatDate:null!==(n=e.lastSentHeartbeatDate)&&void 0!==n?n:l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...e.heartbeats]})}})()}}function ma(r){return Ze(JSON.stringify({version:2,heartbeats:r})).length}!function es(r){Nt(new er("platform-logger",e=>new Ee(e),"PRIVATE")),Nt(new er("heartbeat",e=>new Mc(e),"PRIVATE")),Hr(Se,ze,r),Hr(Se,ze,"esm2017"),Hr("fire-js","")}("");class xg{constructor(e,t){this._delegate=e,this.firebase=t,Lt(e,new er("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),zl(this._delegate)))}_getService(e,t=ve){var n;this._delegate.checkDestroyed();const s=this._delegate.container.getProvider(e);return!s.isInitialized()&&"EXPLICIT"===(null===(n=s.getComponent())||void 0===n?void 0:n.instantiationMode)&&s.initialize(),s.getImmediate({identifier:t})}_removeServiceInstance(e,t=ve){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Lt(this._delegate,e)}_addOrOverwriteComponent(e){Bt(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Wl=new _r("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Sv=function Mg(){const r=function Mr(r){const e={},t={__esModule:!0,initializeApp:function l(E,w={}){const x=Oo(E,w);if(pn(e,x.name))return e[x.name];const G=new r(x,t);return e[x.name]=G,G},app:s,registerVersion:Hr,setLogLevel:ss,onLog:Ga,apps:null,SDK_VERSION:en,INTERNAL:{registerComponent:function h(E){const w=E.name,x=w.replace("-compat","");if(Nt(E)&&"PUBLIC"===E.type){const G=(ce=s())=>{if("function"!=typeof ce[x])throw Wl.create("invalid-app-argument",{appName:w});return ce[x]()};void 0!==E.serviceProps&&nt(G,E.serviceProps),t[x]=G,r.prototype[x]=function(...ce){return this._getService.bind(this,w).apply(this,E.multipleInstances?ce:[])}}return"PUBLIC"===E.type?t[x]:null},removeApp:function n(E){delete e[E]},useAsService:function p(E,w){return"serverAuth"===w?null:w},modularAPIs:_}};function s(E){if(!pn(e,E=E||ve))throw Wl.create("no-app",{appName:E});return e[E]}return t.default=t,Object.defineProperty(t,"apps",{get:function u(){return Object.keys(e).map(E=>e[E])}}),s.App=r,t}(xg);return r.INTERNAL=Object.assign(Object.assign({},r.INTERNAL),{createFirebaseNamespace:Mg,extendNamespace:function e(t){nt(r,t)},createSubscribe:hr,ErrorFactory:_r,deepExtend:nt}),r}(),Ng=new gi("@firebase/app-compat");try{const r=ct();if(void 0!==r.firebase){Ng.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const e=r.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Ng.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const B=Sv;!function kg(r){Hr("@firebase/app-compat","0.2.40",r)}();var M=W(1635);const F={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const br=function Ui(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},qa=function Go(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ka=new _r("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Nc=new gi("@firebase/auth");function ql(r,...e){Nc.logLevel<=Nn.ERROR&&Nc.error(`Auth (${en}): ${r}`,...e)}function Ri(r,...e){throw tr(r,...e)}function Bi(r,...e){return tr(r,...e)}function Kl(r,e,t){const n=Object.assign(Object.assign({},qa()),{[e]:t});return new _r("auth","Firebase",n).create(e,{appName:r.name})}function lo(r){return Kl(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xl(r,e,t){if(!(e instanceof t))throw t.name!==e.constructor.name&&Ri(r,"argument-error"),Kl(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function tr(r,...e){if("string"!=typeof r){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return Ka.create(r,...e)}function tn(r,e,...t){if(!r)throw tr(e,...t)}function Is(r){const e="INTERNAL ASSERTION FAILED: "+r;throw ql(e),new Error(e)}function ea(r,e){r||Is(e)}function ml(){var r;return typeof self<"u"&&(null===(r=self.location)||void 0===r?void 0:r.href)||""}function ff(){return"http:"===Md()||"https:"===Md()}function Md(){var r;return typeof self<"u"&&(null===(r=self.location)||void 0===r?void 0:r.protocol)||null}class Ql{constructor(e,t){this.shortDelay=e,this.longDelay=t,ea(t>e,"Short delay should be less than long delay!"),this.isMobile=Wt()||Y()}get(){return function SI(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ff()||Z()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function pf(r,e){ea(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Cu{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Is("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Is("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Is("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const kc={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},gf=new Ql(3e4,6e4);function di(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}function Pi(r,e,t,n){return ta.apply(this,arguments)}function ta(){return(ta=(0,C.A)(function*(r,e,t,n,s={}){return Yl(r,s,(0,C.A)(function*(){let l={},u={};n&&("GET"===e?u=n:l={body:JSON.stringify(n)});const h=Ir(Object.assign({key:r.config.apiKey},u)).slice(1),p=yield r._getAdditionalHeaders();return p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode),Cu.fetch()(Og(r,r.config.apiHost,t,h),Object.assign({method:e,headers:p,referrerPolicy:"no-referrer"},l))}))})).apply(this,arguments)}function Yl(r,e,t){return Au.apply(this,arguments)}function Au(){return(Au=(0,C.A)(function*(r,e,t){r._canInitEmulator=!1;const n=Object.assign(Object.assign({},kc),e);try{const s=new Pv(r),l=yield Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=yield l.json();if("needConfirmation"in u)throw Tu(r,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const h=l.ok?u.errorMessage:u.error.message,[p,E]=h.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===p)throw Tu(r,"credential-already-in-use",u);if("EMAIL_EXISTS"===p)throw Tu(r,"email-already-in-use",u);if("USER_DISABLED"===p)throw Tu(r,"user-disabled",u);const w=n[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(E)throw Kl(r,w,E);Ri(r,w)}}catch(s){if(s instanceof gn)throw s;Ri(r,"network-request-failed",{message:String(s)})}})).apply(this,arguments)}function Xn(r,e,t,n){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,C.A)(function*(r,e,t,n,s={}){const l=yield Pi(r,e,t,n,s);return"mfaPendingCredential"in l&&Ri(r,"multi-factor-auth-required",{_serverResponse:l}),l})).apply(this,arguments)}function Og(r,e,t,n){const s=`${e}${t}?${n}`;return r.config.emulator?pf(r.config,s):`${r.config.apiScheme}://${s}`}function Rv(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Pv{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Bi(this.auth,"network-request-failed")),gf.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Tu(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const s=Bi(r,e,n);return s.customData._tokenResponse=t,s}function Fg(r){return void 0!==r&&void 0!==r.getResponse}function Nd(r){return void 0!==r&&void 0!==r.enterprise}class Dr{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Rv(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}function _l(){return(_l=(0,C.A)(function*(r){return(yield Pi(r,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function as(r,e){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,C.A)(function*(r,e){return Pi(r,"GET","/v2/recaptchaConfig",di(r,e))})).apply(this,arguments)}function kd(){return(kd=(0,C.A)(function*(r,e){return Pi(r,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function U(){return(U=(0,C.A)(function*(r,e){return Pi(r,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function fe(r,e){return V.apply(this,arguments)}function V(){return(V=(0,C.A)(function*(r,e){return Pi(r,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function ie(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Qt(){return(Qt=(0,C.A)(function*(r,e=!1){const t=Xt(r),n=yield t.getIdToken(e),s=or(n);tn(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l="object"==typeof s.firebase?s.firebase:void 0,u=null==l?void 0:l.sign_in_provider;return{claims:s,token:n,authTime:ie(ir(s.auth_time)),issuedAtTime:ie(ir(s.iat)),expirationTime:ie(ir(s.exp)),signInProvider:u||null,signInSecondFactor:(null==l?void 0:l.sign_in_second_factor)||null}})).apply(this,arguments)}function ir(r){return 1e3*Number(r)}function or(r){const[e,t,n]=r.split(".");if(void 0===e||void 0===t||void 0===n)return ql("JWT malformed, contained fewer than 3 sections"),null;try{const s=ot(t);return s?JSON.parse(s):(ql("Failed to decode base64 JWT payload"),null)}catch(s){return ql("Caught error parsing JWT payload as JSON",null==s?void 0:s.toString()),null}}function Br(r){const e=or(r);return tn(e,"internal-error"),tn(typeof e.exp<"u","internal-error"),tn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Mn(r,e){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,C.A)(function*(r,e,t=!1){if(t)return e;try{return yield e}catch(n){throw n instanceof gn&&function sn({code:r}){return"auth/user-disabled"===r||"auth/user-token-expired"===r}(n)&&r.auth.currentUser===r&&(yield r.auth.signOut()),n}})).apply(this,arguments)}class Hi{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}{this.errorBackoff=3e4;const s=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout((0,C.A)(function*(){yield t.iteration()}),n)}iteration(){var e=this;return(0,C.A)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===(null==t?void 0:t.code)&&e.schedule(!0))}e.schedule()})()}}class Ls{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ie(this.lastLoginAt),this.creationTime=ie(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function xo(r){return xa.apply(this,arguments)}function xa(){return(xa=(0,C.A)(function*(r){var e;const t=r.auth,n=yield r.getIdToken(),s=yield Mn(r,fe(t,{idToken:n}));tn(null==s?void 0:s.users.length,t,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const u=null!==(e=l.providerUserInfo)&&void 0!==e&&e.length?_a(l.providerUserInfo):[],h=function Ma(r,e){return[...r.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}(r.providerData,u),w=!!r.isAnonymous&&!(r.email&&l.passwordHash||null!=h&&h.length),x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new Ls(l.createdAt,l.lastLoginAt),isAnonymous:w};Object.assign(r,x)})).apply(this,arguments)}function bs(){return(bs=(0,C.A)(function*(r){const e=Xt(r);yield xo(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function _a(r){return r.map(e=>{var{providerId:t}=e,n=(0,M.Tt)(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function Du(){return(Du=(0,C.A)(function*(r,e){const t=yield Yl(r,{},(0,C.A)(function*(){const n=Ir({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=r.config,u=Og(r,s,"/v1/token",`key=${l}`),h=yield r._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",Cu.fetch()(u,{method:"POST",headers:h,body:n})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}function vl(){return(vl=(0,C.A)(function*(r,e){return Pi(r,"POST","/v2/accounts:revokeToken",di(r,e))})).apply(this,arguments)}class Ru{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tn(e.idToken,"internal-error"),tn(typeof e.idToken<"u","internal-error"),tn(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Br(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){tn(0!==e.length,"internal-error");const t=Br(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){var n=this;return(0,C.A)(function*(){return t||!n.accessToken||n.isExpired?(tn(n.refreshToken,e,"user-token-expired"),n.refreshToken?(yield n.refresh(e,n.refreshToken),n.accessToken):null):n.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var n=this;return(0,C.A)(function*(){const{accessToken:s,refreshToken:l,expiresIn:u}=yield function Od(r,e){return Du.apply(this,arguments)}(e,t);n.updateTokensAndExpiration(s,l,Number(u))})()}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:s,expirationTime:l}=t,u=new Ru;return n&&(tn("string"==typeof n,"internal-error",{appName:e}),u.refreshToken=n),s&&(tn("string"==typeof s,"internal-error",{appName:e}),u.accessToken=s),l&&(tn("number"==typeof l,"internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ru,this.toJSON())}_performRefresh(){return Is("not implemented")}}function zi(r,e){tn("string"==typeof r||typeof r>"u","internal-error",{appName:e})}class Vs{constructor(e){var{uid:t,auth:n,stsTokenManager:s}=e,l=(0,M.Tt)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Ls(l.createdAt||void 0,l.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,C.A)(function*(){const n=yield Mn(t,t.stsTokenManager.getToken(t.auth,e));return tn(n,t.auth,"internal-error"),t.accessToken!==n&&(t.accessToken=n,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),n})()}getIdTokenResult(e){return function xt(r){return Qt.apply(this,arguments)}(this,e)}reload(){return function Xa(r){return bs.apply(this,arguments)}(this)}_assign(e){this!==e&&(tn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Vs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){tn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var n=this;return(0,C.A)(function*(){let s=!1;e.idToken&&e.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(e),s=!0),t&&(yield xo(n)),yield n.auth._persistUserIfCurrent(n),s&&n.auth._notifyListenersIfCurrent(n)})()}delete(){var e=this;return(0,C.A)(function*(){if(yn(e.auth.app))return Promise.reject(lo(e.auth));const t=yield e.getIdToken();return yield Mn(e,function xv(r,e){return kd.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,s,l,u,h,p,E,w;const x=null!==(n=t.displayName)&&void 0!==n?n:void 0,G=null!==(s=t.email)&&void 0!==s?s:void 0,ce=null!==(l=t.phoneNumber)&&void 0!==l?l:void 0,De=null!==(u=t.photoURL)&&void 0!==u?u:void 0,dt=null!==(h=t.tenantId)&&void 0!==h?h:void 0,lt=null!==(p=t._redirectEventId)&&void 0!==p?p:void 0,ln=null!==(E=t.createdAt)&&void 0!==E?E:void 0,vn=null!==(w=t.lastLoginAt)&&void 0!==w?w:void 0,{uid:cn,emailVerified:An,isAnonymous:Yn,providerData:ar,stsTokenManager:it}=t;tn(cn&&it,e,"internal-error");const Me=Ru.fromJSON(this.name,it);tn("string"==typeof cn,e,"internal-error"),zi(x,e.name),zi(G,e.name),tn("boolean"==typeof An,e,"internal-error"),tn("boolean"==typeof Yn,e,"internal-error"),zi(ce,e.name),zi(De,e.name),zi(dt,e.name),zi(lt,e.name),zi(ln,e.name),zi(vn,e.name);const Be=new Vs({uid:cn,auth:e,email:G,emailVerified:An,displayName:x,isAnonymous:Yn,photoURL:De,phoneNumber:ce,tenantId:dt,stsTokenManager:Me,createdAt:ln,lastLoginAt:vn});return ar&&Array.isArray(ar)&&(Be.providerData=ar.map(st=>Object.assign({},st))),lt&&(Be._redirectEventId=lt),Be}static _fromIdTokenResponse(e,t,n=!1){return(0,C.A)(function*(){const s=new Ru;s.updateFromServerResponse(t);const l=new Vs({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:n});return yield xo(l),l})()}static _fromGetAccountInfoResponse(e,t,n){return(0,C.A)(function*(){const s=t.users[0];tn(void 0!==s.localId,"internal-error");const l=void 0!==s.providerUserInfo?_a(s.providerUserInfo):[],u=!(s.email&&s.passwordHash||null!=l&&l.length),h=new Ru;h.updateFromIdToken(n);const p=new Vs({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:u}),E={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Ls(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash||null!=l&&l.length)};return Object.assign(p,E),p})()}}const Lg=new Map;function ts(r){ea(r instanceof Function,"Expected a class definition");let e=Lg.get(r);return e?(ea(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Lg.set(r,e),e)}const Oc=(()=>{class r{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,C.A)(function*(){return!0})()}_set(t,n){var s=this;return(0,C.A)(function*(){s.storage[t]=n})()}_get(t){var n=this;return(0,C.A)(function*(){const s=n.storage[t];return void 0===s?null:s})()}_remove(t){var n=this;return(0,C.A)(function*(){delete n.storage[t]})()}_addListener(t,n){}_removeListener(t,n){}}return r.type="NONE",r})();function Pu(r,e,t){return`firebase:${r}:${e}:${t}`}class yl{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:s,name:l}=this.auth;this.fullUserKey=Pu(this.userKey,s.apiKey,l),this.fullPersistenceKey=Pu("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,C.A)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?Vs._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,C.A)(function*(){if(t.persistence===e)return;const n=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,n?t.setCurrentUser(n):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,n="authUser"){return(0,C.A)(function*(){if(!t.length)return new yl(ts(Oc),e,n);const s=(yield Promise.all(t.map(function(){var E=(0,C.A)(function*(w){if(yield w._isAvailable())return w});return function(w){return E.apply(this,arguments)}}()))).filter(E=>E);let l=s[0]||ts(Oc);const u=Pu(n,e.config.apiKey,e.name);let h=null;for(const E of t)try{const w=yield E._get(u);if(w){const x=Vs._fromJSON(e,w);E!==l&&(h=x),l=E;break}}catch{}const p=s.filter(E=>E._shouldAllowMigration);return l._shouldAllowMigration&&p.length?(l=p[0],h&&(yield l._set(u,h.toJSON())),yield Promise.all(t.map(function(){var E=(0,C.A)(function*(w){if(w!==l)try{yield w._remove(u)}catch{}});return function(w){return E.apply(this,arguments)}}())),new yl(l,e,n)):new yl(l,e,n)})()}}function Mv(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(RI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(na(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Qa(e))return"Blackberry";if(Yr(e))return"Webos";if(Fd(e))return"Safari";if((e.includes("chrome/")||ls(e))&&!e.includes("edge/"))return"Chrome";if(Ld(e))return"Android";{const n=r.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function na(r=Gt()){return/firefox\//i.test(r)}function Fd(r=Gt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ls(r=Gt()){return/crios\//i.test(r)}function RI(r=Gt()){return/iemobile/i.test(r)}function Ld(r=Gt()){return/android/i.test(r)}function Qa(r=Gt()){return/blackberry/i.test(r)}function Yr(r=Gt()){return/webos/i.test(r)}function cs(r=Gt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Ud(r=Gt()){return cs(r)||Ld(r)||Yr(r)||Qa(r)||/windows phone/i.test(r)||RI(r)}function Jl(r,e=[]){let t;switch(r){case"Browser":t=Mv(Gt());break;case"Worker":t=`${Mv(Gt())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${en}/${n}`}class El{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=l=>new Promise((u,h)=>{try{u(e(l))}catch(p){h(p)}});n.onAbort=t,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,C.A)(function*(){if(t.auth.currentUser===e)return;const n=[];try{for(const s of t.queue)yield s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:null==s?void 0:s.message})}})()}}function _f(){return(_f=(0,C.A)(function*(r,e={}){return Pi(r,"GET","/v2/passwordPolicy",di(r,e))})).apply(this,arguments)}class MI{constructor(e){var t,n,s,l;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=u.minPasswordLength)&&void 0!==t?t:6,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),void 0!==u.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),void 0!==u.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),void 0!==u.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),void 0!==u.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(s=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==s?s:"",this.forceUpgradeOnSignin=null!==(l=e.forceUpgradeOnSignin)&&void 0!==l&&l,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,s,l,u,h;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=null===(t=p.meetsMinPasswordLength)||void 0===t||t),p.isValid&&(p.isValid=null===(n=p.meetsMaxPasswordLength)||void 0===n||n),p.isValid&&(p.isValid=null===(s=p.containsLowercaseLetter)||void 0===s||s),p.isValid&&(p.isValid=null===(l=p.containsUppercaseLetter)||void 0===l||l),p.isValid&&(p.isValid=null===(u=p.containsNumericCharacter)||void 0===u||u),p.isValid&&(p.isValid=null===(h=p.containsNonAlphanumericCharacter)||void 0===h||h),p}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class Bd{constructor(e,t,n,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nv(this),this.idTokenSubscription=new Nv(this),this.beforeStateQueue=new El(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ka,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){var n=this;return t&&(this._popupRedirectResolver=ts(t)),this._initializationPromise=this.queue((0,C.A)(function*(){var s,l;if(!n._deleted&&(n.persistenceManager=yield yl.create(n,e),!n._deleted)){if(null!==(s=n._popupRedirectResolver)&&void 0!==s&&s._shouldInitProactively)try{yield n._popupRedirectResolver._initialize(n)}catch{}yield n.initializeCurrentUser(t),n.lastNotifiedUid=(null===(l=n.currentUser)||void 0===l?void 0:l.uid)||null,!n._deleted&&(n._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,C.A)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUserFromIdToken(e){var t=this;return(0,C.A)(function*(){try{const n=yield fe(t,{idToken:e}),s=yield Vs._fromGetAccountInfoResponse(t,n,e);yield t.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield t.directlySetCurrentUser(null)}})()}initializeCurrentUser(e){var t=this;return(0,C.A)(function*(){var n;if(yn(t.app)){const h=t.app.settings.authIdToken;return h?new Promise(p=>{setTimeout(()=>t.initializeCurrentUserFromIdToken(h).then(p,p))}):t.directlySetCurrentUser(null)}const s=yield t.assertedPersistence.getCurrentUser();let l=s,u=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const h=null===(n=t.redirectUser)||void 0===n?void 0:n._redirectEventId,p=null==l?void 0:l._redirectEventId,E=yield t.tryRedirectSignIn(e);(!h||h===p)&&null!=E&&E.user&&(l=E.user,u=!0)}if(!l)return t.directlySetCurrentUser(null);if(!l._redirectEventId){if(u)try{yield t.beforeStateQueue.runMiddleware(l)}catch(h){l=s,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(h))}return l?t.reloadAndSetCurrentUserOrClear(l):t.directlySetCurrentUser(null)}return tn(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===l._redirectEventId?t.directlySetCurrentUser(l):t.reloadAndSetCurrentUserOrClear(l)})()}tryRedirectSignIn(e){var t=this;return(0,C.A)(function*(){let n=null;try{n=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return n})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,C.A)(function*(){try{yield xo(e)}catch(n){if("auth/network-request-failed"!==(null==n?void 0:n.code))return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function DI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}()}_delete(){var e=this;return(0,C.A)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,C.A)(function*(){if(yn(t.app))return Promise.reject(lo(t));const n=e?Xt(e):null;return n&&tn(n.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(n&&n._clone(t))})()}_updateCurrentUser(e,t=!1){var n=this;return(0,C.A)(function*(){if(!n._deleted)return e&&tn(n.tenantId===e.tenantId,n,"tenant-id-mismatch"),t||(yield n.beforeStateQueue.runMiddleware(e)),n.queue((0,C.A)(function*(){yield n.directlySetCurrentUser(e),n.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,C.A)(function*(){return yn(e.app)?Promise.reject(lo(e)):(yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0))})()}setPersistence(e){var t=this;return yn(this.app)?Promise.reject(lo(this)):this.queue((0,C.A)(function*(){yield t.assertedPersistence.setPersistence(ts(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var t=this;return(0,C.A)(function*(){t._getPasswordPolicyInternal()||(yield t._updatePasswordPolicy());const n=t._getPasswordPolicyInternal();return n.schemaVersion!==t.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(t._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return(0,C.A)(function*(){const t=yield function PI(r){return _f.apply(this,arguments)}(e),n=new MI(t);null===e.tenantId?e._projectPasswordPolicy=n:e._tenantPasswordPolicies[e.tenantId]=n})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new _r("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}revokeAccessToken(e){var t=this;return(0,C.A)(function*(){if(t.currentUser){const n=yield t.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};null!=t.tenantId&&(s.tenantId=t.tenantId),yield function Na(r,e){return vl.apply(this,arguments)}(t,s)}})()}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var n=this;return(0,C.A)(function*(){const s=yield n.getOrInitRedirectPersistenceManager(t);return null===e?s.removeCurrentUser():s.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,C.A)(function*(){if(!t.redirectPersistenceManager){const n=e&&ts(e)||t._popupRedirectResolver;tn(n,t,"argument-error"),t.redirectPersistenceManager=yield yl.create(t,[ts(n._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,C.A)(function*(){var n,s;return t._isInitialized&&(yield t.queue((0,C.A)(function*(){}))),(null===(n=t._currentUser)||void 0===n?void 0:n._redirectEventId)===e?t._currentUser:(null===(s=t.redirectUser)||void 0===s?void 0:s._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,C.A)(function*(){if(e===t.currentUser)return t.queue((0,C.A)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,s){if(this._deleted)return()=>{};const l="function"==typeof t?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(tn(h,this,"internal-error"),h.then(()=>{u||l(this.currentUser)}),"function"==typeof t){const p=e.addObserver(t,n,s);return()=>{u=!0,p()}}{const p=e.addObserver(t);return()=>{u=!0,p()}}}directlySetCurrentUser(e){var t=this;return(0,C.A)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Jl(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,C.A)(function*(){var t;const n={"X-Client-Version":e.clientVersion};e.app.options.appId&&(n["X-Firebase-gmpid"]=e.app.options.appId);const s=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();s&&(n["X-Firebase-Client"]=s);const l=yield e._getAppCheckToken();return l&&(n["X-Firebase-AppCheck"]=l),n})()}_getAppCheckToken(){var e=this;return(0,C.A)(function*(){var t;const n=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return null!=n&&n.error&&function xd(r,...e){Nc.logLevel<=Nn.WARN&&Nc.warn(`Auth (${en}): ${r}`,...e)}(`Error while retrieving App Check token: ${n.error}`),null==n?void 0:n.token})()}}function ki(r){return Xt(r)}class Nv{constructor(e){this.auth=e,this.observer=null,this.addObserver=hr(t=>this.observer=t)}get next(){return tn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let xu={loadJS:()=>(0,C.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $g(r){return xu.loadJS(r)}function jg(r){return`__${r}${Math.floor(1e6*Math.random())}`}class Ov{constructor(e){this.type="recaptcha-enterprise",this.auth=ki(e)}verify(e="verify",t=!1){var n=this;return(0,C.A)(function*(){function l(){return l=(0,C.A)(function*(h){if(!t){if(null==h.tenantId&&null!=h._agentRecaptchaConfig)return h._agentRecaptchaConfig.siteKey;if(null!=h.tenantId&&void 0!==h._tenantRecaptchaConfigs[h.tenantId])return h._tenantRecaptchaConfigs[h.tenantId].siteKey}return new Promise(function(){var p=(0,C.A)(function*(E,w){as(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(x=>{if(void 0!==x.recaptchaKey){const G=new Dr(x);return null==h.tenantId?h._agentRecaptchaConfig=G:h._tenantRecaptchaConfigs[h.tenantId]=G,E(G.siteKey)}w(new Error("recaptcha Enterprise site key undefined"))}).catch(x=>{w(x)})});return function(E,w){return p.apply(this,arguments)}}())}),l.apply(this,arguments)}function u(h,p,E){const w=window.grecaptcha;Nd(w)?w.enterprise.ready(()=>{w.enterprise.execute(h,{action:e}).then(x=>{p(x)}).catch(()=>{p("NO_RECAPTCHA")})}):E(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((h,p)=>{(function s(h){return l.apply(this,arguments)})(n.auth).then(E=>{if(!t&&Nd(window.grecaptcha))u(E,h,p);else{if(typeof window>"u")return void p(new Error("RecaptchaVerifier is only supported in browser"));let w=function ka(){return xu.recaptchaEnterpriseScript}();0!==w.length&&(w+=E),$g(w).then(()=>{u(E,h,p)}).catch(x=>{p(x)})}}).catch(E=>{p(E)})})})()}}function FI(r,e,t){return Hg.apply(this,arguments)}function Hg(){return(Hg=(0,C.A)(function*(r,e,t,n=!1){const s=new Ov(r);let l;try{l=yield s.verify(t)}catch{l=yield s.verify(t,!0)}const u=Object.assign({},e);return Object.assign(u,n?{captchaResp:l}:{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u})).apply(this,arguments)}function vf(r,e,t,n){return Fv.apply(this,arguments)}function Fv(){return Fv=(0,C.A)(function*(r,e,t,n){var s;if(null!==(s=r._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=yield FI(r,e,t,"getOobCode"===t);return n(r,l)}return n(r,e).catch(function(){var l=(0,C.A)(function*(u){if("auth/missing-recaptcha-token"===u.code){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=yield FI(r,e,t,"getOobCode"===t);return n(r,h)}return Promise.reject(u)});return function(u){return l.apply(this,arguments)}}())}),Fv.apply(this,arguments)}function T(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function ee(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}class Ue{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Is("not implemented")}_getIdTokenResponse(e){return Is("not implemented")}_linkToIdToken(e,t){return Is("not implemented")}_getReauthenticationResolver(e){return Is("not implemented")}}function Et(r,e){return Je.apply(this,arguments)}function Je(){return(Je=(0,C.A)(function*(r,e){return Pi(r,"POST","/v1/accounts:resetPassword",di(r,e))})).apply(this,arguments)}function Kn(){return(Kn=(0,C.A)(function*(r,e){return Pi(r,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function zr(r,e){return sr.apply(this,arguments)}function sr(){return(sr=(0,C.A)(function*(r,e){return Pi(r,"POST","/v1/accounts:signUp",e)})).apply(this,arguments)}function us(){return(us=(0,C.A)(function*(r,e){return Pi(r,"POST","/v1/accounts:update",di(r,e))})).apply(this,arguments)}function ds(r,e){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,C.A)(function*(r,e){return Xn(r,"POST","/v1/accounts:signInWithPassword",di(r,e))})).apply(this,arguments)}function ns(r,e){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,C.A)(function*(r,e){return Pi(r,"POST","/v1/accounts:sendOobCode",di(r,e))})).apply(this,arguments)}function yf(){return(yf=(0,C.A)(function*(r,e){return ns(r,e)})).apply(this,arguments)}function Gg(r,e){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,C.A)(function*(r,e){return ns(r,e)})).apply(this,arguments)}function LI(r,e){return Lv.apply(this,arguments)}function Lv(){return(Lv=(0,C.A)(function*(r,e){return ns(r,e)})).apply(this,arguments)}function Vc(){return(Vc=(0,C.A)(function*(r,e){return ns(r,e)})).apply(this,arguments)}function Wg(){return(Wg=(0,C.A)(function*(r,e){return Xn(r,"POST","/v1/accounts:signInWithEmailLink",di(r,e))})).apply(this,arguments)}function VI(){return(VI=(0,C.A)(function*(r,e){return Xn(r,"POST","/v1/accounts:signInWithEmailLink",di(r,e))})).apply(this,arguments)}class $d extends Ue{constructor(e,t,n,s=null){super("password",n),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new $d(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new $d(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if(null!=t&&t.email&&null!=t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return(0,C.A)(function*(){switch(t.signInMethod){case"password":return vf(e,{returnSecureToken:!0,email:t._email,password:t._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ds);case"emailLink":return function OM(r,e){return Wg.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:Ri(e,"internal-error")}})()}_linkToIdToken(e,t){var n=this;return(0,C.A)(function*(){switch(n.signInMethod){case"password":return vf(e,{idToken:t,returnSecureToken:!0,email:n._email,password:n._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zr);case"emailLink":return function Vv(r,e){return VI.apply(this,arguments)}(e,{idToken:t,email:n._email,oobCode:n._password});default:Ri(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function Ya(r,e){return va.apply(this,arguments)}function va(){return(va=(0,C.A)(function*(r,e){return Xn(r,"POST","/v1/accounts:signInWithIdp",di(r,e))})).apply(this,arguments)}class Ja extends Ue{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ja(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ri("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:s}=t,l=(0,M.Tt)(t,["providerId","signInMethod"]);if(!n||!s)return null;const u=new Ja(n,s);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){return Ya(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ya(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ya(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ir(t)}return e}}function UI(){return(UI=(0,C.A)(function*(r,e){return Pi(r,"POST","/v1/accounts:sendVerificationCode",di(r,e))})).apply(this,arguments)}function ku(){return(ku=(0,C.A)(function*(r,e){return Xn(r,"POST","/v1/accounts:signInWithPhoneNumber",di(r,e))})).apply(this,arguments)}function BI(){return(BI=(0,C.A)(function*(r,e){const t=yield Xn(r,"POST","/v1/accounts:signInWithPhoneNumber",di(r,e));if(t.temporaryProof)throw Tu(r,"account-exists-with-different-credential",t);return t})).apply(this,arguments)}const VM={USER_NOT_FOUND:"user-not-found"};function Uv(){return(Uv=(0,C.A)(function*(r,e){return Xn(r,"POST","/v1/accounts:signInWithPhoneNumber",di(r,Object.assign(Object.assign({},e),{operation:"REAUTH"})),VM)})).apply(this,arguments)}class Ou extends Ue{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ou({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ou({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return function KT(r,e){return ku.apply(this,arguments)}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return function LM(r,e){return BI.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return function $I(r,e){return Uv.apply(this,arguments)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:s}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:s,temporaryProof:l}=e;return n||t||s||l?new Ou({verificationId:t,verificationCode:n,phoneNumber:s,temporaryProof:l}):null}}class qg{constructor(e){var t,n,s,l,u,h;const p=Rr(ei(e)),E=null!==(t=p.apiKey)&&void 0!==t?t:null,w=null!==(n=p.oobCode)&&void 0!==n?n:null,x=function Bv(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(s=p.mode)&&void 0!==s?s:null);tn(E&&w&&x,"argument-error"),this.apiKey=E,this.operation=x,this.code=w,this.continueUrl=null!==(l=p.continueUrl)&&void 0!==l?l:null,this.languageCode=null!==(u=p.languageCode)&&void 0!==u?u:null,this.tenantId=null!==(h=p.tenantId)&&void 0!==h?h:null}static parseLink(e){const t=function If(r){const e=Rr(ei(r)).link,t=e?Rr(ei(e)).deep_link_id:null,n=Rr(ei(r)).deep_link_id;return(n?Rr(ei(n)).link:null)||n||t||e||r}(e);try{return new qg(t)}catch{return null}}}let Fo=(()=>{class r{constructor(){this.providerId=r.PROVIDER_ID}static credential(t,n){return $d._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const s=qg.parseLink(n);return tn(s,"argument-error"),$d._fromEmailAndCode(t,s.code,s.tenantId)}}return r.PROVIDER_ID="password",r.EMAIL_PASSWORD_SIGN_IN_METHOD="password",r.EMAIL_LINK_SIGN_IN_METHOD="emailLink",r})();class Zl{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class bf extends Zl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ec extends bf{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return tn("providerId"in t&&"signInMethod"in t,"argument-error"),Ja._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return tn(e.idToken||e.accessToken,"argument-error"),Ja._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ec.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ec.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:s,pendingToken:l,nonce:u,providerId:h}=e;if(!n&&!s&&!t&&!l||!h)return null;try{return new ec(h)._credential({idToken:t,accessToken:n,nonce:u,pendingToken:l})}catch{return null}}}let XT=(()=>{class r extends bf{constructor(){super("facebook.com")}static credential(t){return Ja._fromParams({providerId:r.PROVIDER_ID,signInMethod:r.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return r.credentialFromTaggedObject(t)}static credentialFromError(t){return r.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return r.credential(t.oauthAccessToken)}catch{return null}}}return r.FACEBOOK_SIGN_IN_METHOD="facebook.com",r.PROVIDER_ID="facebook.com",r})(),QT=(()=>{class r extends bf{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Ja._fromParams({providerId:r.PROVIDER_ID,signInMethod:r.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return r.credentialFromTaggedObject(t)}static credentialFromError(t){return r.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return r.credential(n,s)}catch{return null}}}return r.GOOGLE_SIGN_IN_METHOD="google.com",r.PROVIDER_ID="google.com",r})(),YT=(()=>{class r extends bf{constructor(){super("github.com")}static credential(t){return Ja._fromParams({providerId:r.PROVIDER_ID,signInMethod:r.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return r.credentialFromTaggedObject(t)}static credentialFromError(t){return r.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return r.credential(t.oauthAccessToken)}catch{return null}}}return r.GITHUB_SIGN_IN_METHOD="github.com",r.PROVIDER_ID="github.com",r})();class wf extends Ue{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Ya(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ya(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ya(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:s,pendingToken:l}=t;return n&&s&&l&&n===s?new wf(n,l):null}static _create(e,t){return new wf(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Cf extends Zl{constructor(e){tn(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Cf.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Cf.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=wf.fromJSON(e);return tn(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return wf._create(n,t)}catch{return null}}}let Kg=(()=>{class r extends bf{constructor(){super("twitter.com")}static credential(t,n){return Ja._fromParams({providerId:r.PROVIDER_ID,signInMethod:r.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return r.credentialFromTaggedObject(t)}static credentialFromError(t){return r.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return r.credential(n,s)}catch{return null}}}return r.TWITTER_SIGN_IN_METHOD="twitter.com",r.PROVIDER_ID="twitter.com",r})();function Ji(r,e){return an.apply(this,arguments)}function an(){return(an=(0,C.A)(function*(r,e){return Xn(r,"POST","/v1/accounts:signUp",di(r,e))})).apply(this,arguments)}class kn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,n,s=!1){return(0,C.A)(function*(){const l=yield Vs._fromIdTokenResponse(e,n,s),u=Lo(n);return new kn({user:l,providerId:u,_tokenResponse:n,operationType:t})})()}static _forOperation(e,t,n){return(0,C.A)(function*(){yield e._updateTokensIfNecessary(n,!0);const s=Lo(n);return new kn({user:e,providerId:s,_tokenResponse:n,operationType:t})})()}}function Lo(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}function rs(){return(rs=(0,C.A)(function*(r){var e;if(yn(r.app))return Promise.reject(lo(r));const t=ki(r);if(yield t._initializationPromise,null!==(e=t.currentUser)&&void 0!==e&&e.isAnonymous)return new kn({user:t.currentUser,providerId:null,operationType:"signIn"});const n=yield Ji(t,{returnSecureToken:!0}),s=yield kn._fromIdTokenResponse(t,"signIn",n,!0);return yield t._updateCurrentUser(s.user),s})).apply(this,arguments)}class hs extends gn{constructor(e,t,n,s){var l;super(t.code,t.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,hs.prototype),this.customData={appName:e.name,tenantId:null!==(l=e.tenantId)&&void 0!==l?l:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,s){return new hs(e,t,n,s)}}function Fu(r,e,t,n){return("reauthenticate"===e?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw"auth/multi-factor-auth-required"===l.code?hs._fromErrorAndOperation(r,l,e,n):l})}function $i(r){return new Set(r.map(({providerId:e})=>e).filter(e=>!!e))}function Za(){return Za=(0,C.A)(function*(r,e){const t=Xt(r);yield Xg(!0,t,e);const{providerUserInfo:n}=yield function D(r,e){return U.apply(this,arguments)}(t.auth,{idToken:yield t.getIdToken(),deleteProvider:[e]}),s=$i(n||[]);return t.providerData=t.providerData.filter(l=>s.has(l.providerId)),s.has("phone")||(t.phoneNumber=null),yield t.auth._persistUserIfCurrent(t),t}),Za.apply(this,arguments)}function ur(r,e){return jd.apply(this,arguments)}function jd(){return(jd=(0,C.A)(function*(r,e,t=!1){const n=yield Mn(r,e._linkToIdToken(r.auth,yield r.getIdToken()),t);return kn._forOperation(r,"link",n)})).apply(this,arguments)}function Xg(r,e,t){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,C.A)(function*(r,e,t){yield xo(e);const s=!1===r?"provider-already-linked":"no-such-provider";tn($i(e.providerData).has(t)===r,e.auth,s)})).apply(this,arguments)}function Zi(r,e){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,C.A)(function*(r,e,t=!1){const{auth:n}=r;if(yn(n.app))return Promise.reject(lo(n));const s="reauthenticate";try{const l=yield Mn(r,Fu(n,s,e,r),t);tn(l.idToken,n,"internal-error");const u=or(l.idToken);tn(u,n,"internal-error");const{sub:h}=u;return tn(r.uid===h,n,"user-mismatch"),kn._forOperation(r,s,l)}catch(l){throw"auth/user-not-found"===(null==l?void 0:l.code)&&Ri(n,"user-mismatch"),l}})).apply(this,arguments)}function Hd(r,e){return el.apply(this,arguments)}function el(){return(el=(0,C.A)(function*(r,e,t=!1){if(yn(r.app))return Promise.reject(lo(r));const n="signIn",s=yield Fu(r,n,e),l=yield kn._fromIdTokenResponse(r,n,s);return t||(yield r._updateCurrentUser(l.user)),l})).apply(this,arguments)}function Bc(r,e){return $v.apply(this,arguments)}function $v(){return($v=(0,C.A)(function*(r,e){return Hd(ki(r),e)})).apply(this,arguments)}function $c(r,e){return zd.apply(this,arguments)}function zd(){return(zd=(0,C.A)(function*(r,e){const t=Xt(r);return yield Xg(!1,t,e.providerId),ur(t,e)})).apply(this,arguments)}function Oa(r,e){return jn.apply(this,arguments)}function jn(){return(jn=(0,C.A)(function*(r,e){return Zi(Xt(r),e)})).apply(this,arguments)}function Gd(){return(Gd=(0,C.A)(function*(r,e){return Xn(r,"POST","/v1/accounts:signInWithCustomToken",di(r,e))})).apply(this,arguments)}function Af(){return Af=(0,C.A)(function*(r,e){if(yn(r.app))return Promise.reject(lo(r));const t=ki(r),n=yield function jI(r,e){return Gd.apply(this,arguments)}(t,{token:e,returnSecureToken:!0}),s=yield kn._fromIdTokenResponse(t,"signIn",n);return yield t._updateCurrentUser(s.user),s}),Af.apply(this,arguments)}class nc{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?mo._fromServerResponse(e,t):"totpInfo"in t?Tf._fromServerResponse(e,t):Ri(e,"internal-error")}}class mo extends nc{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new mo(t)}}class Tf extends nc{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Tf(t)}}function Vo(r,e,t){var n;tn((null===(n=t.url)||void 0===n?void 0:n.length)>0,r,"invalid-continue-uri"),tn(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,r,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(tn(t.iOS.bundleId.length>0,r,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(tn(t.android.packageName.length>0,r,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function fs(r){return Qg.apply(this,arguments)}function Qg(){return(Qg=(0,C.A)(function*(r){const e=ki(r);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})).apply(this,arguments)}function Sf(){return(Sf=(0,C.A)(function*(r,e,t){const n=ki(r),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Vo(n,s,t),yield vf(n,s,"getOobCode",Gg)})).apply(this,arguments)}function qd(){return qd=(0,C.A)(function*(r,e,t){yield Et(Xt(r),{oobCode:e,newPassword:t}).catch(function(){var n=(0,C.A)(function*(s){throw"auth/password-does-not-meet-requirements"===s.code&&fs(r),s});return function(s){return n.apply(this,arguments)}}())}),qd.apply(this,arguments)}function HI(){return HI=(0,C.A)(function*(r,e){yield function co(r,e){return us.apply(this,arguments)}(Xt(r),{oobCode:e})}),HI.apply(this,arguments)}function jv(r,e){return Hv.apply(this,arguments)}function Hv(){return(Hv=(0,C.A)(function*(r,e){const t=Xt(r),n=yield Et(t,{oobCode:e}),s=n.requestType;switch(tn(s,t,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":tn(n.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":tn(n.mfaInfo,t,"internal-error");default:tn(n.email,t,"internal-error")}let l=null;return n.mfaInfo&&(l=nc._fromServerResponse(ki(t),n.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===n.requestType?n.newEmail:n.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===n.requestType?n.email:n.newEmail)||null,multiFactorInfo:l},operation:s}})).apply(this,arguments)}function Yg(){return(Yg=(0,C.A)(function*(r,e){const{data:t}=yield jv(Xt(r),e);return t.email})).apply(this,arguments)}function JT(){return(JT=(0,C.A)(function*(r,e,t){if(yn(r.app))return Promise.reject(lo(r));const n=ki(r),u=yield vf(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ji).catch(p=>{throw"auth/password-does-not-meet-requirements"===p.code&&fs(r),p}),h=yield kn._fromIdTokenResponse(n,"signIn",u);return yield n._updateCurrentUser(h.user),h})).apply(this,arguments)}function ZT(){return(ZT=(0,C.A)(function*(r,e,t){const n=ki(r),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};(function l(u,h){tn(h.handleCodeInApp,n,"argument-error"),h&&Vo(n,u,h)})(s,t),yield vf(n,s,"getOobCode",LI)})).apply(this,arguments)}function eS(){return(eS=(0,C.A)(function*(r,e,t){if(yn(r.app))return Promise.reject(lo(r));const n=Xt(r),s=Fo.credentialWithLink(e,t||ml());return tn(s._tenantId===(n.tenantId||null),n,"tenant-id-mismatch"),Bc(n,s)})).apply(this,arguments)}function tS(){return(tS=(0,C.A)(function*(r,e){return Pi(r,"POST","/v1/accounts:createAuthUri",di(r,e))})).apply(this,arguments)}function nS(){return nS=(0,C.A)(function*(r,e){const n={identifier:e,continueUri:ff()?ml():"http://localhost"},{signinMethods:s}=yield function r2(r,e){return tS.apply(this,arguments)}(Xt(r),n);return s||[]}),nS.apply(this,arguments)}function zv(){return zv=(0,C.A)(function*(r,e){const t=Xt(r),s={requestType:"VERIFY_EMAIL",idToken:yield r.getIdToken()};e&&Vo(t.auth,s,e);const{email:l}=yield function Mu(r,e){return yf.apply(this,arguments)}(t.auth,s);l!==r.email&&(yield r.reload())}),zv.apply(this,arguments)}function iS(){return iS=(0,C.A)(function*(r,e,t){const n=Xt(r),l={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield r.getIdToken(),newEmail:e};t&&Vo(n.auth,l,t);const{email:u}=yield function qT(r,e){return Vc.apply(this,arguments)}(n.auth,l);u!==r.email&&(yield r.reload())}),iS.apply(this,arguments)}function oS(){return(oS=(0,C.A)(function*(r,e){return Pi(r,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function Gv(){return Gv=(0,C.A)(function*(r,{displayName:e,photoURL:t}){if(void 0===e&&void 0===t)return;const n=Xt(r),l={idToken:yield n.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=yield Mn(n,function s2(r,e){return oS.apply(this,arguments)}(n.auth,l));n.displayName=u.displayName||null,n.photoURL=u.photoUrl||null;const h=n.providerData.find(({providerId:p})=>"password"===p);h&&(h.displayName=n.displayName,h.photoURL=n.photoURL),yield n._updateTokensIfNecessary(u)}),Gv.apply(this,arguments)}function aS(r,e,t){return GI.apply(this,arguments)}function GI(){return GI=(0,C.A)(function*(r,e,t){const{auth:n}=r,l={idToken:yield r.getIdToken(),returnSecureToken:!0};e&&(l.email=e),t&&(l.password=t);const u=yield Mn(r,function on(r,e){return Kn.apply(this,arguments)}(n,l));yield r._updateTokensIfNecessary(u,!0)}),GI.apply(this,arguments)}class Kd{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class cS extends Kd{constructor(e,t,n,s){super(e,t,n),this.username=s}}class WI extends Kd{constructor(e,t){super(e,"facebook.com",t)}}class zM extends cS{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class rc extends Kd{constructor(e,t){super(e,"google.com",t)}}class uS extends cS{constructor(e,t,n){super(e,"twitter.com",t,n)}}function dS(r){const{user:e,_tokenResponse:t}=r;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:function lS(r){var e,t;if(!r)return null;const{providerId:n}=r,s=r.rawUserInfo?JSON.parse(r.rawUserInfo):{},l=r.isNewUser||"identitytoolkit#SignupNewUserResponse"===r.kind;if(!n&&null!=r&&r.idToken){const u=null===(t=null===(e=or(r.idToken))||void 0===e?void 0:e.firebase)||void 0===t?void 0:t.sign_in_provider;if(u)return new Kd(l,"anonymous"!==u&&"custom"!==u?u:null)}if(!n)return null;switch(n){case"facebook.com":return new WI(l,s);case"github.com":return new zM(l,s);case"google.com":return new rc(l,s);case"twitter.com":return new uS(l,s,r.screenName||null);case"custom":case"anonymous":return new Kd(l,null);default:return new Kd(l,n,s)}}(t)}class Vu{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new Vu("enroll",e,t)}static _fromMfaPendingCredential(e){return new Vu("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null!=e&&e.multiFactorSession){if(null!==(t=e.multiFactorSession)&&void 0!==t&&t.pendingCredential)return Vu._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null!==(n=e.multiFactorSession)&&void 0!==n&&n.idToken)return Vu._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Kv{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=ki(e),s=t.customData._serverResponse,l=(s.mfaInfo||[]).map(h=>nc._fromServerResponse(n,h));tn(s.mfaPendingCredential,n,"internal-error");const u=Vu._fromMfaPendingCredential(s.mfaPendingCredential);return new Kv(u,l,function(){var h=(0,C.A)(function*(p){const E=yield p._process(n,u);delete s.mfaInfo,delete s.mfaPendingCredential;const w=Object.assign(Object.assign({},s),{idToken:E.idToken,refreshToken:E.refreshToken});switch(t.operationType){case"signIn":const x=yield kn._fromIdTokenResponse(n,t.operationType,w);return yield n._updateCurrentUser(x.user),x;case"reauthenticate":return tn(t.user,n,"internal-error"),kn._forOperation(t.user,t.operationType,w);default:Ri(n,"internal-error")}});return function(p){return h.apply(this,arguments)}}())}resolveSignIn(e){var t=this;return(0,C.A)(function*(){return t.signInResolver(e)})()}}class dr{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(n=>nc._fromServerResponse(e.auth,n)))})}static _fromUser(e){return new dr(e)}getSession(){var e=this;return(0,C.A)(function*(){return Vu._fromIdtoken(yield e.user.getIdToken(),e.user)})()}enroll(e,t){var n=this;return(0,C.A)(function*(){const s=e,l=yield n.getSession(),u=yield Mn(n.user,s._process(n.user.auth,l,t));return yield n.user._updateTokensIfNecessary(u),n.user.reload()})()}unenroll(e){var t=this;return(0,C.A)(function*(){const n="string"==typeof e?e:e.uid,s=yield t.user.getIdToken();try{const l=yield Mn(t.user,function jc(r,e){return Pi(r,"POST","/v2/accounts/mfaEnrollment:withdraw",di(r,e))}(t.user.auth,{idToken:s,mfaEnrollmentId:n}));t.enrolledFactors=t.enrolledFactors.filter(({uid:u})=>u!==n),yield t.user._updateTokensIfNecessary(l),yield t.user.reload()}catch(l){throw l}})()}}const Rf=new WeakMap,em="__sak";class WM{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(em,"1"),this.storage.removeItem(em),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const tm=(()=>{class r extends WM{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ud(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&t(n,l,s)}}onStorageEvent(t,n=!1){if(!t.key)return void this.forAllChangedKeys((h,p,E)=>{this.notifyListeners(h,E)});const s=t.key;n?this.detachListener():this.stopPolling();const l=()=>{const h=this.storage.getItem(s);!n&&this.localCache[s]===h||this.notifyListeners(s,h)},u=this.storage.getItem(s);!function mf(){return Ie()&&10===document.documentMode}()||u===t.newValue||t.newValue===t.oldValue?l():setTimeout(l,10)}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,n){var s=()=>super._set,l=this;return(0,C.A)(function*(){yield s().call(l,t,n),l.localCache[t]=JSON.stringify(n)})()}_get(t){var n=()=>super._get,s=this;return(0,C.A)(function*(){const l=yield n().call(s,t);return s.localCache[t]=JSON.stringify(l),l})()}_remove(t){var n=()=>super._remove,s=this;return(0,C.A)(function*(){yield n().call(s,t),delete s.localCache[t]})()}}return r.type="LOCAL",r})(),Uu=(()=>{class r extends WM{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}return r.type="SESSION",r})();let QM=(()=>{class r{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(l=>l.isListeningto(t));if(n)return n;const s=new r(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}handleEvent(t){var n=this;return(0,C.A)(function*(){const s=t,{eventId:l,eventType:u,data:h}=s.data,p=n.handlersMap[u];if(null==p||!p.size)return;s.ports[0].postMessage({status:"ack",eventId:l,eventType:u});const E=Array.from(p).map(function(){var x=(0,C.A)(function*(G){return G(s.origin,h)});return function(G){return x.apply(this,arguments)}}()),w=yield function XM(r){return Promise.all(r.map(function(){var e=(0,C.A)(function*(t){try{return{fulfilled:!0,value:yield t}}catch(n){return{fulfilled:!1,reason:n}}});return function(t){return e.apply(this,arguments)}}()))}(E);s.ports[0].postMessage({status:"done",eventId:l,eventType:u,response:w})})()}_subscribe(t,n){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return r.receivers=[],r})();function nm(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(10*Math.random());return r+t}class YM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,n=50){var s=this;return(0,C.A)(function*(){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,h;return new Promise((p,E)=>{const w=nm("",20);l.port1.start();const x=setTimeout(()=>{E(new Error("unsupported_event"))},n);h={messageChannel:l,onMessage(G){const ce=G;if(ce.data.eventId===w)switch(ce.data.status){case"ack":clearTimeout(x),u=setTimeout(()=>{E(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(ce.data.response);break;default:clearTimeout(x),clearTimeout(u),E(new Error("invalid_response"))}}},s.handlers.add(h),l.port1.addEventListener("message",h.onMessage),s.target.postMessage({eventType:e,eventId:w,data:t},[l.port2])}).finally(()=>{h&&s.removeMessageHandler(h)})})()}}function Ct(){return window}function Qv(){return typeof Ct().WorkerGlobalScope<"u"&&"function"==typeof Ct().importScripts}function hi(){return(hi=(0,C.A)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const nl="firebaseLocalStorageDb",xf="firebaseLocalStorage",JI="fbase_key";class Yv{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ZI(r,e){return r.transaction([xf],e?"readwrite":"readonly").objectStore(xf)}function Jv(){const r=indexedDB.open(nl,1);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(xf,{keyPath:JI})}catch(s){t(s)}}),r.addEventListener("success",(0,C.A)(function*(){const n=r.result;n.objectStoreNames.contains(xf)?e(n):(n.close(),yield function mS(){const r=indexedDB.deleteDatabase(nl);return new Yv(r).toPromise()}(),e(yield Jv()))}))})}function eb(r,e,t){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,C.A)(function*(r,e,t){const n=ZI(r,!0).put({[JI]:e,value:t});return new Yv(n).toPromise()})).apply(this,arguments)}function Zv(){return(Zv=(0,C.A)(function*(r,e){const t=ZI(r,!1).get(e),n=yield new Yv(t).toPromise();return void 0===n?null:n.value})).apply(this,arguments)}function rl(r,e){const t=ZI(r,!0).delete(e);return new Yv(t).toPromise()}const Mf=(()=>{class r{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return(0,C.A)(function*(){return t.db||(t.db=yield Jv()),t.db})()}_withRetries(t){var n=this;return(0,C.A)(function*(){let s=0;for(;;)try{const l=yield n._openDb();return yield t(l)}catch(l){if(s++>3)throw l;n.db&&(n.db.close(),n.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return(0,C.A)(function*(){return Qv()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return(0,C.A)(function*(){t.receiver=QM._getInstance(function rm(){return Qv()?self:null}()),t.receiver._subscribe("keyChanged",function(){var n=(0,C.A)(function*(s,l){return{keyProcessed:(yield t._poll()).includes(l.key)}});return function(s,l){return n.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var n=(0,C.A)(function*(s,l){return["keyChanged"]});return function(s,l){return n.apply(this,arguments)}}())})()}initializeSender(){var t=this;return(0,C.A)(function*(){var n,s;if(t.activeServiceWorker=yield function pS(){return hi.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new YM(t.activeServiceWorker);const l=yield t.sender._send("ping",{},800);l&&null!==(n=l[0])&&void 0!==n&&n.fulfilled&&null!==(s=l[0])&&void 0!==s&&s.value.includes("keyChanged")&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var n=this;return(0,C.A)(function*(){if(n.sender&&n.activeServiceWorker&&function gS(){var r;return(null===(r=null==navigator?void 0:navigator.serviceWorker)||void 0===r?void 0:r.controller)||null}()===n.activeServiceWorker)try{yield n.sender._send("keyChanged",{key:t},n.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,C.A)(function*(){try{if(!indexedDB)return!1;const t=yield Jv();return yield eb(t,em,"1"),yield rl(t,em),!0}catch{}return!1})()}_withPendingWrite(t){var n=this;return(0,C.A)(function*(){n.pendingWrites++;try{yield t()}finally{n.pendingWrites--}})()}_set(t,n){var s=this;return(0,C.A)(function*(){return s._withPendingWrite((0,C.A)(function*(){return yield s._withRetries(l=>eb(l,t,n)),s.localCache[t]=n,s.notifyServiceWorker(t)}))})()}_get(t){var n=this;return(0,C.A)(function*(){const s=yield n._withRetries(l=>function Hc(r,e){return Zv.apply(this,arguments)}(l,t));return n.localCache[t]=s,s})()}_remove(t){var n=this;return(0,C.A)(function*(){return n._withPendingWrite((0,C.A)(function*(){return yield n._withRetries(s=>rl(s,t)),delete n.localCache[t],n.notifyServiceWorker(t)}))})()}_poll(){var t=this;return(0,C.A)(function*(){const n=yield t._withRetries(u=>{const h=ZI(u,!1).getAll();return new Yv(h).toPromise()});if(!n)return[];if(0!==t.pendingWrites)return[];const s=[],l=new Set;if(0!==n.length)for(const{fbase_key:u,value:h}of n)l.add(u),JSON.stringify(t.localCache[u])!==JSON.stringify(h)&&(t.notifyListeners(u,h),s.push(u));for(const u of Object.keys(t.localCache))t.localCache[u]&&!l.has(u)&&(t.notifyListeners(u,null),s.push(u));return s})()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval((0,C.A)(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return r.type="LOCAL",r})(),ty=1e12;class _S{constructor(e){this.auth=e,this.counter=ty,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new ib(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||ty;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;return(null===(t=this._widgets.get(e||ty))||void 0===t?void 0:t.getResponse())||""}execute(e){var t=this;return(0,C.A)(function*(){var n;return null===(n=t._widgets.get(e||ty))||void 0===n||n.execute(),""})()}}class ib{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s="string"==typeof e?document.getElementById(e):e;tn(s,"argument-error",{appName:t}),this.container=s,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function vS(r){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<r;n++)e.push(t.charAt(Math.floor(62*Math.random())));return e.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ny=jg("rcb"),yS=new Ql(3e4,6e4);class ES{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(e=Ct().grecaptcha)||void 0===e||!e.render)}load(e,t=""){return tn(function ob(r){return r.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(r)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Fg(Ct().grecaptcha)?Promise.resolve(Ct().grecaptcha):new Promise((n,s)=>{const l=Ct().setTimeout(()=>{s(Bi(e,"network-request-failed"))},yS.get());Ct()[ny]=()=>{Ct().clearTimeout(l),delete Ct()[ny];const h=Ct().grecaptcha;if(!h||!Fg(h))return void s(Bi(e,"internal-error"));const p=h.render;h.render=(E,w)=>{const x=p(E,w);return this.counter++,x},this.hostLanguage=t,n(h)},$g(`${function NI(){return xu.recaptchaV2Script}()}?${Ir({onload:ny,render:"explicit",hl:t})}`).catch(()=>{clearTimeout(l),s(Bi(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!(null===(t=Ct().grecaptcha)||void 0===t||!t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class tN{load(e){return(0,C.A)(function*(){return new _S(e)})()}clearedOneInstance(){}}const ps="recaptcha",Xd={theme:"light",type:"image"};class Gi{constructor(e,t,n=Object.assign({},Xd)){this.parameters=n,this.type=ps,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ki(e),this.isInvisible="invisible"===this.parameters.size,tn(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s="string"==typeof t?document.getElementById(t):t;tn(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new tN:new ES,this.validateStartingState()}verify(){var e=this;return(0,C.A)(function*(){e.assertNotDestroyed();const t=yield e.render(),n=e.getAssertedRecaptcha();return n.getResponse(t)||new Promise(l=>{const u=h=>{h&&(e.tokenChangeListeners.delete(u),l(h))};e.tokenChangeListeners.add(u),e.isInvisible&&n.execute(t)})})()}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){tn(!this.parameters.sitekey,this.auth,"argument-error"),tn(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),tn(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(n=>n(t)),"function"==typeof e)e(t);else if("string"==typeof e){const n=Ct()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){tn(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var e=this;return(0,C.A)(function*(){if(yield e.init(),!e.widgetId){let t=e.container;if(!e.isInvisible){const n=document.createElement("div");t.appendChild(n),t=n}e.widgetId=e.getAssertedRecaptcha().render(t,e.parameters)}return e.widgetId})()}init(){var e=this;return(0,C.A)(function*(){tn(ff()&&!Qv(),e.auth,"internal-error"),yield function nN(){let r=null;return new Promise(e=>{"complete"!==document.readyState?(r=()=>e(),window.addEventListener("load",r)):e()}).catch(e=>{throw r&&window.removeEventListener("load",r),e})}(),e.recaptcha=yield e._recaptchaLoader.load(e.auth,e.auth.languageCode||void 0);const t=yield function Su(r){return _l.apply(this,arguments)}(e.auth);tn(t,e.auth,"internal-error"),e.parameters.sitekey=t})()}getAssertedRecaptcha(){return tn(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class sb{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Ou._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}function ab(){return(ab=(0,C.A)(function*(r,e,t){if(yn(r.app))return Promise.reject(lo(r));const n=ki(r),s=yield iy(n,e,Xt(t));return new sb(s,l=>Bc(n,l))})).apply(this,arguments)}function ry(){return(ry=(0,C.A)(function*(r,e,t){const n=Xt(r);yield Xg(!1,n,"phone");const s=yield iy(n.auth,e,Xt(t));return new sb(s,l=>$c(n,l))})).apply(this,arguments)}function il(){return(il=(0,C.A)(function*(r,e,t){const n=Xt(r);if(yn(n.auth.app))return Promise.reject(lo(n.auth));const s=yield iy(n.auth,e,Xt(t));return new sb(s,l=>Oa(n,l))})).apply(this,arguments)}function iy(r,e,t){return Nf.apply(this,arguments)}function Nf(){return Nf=(0,C.A)(function*(r,e,t){var n;const s=yield t.verify();try{let l;if(tn("string"==typeof s,r,"argument-error"),tn(t.type===ps,r,"argument-error"),l="string"==typeof e?{phoneNumber:e}:e,"session"in l){const u=l.session;if("phoneNumber"in l)return tn("enroll"===u.type,r,"internal-error"),(yield function qI(r,e){return Pi(r,"POST","/v2/accounts/mfaEnrollment:start",di(r,e))}(r,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:l.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{tn("signin"===u.type,r,"internal-error");const h=(null===(n=l.multiFactorHint)||void 0===n?void 0:n.uid)||l.multiFactorUid;return tn(h,r,"missing-multi-factor-info"),(yield function eN(r,e){return Pi(r,"POST","/v2/accounts/mfaSignIn:start",di(r,e))}(r,{mfaPendingCredential:u.credential,mfaEnrollmentId:h,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:u}=yield function FM(r,e){return UI.apply(this,arguments)}(r,{phoneNumber:l.phoneNumber,recaptchaToken:s});return u}}finally{t._reset()}}),Nf.apply(this,arguments)}function kf(){return(kf=(0,C.A)(function*(r,e){const t=Xt(r);if(yn(t.auth.app))return Promise.reject(lo(t.auth));yield ur(t,e)})).apply(this,arguments)}let Qd=(()=>{class r{constructor(t){this.providerId=r.PROVIDER_ID,this.auth=ki(t)}verifyPhoneNumber(t,n){return iy(this.auth,t,Xt(n))}static credential(t,n){return Ou._fromVerification(t,n)}static credentialFromResult(t){return r.credentialFromTaggedObject(t)}static credentialFromError(t){return r.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:n,temporaryProof:s}=t;return n&&s?Ou._fromTokenResponse(n,s):null}}return r.PROVIDER_ID="phone",r.PHONE_SIGN_IN_METHOD="phone",r})();function Bu(r,e){return e?ts(e):(tn(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class sy extends Ue{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ya(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ya(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ya(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function iN(r){return Hd(r.auth,new sy(r),r.bypassAuthState)}function Of(r){const{auth:e,user:t}=r;return tn(t,e,"internal-error"),Zi(t,new sy(r),r.bypassAuthState)}function om(r){return lb.apply(this,arguments)}function lb(){return(lb=(0,C.A)(function*(r){const{auth:e,user:t}=r;return tn(t,e,"internal-error"),ur(t,new sy(r),r.bypassAuthState)})).apply(this,arguments)}class ay{constructor(e,t,n,s,l=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,C.A)(function*(n,s){e.pendingPromise={resolve:n,reject:s};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(l){e.reject(l)}});return function(n,s){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,C.A)(function*(){const{urlResponse:n,sessionId:s,postBody:l,tenantId:u,error:h,type:p}=e;if(h)return void t.reject(h);const E={auth:t.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:l||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(p)(E))}catch(w){t.reject(w)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return iN;case"linkViaPopup":case"linkViaRedirect":return om;case"reauthViaPopup":case"reauthViaRedirect":return Of;default:Ri(this.auth,"internal-error")}}resolve(e){ea(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ea(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const bS=new Ql(2e3,1e4);function cb(){return(cb=(0,C.A)(function*(r,e,t){if(yn(r.app))return Promise.reject(Bi(r,"operation-not-supported-in-this-environment"));const n=ki(r);Xl(r,e,Zl);const s=Bu(n,t);return new sm(n,"signInViaPopup",e,s).executeNotNull()})).apply(this,arguments)}function wS(){return(wS=(0,C.A)(function*(r,e,t){const n=Xt(r);if(yn(n.auth.app))return Promise.reject(Bi(n.auth,"operation-not-supported-in-this-environment"));Xl(n.auth,e,Zl);const s=Bu(n.auth,t);return new sm(n.auth,"reauthViaPopup",e,s,n).executeNotNull()})).apply(this,arguments)}function Gc(){return(Gc=(0,C.A)(function*(r,e,t){const n=Xt(r);Xl(n.auth,e,Zl);const s=Bu(n.auth,t);return new sm(n.auth,"linkViaPopup",e,s,n).executeNotNull()})).apply(this,arguments)}let sm=(()=>{class r extends ay{constructor(t,n,s,l,u){super(t,n,l,u),this.provider=s,this.authWindow=null,this.pollId=null,r.currentPopupAction&&r.currentPopupAction.cancel(),r.currentPopupAction=this}executeNotNull(){var t=this;return(0,C.A)(function*(){const n=yield t.execute();return tn(n,t.auth,"internal-error"),n})()}onExecution(){var t=this;return(0,C.A)(function*(){ea(1===t.filter.length,"Popup operations only handle one event");const n=nm();t.authWindow=yield t.resolver._openPopup(t.auth,t.provider,t.filter[0],n),t.authWindow.associatedEvent=n,t.resolver._originValidation(t.auth).catch(s=>{t.reject(s)}),t.resolver._isIframeWebStorageSupported(t.auth,s=>{s||t.reject(Bi(t.auth,"web-storage-unsupported"))}),t.pollUserCancellation()})()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(Bi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,r.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,s;this.pollId=null!==(s=null===(n=this.authWindow)||void 0===n?void 0:n.window)&&void 0!==s&&s.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Bi(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(t,bS.get())};t()}}return r.currentPopupAction=null,r})();const am="pendingRedirect",lm=new Map;class cm extends ay{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,C.A)(function*(){let n=lm.get(t.auth._key());if(!n){try{const l=(yield function sN(r,e){return um.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;n=()=>Promise.resolve(l)}catch(s){n=()=>Promise.reject(s)}lm.set(t.auth._key(),n)}return t.bypassAuthState||lm.set(t.auth._key(),()=>Promise.resolve(null)),n()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,n=this;return(0,C.A)(function*(){if("signInViaRedirect"===e.type)return t().call(n,e);if("unknown"!==e.type){if(e.eventId){const s=yield n.auth._redirectUserForId(e.eventId);if(s)return n.user=s,t().call(n,e);n.resolve(null)}}else n.resolve(null)})()}onExecution(){return(0,C.A)(function*(){})()}cleanUp(){}}function um(){return(um=(0,C.A)(function*(r,e){const t=Cl(e),n=TS(r);if(!(yield n._isAvailable()))return!1;const s="true"===(yield n._get(t));return yield n._remove(t),s})).apply(this,arguments)}function Ff(r,e){return CS.apply(this,arguments)}function CS(){return(CS=(0,C.A)(function*(r,e){return TS(r)._set(Cl(e),"true")})).apply(this,arguments)}function ly(r,e){lm.set(r._key(),e)}function TS(r){return ts(r._redirectPersistence)}function Cl(r){return Pu(am,r.config.apiKey,r.name)}function aN(r,e,t){return function cy(r,e,t){return dm.apply(this,arguments)}(r,e,t)}function dm(){return(dm=(0,C.A)(function*(r,e,t){if(yn(r.app))return Promise.reject(lo(r));const n=ki(r);Xl(r,e,Zl),yield n._initializationPromise;const s=Bu(n,t);return yield Ff(s,n),s._openRedirect(n,e,"signInViaRedirect")})).apply(this,arguments)}function SS(r,e,t){return function uy(r,e,t){return hm.apply(this,arguments)}(r,e,t)}function hm(){return(hm=(0,C.A)(function*(r,e,t){const n=Xt(r);if(Xl(n.auth,e,Zl),yn(n.auth.app))return Promise.reject(lo(n.auth));yield n.auth._initializationPromise;const s=Bu(n.auth,t);yield Ff(s,n.auth);const l=yield $u(n);return s._openRedirect(n.auth,e,"reauthViaRedirect",l)})).apply(this,arguments)}function lN(r,e,t){return function DS(r,e,t){return dy.apply(this,arguments)}(r,e,t)}function dy(){return(dy=(0,C.A)(function*(r,e,t){const n=Xt(r);Xl(n.auth,e,Zl),yield n.auth._initializationPromise;const s=Bu(n.auth,t);yield Xg(!1,n,e.providerId),yield Ff(s,n.auth);const l=yield $u(n);return s._openRedirect(n.auth,e,"linkViaRedirect",l)})).apply(this,arguments)}function hy(){return(hy=(0,C.A)(function*(r,e){return yield ki(r)._initializationPromise,fy(r,e,!1)})).apply(this,arguments)}function fy(r,e){return Lf.apply(this,arguments)}function Lf(){return(Lf=(0,C.A)(function*(r,e,t=!1){if(yn(r.app))return Promise.reject(lo(r));const n=ki(r),s=Bu(n,e),u=yield new cm(n,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,yield n._persistUserIfCurrent(u.user),yield n._setRedirectUser(null,e)),u})).apply(this,arguments)}function $u(r){return db.apply(this,arguments)}function db(){return(db=(0,C.A)(function*(r){const e=nm(`${r.uid}:::`);return r._redirectEventId=e,yield r.auth._setRedirectUser(r),yield r.auth._persistUserIfCurrent(r),e})).apply(this,arguments)}class hb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function is(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jd(r);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Jd(e)){const s=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Bi(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yd(e))}saveEventToCache(e){this.cachedEventUids.add(Yd(e)),this.lastProcessedEventTime=Date.now()}}function Yd(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Jd({type:r,error:e}){return"unknown"===r&&"auth/no-auth-event"===(null==e?void 0:e.code)}function xS(r){return py.apply(this,arguments)}function py(){return(py=(0,C.A)(function*(r,e={}){return Pi(r,"GET","/v1/projects",e)})).apply(this,arguments)}const fb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cN=/^https?/;function Vf(){return(Vf=(0,C.A)(function*(r){if(r.config.emulator)return;const{authorizedDomains:e}=yield xS(r);for(const t of e)try{if(uN(t))return}catch{}Ri(r,"unauthorized-domain")})).apply(this,arguments)}function uN(r){const e=ml(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const u=new URL(r);return""===u.hostname&&""===n?"chrome-extension:"===t&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&u.hostname===n}if(!cN.test(t))return!1;if(fb.test(r))return n===r;const s=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}const NS=new Ql(3e4,6e4);function gy(){const r=Ct().___jsl;if(null!=r&&r.H)for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}let fm=null;const hN=new Ql(5e3,15e3),fN="__/auth/iframe",kS="emulator/auth/iframe",pN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gN(r){const e=r.config;tn(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?pf(e,kS):`https://${r.config.authDomain}/${fN}`,n={apiKey:e.apiKey,appName:r.name,v:en},s=OS.get(r.config.apiHost);s&&(n.eid=s);const l=r._getFrameworks();return l.length&&(n.fw=l.join(",")),`${t}?${Ir(n).slice(1)}`}function FS(){return FS=(0,C.A)(function*(r){const e=yield function dN(r){return fm=fm||function my(r){return new Promise((e,t)=>{var n,s,l;function u(){gy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gy(),t(Bi(r,"network-request-failed"))},timeout:NS.get()})}if(null!==(s=null===(n=Ct().gapi)||void 0===n?void 0:n.iframes)&&void 0!==s&&s.Iframe)e(gapi.iframes.getContext());else{if(null===(l=Ct().gapi)||void 0===l||!l.load){const h=jg("iframefcb");return Ct()[h]=()=>{gapi.load?u():t(Bi(r,"network-request-failed"))},$g(`${function kI(){return xu.gapiScript}()}?onload=${h}`).catch(p=>t(p))}u()}}).catch(e=>{throw fm=null,e})}(r),fm}(r),t=Ct().gapi;return tn(t,r,"internal-error"),e.open({where:document.body,url:gN(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pN,dontclear:!0},n=>new Promise(function(){var s=(0,C.A)(function*(l,u){yield n.restyle({setHideOnLeave:!1});const h=Bi(r,"network-request-failed"),p=Ct().setTimeout(()=>{u(h)},hN.get());function E(){Ct().clearTimeout(p),l(n)}n.ping(E).then(E,()=>{u(h)})});return function(l,u){return s.apply(this,arguments)}}()))}),FS.apply(this,arguments)}const LS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class vN{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const pb="__/auth/handler",Al="emulator/auth/handler",BS=encodeURIComponent("fac");function Zd(r,e,t,n,s,l){return gb.apply(this,arguments)}function gb(){return(gb=(0,C.A)(function*(r,e,t,n,s,l){tn(r.config.authDomain,r,"auth-domain-config-required"),tn(r.config.apiKey,r,"invalid-api-key");const u={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:en,eventId:s};if(e instanceof Zl){e.setDefaultLanguage(r.languageCode),u.providerId=e.providerId||"",Zn(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,x]of Object.entries(l||{}))u[w]=x}if(e instanceof bf){const w=e.getScopes().filter(x=>""!==x);w.length>0&&(u.scopes=w.join(","))}r.tenantId&&(u.tid=r.tenantId);const h=u;for(const w of Object.keys(h))void 0===h[w]&&delete h[w];const p=yield r._getAppCheckToken(),E=p?`#${BS}=${encodeURIComponent(p)}`:"";return`${function yN({config:r}){return r.emulator?pf(r,Al):`https://${r.authDomain}/${pb}`}(r)}?${Ir(h).slice(1)}${E}`})).apply(this,arguments)}const _y="webStorageSupport",EN=class f2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Uu,this._completeRedirectFn=fy,this._overrideRedirectResult=ly}_openPopup(e,t,n,s){var l=this;return(0,C.A)(function*(){var u;ea(null===(u=l.eventManagers[e._key()])||void 0===u?void 0:u.manager,"_initialize() not called before _openPopup()");const h=yield Zd(e,t,n,ml(),s);return function US(r,e,t,n=500,s=600){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-n)/2,0).toString();let h="";const p=Object.assign(Object.assign({},LS),{width:n.toString(),height:s.toString(),top:l,left:u}),E=Gt().toLowerCase();t&&(h=ls(E)?"_blank":t),na(E)&&(e=e||"http://localhost",p.scrollbars="yes");const w=Object.entries(p).reduce((G,[ce,De])=>`${G}${ce}=${De},`,"");if(function Vd(r=Gt()){var e;return cs(r)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(E)&&"_self"!==h)return function h2(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}(e||"",h),new vN(null);const x=window.open(e||"",h,w);tn(x,r,"popup-blocked");try{x.focus()}catch{}return new vN(x)}(e,h,nm())})()}_openRedirect(e,t,n,s){var l=this;return(0,C.A)(function*(){return yield l._originValidation(e),function Pr(r){Ct().location.href=r}(yield Zd(e,t,n,ml(),s)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):(ea(l,"If manager is not set, promise should be"),l)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}initAndGetManager(e){var t=this;return(0,C.A)(function*(){const n=yield function mN(r){return FS.apply(this,arguments)}(e),s=new hb(e);return n.register("authEvent",l=>(tn(null==l?void 0:l.authEvent,e,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:s},t.iframes[e._key()]=n,s})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(_y,{type:_y},s=>{var l;const u=null===(l=null==s?void 0:s[0])||void 0===l?void 0:l[_y];void 0!==u&&t(!!u),Ri(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function MS(r){return Vf.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ud()||Fd()||cs()}};class IN{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Is("unexpected MultiFactorSessionType")}}}class $S extends IN{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new $S(e)}_finalizeEnroll(e,t,n){return function Xv(r,e){return Pi(r,"POST","/v2/accounts/mfaEnrollment:finalize",di(r,e))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function tb(r,e){return Pi(r,"POST","/v2/accounts/mfaSignIn:finalize",di(r,e))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let p2=(()=>{class r{constructor(){}static assertion(t){return $S._fromCredential(t)}}return r.FACTOR_ID="phone",r})();var Hu="@firebase/auth";class wN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,C.A)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((null==n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){tn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function oc(){return window}_t(),function Bg(r){xu=r}({loadJS:r=>new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=s=>{const l=Bi("internal-error");l.customData=s,t(l)},n.type="text/javascript",n.charset="UTF-8",function vy(){var r,e;return null!==(e=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==e?e:document}().appendChild(n)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function CN(r){Nt(new er("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=n.options;tn(u&&!u.includes(":"),"invalid-api-key",{appName:n.name});const p={apiKey:u,authDomain:h,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Jl(r)},E=new Bd(n,s,l,p);return function S(r,e){const t=(null==e?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(ts);null!=e&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,null==e?void 0:e.popupRedirectResolver)}(E,t),E},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Nt(new er("auth-internal",e=>{const t=ki(e.getProvider("auth").getImmediate());return new wN(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hr(Hu,"1.7.8",function ic(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(r)),Hr(Hu,"1.7.8","esm2017")}("Browser");function vb(){return vb=(0,C.A)(function*(r,e,t){var n;const{BuildInfo:s}=oc();ea(e.sessionId,"AuthEvent did not contain a session ID");const l=yield function zS(r){return Bf.apply(this,arguments)}(e.sessionId),u={};return cs()?u.ibi=s.packageName:Ld()?u.apn=s.packageName:Ri(r,"operation-not-supported-in-this-environment"),s.displayName&&(u.appDisplayName=s.displayName),u.sessionId=l,Zd(r,t,e.type,void 0,null!==(n=e.eventId)&&void 0!==n?n:void 0,u)}),vb.apply(this,arguments)}function yy(){return yy=(0,C.A)(function*(r){const{BuildInfo:e}=oc(),t={};cs()?t.iosBundleId=e.packageName:Ld()?t.androidPackageName=e.packageName:Ri(r,"operation-not-supported-in-this-environment"),yield xS(r,t)}),yy.apply(this,arguments)}function Us(){return Us=(0,C.A)(function*(r,e,t){const{cordova:n}=oc();let s=()=>{};try{yield new Promise((l,u)=>{let h=null;function p(){var x;l();const G=null===(x=n.plugins.browsertab)||void 0===x?void 0:x.close;"function"==typeof G&&G(),"function"==typeof(null==t?void 0:t.close)&&t.close()}function E(){h||(h=window.setTimeout(()=>{u(Bi(r,"redirect-cancelled-by-user"))},2e3))}function w(){"visible"===(null==document?void 0:document.visibilityState)&&E()}e.addPassiveListener(p),document.addEventListener("resume",E,!1),Ld()&&document.addEventListener("visibilitychange",w,!1),s=()=>{e.removePassiveListener(p),document.removeEventListener("resume",E,!1),document.removeEventListener("visibilitychange",w,!1),h&&window.clearTimeout(h)}})}finally{s()}}),Us.apply(this,arguments)}function Bf(){return Bf=(0,C.A)(function*(r){const e=function m2(r){if(ea(/[0-9a-zA-Z]+/.test(r),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(r);const e=new ArrayBuffer(r.length),t=new Uint8Array(e);for(let n=0;n<r.length;n++)t[n]=r.charCodeAt(n);return t}(r),t=yield crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(s=>s.toString(16).padStart(2,"0")).join("")}),Bf.apply(this,arguments)}class Bs extends hb{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}initialized(){var e=this;return(0,C.A)(function*(){yield e.initPromise})()}}function Eb(r){return Ib.apply(this,arguments)}function Ib(){return Ib=(0,C.A)(function*(r){const e=yield Ey()._get(bb(r));return e&&(yield Ey()._remove(bb(r))),e}),Ib.apply(this,arguments)}function PN(){const r=[];for(let t=0;t<20;t++){const n=Math.floor(62*Math.random());r.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(n))}return r.join("")}function Ey(){return ts(tm)}function bb(r){return Pu("authEvent",r.config.apiKey,r.name)}function Iy(r){if(null==r||!r.includes("?"))return{};const[e,...t]=r.split("?");return Rr(t.join("?"))}const KS=class NN{constructor(){this._redirectPersistence=Uu,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=fy,this._overrideRedirectResult=ly}_initialize(e){var t=this;return(0,C.A)(function*(){const n=e._key();let s=t.eventManagers.get(n);return s||(s=new Bs(e),t.eventManagers.set(n,s),t.attachCallbackListeners(e,s)),s})()}_openPopup(e){Ri(e,"operation-not-supported-in-this-environment")}_openRedirect(e,t,n,s){var l=this;return(0,C.A)(function*(){!function yb(r){var e,t,n,s,l,u,h,p,E,w;const x=oc();tn("function"==typeof(null===(e=null==x?void 0:x.universalLinks)||void 0===e?void 0:e.subscribe),r,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),tn(typeof(null===(t=null==x?void 0:x.BuildInfo)||void 0===t?void 0:t.packageName)<"u",r,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),tn("function"==typeof(null===(l=null===(s=null===(n=null==x?void 0:x.cordova)||void 0===n?void 0:n.plugins)||void 0===s?void 0:s.browsertab)||void 0===l?void 0:l.openUrl),r,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),tn("function"==typeof(null===(p=null===(h=null===(u=null==x?void 0:x.cordova)||void 0===u?void 0:u.plugins)||void 0===h?void 0:h.browsertab)||void 0===p?void 0:p.isAvailable),r,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),tn("function"==typeof(null===(w=null===(E=null==x?void 0:x.cordova)||void 0===E?void 0:E.InAppBrowser)||void 0===w?void 0:w.open),r,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const u=yield l._initialize(e);yield u.initialized(),u.resetRedirect(),function AS(){lm.clear()}(),yield l._originValidation(e);const h=function $f(r,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:PN(),postBody:null,tenantId:r.tenantId,error:Bi(r,"no-auth-event")}}(e,n,s);yield function GS(r,e){return Ey()._set(bb(r),e)}(e,h);const p=yield function TN(r,e,t){return vb.apply(this,arguments)}(e,h,t),E=yield function DN(r){const{cordova:e}=oc();return new Promise(t=>{e.plugins.browsertab.isAvailable(n=>{let s=null;n?e.plugins.browsertab.openUrl(r):s=e.InAppBrowser.open(r,function Ug(r=Gt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(r)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(r)}()?"_blank":"_system","location=yes"),t(s)})})}(p);return function RN(r,e,t){return Us.apply(this,arguments)}(e,u,E)})()}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function SN(r){return yy.apply(this,arguments)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:s,BuildInfo:l}=oc(),u=setTimeout((0,C.A)(function*(){yield Eb(e),t.onEvent(wb())}),500),h=function(){var w=(0,C.A)(function*(x){clearTimeout(u);const G=yield Eb(e);let ce=null;G&&null!=x&&x.url&&(ce=function WS(r,e){var t,n;const s=function xN(r){const e=Iy(r),t=e.link?decodeURIComponent(e.link):void 0,n=Iy(t).link,s=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Iy(s).link||s||n||t||r}(e);if(s.includes("/__/auth/callback")){const l=Iy(s),u=l.firebaseError?function qS(r){try{return JSON.parse(r)}catch{return null}}(decodeURIComponent(l.firebaseError)):null,h=null===(n=null===(t=null==u?void 0:u.code)||void 0===t?void 0:t.split("auth/"))||void 0===n?void 0:n[1],p=h?Bi(h):null;return p?{type:r.type,eventId:r.eventId,tenantId:r.tenantId,error:p,urlResponse:null,sessionId:null,postBody:null}:{type:r.type,eventId:r.eventId,tenantId:r.tenantId,sessionId:r.sessionId,urlResponse:s,postBody:null}}return null}(G,x.url)),t.onEvent(ce||wb())});return function(G){return w.apply(this,arguments)}}();typeof n<"u"&&"function"==typeof n.subscribe&&n.subscribe(null,h);const p=s,E=`${l.packageName.toLowerCase()}://`;oc().handleOpenURL=function(){var w=(0,C.A)(function*(x){if(x.toLowerCase().startsWith(E)&&h({url:x}),"function"==typeof p)try{p(x)}catch(G){console.error(G)}});return function(x){return w.apply(this,arguments)}}()}};function wb(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Bi("no-auth-event")}}function jf(){var r;return(null===(r=null==self?void 0:self.location)||void 0===r?void 0:r.protocol)||null}function ZS(r=Gt()){return!("file:"!==jf()&&"ionic:"!==jf()&&"capacitor:"!==jf()||!r.toLowerCase().match(/iphone|ipad|ipod|android/))}function LN(){try{const r=self.localStorage,e=nm();if(r)return r.setItem(e,"1"),r.removeItem(e),!function eD(r=Gt()){return function ON(){return Ie()&&11===(null==document?void 0:document.documentMode)}()||function FN(r=Gt()){return/Edge\/\d+/.test(r)}(r)}()||qt()}catch{return wy()&&qt()}return!1}function wy(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Cb(){return(function JS(){return"http:"===jf()||"https:"===jf()}()||Z()||ZS())&&!function kN(){return Y()||Sn()}()&&LN()&&!wy()}function tD(){return ZS()&&typeof document<"u"}function Ab(){return Ab=(0,C.A)(function*(){return!!tD()&&new Promise(r=>{const e=setTimeout(()=>{r(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(e),r(!0)})})}),Ab.apply(this,arguments)}const ra={LOCAL:"local",NONE:"none",SESSION:"session"},mm=tn,Wc="persistence";function Tb(r){return Ay.apply(this,arguments)}function Ay(){return Ay=(0,C.A)(function*(r){yield r._initializationPromise;const e=VN(),t=Pu(Wc,r.config.apiKey,r.name);e&&e.setItem(t,r._getPersistence())}),Ay.apply(this,arguments)}function VN(){var r;try{return(null===(r=function nD(){return typeof window<"u"?window:null}())||void 0===r?void 0:r.sessionStorage)||null}catch{return null}}const y2=tn;class zu{constructor(){this.browserResolver=ts(EN),this.cordovaResolver=ts(KS),this.underlyingResolver=null,this._redirectPersistence=Uu,this._completeRedirectFn=fy,this._overrideRedirectResult=ly}_initialize(e){var t=this;return(0,C.A)(function*(){return yield t.selectUnderlyingResolver(),t.assertedUnderlyingResolver._initialize(e)})()}_openPopup(e,t,n,s){var l=this;return(0,C.A)(function*(){return yield l.selectUnderlyingResolver(),l.assertedUnderlyingResolver._openPopup(e,t,n,s)})()}_openRedirect(e,t,n,s){var l=this;return(0,C.A)(function*(){return yield l.selectUnderlyingResolver(),l.assertedUnderlyingResolver._openRedirect(e,t,n,s)})()}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return tD()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return y2(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var e=this;return(0,C.A)(function*(){if(e.underlyingResolver)return;const t=yield function v2(){return Ab.apply(this,arguments)}();e.underlyingResolver=t?e.cordovaResolver:e.browserResolver})()}}function rD(r){return r.unwrap()}function E2(r){return _m(r)}function _m(r){const{_tokenResponse:e}=r instanceof gn?r.customData:r;if(!e)return null;if(!(r instanceof gn)&&"temporaryProof"in e&&"phoneNumber"in e)return Qd.credentialFromResult(r);const t=e.providerId;if(!t||t===F.PASSWORD)return null;let n;switch(t){case F.GOOGLE:n=QT;break;case F.FACEBOOK:n=XT;break;case F.GITHUB:n=YT;break;case F.TWITTER:n=Kg;break;default:const{oauthIdToken:s,oauthAccessToken:l,oauthTokenSecret:u,pendingToken:h,nonce:p}=e;return l||u||s||h?h?t.startsWith("saml.")?wf._create(t,h):Ja._fromParams({providerId:t,signInMethod:t,pendingToken:h,idToken:s,accessToken:l}):new ec(t).credential({idToken:s,accessToken:l,rawNonce:p}):null}return r instanceof gn?n.credentialFromError(r):n.credentialFromResult(r)}function ya(r,e){return e.catch(t=>{throw t instanceof gn&&function I2(r,e){var t;const n=null===(t=e.customData)||void 0===t?void 0:t._tokenResponse;if("auth/multi-factor-auth-required"===(null==e?void 0:e.code))e.resolver=new Hf(r,function Zg(r,e){var t;const n=Xt(r),s=e;return tn(e.customData.operationType,n,"argument-error"),tn(null===(t=s.customData._serverResponse)||void 0===t?void 0:t.mfaPendingCredential,n,"argument-error"),Kv._fromError(n,s)}(r,e));else if(n){const s=_m(e),l=e;s&&(l.credential=s,l.tenantId=n.tenantId||void 0,l.email=n.email||void 0,l.phoneNumber=n.phoneNumber||void 0)}}(r,t),t}).then(t=>{const s=t.user;return{operationType:t.operationType,credential:E2(t),additionalUserInfo:dS(t),user:Fa.getOrCreate(s)}})}function vm(r,e){return ym.apply(this,arguments)}function ym(){return ym=(0,C.A)(function*(r,e){const t=yield e;return{verificationId:t.verificationId,confirm:n=>ya(r,t.confirm(n))}}),ym.apply(this,arguments)}class Hf{constructor(e,t){this.resolver=t,this.auth=function UN(r){return r.wrapped()}(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return ya(rD(this.auth),this.resolver.resolveSignIn(e))}}class Fa{constructor(e){this._delegate=e,this.multiFactor=function QI(r){const e=Xt(r);return Rf.has(e)||Rf.set(e,dr._fromUser(e)),Rf.get(e)}(e)}static getOrCreate(e){return Fa.USER_MAP.has(e)||Fa.USER_MAP.set(e,new Fa(e)),Fa.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}linkWithCredential(e){var t=this;return(0,C.A)(function*(){return ya(t.auth,$c(t._delegate,e))})()}linkWithPhoneNumber(e,t){var n=this;return(0,C.A)(function*(){return vm(n.auth,function IS(r,e,t){return ry.apply(this,arguments)}(n._delegate,e,t))})()}linkWithPopup(e){var t=this;return(0,C.A)(function*(){return ya(t.auth,function ub(r,e,t){return Gc.apply(this,arguments)}(t._delegate,e,zu))})()}linkWithRedirect(e){var t=this;return(0,C.A)(function*(){return yield Tb(ki(t.auth)),lN(t._delegate,e,zu)})()}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}reauthenticateWithCredential(e){var t=this;return(0,C.A)(function*(){return ya(t.auth,Oa(t._delegate,e))})()}reauthenticateWithPhoneNumber(e,t){return vm(this.auth,function im(r,e,t){return il.apply(this,arguments)}(this._delegate,e,t))}reauthenticateWithPopup(e){return ya(this.auth,function u2(r,e,t){return wS.apply(this,arguments)}(this._delegate,e,zu))}reauthenticateWithRedirect(e){var t=this;return(0,C.A)(function*(){return yield Tb(ki(t.auth)),SS(t._delegate,e,zu)})()}sendEmailVerification(e){return function rS(r,e){return zv.apply(this,arguments)}(this._delegate,e)}unlink(e){var t=this;return(0,C.A)(function*(){return yield function Wo(r,e){return Za.apply(this,arguments)}(t._delegate,e),t})()}updateEmail(e){return function zI(r,e){const t=Xt(r);return yn(t.auth.app)?Promise.reject(lo(t.auth)):aS(t,e,null)}(this._delegate,e)}updatePassword(e){return function sS(r,e){return aS(Xt(r),null,e)}(this._delegate,e)}updatePhoneNumber(e){return function oy(r,e){return kf.apply(this,arguments)}(this._delegate,e)}updateProfile(e){return function HM(r,e){return Gv.apply(this,arguments)}(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return function o2(r,e,t){return iS.apply(this,arguments)}(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Fa.USER_MAP=new WeakMap;const Gu=tn;let eh=(()=>{class r{constructor(t,n){if(this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:s}=t.options;Gu(s,"invalid-api-key",{appName:t.name}),Gu(s,"invalid-api-key",{appName:t.name});const l=typeof window<"u"?zu:void 0;this._delegate=n.initialize({options:{persistence:Gf(s,t.name),popupRedirectResolver:l}}),this._delegate._updateErrorMap(br),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Fa.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(t){this._delegate.languageCode=t}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(t){this._delegate.tenantId=t}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(t,n){!function P(r,e,t){const n=ki(r);tn(n._canInitEmulator,n,"emulator-config-failed"),tn(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!(null==t||!t.disableWarnings),l=T(e),{host:u,port:h}=function k(r){const e=T(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const l=s[1];return{host:l,port:ee(n.substr(l.length+1))}}{const[l,u]=n.split(":");return{host:l,port:ee(u)}}}(e);n.config.emulator={url:`${l}//${u}${null===h?"":`:${h}`}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:u,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function te(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",r):r())}()}(this._delegate,t,n)}applyActionCode(t){return function $M(r,e){return HI.apply(this,arguments)}(this._delegate,t)}checkActionCode(t){return jv(this._delegate,t)}confirmPasswordReset(t,n){return function bl(r,e,t){return qd.apply(this,arguments)}(this._delegate,t,n)}createUserWithEmailAndPassword(t,n){var s=this;return(0,C.A)(function*(){return ya(s._delegate,function JV(r,e,t){return JT.apply(this,arguments)}(s._delegate,t,n))})()}fetchProvidersForEmail(t){return this.fetchSignInMethodsForEmail(t)}fetchSignInMethodsForEmail(t){return function i2(r,e){return nS.apply(this,arguments)}(this._delegate,t)}isSignInWithEmailLink(t){return function t2(r,e){const t=qg.parseLink(e);return"EMAIL_SIGNIN"===(null==t?void 0:t.operation)}(0,t)}getRedirectResult(){var t=this;return(0,C.A)(function*(){Gu(Cb(),t._delegate,"operation-not-supported-in-this-environment");const n=yield function RS(r,e){return hy.apply(this,arguments)}(t._delegate,zu);return n?ya(t._delegate,Promise.resolve(n)):{credential:null,user:null}})()}addFrameworkForLogging(t){!function XS(r,e){ki(r)._logFramework(e)}(this._delegate,t)}onAuthStateChanged(t,n,s){const{next:l,error:u,complete:h}=zf(t,n,s);return this._delegate.onAuthStateChanged(l,u,h)}onIdTokenChanged(t,n,s){const{next:l,error:u,complete:h}=zf(t,n,s);return this._delegate.onIdTokenChanged(l,u,h)}sendSignInLinkToEmail(t,n){return function e2(r,e,t){return ZT.apply(this,arguments)}(this._delegate,t,n)}sendPasswordResetEmail(t,n){return function Wd(r,e,t){return Sf.apply(this,arguments)}(this._delegate,t,n||void 0)}setPersistence(t){var n=this;return(0,C.A)(function*(){let s;switch(function Cy(r,e){mm(Object.values(ra).includes(e),r,"invalid-persistence-type"),Y()?mm(e!==ra.SESSION,r,"unsupported-persistence-type"):Sn()?mm(e===ra.NONE,r,"unsupported-persistence-type"):wy()?mm(e===ra.NONE||e===ra.LOCAL&&qt(),r,"unsupported-persistence-type"):mm(e===ra.NONE||LN(),r,"unsupported-persistence-type")}(n._delegate,t),t){case ra.SESSION:s=Uu;break;case ra.LOCAL:s=(yield ts(Mf)._isAvailable())?Mf:tm;break;case ra.NONE:s=Oc;break;default:return Ri("argument-error",{appName:n._delegate.name})}return n._delegate.setPersistence(s)})()}signInAndRetrieveDataWithCredential(t){return this.signInWithCredential(t)}signInAnonymously(){return ya(this._delegate,function Il(r){return rs.apply(this,arguments)}(this._delegate))}signInWithCredential(t){return ya(this._delegate,Bc(this._delegate,t))}signInWithCustomToken(t){return ya(this._delegate,function tc(r,e){return Af.apply(this,arguments)}(this._delegate,t))}signInWithEmailAndPassword(t,n){return ya(this._delegate,function ZV(r,e,t){return yn(r.app)?Promise.reject(lo(r)):Bc(Xt(r),Fo.credential(e,t)).catch(function(){var n=(0,C.A)(function*(s){throw"auth/password-does-not-meet-requirements"===s.code&&fs(r),s});return function(s){return n.apply(this,arguments)}}())}(this._delegate,t,n))}signInWithEmailLink(t,n){return ya(this._delegate,function n2(r,e,t){return eS.apply(this,arguments)}(this._delegate,t,n))}signInWithPhoneNumber(t,n){return vm(this._delegate,function rN(r,e,t){return ab.apply(this,arguments)}(this._delegate,t,n))}signInWithPopup(t){var n=this;return(0,C.A)(function*(){return Gu(Cb(),n._delegate,"operation-not-supported-in-this-environment"),ya(n._delegate,function oN(r,e,t){return cb.apply(this,arguments)}(n._delegate,t,zu))})()}signInWithRedirect(t){var n=this;return(0,C.A)(function*(){return Gu(Cb(),n._delegate,"operation-not-supported-in-this-environment"),yield Tb(n._delegate),aN(n._delegate,t,zu)})()}updateCurrentUser(t){return this._delegate.updateCurrentUser(t)}verifyPasswordResetCode(t){return function jM(r,e){return Yg.apply(this,arguments)}(this._delegate,t)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return r.Persistence=ra,r})();function zf(r,e,t){let n=r;"function"!=typeof r&&({next:n,error:e,complete:t}=r);const s=n;return{next:u=>s(u&&Fa.getOrCreate(u)),error:e,complete:t}}function Gf(r,e){const t=function Sb(r,e){const t=VN();if(!t)return[];const n=Pu(Wc,r,e);switch(t.getItem(n)){case ra.NONE:return[Oc];case ra.LOCAL:return[Mf,Uu];case ra.SESSION:return[Uu];default:return[]}}(r,e);if(typeof self<"u"&&!t.includes(Mf)&&t.push(Mf),typeof window<"u")for(const n of[tm,Uu])t.includes(n)||t.push(n);return t.includes(Oc)||t.push(Oc),t}class Em{constructor(){this.providerId="phone",this._delegate=new Qd(rD(B.auth()))}static credential(e,t){return Qd.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Em.PHONE_SIGN_IN_METHOD=Qd.PHONE_SIGN_IN_METHOD,Em.PROVIDER_ID=Qd.PROVIDER_ID;const Im=tn;class Wf{constructor(e,t,n=B.app()){var s;Im(null===(s=n.options)||void 0===s?void 0:s.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new Gi(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function b2(r){r.INTERNAL.registerComponent(new er("auth-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new eh(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Fo,FacebookAuthProvider:XT,GithubAuthProvider:YT,GoogleAuthProvider:QT,OAuthProvider:ec,SAMLAuthProvider:Cf,PhoneAuthProvider:Em,PhoneMultiFactorGenerator:p2,RecaptchaVerifier:Wf,TwitterAuthProvider:Kg,Auth:eh,AuthCredential:Ue,Error:gn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),r.registerVersion("@firebase/auth-compat","0.5.13")}(B);var th,Db,Sy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qf={};(function(){var r;function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function s(it,Me,Be){Be||(Be=0);var st=Array(16);if("string"==typeof Me)for(var ht=0;16>ht;++ht)st[ht]=Me.charCodeAt(Be++)|Me.charCodeAt(Be++)<<8|Me.charCodeAt(Be++)<<16|Me.charCodeAt(Be++)<<24;else for(ht=0;16>ht;++ht)st[ht]=Me[Be++]|Me[Be++]<<8|Me[Be++]<<16|Me[Be++]<<24;var wt=it.g[3],He=(Me=it.g[0])+(wt^(Be=it.g[1])&((ht=it.g[2])^wt))+st[0]+3614090360&4294967295;He=(Be=(ht=(wt=(Me=(Be=(ht=(wt=(Me=(Be=(ht=(wt=(Me=(Be=(ht=(wt=(Me=(Be=(ht=(wt=(Me=(Be=(ht=(wt=(Me=(Be=(ht=(wt=(Me=(Be=(ht=(wt=(Me=(Be=(ht=(wt=(Me=(Be=(ht=(wt=(Me=(Be=(ht=(wt=(Me=(Be=(ht=(wt=(Me=(Be=(ht=(wt=(Me=(Be=(ht=(wt=(Me=(Be=(ht=(wt=(Me=Be+(He<<7&4294967295|He>>>25))+((He=wt+(ht^Me&(Be^ht))+st[1]+3905402710&4294967295)<<12&4294967295|He>>>20))+((He=ht+(Be^wt&(Me^Be))+st[2]+606105819&4294967295)<<17&4294967295|He>>>15))+((He=Be+(Me^ht&(wt^Me))+st[3]+3250441966&4294967295)<<22&4294967295|He>>>10))+((He=Me+(wt^Be&(ht^wt))+st[4]+4118548399&4294967295)<<7&4294967295|He>>>25))+((He=wt+(ht^Me&(Be^ht))+st[5]+1200080426&4294967295)<<12&4294967295|He>>>20))+((He=ht+(Be^wt&(Me^Be))+st[6]+2821735955&4294967295)<<17&4294967295|He>>>15))+((He=Be+(Me^ht&(wt^Me))+st[7]+4249261313&4294967295)<<22&4294967295|He>>>10))+((He=Me+(wt^Be&(ht^wt))+st[8]+1770035416&4294967295)<<7&4294967295|He>>>25))+((He=wt+(ht^Me&(Be^ht))+st[9]+2336552879&4294967295)<<12&4294967295|He>>>20))+((He=ht+(Be^wt&(Me^Be))+st[10]+4294925233&4294967295)<<17&4294967295|He>>>15))+((He=Be+(Me^ht&(wt^Me))+st[11]+2304563134&4294967295)<<22&4294967295|He>>>10))+((He=Me+(wt^Be&(ht^wt))+st[12]+1804603682&4294967295)<<7&4294967295|He>>>25))+((He=wt+(ht^Me&(Be^ht))+st[13]+4254626195&4294967295)<<12&4294967295|He>>>20))+((He=ht+(Be^wt&(Me^Be))+st[14]+2792965006&4294967295)<<17&4294967295|He>>>15))+((He=Be+(Me^ht&(wt^Me))+st[15]+1236535329&4294967295)<<22&4294967295|He>>>10))+((He=Me+(ht^wt&(Be^ht))+st[1]+4129170786&4294967295)<<5&4294967295|He>>>27))+((He=wt+(Be^ht&(Me^Be))+st[6]+3225465664&4294967295)<<9&4294967295|He>>>23))+((He=ht+(Me^Be&(wt^Me))+st[11]+643717713&4294967295)<<14&4294967295|He>>>18))+((He=Be+(wt^Me&(ht^wt))+st[0]+3921069994&4294967295)<<20&4294967295|He>>>12))+((He=Me+(ht^wt&(Be^ht))+st[5]+3593408605&4294967295)<<5&4294967295|He>>>27))+((He=wt+(Be^ht&(Me^Be))+st[10]+38016083&4294967295)<<9&4294967295|He>>>23))+((He=ht+(Me^Be&(wt^Me))+st[15]+3634488961&4294967295)<<14&4294967295|He>>>18))+((He=Be+(wt^Me&(ht^wt))+st[4]+3889429448&4294967295)<<20&4294967295|He>>>12))+((He=Me+(ht^wt&(Be^ht))+st[9]+568446438&4294967295)<<5&4294967295|He>>>27))+((He=wt+(Be^ht&(Me^Be))+st[14]+3275163606&4294967295)<<9&4294967295|He>>>23))+((He=ht+(Me^Be&(wt^Me))+st[3]+4107603335&4294967295)<<14&4294967295|He>>>18))+((He=Be+(wt^Me&(ht^wt))+st[8]+1163531501&4294967295)<<20&4294967295|He>>>12))+((He=Me+(ht^wt&(Be^ht))+st[13]+2850285829&4294967295)<<5&4294967295|He>>>27))+((He=wt+(Be^ht&(Me^Be))+st[2]+4243563512&4294967295)<<9&4294967295|He>>>23))+((He=ht+(Me^Be&(wt^Me))+st[7]+1735328473&4294967295)<<14&4294967295|He>>>18))+((He=Be+(wt^Me&(ht^wt))+st[12]+2368359562&4294967295)<<20&4294967295|He>>>12))+((He=Me+(Be^ht^wt)+st[5]+4294588738&4294967295)<<4&4294967295|He>>>28))+((He=wt+(Me^Be^ht)+st[8]+2272392833&4294967295)<<11&4294967295|He>>>21))+((He=ht+(wt^Me^Be)+st[11]+1839030562&4294967295)<<16&4294967295|He>>>16))+((He=Be+(ht^wt^Me)+st[14]+4259657740&4294967295)<<23&4294967295|He>>>9))+((He=Me+(Be^ht^wt)+st[1]+2763975236&4294967295)<<4&4294967295|He>>>28))+((He=wt+(Me^Be^ht)+st[4]+1272893353&4294967295)<<11&4294967295|He>>>21))+((He=ht+(wt^Me^Be)+st[7]+4139469664&4294967295)<<16&4294967295|He>>>16))+((He=Be+(ht^wt^Me)+st[10]+3200236656&4294967295)<<23&4294967295|He>>>9))+((He=Me+(Be^ht^wt)+st[13]+681279174&4294967295)<<4&4294967295|He>>>28))+((He=wt+(Me^Be^ht)+st[0]+3936430074&4294967295)<<11&4294967295|He>>>21))+((He=ht+(wt^Me^Be)+st[3]+3572445317&4294967295)<<16&4294967295|He>>>16))+((He=Be+(ht^wt^Me)+st[6]+76029189&4294967295)<<23&4294967295|He>>>9))+((He=Me+(Be^ht^wt)+st[9]+3654602809&4294967295)<<4&4294967295|He>>>28))+((He=wt+(Me^Be^ht)+st[12]+3873151461&4294967295)<<11&4294967295|He>>>21))+((He=ht+(wt^Me^Be)+st[15]+530742520&4294967295)<<16&4294967295|He>>>16))+((He=Be+(ht^wt^Me)+st[2]+3299628645&4294967295)<<23&4294967295|He>>>9))+((He=Me+(ht^(Be|~wt))+st[0]+4096336452&4294967295)<<6&4294967295|He>>>26))+((He=wt+(Be^(Me|~ht))+st[7]+1126891415&4294967295)<<10&4294967295|He>>>22))+((He=ht+(Me^(wt|~Be))+st[14]+2878612391&4294967295)<<15&4294967295|He>>>17))+((He=Be+(wt^(ht|~Me))+st[5]+4237533241&4294967295)<<21&4294967295|He>>>11))+((He=Me+(ht^(Be|~wt))+st[12]+1700485571&4294967295)<<6&4294967295|He>>>26))+((He=wt+(Be^(Me|~ht))+st[3]+2399980690&4294967295)<<10&4294967295|He>>>22))+((He=ht+(Me^(wt|~Be))+st[10]+4293915773&4294967295)<<15&4294967295|He>>>17))+((He=Be+(wt^(ht|~Me))+st[1]+2240044497&4294967295)<<21&4294967295|He>>>11))+((He=Me+(ht^(Be|~wt))+st[8]+1873313359&4294967295)<<6&4294967295|He>>>26))+((He=wt+(Be^(Me|~ht))+st[15]+4264355552&4294967295)<<10&4294967295|He>>>22))+((He=ht+(Me^(wt|~Be))+st[6]+2734768916&4294967295)<<15&4294967295|He>>>17))+((He=Be+(wt^(ht|~Me))+st[13]+1309151649&4294967295)<<21&4294967295|He>>>11))+((wt=(Me=Be+((He=Me+(ht^(Be|~wt))+st[4]+4149444226&4294967295)<<6&4294967295|He>>>26))+((He=wt+(Be^(Me|~ht))+st[11]+3174756917&4294967295)<<10&4294967295|He>>>22))^((ht=wt+((He=ht+(Me^(wt|~Be))+st[2]+718787259&4294967295)<<15&4294967295|He>>>17))|~Me))+st[9]+3951481745&4294967295,it.g[0]=it.g[0]+Me&4294967295,it.g[1]=it.g[1]+(ht+(He<<21&4294967295|He>>>11))&4294967295,it.g[2]=it.g[2]+ht&4294967295,it.g[3]=it.g[3]+wt&4294967295}function u(it,Me){this.h=Me;for(var Be=[],st=!0,ht=it.length-1;0<=ht;ht--){var wt=0|it[ht];st&&wt==Me||(Be[ht]=wt,st=!1)}this.g=Be}(function e(it,Me){function Be(){}Be.prototype=Me.prototype,it.D=Me.prototype,it.prototype=new Be,it.prototype.constructor=it,it.C=function(st,ht,wt){for(var He=Array(arguments.length-2),cf=2;cf<arguments.length;cf++)He[cf-2]=arguments[cf];return Me.prototype[ht].apply(st,He)}})(n,function t(){this.blockSize=-1}),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},n.prototype.u=function(it,Me){void 0===Me&&(Me=it.length);for(var Be=Me-this.blockSize,st=this.B,ht=this.h,wt=0;wt<Me;){if(0==ht)for(;wt<=Be;)s(this,it,wt),wt+=this.blockSize;if("string"==typeof it){for(;wt<Me;)if(st[ht++]=it.charCodeAt(wt++),ht==this.blockSize){s(this,st),ht=0;break}}else for(;wt<Me;)if(st[ht++]=it[wt++],ht==this.blockSize){s(this,st),ht=0;break}}this.h=ht,this.o+=Me},n.prototype.v=function(){var it=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);it[0]=128;for(var Me=1;Me<it.length-8;++Me)it[Me]=0;var Be=8*this.o;for(Me=it.length-8;Me<it.length;++Me)it[Me]=255&Be,Be/=256;for(this.u(it),it=Array(16),Me=Be=0;4>Me;++Me)for(var st=0;32>st;st+=8)it[Be++]=this.g[Me]>>>st&255;return it};var h={};function p(it){return-128<=it&&128>it?function l(it,Me){var Be=h;return Object.prototype.hasOwnProperty.call(Be,it)?Be[it]:Be[it]=Me(it)}(it,function(Me){return new u([0|Me],0>Me?-1:0)}):new u([0|it],0>it?-1:0)}function E(it){if(isNaN(it)||!isFinite(it))return x;if(0>it)return lt(E(-it));for(var Me=[],Be=1,st=0;it>=Be;st++)Me[st]=it/Be|0,Be*=4294967296;return new u(Me,0)}var x=p(0),G=p(1),ce=p(16777216);function De(it){if(0!=it.h)return!1;for(var Me=0;Me<it.g.length;Me++)if(0!=it.g[Me])return!1;return!0}function dt(it){return-1==it.h}function lt(it){for(var Me=it.g.length,Be=[],st=0;st<Me;st++)Be[st]=~it.g[st];return new u(Be,~it.h).add(G)}function ln(it,Me){return it.add(lt(Me))}function vn(it,Me){for(;(65535&it[Me])!=it[Me];)it[Me+1]+=it[Me]>>>16,it[Me]&=65535,Me++}function cn(it,Me){this.g=it,this.h=Me}function An(it,Me){if(De(Me))throw Error("division by zero");if(De(it))return new cn(x,x);if(dt(it))return Me=An(lt(it),Me),new cn(lt(Me.g),lt(Me.h));if(dt(Me))return Me=An(it,lt(Me)),new cn(lt(Me.g),Me.h);if(30<it.g.length){if(dt(it)||dt(Me))throw Error("slowDivide_ only works with positive integers.");for(var Be=G,st=Me;0>=st.l(it);)Be=Yn(Be),st=Yn(st);var ht=ar(Be,1),wt=ar(st,1);for(st=ar(st,2),Be=ar(Be,2);!De(st);){var He=wt.add(st);0>=He.l(it)&&(ht=ht.add(Be),wt=He),st=ar(st,1),Be=ar(Be,1)}return Me=ln(it,ht.j(Me)),new cn(ht,Me)}for(ht=x;0<=it.l(Me);){for(Be=Math.max(1,Math.floor(it.m()/Me.m())),st=48>=(st=Math.ceil(Math.log(Be)/Math.LN2))?1:Math.pow(2,st-48),He=(wt=E(Be)).j(Me);dt(He)||0<He.l(it);)He=(wt=E(Be-=st)).j(Me);De(wt)&&(wt=G),ht=ht.add(wt),it=ln(it,He)}return new cn(ht,it)}function Yn(it){for(var Me=it.g.length+1,Be=[],st=0;st<Me;st++)Be[st]=it.i(st)<<1|it.i(st-1)>>>31;return new u(Be,it.h)}function ar(it,Me){var Be=Me>>5;Me%=32;for(var st=it.g.length-Be,ht=[],wt=0;wt<st;wt++)ht[wt]=0<Me?it.i(wt+Be)>>>Me|it.i(wt+Be+1)<<32-Me:it.i(wt+Be);return new u(ht,it.h)}(r=u.prototype).m=function(){if(dt(this))return-lt(this).m();for(var it=0,Me=1,Be=0;Be<this.g.length;Be++){var st=this.i(Be);it+=(0<=st?st:4294967296+st)*Me,Me*=4294967296}return it},r.toString=function(it){if(2>(it=it||10)||36<it)throw Error("radix out of range: "+it);if(De(this))return"0";if(dt(this))return"-"+lt(this).toString(it);for(var Me=E(Math.pow(it,6)),Be=this,st="";;){var ht=An(Be,Me).g,wt=((0<(Be=ln(Be,ht.j(Me))).g.length?Be.g[0]:Be.h)>>>0).toString(it);if(De(Be=ht))return wt+st;for(;6>wt.length;)wt="0"+wt;st=wt+st}},r.i=function(it){return 0>it?0:it<this.g.length?this.g[it]:this.h},r.l=function(it){return dt(it=ln(this,it))?-1:De(it)?0:1},r.abs=function(){return dt(this)?lt(this):this},r.add=function(it){for(var Me=Math.max(this.g.length,it.g.length),Be=[],st=0,ht=0;ht<=Me;ht++){var wt=st+(65535&this.i(ht))+(65535&it.i(ht)),He=(wt>>>16)+(this.i(ht)>>>16)+(it.i(ht)>>>16);st=He>>>16,Be[ht]=(He&=65535)<<16|(wt&=65535)}return new u(Be,-2147483648&Be[Be.length-1]?-1:0)},r.j=function(it){if(De(this)||De(it))return x;if(dt(this))return dt(it)?lt(this).j(lt(it)):lt(lt(this).j(it));if(dt(it))return lt(this.j(lt(it)));if(0>this.l(ce)&&0>it.l(ce))return E(this.m()*it.m());for(var Me=this.g.length+it.g.length,Be=[],st=0;st<2*Me;st++)Be[st]=0;for(st=0;st<this.g.length;st++)for(var ht=0;ht<it.g.length;ht++){var wt=this.i(st)>>>16,He=65535&this.i(st),cf=it.i(ht)>>>16,ST=65535&it.i(ht);Be[2*st+2*ht]+=He*ST,vn(Be,2*st+2*ht),Be[2*st+2*ht+1]+=wt*ST,vn(Be,2*st+2*ht+1),Be[2*st+2*ht+1]+=He*cf,vn(Be,2*st+2*ht+1),Be[2*st+2*ht+2]+=wt*cf,vn(Be,2*st+2*ht+2)}for(st=0;st<Me;st++)Be[st]=Be[2*st+1]<<16|Be[2*st];for(st=Me;st<2*Me;st++)Be[st]=0;return new u(Be,0)},r.A=function(it){return An(this,it).h},r.and=function(it){for(var Me=Math.max(this.g.length,it.g.length),Be=[],st=0;st<Me;st++)Be[st]=this.i(st)&it.i(st);return new u(Be,this.h&it.h)},r.or=function(it){for(var Me=Math.max(this.g.length,it.g.length),Be=[],st=0;st<Me;st++)Be[st]=this.i(st)|it.i(st);return new u(Be,this.h|it.h)},r.xor=function(it){for(var Me=Math.max(this.g.length,it.g.length),Be=[],st=0;st<Me;st++)Be[st]=this.i(st)^it.i(st);return new u(Be,this.h^it.h)},n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,Db=qf.Md5=n,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=E,u.fromString=function w(it,Me){if(0==it.length)throw Error("number format error: empty string");if(2>(Me=Me||10)||36<Me)throw Error("radix out of range: "+Me);if("-"==it.charAt(0))return lt(w(it.substring(1),Me));if(0<=it.indexOf("-"))throw Error('number format error: interior "-" character');for(var Be=E(Math.pow(Me,8)),st=x,ht=0;ht<it.length;ht+=8){var wt=Math.min(8,it.length-ht),He=parseInt(it.substring(ht,ht+wt),Me);8>wt?(wt=E(Math.pow(Me,wt)),st=st.j(wt).add(E(He))):st=(st=st.j(Be)).add(E(He))}return st},th=qf.Integer=u}).apply(typeof Sy<"u"?Sy:typeof self<"u"?self:typeof window<"u"?window:{});var Ry,Rb,bm,iD,Wu,Py,xy,oD,BN,Dy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qc={};(function(){var r,e="function"==typeof Object.defineProperties?Object.defineProperty:function(v,L,H){return v==Array.prototype||v==Object.prototype||(v[L]=H.value),v},n=function t(v){v=["object"==typeof globalThis&&globalThis,v,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Dy&&Dy];for(var L=0;L<v.length;++L){var H=v[L];if(H&&H.Math==Math)return H}throw Error("Cannot find global object")}(this);!function s(v,L){if(L)e:{var H=n;v=v.split(".");for(var he=0;he<v.length-1;he++){var mt=v[he];if(!(mt in H))break e;H=H[mt]}(L=L(he=H[v=v[v.length-1]]))!=he&&null!=L&&e(H,v,{configurable:!0,writable:!0,value:L})}}("Array.prototype.values",function(v){return v||function(){return function l(v,L){v instanceof String&&(v+="");var H=0,he=!1,mt={next:function(){if(!he&&H<v.length){var kt=H++;return{value:L(kt,v[kt]),done:!1}}return he=!0,{done:!0,value:void 0}}};return mt[Symbol.iterator]=function(){return mt},mt}(this,function(L,H){return H})}});var u=u||{},h=this||self;function p(v){var L=typeof v;return"array"==(L="object"!=L?L:v?Array.isArray(v)?"array":L:"null")||"object"==L&&"number"==typeof v.length}function E(v){var L=typeof v;return"object"==L&&null!=v||"function"==L}function w(v,L,H){return v.call.apply(v.bind,arguments)}function x(v,L,H){if(!v)throw Error();if(2<arguments.length){var he=Array.prototype.slice.call(arguments,2);return function(){var mt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(mt,he),v.apply(L,mt)}}return function(){return v.apply(L,arguments)}}function G(v,L,H){return(G=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?w:x).apply(null,arguments)}function ce(v,L){var H=Array.prototype.slice.call(arguments,1);return function(){var he=H.slice();return he.push.apply(he,arguments),v.apply(this,he)}}function De(v,L){function H(){}H.prototype=L.prototype,v.aa=L.prototype,v.prototype=new H,v.prototype.constructor=v,v.Qb=function(he,mt,kt){for(var Cn=Array(arguments.length-2),oo=2;oo<arguments.length;oo++)Cn[oo-2]=arguments[oo];return L.prototype[mt].apply(he,Cn)}}function dt(v){const L=v.length;if(0<L){const H=Array(L);for(let he=0;he<L;he++)H[he]=v[he];return H}return[]}function lt(v,L){for(let H=1;H<arguments.length;H++){const he=arguments[H];if(p(he)){const mt=v.length||0,kt=he.length||0;v.length=mt+kt;for(let Cn=0;Cn<kt;Cn++)v[mt+Cn]=he[Cn]}else v.push(he)}}function vn(v){return/^[\s\xa0]*$/.test(v)}function cn(){var v=h.navigator;return v&&(v=v.userAgent)?v:""}function An(v){return An[" "](v),v}An[" "]=function(){};var Yn=!(-1==cn().indexOf("Gecko")||-1!=cn().toLowerCase().indexOf("webkit")&&-1==cn().indexOf("Edge")||-1!=cn().indexOf("Trident")||-1!=cn().indexOf("MSIE")||-1!=cn().indexOf("Edge"));function ar(v,L,H){for(const he in v)L.call(H,v[he],he,v)}function Me(v){const L={};for(const H in v)L[H]=v[H];return L}const Be="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function st(v,L){let H,he;for(let mt=1;mt<arguments.length;mt++){for(H in he=arguments[mt],he)v[H]=he[H];for(let kt=0;kt<Be.length;kt++)H=Be[kt],Object.prototype.hasOwnProperty.call(he,H)&&(v[H]=he[H])}}function ht(v){var L=1;v=v.split(":");const H=[];for(;0<L&&v.length;)H.push(v.shift()),L--;return v.length&&H.push(v.join(":")),H}function wt(v){h.setTimeout(()=>{throw v},0)}function He(){var v=TV;let L=null;return v.g&&(L=v.g,v.g=v.g.next,v.g||(v.h=null),L.next=null),L}var ST=new class ln{constructor(L,H){this.i=L,this.j=H,this.h=0,this.g=null}get(){let L;return 0<this.h?(this.h--,L=this.g,this.g=L.next,L.next=null):L=this.i(),L}}(()=>new VH,v=>v.reset());class VH{constructor(){this.next=this.g=this.h=null}set(L,H){this.h=L,this.g=H,this.next=null}reset(){this.next=this.g=this.h=null}}let DT,RT=!1,TV=new class cf{constructor(){this.h=this.g=null}add(L,H){const he=ST.get();he.set(L,H),this.h?this.h.next=he:this.g=he,this.h=he}},KB=()=>{const v=h.Promise.resolve(void 0);DT=()=>{v.then(UH)}};var UH=()=>{for(var v;v=He();){try{v.h.call(v.g)}catch(H){wt(H)}var L=ST;L.j(v),100>L.h&&(L.h++,v.next=L.g,L.g=v)}RT=!1};function Sg(){this.s=this.s,this.C=this.C}function Sa(v,L){this.type=v,this.g=this.target=L,this.defaultPrevented=!1}Sg.prototype.s=!1,Sg.prototype.ma=function(){this.s||(this.s=!0,this.N())},Sg.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Sa.prototype.h=function(){this.defaultPrevented=!0};var BH=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var v=!1,L=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const H=()=>{};h.addEventListener("test",H,L),h.removeEventListener("test",H,L)}catch{}return v}();function PT(v,L){if(Sa.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var H=this.type=v.type,he=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=L,L=v.relatedTarget){if(Yn){e:{try{An(L.nodeName);var mt=!0;break e}catch{}mt=!1}mt||(L=null)}}else"mouseover"==H?L=v.fromElement:"mouseout"==H&&(L=v.toElement);this.relatedTarget=L,he?(this.clientX=void 0!==he.clientX?he.clientX:he.pageX,this.clientY=void 0!==he.clientY?he.clientY:he.pageY,this.screenX=he.screenX||0,this.screenY=he.screenY||0):(this.clientX=void 0!==v.clientX?v.clientX:v.pageX,this.clientY=void 0!==v.clientY?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType="string"==typeof v.pointerType?v.pointerType:$H[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&PT.aa.h.call(this)}}De(PT,Sa);var $H={2:"touch",3:"pen",4:"mouse"};PT.prototype.h=function(){PT.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var xT="closure_listenable_"+(1e6*Math.random()|0),jH=0;function HH(v,L,H,he,mt){this.listener=v,this.proxy=null,this.src=L,this.type=H,this.capture=!!he,this.ha=mt,this.key=++jH,this.da=this.fa=!1}function vM(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function yM(v){this.src=v,this.g={},this.h=0}function SV(v,L){var H=L.type;if(H in v.g){var kt,he=v.g[H],mt=Array.prototype.indexOf.call(he,L,void 0);(kt=0<=mt)&&Array.prototype.splice.call(he,mt,1),kt&&(vM(L),0==v.g[H].length&&(delete v.g[H],v.h--))}}function DV(v,L,H,he){for(var mt=0;mt<v.length;++mt){var kt=v[mt];if(!kt.da&&kt.listener==L&&kt.capture==!!H&&kt.ha==he)return mt}return-1}yM.prototype.add=function(v,L,H,he,mt){var kt=v.toString();(v=this.g[kt])||(v=this.g[kt]=[],this.h++);var Cn=DV(v,L,he,mt);return-1<Cn?(L=v[Cn],H||(L.fa=!1)):((L=new HH(L,this.src,kt,!!he,mt)).fa=H,v.push(L)),L};var RV="closure_lm_"+(1e6*Math.random()|0),PV={};function XB(v,L,H,he,mt){if(he&&he.once)return YB(v,L,H,he,mt);if(Array.isArray(L)){for(var kt=0;kt<L.length;kt++)XB(v,L[kt],H,he,mt);return null}return H=kV(H),v&&v[xT]?v.K(L,H,E(he)?!!he.capture:!!he,mt):QB(v,L,H,!1,he,mt)}function QB(v,L,H,he,mt,kt){if(!L)throw Error("Invalid event type");var Cn=E(mt)?!!mt.capture:!!mt,oo=MV(v);if(oo||(v[RV]=oo=new yM(v)),(H=oo.add(L,H,he,Cn,kt)).proxy)return H;if(he=function zH(){const L=GH;return function v(H){return L.call(v.src,v.listener,H)}}(),H.proxy=he,he.src=v,he.listener=H,v.addEventListener)BH||(mt=Cn),void 0===mt&&(mt=!1),v.addEventListener(L.toString(),he,mt);else if(v.attachEvent)v.attachEvent(ZB(L.toString()),he);else{if(!v.addListener||!v.removeListener)throw Error("addEventListener and attachEvent are unavailable.");v.addListener(he)}return H}function YB(v,L,H,he,mt){if(Array.isArray(L)){for(var kt=0;kt<L.length;kt++)YB(v,L[kt],H,he,mt);return null}return H=kV(H),v&&v[xT]?v.L(L,H,E(he)?!!he.capture:!!he,mt):QB(v,L,H,!0,he,mt)}function JB(v,L,H,he,mt){if(Array.isArray(L))for(var kt=0;kt<L.length;kt++)JB(v,L[kt],H,he,mt);else he=E(he)?!!he.capture:!!he,H=kV(H),v&&v[xT]?(v=v.i,(L=String(L).toString())in v.g&&-1<(H=DV(kt=v.g[L],H,he,mt))&&(vM(kt[H]),Array.prototype.splice.call(kt,H,1),0==kt.length&&(delete v.g[L],v.h--))):v&&(v=MV(v))&&(L=v.g[L.toString()],v=-1,L&&(v=DV(L,H,he,mt)),(H=-1<v?L[v]:null)&&xV(H))}function xV(v){if("number"!=typeof v&&v&&!v.da){var L=v.src;if(L&&L[xT])SV(L.i,v);else{var H=v.type,he=v.proxy;L.removeEventListener?L.removeEventListener(H,he,v.capture):L.detachEvent?L.detachEvent(ZB(H),he):L.addListener&&L.removeListener&&L.removeListener(he),(H=MV(L))?(SV(H,v),0==H.h&&(H.src=null,L[RV]=null)):vM(v)}}}function ZB(v){return v in PV?PV[v]:PV[v]="on"+v}function GH(v,L){if(v.da)v=!0;else{L=new PT(L,this);var H=v.listener,he=v.ha||v.src;v.fa&&xV(v),v=H.call(he,L)}return v}function MV(v){return(v=v[RV])instanceof yM?v:null}var NV="__closure_events_fn_"+(1e9*Math.random()>>>0);function kV(v){return"function"==typeof v?v:(v[NV]||(v[NV]=function(L){return v.handleEvent(L)}),v[NV])}function Da(){Sg.call(this),this.i=new yM(this),this.M=this,this.F=null}function Ha(v,L){var H,he=v.F;if(he)for(H=[];he;he=he.F)H.push(he);if(v=v.M,he=L.type||L,"string"==typeof L)L=new Sa(L,v);else if(L instanceof Sa)L.target=L.target||v;else{var mt=L;st(L=new Sa(he,v),mt)}if(mt=!0,H)for(var kt=H.length-1;0<=kt;kt--){var Cn=L.g=H[kt];mt=EM(Cn,he,!0,L)&&mt}if(mt=EM(Cn=L.g=v,he,!0,L)&&mt,mt=EM(Cn,he,!1,L)&&mt,H)for(kt=0;kt<H.length;kt++)mt=EM(Cn=L.g=H[kt],he,!1,L)&&mt}function EM(v,L,H,he){if(!(L=v.i.g[String(L)]))return!0;L=L.concat();for(var mt=!0,kt=0;kt<L.length;++kt){var Cn=L[kt];if(Cn&&!Cn.da&&Cn.capture==H){var oo=Cn.listener,da=Cn.ha||Cn.src;Cn.fa&&SV(v.i,Cn),mt=!1!==oo.call(da,he)&&mt}}return mt&&!he.defaultPrevented}function e$(v,L,H){if("function"==typeof v)H&&(v=G(v,H));else{if(!v||"function"!=typeof v.handleEvent)throw Error("Invalid listener argument");v=G(v.handleEvent,v)}return 2147483647<Number(L)?-1:h.setTimeout(v,L||0)}function t$(v){v.g=e$(()=>{v.g=null,v.i&&(v.i=!1,t$(v))},v.l);const L=v.h;v.h=null,v.m.apply(null,L)}De(Da,Sg),Da.prototype[xT]=!0,Da.prototype.removeEventListener=function(v,L,H,he){JB(this,v,L,H,he)},Da.prototype.N=function(){if(Da.aa.N.call(this),this.i){var L,v=this.i;for(L in v.g){for(var H=v.g[L],he=0;he<H.length;he++)vM(H[he]);delete v.g[L],v.h--}}this.F=null},Da.prototype.K=function(v,L,H,he){return this.i.add(String(v),L,!1,H,he)},Da.prototype.L=function(v,L,H,he){return this.i.add(String(v),L,!0,H,he)};class WH extends Sg{constructor(L,H){super(),this.m=L,this.l=H,this.h=null,this.i=!1,this.g=null}j(L){this.h=arguments,this.g?this.i=!0:t$(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function MT(v){Sg.call(this),this.h=v,this.g={}}De(MT,Sg);var n$=[];function r$(v){ar(v.g,function(L,H){this.g.hasOwnProperty(H)&&xV(L)},v),v.g={}}MT.prototype.N=function(){MT.aa.N.call(this),r$(this)},MT.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var OV=h.JSON.stringify,qH=h.JSON.parse,KH=class{stringify(v){return h.JSON.stringify(v,void 0)}parse(v){return h.JSON.parse(v,void 0)}};function FV(){}function o$(){}FV.prototype.h=null;var NT={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function LV(){Sa.call(this,"d")}function VV(){Sa.call(this,"c")}De(LV,Sa),De(VV,Sa);var wv={},s$=null;function IM(){return s$=s$||new Da}function a$(v){Sa.call(this,wv.La,v)}function kT(v){const L=IM();Ha(L,new a$(L))}function l$(v,L){Sa.call(this,wv.STAT_EVENT,v),this.stat=L}function za(v){const L=IM();Ha(L,new l$(L,v))}function c$(v,L){Sa.call(this,wv.Ma,v),this.size=L}function OT(v,L){if("function"!=typeof v)throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){v()},L)}function FT(){this.g=!0}function wI(v,L,H,he){v.info(function(){return"XMLHTTP TEXT ("+L+"): "+function JH(v,L){if(!v.g)return L;if(!L)return null;try{var H=JSON.parse(L);if(H)for(v=0;v<H.length;v++)if(Array.isArray(H[v])){var he=H[v];if(!(2>he.length)){var mt=he[1];if(Array.isArray(mt)&&!(1>mt.length)){var kt=mt[0];if("noop"!=kt&&"stop"!=kt&&"close"!=kt)for(var Cn=1;Cn<mt.length;Cn++)mt[Cn]=""}}}return OV(H)}catch{return L}}(v,H)+(he?" "+he:"")})}wv.La="serverreachability",De(a$,Sa),wv.STAT_EVENT="statevent",De(l$,Sa),wv.Ma="timingevent",De(c$,Sa),FT.prototype.xa=function(){this.g=!1},FT.prototype.info=function(){};var UV,bM={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},u$={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function wM(){}function Dg(v,L,H,he){this.j=v,this.i=L,this.l=H,this.R=he||1,this.U=new MT(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new d$}function d$(){this.i=null,this.g="",this.h=!1}De(wM,FV),wM.prototype.g=function(){return new XMLHttpRequest},wM.prototype.i=function(){return{}},UV=new wM;var h$={},BV={};function $V(v,L,H){v.L=1,v.v=SM(uf(L)),v.m=H,v.P=!0,f$(v,null)}function f$(v,L){v.F=Date.now(),CM(v),v.A=uf(v.v);var H=v.A,he=v.R;Array.isArray(he)||(he=[String(he)]),S$(H.i,"t",he),v.C=0,H=v.j.J,v.h=new d$,v.g=G$(v.j,H?L:null,!v.m),0<v.O&&(v.M=new WH(G(v.Y,v,v.g),v.O)),L=v.U,H=v.g,he=v.ca;var mt="readystatechange";Array.isArray(mt)||(mt&&(n$[0]=mt.toString()),mt=n$);for(var kt=0;kt<mt.length;kt++){var Cn=XB(H,mt[kt],he||L.handleEvent,!1,L.h||L);if(!Cn)break;L.g[Cn.key]=Cn}L=v.H?Me(v.H):{},v.m?(v.u||(v.u="POST"),L["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,L)):(v.u="GET",v.g.ea(v.A,v.u,null,L)),kT(),function XH(v,L,H,he,mt,kt){v.info(function(){if(v.g)if(kt)for(var Cn="",oo=kt.split("&"),da=0;da<oo.length;da++){var bi=oo[da].split("=");if(1<bi.length){var Ra=bi[0];bi=bi[1];var Pa=Ra.split("_");Cn=2<=Pa.length&&"type"==Pa[1]?Cn+(Ra+"=")+bi+"&":Cn+(Ra+"=redacted&")}}else Cn=null;else Cn=kt;return"XMLHTTP REQ ("+he+") [attempt "+mt+"]: "+L+"\n"+H+"\n"+Cn})}(v.i,v.u,v.A,v.l,v.R,v.m)}function p$(v){return!!v.g&&"GET"==v.u&&2!=v.L&&v.j.Ca}function ZH(v,L){var H=v.C,he=L.indexOf("\n",H);return-1==he?BV:(H=Number(L.substring(H,he)),isNaN(H)?h$:(he+=1)+H>L.length?BV:(L=L.slice(he,he+H),v.C=he+H,L))}function CM(v){v.S=Date.now()+v.I,g$(v,v.I)}function g$(v,L){if(null!=v.B)throw Error("WatchDog timer not null");v.B=OT(G(v.ba,v),L)}function jV(v){v.B&&(h.clearTimeout(v.B),v.B=null)}function LT(v){0==v.j.G||v.J||$$(v.j,v)}function Cv(v){jV(v);var L=v.M;L&&"function"==typeof L.ma&&L.ma(),v.M=null,r$(v.U),v.g&&(L=v.g,v.g=null,L.abort(),L.ma())}function HV(v,L){try{var H=v.j;if(0!=H.G&&(H.g==v||zV(H.h,v)))if(!v.K&&zV(H.h,v)&&3==H.G){try{var he=H.Da.g.parse(L)}catch{he=null}if(Array.isArray(he)&&3==he.length){var mt=he;if(0==mt[0]){e:if(!H.u){if(H.g){if(!(H.g.F+3e3<v.F))break e;MM(H),PM(H)}KV(H),za(18)}}else H.za=mt[1],0<H.za-H.T&&37500>mt[2]&&H.F&&0==H.v&&!H.C&&(H.C=OT(G(H.Za,H),6e3));if(1>=v$(H.h)&&H.ca){try{H.ca()}catch{}H.ca=void 0}}else Tv(H,11)}else if((v.K||H.g==v)&&MM(H),!vn(L))for(mt=H.Da.g.parse(L),L=0;L<mt.length;L++){let bi=mt[L];if(H.T=bi[0],bi=bi[1],2==H.G)if("c"==bi[0]){H.K=bi[1],H.ia=bi[2];const Ra=bi[3];null!=Ra&&(H.la=Ra,H.j.info("VER="+H.la));const Pa=bi[4];null!=Pa&&(H.Aa=Pa,H.j.info("SVER="+H.Aa));const TI=bi[5];null!=TI&&"number"==typeof TI&&0<TI&&(H.L=he=1.5*TI,H.j.info("backChannelRequestTimeoutMs_="+he)),he=H;const vu=v.g;if(vu){const kM=vu.g?vu.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kM){var kt=he.h;kt.g||-1==kM.indexOf("spdy")&&-1==kM.indexOf("quic")&&-1==kM.indexOf("h2")||(kt.j=kt.l,kt.g=new Set,kt.h&&(GV(kt,kt.h),kt.h=null))}if(he.D){const QV=vu.g?vu.g.getResponseHeader("X-HTTP-Session-Id"):null;QV&&(he.ya=QV,To(he.I,he.D,QV))}}H.G=3,H.l&&H.l.ua(),H.ba&&(H.R=Date.now()-v.F,H.j.info("Handshake RTT: "+H.R+"ms"));var Cn=v;if((he=H).qa=z$(he,he.J?he.ia:null,he.W),Cn.K){y$(he.h,Cn);var oo=Cn,da=he.L;da&&(oo.I=da),oo.B&&(jV(oo),CM(oo)),he.g=Cn}else U$(he);0<H.i.length&&xM(H)}else"stop"!=bi[0]&&"close"!=bi[0]||Tv(H,7);else 3==H.G&&("stop"==bi[0]||"close"==bi[0]?"stop"==bi[0]?Tv(H,7):qV(H):"noop"!=bi[0]&&H.l&&H.l.ta(bi),H.v=0)}kT()}catch{}}Dg.prototype.ca=function(v){v=v.target;const L=this.M;L&&3==df(v)?L.j():this.Y(v)},Dg.prototype.Y=function(v){try{if(v==this.g)e:{const Pa=df(this.g);var L=this.g.Ba();if(this.g.Z(),!(3>Pa)&&(3!=Pa||this.g&&(this.h.h||this.g.oa()||k$(this.g)))){this.J||4!=Pa||7==L||kT(),jV(this);var H=this.g.Z();this.X=H;t:if(p$(this)){var he=k$(this.g);v="";var mt=he.length,kt=4==df(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Cv(this),LT(this);var Cn="";break t}this.h.i=new h.TextDecoder}for(L=0;L<mt;L++)this.h.h=!0,v+=this.h.i.decode(he[L],{stream:!(kt&&L==mt-1)});he.length=0,this.h.g+=v,this.C=0,Cn=this.h.g}else Cn=this.g.oa();if(this.o=200==H,function QH(v,L,H,he,mt,kt,Cn){v.info(function(){return"XMLHTTP RESP ("+he+") [ attempt "+mt+"]: "+L+"\n"+H+"\n"+kt+" "+Cn})}(this.i,this.u,this.A,this.l,this.R,Pa,H),this.o){if(this.T&&!this.K){t:{if(this.g){var oo,da=this.g;if((oo=da.g?da.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vn(oo)){var bi=oo;break t}}bi=null}if(!(H=bi)){this.o=!1,this.s=3,za(12),Cv(this),LT(this);break e}wI(this.i,this.l,H,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,HV(this,H)}if(this.P){let vu;for(H=!0;!this.J&&this.C<Cn.length;){if(vu=ZH(this,Cn),vu==BV){4==Pa&&(this.s=4,za(14),H=!1),wI(this.i,this.l,null,"[Incomplete Response]");break}if(vu==h$){this.s=4,za(15),wI(this.i,this.l,Cn,"[Invalid Chunk]"),H=!1;break}wI(this.i,this.l,vu,null),HV(this,vu)}if(p$(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Pa||0!=Cn.length||this.h.h||(this.s=1,za(16),H=!1),this.o=this.o&&H,H){if(0<Cn.length&&!this.W){this.W=!0;var Ra=this.j;Ra.g==this&&Ra.ba&&!Ra.M&&(Ra.j.info("Great, no buffering proxy detected. Bytes received: "+Cn.length),XV(Ra),Ra.M=!0,za(11))}}else wI(this.i,this.l,Cn,"[Invalid Chunked Response]"),Cv(this),LT(this)}else wI(this.i,this.l,Cn,null),HV(this,Cn);4==Pa&&Cv(this),this.o&&!this.J&&(4==Pa?$$(this.j,this):(this.o=!1,CM(this)))}else(function mz(v){const L={};v=(v.g&&2<=df(v)&&v.g.getAllResponseHeaders()||"").split("\r\n");for(let he=0;he<v.length;he++){if(vn(v[he]))continue;var H=ht(v[he]);const mt=H[0];if("string"!=typeof(H=H[1]))continue;H=H.trim();const kt=L[mt]||[];L[mt]=kt,kt.push(H)}!function it(v,L){for(const H in v)L.call(void 0,v[H],H,v)}(L,function(he){return he.join(", ")})})(this.g),400==H&&0<Cn.indexOf("Unknown SID")?(this.s=3,za(12)):(this.s=0,za(13)),Cv(this),LT(this)}}}catch{}},Dg.prototype.cancel=function(){this.J=!0,Cv(this)},Dg.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?(function YH(v,L){v.info(function(){return"TIMEOUT: "+L})}(this.i,this.A),2!=this.L&&(kT(),za(17)),Cv(this),this.s=2,LT(this)):g$(this,this.S-v)};var ez=class{constructor(v,L){this.g=v,this.map=L}};function m$(v){this.l=v||10,v=h.PerformanceNavigationTiming?0<(v=h.performance.getEntriesByType("navigation")).length&&("hq"==v[0].nextHopProtocol||"h2"==v[0].nextHopProtocol):!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _$(v){return!!v.h||!!v.g&&v.g.size>=v.j}function v$(v){return v.h?1:v.g?v.g.size:0}function zV(v,L){return v.h?v.h==L:!!v.g&&v.g.has(L)}function GV(v,L){v.g?v.g.add(L):v.h=L}function y$(v,L){v.h&&v.h==L?v.h=null:v.g&&v.g.has(L)&&v.g.delete(L)}function E$(v){if(null!=v.h)return v.i.concat(v.h.D);if(null!=v.g&&0!==v.g.size){let L=v.i;for(const H of v.g.values())L=L.concat(H.D);return L}return dt(v.i)}function I$(v,L){if(v.forEach&&"function"==typeof v.forEach)v.forEach(L,void 0);else if(p(v)||"string"==typeof v)Array.prototype.forEach.call(v,L,void 0);else for(var H=function nz(v){if(v.na&&"function"==typeof v.na)return v.na();if(!v.V||"function"!=typeof v.V){if(typeof Map<"u"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set<"u"&&v instanceof Set)){if(p(v)||"string"==typeof v){var L=[];v=v.length;for(var H=0;H<v;H++)L.push(H);return L}L=[],H=0;for(const he in v)L[H++]=he;return L}}}(v),he=function tz(v){if(v.V&&"function"==typeof v.V)return v.V();if(typeof Map<"u"&&v instanceof Map||typeof Set<"u"&&v instanceof Set)return Array.from(v.values());if("string"==typeof v)return v.split("");if(p(v)){for(var L=[],H=v.length,he=0;he<H;he++)L.push(v[he]);return L}for(he in L=[],H=0,v)L[H++]=v[he];return L}(v),mt=he.length,kt=0;kt<mt;kt++)L.call(void 0,he[kt],H&&H[kt],v)}m$.prototype.cancel=function(){if(this.i=E$(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const v of this.g.values())v.cancel();this.g.clear()}};var b$=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Av(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof Av){this.h=v.h,AM(this,v.j),this.o=v.o,this.g=v.g,TM(this,v.s),this.l=v.l;var L=v.i,H=new BT;H.i=L.i,L.g&&(H.g=new Map(L.g),H.h=L.h),w$(this,H),this.m=v.m}else v&&(L=String(v).match(b$))?(this.h=!1,AM(this,L[1]||"",!0),this.o=VT(L[2]||""),this.g=VT(L[3]||"",!0),TM(this,L[4]),this.l=VT(L[5]||"",!0),w$(this,L[6]||"",!0),this.m=VT(L[7]||"")):(this.h=!1,this.i=new BT(null,this.h))}function uf(v){return new Av(v)}function AM(v,L,H){v.j=H?VT(L,!0):L,v.j&&(v.j=v.j.replace(/:$/,""))}function TM(v,L){if(L){if(L=Number(L),isNaN(L)||0>L)throw Error("Bad port number "+L);v.s=L}else v.s=null}function w$(v,L,H){L instanceof BT?(v.i=L,function cz(v,L){L&&!v.j&&(Rg(v),v.i=null,v.g.forEach(function(H,he){var mt=he.toLowerCase();he!=mt&&(A$(this,he),S$(this,mt,H))},v)),v.j=L}(v.i,v.h)):(H||(L=UT(L,az)),v.i=new BT(L,v.h))}function To(v,L,H){v.i.set(L,H)}function SM(v){return To(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function VT(v,L){return v?L?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function UT(v,L,H){return"string"==typeof v?(v=encodeURI(v).replace(L,iz),H&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function iz(v){return"%"+((v=v.charCodeAt(0))>>4&15).toString(16)+(15&v).toString(16)}Av.prototype.toString=function(){var v=[],L=this.j;L&&v.push(UT(L,C$,!0),":");var H=this.g;return(H||"file"==L)&&(v.push("//"),(L=this.o)&&v.push(UT(L,C$,!0),"@"),v.push(encodeURIComponent(String(H)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(H=this.s)&&v.push(":",String(H))),(H=this.l)&&(this.g&&"/"!=H.charAt(0)&&v.push("/"),v.push(UT(H,"/"==H.charAt(0)?sz:oz,!0))),(H=this.i.toString())&&v.push("?",H),(H=this.m)&&v.push("#",UT(H,lz)),v.join("")};var C$=/[#\/\?@]/g,oz=/[#\?:]/g,sz=/[#\?]/g,az=/[#\?@]/g,lz=/#/g;function BT(v,L){this.h=this.g=null,this.i=v||null,this.j=!!L}function Rg(v){v.g||(v.g=new Map,v.h=0,v.i&&function rz(v,L){if(v){v=v.split("&");for(var H=0;H<v.length;H++){var he=v[H].indexOf("="),mt=null;if(0<=he){var kt=v[H].substring(0,he);mt=v[H].substring(he+1)}else kt=v[H];L(kt,mt?decodeURIComponent(mt.replace(/\+/g," ")):"")}}}(v.i,function(L,H){v.add(decodeURIComponent(L.replace(/\+/g," ")),H)}))}function A$(v,L){Rg(v),L=CI(v,L),v.g.has(L)&&(v.i=null,v.h-=v.g.get(L).length,v.g.delete(L))}function T$(v,L){return Rg(v),L=CI(v,L),v.g.has(L)}function S$(v,L,H){A$(v,L),0<H.length&&(v.i=null,v.g.set(CI(v,L),dt(H)),v.h+=H.length)}function CI(v,L){return L=String(L),v.j&&(L=L.toLowerCase()),L}function Pg(v,L,H,he,mt){try{mt&&(mt.onload=null,mt.onerror=null,mt.onabort=null,mt.ontimeout=null),he(H)}catch{}}function hz(){this.g=new KH}function fz(v,L,H){const he=H||"";try{I$(v,function(mt,kt){let Cn=mt;E(mt)&&(Cn=OV(mt)),L.push(he+kt+"="+encodeURIComponent(Cn))})}catch(mt){throw L.push(he+"type="+encodeURIComponent("_badmap")),mt}}function $T(v){this.l=v.Ub||null,this.j=v.eb||!1}function DM(v,L){Da.call(this),this.D=v,this.o=L,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function D$(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}function jT(v){v.readyState=4,v.l=null,v.j=null,v.v=null,HT(v)}function HT(v){v.onreadystatechange&&v.onreadystatechange.call(v)}function R$(v){let L="";return ar(v,function(H,he){L+=he,L+=":",L+=H,L+="\r\n"}),L}function WV(v,L,H){e:{for(he in H){var he=!1;break e}he=!0}he||(H=R$(H),"string"==typeof v?null!=H&&encodeURIComponent(String(H)):To(v,L,H))}function Yo(v){Da.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(r=BT.prototype).add=function(v,L){Rg(this),this.i=null,v=CI(this,v);var H=this.g.get(v);return H||this.g.set(v,H=[]),H.push(L),this.h+=1,this},r.forEach=function(v,L){Rg(this),this.g.forEach(function(H,he){H.forEach(function(mt){v.call(L,mt,he,this)},this)},this)},r.na=function(){Rg(this);const v=Array.from(this.g.values()),L=Array.from(this.g.keys()),H=[];for(let he=0;he<L.length;he++){const mt=v[he];for(let kt=0;kt<mt.length;kt++)H.push(L[he])}return H},r.V=function(v){Rg(this);let L=[];if("string"==typeof v)T$(this,v)&&(L=L.concat(this.g.get(CI(this,v))));else{v=Array.from(this.g.values());for(let H=0;H<v.length;H++)L=L.concat(v[H])}return L},r.set=function(v,L){return Rg(this),this.i=null,T$(this,v=CI(this,v))&&(this.h-=this.g.get(v).length),this.g.set(v,[L]),this.h+=1,this},r.get=function(v,L){return v&&0<(v=this.V(v)).length?String(v[0]):L},r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],L=Array.from(this.g.keys());for(var H=0;H<L.length;H++){var he=L[H];const kt=encodeURIComponent(String(he)),Cn=this.V(he);for(he=0;he<Cn.length;he++){var mt=kt;""!==Cn[he]&&(mt+="="+encodeURIComponent(String(Cn[he]))),v.push(mt)}}return this.i=v.join("&")},De($T,FV),$T.prototype.g=function(){return new DM(this.l,this.j)},$T.prototype.i=function(v){return function(){return v}}({}),De(DM,Da),(r=DM.prototype).open=function(v,L){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=L,this.readyState=1,HT(this)},r.send=function(v){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const L={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(L.body=v),(this.D||h).fetch(new Request(this.A,L)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,jT(this)),this.readyState=0},r.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,HT(this)),this.g&&(this.readyState=3,HT(this),this.g)))if("arraybuffer"===this.responseType)v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;D$(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))},r.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var L=v.value?v.value:new Uint8Array(0);(L=this.v.decode(L,{stream:!v.done}))&&(this.response=this.responseText+=L)}v.done?jT(this):HT(this),3==this.readyState&&D$(this)}},r.Ra=function(v){this.g&&(this.response=this.responseText=v,jT(this))},r.Qa=function(v){this.g&&(this.response=v,jT(this))},r.ga=function(){this.g&&jT(this)},r.setRequestHeader=function(v,L){this.u.append(v,L)},r.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],L=this.h.entries();for(var H=L.next();!H.done;)v.push((H=H.value)[0]+": "+H[1]),H=L.next();return v.join("\r\n")},Object.defineProperty(DM.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(v){this.m=v?"include":"same-origin"}}),De(Yo,Da);var pz=/^https?$/i,gz=["POST","PUT"];function P$(v,L){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=L,v.m=5,x$(v),RM(v)}function x$(v){v.A||(v.A=!0,Ha(v,"complete"),Ha(v,"error"))}function M$(v){if(v.h&&typeof u<"u"&&(!v.v[1]||4!=df(v)||2!=v.Z()))if(v.u&&4==df(v))e$(v.Ea,0,v);else if(Ha(v,"readystatechange"),4==df(v)){v.h=!1;try{const Cn=v.Z();e:switch(Cn){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var L=!0;break e;default:L=!1}var H;if(!(H=L)){var he;if(he=0===Cn){var mt=String(v.D).match(b$)[1]||null;!mt&&h.self&&h.self.location&&(mt=h.self.location.protocol.slice(0,-1)),he=!pz.test(mt?mt.toLowerCase():"")}H=he}if(H)Ha(v,"complete"),Ha(v,"success");else{v.m=6;try{var kt=2<df(v)?v.g.statusText:""}catch{kt=""}v.l=kt+" ["+v.Z()+"]",x$(v)}}finally{RM(v)}}}function RM(v,L){if(v.g){N$(v);const H=v.g,he=v.v[0]?()=>{}:null;v.g=null,v.v=null,L||Ha(v,"ready");try{H.onreadystatechange=he}catch{}}}function N$(v){v.I&&(h.clearTimeout(v.I),v.I=null)}function df(v){return v.g?v.g.readyState:0}function k$(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function zT(v,L,H){return H&&H.internalChannelParams&&H.internalChannelParams[v]||L}function O$(v){this.Aa=0,this.i=[],this.j=new FT,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zT("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zT("baseRetryDelayMs",5e3,v),this.cb=zT("retryDelaySeedMs",1e4,v),this.Wa=zT("forwardChannelMaxRetries",2,v),this.wa=zT("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new m$(v&&v.concurrentRequestLimit),this.Da=new hz,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function qV(v){if(F$(v),3==v.G){var L=v.U++,H=uf(v.I);if(To(H,"SID",v.K),To(H,"RID",L),To(H,"TYPE","terminate"),GT(v,H),(L=new Dg(v,v.j,L)).L=2,L.v=SM(uf(H)),H=!1,h.navigator&&h.navigator.sendBeacon)try{H=h.navigator.sendBeacon(L.v.toString(),"")}catch{}!H&&h.Image&&((new Image).src=L.v,H=!0),H||(L.g=G$(L.j,null),L.g.ea(L.v)),L.F=Date.now(),CM(L)}H$(v)}function PM(v){v.g&&(XV(v),v.g.cancel(),v.g=null)}function F$(v){PM(v),v.u&&(h.clearTimeout(v.u),v.u=null),MM(v),v.h.cancel(),v.s&&("number"==typeof v.s&&h.clearTimeout(v.s),v.s=null)}function xM(v){if(!_$(v.h)&&!v.s){v.s=!0;var L=v.Ga;DT||KB(),RT||(DT(),RT=!0),TV.add(L,v),v.B=0}}function L$(v,L){var H;H=L?L.l:v.U++;const he=uf(v.I);To(he,"SID",v.K),To(he,"RID",H),To(he,"AID",v.T),GT(v,he),v.m&&v.o&&WV(he,v.m,v.o),H=new Dg(v,v.j,H,v.B+1),null===v.m&&(H.H=v.o),L&&(v.i=L.D.concat(v.i)),L=V$(v,H,1e3),H.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),GV(v.h,H),$V(H,he,L)}function GT(v,L){v.H&&ar(v.H,function(H,he){To(L,he,H)}),v.l&&I$({},function(H,he){To(L,he,H)})}function V$(v,L,H){H=Math.min(v.i.length,H);var he=v.l?G(v.l.Na,v.l,v):null;e:{var mt=v.i;let kt=-1;for(;;){const Cn=["count="+H];-1==kt?0<H?(kt=mt[0].g,Cn.push("ofs="+kt)):kt=0:Cn.push("ofs="+kt);let oo=!0;for(let da=0;da<H;da++){let bi=mt[da].g;const Ra=mt[da].map;if(bi-=kt,0>bi)kt=Math.max(0,mt[da].g-100),oo=!1;else try{fz(Ra,Cn,"req"+bi+"_")}catch{he&&he(Ra)}}if(oo){he=Cn.join("&");break e}}}return v=v.i.splice(0,H),L.D=v,he}function U$(v){if(!v.g&&!v.u){v.Y=1;var L=v.Fa;DT||KB(),RT||(DT(),RT=!0),TV.add(L,v),v.v=0}}function KV(v){return!(v.g||v.u||3<=v.v||(v.Y++,v.u=OT(G(v.Fa,v),j$(v,v.v)),v.v++,0))}function XV(v){null!=v.A&&(h.clearTimeout(v.A),v.A=null)}function B$(v){v.g=new Dg(v,v.j,"rpc",v.Y),null===v.m&&(v.g.H=v.o),v.g.O=0;var L=uf(v.qa);To(L,"RID","rpc"),To(L,"SID",v.K),To(L,"AID",v.T),To(L,"CI",v.F?"0":"1"),!v.F&&v.ja&&To(L,"TO",v.ja),To(L,"TYPE","xmlhttp"),GT(v,L),v.m&&v.o&&WV(L,v.m,v.o),v.L&&(v.g.I=v.L);var H=v.g;v=v.ia,H.L=1,H.v=SM(uf(L)),H.m=null,H.P=!0,f$(H,v)}function MM(v){null!=v.C&&(h.clearTimeout(v.C),v.C=null)}function $$(v,L){var H=null;if(v.g==L){MM(v),XV(v),v.g=null;var he=2}else{if(!zV(v.h,L))return;H=L.D,y$(v.h,L),he=1}if(0!=v.G)if(L.o)if(1==he){H=L.m?L.m.length:0,L=Date.now()-L.F;var mt=v.B;Ha(he=IM(),new c$(he,H)),xM(v)}else U$(v);else if(3==(mt=L.s)||0==mt&&0<L.X||!(1==he&&function _z(v,L){return!(v$(v.h)>=v.h.j-(v.s?1:0)||(v.s?(v.i=L.D.concat(v.i),0):1==v.G||2==v.G||v.B>=(v.Va?0:v.Wa)||(v.s=OT(G(v.Ga,v,L),j$(v,v.B)),v.B++,0)))}(v,L)||2==he&&KV(v)))switch(H&&0<H.length&&(L=v.h,L.i=L.i.concat(H)),mt){case 1:Tv(v,5);break;case 4:Tv(v,10);break;case 3:Tv(v,6);break;default:Tv(v,2)}}function j$(v,L){let H=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||(H*=2),H*L}function Tv(v,L){if(v.j.info("Error code "+L),2==L){var H=G(v.fb,v),he=v.Xa;const mt=!he;he=new Av(he||"//www.google.com/images/cleardot.gif"),h.location&&"http"==h.location.protocol||AM(he,"https"),SM(he),mt?function uz(v,L){const H=new FT;if(h.Image){const he=new Image;he.onload=ce(Pg,H,"TestLoadImage: loaded",!0,L,he),he.onerror=ce(Pg,H,"TestLoadImage: error",!1,L,he),he.onabort=ce(Pg,H,"TestLoadImage: abort",!1,L,he),he.ontimeout=ce(Pg,H,"TestLoadImage: timeout",!1,L,he),h.setTimeout(function(){he.ontimeout&&he.ontimeout()},1e4),he.src=v}else L(!1)}(he.toString(),H):function dz(v,L){new FT;const he=new AbortController,mt=setTimeout(()=>{he.abort(),Pg(0,0,!1,L)},1e4);fetch(v,{signal:he.signal}).then(kt=>{clearTimeout(mt),Pg(0,0,!!kt.ok,L)}).catch(()=>{clearTimeout(mt),Pg(0,0,!1,L)})}(he.toString(),H)}else za(2);v.G=0,v.l&&v.l.sa(L),H$(v),F$(v)}function H$(v){if(v.G=0,v.ka=[],v.l){const L=E$(v.h);(0!=L.length||0!=v.i.length)&&(lt(v.ka,L),lt(v.ka,v.i),v.h.i.length=0,dt(v.i),v.i.length=0),v.l.ra()}}function z$(v,L,H){var he=H instanceof Av?uf(H):new Av(H);if(""!=he.g)L&&(he.g=L+"."+he.g),TM(he,he.s);else{var mt=h.location;he=mt.protocol,L=L?L+"."+mt.hostname:mt.hostname,mt=+mt.port;var kt=new Av(null);he&&AM(kt,he),L&&(kt.g=L),mt&&TM(kt,mt),H&&(kt.l=H),he=kt}return L=v.ya,(H=v.D)&&L&&To(he,H,L),To(he,"VER",v.la),GT(v,he),he}function G$(v,L,H){if(L&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return(L=new Yo(v.Ca&&!v.pa?new $T({eb:H}):v.pa)).Ha(v.J),L}function W$(){}function NM(){}function Hl(v,L){Da.call(this),this.g=new O$(L),this.l=v,this.h=L&&L.messageUrlParams||null,v=L&&L.messageHeaders||null,L&&L.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=L&&L.initMessageHeaders||null,L&&L.messageContentType&&(v?v["X-WebChannel-Content-Type"]=L.messageContentType:v={"X-WebChannel-Content-Type":L.messageContentType}),L&&L.va&&(v?v["X-WebChannel-Client-Profile"]=L.va:v={"X-WebChannel-Client-Profile":L.va}),this.g.S=v,(v=L&&L.Sb)&&!vn(v)&&(this.g.m=v),this.v=L&&L.supportsCrossDomainXhr||!1,this.u=L&&L.sendRawJson||!1,(L=L&&L.httpSessionIdParam)&&!vn(L)&&(this.g.D=L,null!==(v=this.h)&&L in v&&L in(v=this.h)&&delete v[L]),this.j=new AI(this)}function q$(v){LV.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var L=v.__sm__;if(L){e:{for(const H in L){v=H;break e}v=void 0}(this.i=v)&&(v=this.i,L=null!==L&&v in L?L[v]:void 0),this.data=L}else this.data=v}function K$(){VV.call(this),this.status=1}function AI(v){this.g=v}(r=Yo.prototype).Ha=function(v){this.J=v},r.ea=function(v,L,H,he){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);L=L?L.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():UV.g(),this.v=function i$(v){return v.h||(v.h=v.i())}(this.o?this.o:UV),this.g.onreadystatechange=G(this.Ea,this);try{this.B=!0,this.g.open(L,String(v),!0),this.B=!1}catch(kt){return void P$(this,kt)}if(v=H||"",H=new Map(this.headers),he)if(Object.getPrototypeOf(he)===Object.prototype)for(var mt in he)H.set(mt,he[mt]);else{if("function"!=typeof he.keys||"function"!=typeof he.get)throw Error("Unknown input type for opt_headers: "+String(he));for(const kt of he.keys())H.set(kt,he.get(kt))}he=Array.from(H.keys()).find(kt=>"content-type"==kt.toLowerCase()),mt=h.FormData&&v instanceof h.FormData,!(0<=Array.prototype.indexOf.call(gz,L,void 0))||he||mt||H.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[kt,Cn]of H)this.g.setRequestHeader(kt,Cn);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{N$(this),this.u=!0,this.g.send(v),this.u=!1}catch(kt){P$(this,kt)}},r.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,Ha(this,"complete"),Ha(this,"abort"),RM(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),RM(this,!0)),Yo.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?M$(this):this.bb())},r.bb=function(){M$(this)},r.isActive=function(){return!!this.g},r.Z=function(){try{return 2<df(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(v){if(this.g){var L=this.g.responseText;return v&&0==L.indexOf(v)&&(L=L.substring(v.length)),qH(L)}},r.Ba=function(){return this.m},r.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(r=O$.prototype).la=8,r.G=1,r.connect=function(v,L,H,he){za(0),this.W=v,this.H=L||{},H&&void 0!==he&&(this.H.OSID=H,this.H.OAID=he),this.F=this.X,this.I=z$(this,null,this.W),xM(this)},r.Ga=function(v){if(this.s)if(this.s=null,1==this.G){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const mt=new Dg(this,this.j,v);let kt=this.o;if(this.S&&(kt?(kt=Me(kt),st(kt,this.S)):kt=this.S),null!==this.m||this.O||(mt.H=kt,kt=null),this.P)e:{for(var L=0,H=0;H<this.i.length;H++){var he=this.i[H];if(void 0===(he="__data__"in he.map&&"string"==typeof(he=he.map.__data__)?he.length:void 0))break;if(4096<(L+=he)){L=H;break e}if(4096===L||H===this.i.length-1){L=H+1;break e}}L=1e3}else L=1e3;L=V$(this,mt,L),To(H=uf(this.I),"RID",v),To(H,"CVER",22),this.D&&To(H,"X-HTTP-Session-Id",this.D),GT(this,H),kt&&(this.O?L="headers="+encodeURIComponent(String(R$(kt)))+"&"+L:this.m&&WV(H,this.m,kt)),GV(this.h,mt),this.Ua&&To(H,"TYPE","init"),this.P?(To(H,"$req",L),To(H,"SID","null"),mt.T=!0,$V(mt,H,null)):$V(mt,H,L),this.G=2}}else 3==this.G&&(v?L$(this,v):0==this.i.length||_$(this.h)||L$(this))},r.Fa=function(){if(this.u=null,B$(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=OT(G(this.ab,this),v)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,za(10),PM(this),B$(this))},r.Za=function(){null!=this.C&&(this.C=null,PM(this),KV(this),za(19))},r.fb=function(v){v?(this.j.info("Successfully pinged google.com"),za(2)):(this.j.info("Failed to ping google.com"),za(1))},r.isActive=function(){return!!this.l&&this.l.isActive(this)},(r=W$.prototype).ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){},NM.prototype.g=function(v,L){return new Hl(v,L)},De(Hl,Da),Hl.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Hl.prototype.close=function(){qV(this.g)},Hl.prototype.o=function(v){var L=this.g;if("string"==typeof v){var H={};H.__data__=v,v=H}else this.u&&((H={}).__data__=OV(v),v=H);L.i.push(new ez(L.Ya++,v)),3==L.G&&xM(L)},Hl.prototype.N=function(){this.g.l=null,delete this.j,qV(this.g),delete this.g,Hl.aa.N.call(this)},De(q$,LV),De(K$,VV),De(AI,W$),AI.prototype.ua=function(){Ha(this.g,"a")},AI.prototype.ta=function(v){Ha(this.g,new q$(v))},AI.prototype.sa=function(v){Ha(this.g,new K$)},AI.prototype.ra=function(){Ha(this.g,"b")},NM.prototype.createWebChannel=NM.prototype.g,Hl.prototype.send=Hl.prototype.o,Hl.prototype.open=Hl.prototype.m,Hl.prototype.close=Hl.prototype.close,BN=qc.createWebChannelTransport=function(){return new NM},oD=qc.getStatEventTarget=function(){return IM()},xy=qc.Event=wv,Py=qc.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},bM.NO_ERROR=0,bM.TIMEOUT=8,bM.HTTP_ERROR=6,Wu=qc.ErrorCode=bM,u$.COMPLETE="complete",iD=qc.EventType=u$,o$.EventType=NT,NT.OPEN="a",NT.CLOSE="b",NT.ERROR="c",NT.MESSAGE="d",Da.prototype.listen=Da.prototype.K,bm=qc.WebChannel=o$,Rb=qc.FetchXmlHttpFactory=$T,Yo.prototype.listenOnce=Yo.prototype.L,Yo.prototype.getLastError=Yo.prototype.Ka,Yo.prototype.getLastErrorCode=Yo.prototype.Ba,Yo.prototype.getStatus=Yo.prototype.Z,Yo.prototype.getResponseJson=Yo.prototype.Oa,Yo.prototype.getResponseText=Yo.prototype.oa,Yo.prototype.send=Yo.prototype.ea,Yo.prototype.setWithCredentials=Yo.prototype.Ha,Ry=qc.XhrIo=Yo}).apply(typeof Dy<"u"?Dy:typeof self<"u"?self:typeof window<"u"?window:{});const $N="@firebase/firestore";class Mo{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mo.UNAUTHENTICATED=new Mo(null),Mo.GOOGLE_CREDENTIALS=new Mo("google-credentials-uid"),Mo.FIRST_PARTY=new Mo("first-party-uid"),Mo.MOCK_USER=new Mo("mock-user");let Kf="10.13.1";const Tl=new gi("@firebase/firestore");function qu(){return Tl.logLevel}function nn(r,...e){if(Tl.logLevel<=Nn.DEBUG){const t=e.map(My);Tl.debug(`Firestore (${Kf}): ${r}`,...t)}}function No(r,...e){if(Tl.logLevel<=Nn.ERROR){const t=e.map(My);Tl.error(`Firestore (${Kf}): ${r}`,...t)}}function $s(r,...e){if(Tl.logLevel<=Nn.WARN){const t=e.map(My);Tl.warn(`Firestore (${Kf}): ${r}`,...t)}}function My(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch{return r}}function Rn(r="Unexpected state"){const e=`FIRESTORE (${Kf}) INTERNAL ASSERTION FAILED: `+r;throw No(e),new Error(e)}function Un(r,e){r||Rn()}function mn(r,e){return r}const Rt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Jt extends gn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ko{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ky{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Mo.UNAUTHENTICATED))}shutdown(){}}class Oy{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Pb{constructor(e){this.t=e,this.currentUser=Mo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var n=this;let s=this.i;const l=E=>this.i!==s?(s=this.i,t(E)):Promise.resolve();let u=new ko;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ko,e.enqueueRetryable(()=>l(this.currentUser))};const h=()=>{const E=u;e.enqueueRetryable((0,C.A)(function*(){yield E.promise,yield l(n.currentUser)}))},p=E=>{nn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(E=>p(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?p(E):(nn("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ko)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(nn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Un("string"==typeof n.accessToken),new ky(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Un(null===e||"string"==typeof e),new Mo(e)}}class Xf{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Mo.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class jN{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Xf(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Mo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class w2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=l=>{null!=l.error&&nn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.R;return this.R=l.token,nn("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>n(l))};const s=l=>{nn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>s(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?s(l):nn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Un("string"==typeof t.token),this.R=t.token,new lD(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Mb(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}class Nb{static newId(){const t=62*Math.floor(256/62);let n="";for(;n.length<20;){const s=Mb(40);for(let l=0;l<s.length;++l)n.length<20&&s[l]<t&&(n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(s[l]%62))}return n}}function gr(r,e){return r<e?-1:r>e?1:0}function nh(r,e,t){return r.length===e.length&&r.every((n,s)=>t(n,e[s]))}function kb(r){return r+"\0"}class uo{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Jt(Rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Jt(Rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Jt(Rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Jt(Rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return uo.fromMillis(Date.now())}static fromDate(e){return uo.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new uo(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?gr(this.nanoseconds,e.nanoseconds):gr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class qn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new qn(e)}static min(){return new qn(new uo(0,0))}static max(){return new qn(new uo(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class wm{constructor(e,t,n){void 0===t?t=0:t>e.length&&Rn(),void 0===n?n=e.length-t:n>e.length-t&&Rn(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===wm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wm?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const l=e.get(s),u=t.get(s);if(l<u)return-1;if(l>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Gr extends wm{construct(e,t,n){return new Gr(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Jt(Rt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(s=>s.length>0))}return new Gr(t)}static emptyPath(){return new Gr([])}}const HN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class si extends wm{construct(e,t,n){return new si(e,t,n)}static isValidIdentifier(e){return HN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),si.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new si(["__name__"])}static fromServerFormat(e){const t=[];let n="",s=0;const l=()=>{if(0===n.length)throw new Jt(Rt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let u=!1;for(;s<e.length;){const h=e[s];if("\\"===h){if(s+1===e.length)throw new Jt(Rt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[s+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Jt(Rt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=p,s+=2}else"`"===h?(u=!u,s++):"."!==h||u?(n+=h,s++):(l(),s++)}if(l(),u)throw new Jt(Rt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new si(t)}static emptyPath(){return new si([])}}class _n{constructor(e){this.path=e}static fromPath(e){return new _n(Gr.fromString(e))}static fromName(e){return new _n(Gr.fromString(e).popFirst(5))}static empty(){return new _n(Gr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Gr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Gr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _n(new Gr(e.slice()))}}class Qf{constructor(e,t,n,s){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=s}}function cD(r){return r.fields.find(e=>2===e.kind)}function Yf(r){return r.fields.filter(e=>2!==e.kind)}Qf.UNKNOWN_ID=-1;class Jf{constructor(e,t){this.fieldPath=e,this.kind=t}}class rh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new rh(0,La.min())}}function uD(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,s=qn.fromTimestamp(1e9===n?new uo(t+1,0):new uo(t,n));return new La(s,_n.empty(),e)}function dD(r){return new La(r.readTime,r.key,-1)}class La{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new La(qn.min(),_n.empty(),-1)}static max(){return new La(qn.max(),_n.empty(),-1)}}function Ob(r,e){let t=r.readTime.compareTo(e.readTime);return 0!==t?t:(t=_n.comparator(r.documentKey,e.documentKey),0!==t?t:gr(r.largestBatchId,e.largestBatchId))}const Fy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ol(r){return Ly.apply(this,arguments)}function Ly(){return Ly=(0,C.A)(function*(r){if(r.code!==Rt.FAILED_PRECONDITION||r.message!==Fy)throw r;nn("LocalStore","Unexpectedly lost primary lease")}),Ly.apply(this,arguments)}class pt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Rn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pt((n,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(n,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(n,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof pt?t:pt.resolve(t)}catch(t){return pt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):pt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):pt.reject(t)}static resolve(e){return new pt((t,n)=>{t(e)})}static reject(e){return new pt((t,n)=>{n(e)})}static waitFor(e){return new pt((t,n)=>{let s=0,l=0,u=!1;e.forEach(h=>{++s,h.next(()=>{++l,u&&l===s&&t()},p=>n(p))}),u=!0,l===s&&t()})}static or(e){let t=pt.resolve(!1);for(const n of e)t=t.next(s=>s?pt.resolve(s):n());return t}static forEach(e,t){const n=[];return e.forEach((s,l)=>{n.push(t.call(this,s,l))}),this.waitFor(n)}static mapArray(e,t){return new pt((n,s)=>{const l=e.length,u=new Array(l);let h=0;for(let p=0;p<l;p++){const E=p;t(e[E]).next(w=>{u[E]=w,++h,h===l&&n(u)},w=>s(w))}})}static doWhile(e,t){return new pt((n,s)=>{const l=()=>{!0===e()?t().next(()=>{l()},s):n()};l()})}}class Cm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new ko,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new ih(e,t.error)):this.V.resolve()},this.transaction.onerror=n=>{const s=Lb(n.target.error);this.V.reject(new ih(e,s))}}static open(e,t,n,s){try{return new Cm(t,e.transaction(s,n))}catch(l){throw new ih(t,l)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(nn("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new S2(t)}}class Kc{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Kc.S(Gt())&&No("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return nn("SimpleDb","Removing database:",e),Zf(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!qt())return!1;if(Kc.v())return!0;const e=Gt(),t=Kc.S(e),n=0<t&&t<10,s=zN(e),l=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||l)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}M(e){var t=this;return(0,C.A)(function*(){return t.db||(nn("SimpleDb","Opening database:",t.name),t.db=yield new Promise((n,s)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=u=>{n(u.target.result)},l.onblocked=()=>{s(new ih(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=u=>{const h=u.target.error;s("VersionError"===h.name?new Jt(Rt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Jt(Rt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new ih(e,h))},l.onupgradeneeded=u=>{nn("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.p.O(u.target.result,l.transaction,u.oldVersion,t.version).next(()=>{nn("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=n=>t.N(n)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,n,s){var l=this;return(0,C.A)(function*(){const u="readonly"===t;let h=0;for(;;){++h;try{l.db=yield l.M(e);const p=Cm.open(l.db,e,u?"readonly":"readwrite",n),E=s(p).next(w=>(p.g(),w)).catch(w=>(p.abort(w),pt.reject(w))).toPromise();return E.catch(()=>{}),yield p.m,E}catch(p){const E=p,w="FirebaseError"!==E.name&&h<3;if(nn("SimpleDb","Transaction failed with error:",E.message,"Retrying:",w),l.close(),!w)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function zN(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class T2{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Zf(this.B.delete())}}class ih extends Jt{constructor(e,t){super(Rt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ac(r){return"IndexedDbTransactionError"===r.name}class S2{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(nn("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(nn("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Zf(n)}add(e){return nn("SimpleDb","ADD",this.store.name,e,e),Zf(this.store.add(e))}get(e){return Zf(this.store.get(e)).next(t=>(void 0===t&&(t=null),nn("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return nn("SimpleDb","DELETE",this.store.name,e),Zf(this.store.delete(e))}count(){return nn("SimpleDb","COUNT",this.store.name),Zf(this.store.count())}U(e,t){const n=this.options(e,t),s=n.index?this.store.index(n.index):this.store;if("function"==typeof s.getAll){const l=s.getAll(n.range);return new pt((u,h)=>{l.onerror=p=>{h(p.target.error)},l.onsuccess=p=>{u(p.target.result)}})}{const l=this.cursor(n),u=[];return this.W(l,(h,p)=>{u.push(p)}).next(()=>u)}}G(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new pt((s,l)=>{n.onerror=u=>{l(u.target.error)},n.onsuccess=u=>{s(u.target.result)}})}j(e,t){nn("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const s=this.cursor(n);return this.W(s,(l,u,h)=>h.delete())}J(e,t){let n;t?n=e:(n={},t=e);const s=this.cursor(n);return this.W(s,t)}Y(e){const t=this.cursor({});return new pt((n,s)=>{t.onerror=l=>{const u=Lb(l.target.error);s(u)},t.onsuccess=l=>{const u=l.target.result;u?e(u.primaryKey,u.value).next(h=>{h?u.continue():n()}):n()}})}W(e,t){const n=[];return new pt((s,l)=>{e.onerror=u=>{l(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void s();const p=new T2(h),E=t(h.primaryKey,h.value,p);if(E instanceof pt){const w=E.catch(x=>(p.done(),pt.reject(x)));n.push(w)}p.isDone?s():null===p.K?h.continue():h.continue(p.K)}}).next(()=>pt.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Zf(r){return new pt((e,t)=>{r.onsuccess=n=>{e(n.target.result)},r.onerror=n=>{const s=Lb(n.target.error);t(s)}})}let Fb=!1;function Lb(r){const e=Kc.S(Gt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const n=new Jt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Fb||(Fb=!0,setTimeout(()=>{throw n},0)),n}}return r}class GN{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;nn("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,C.A)(function*(){t.task=null;try{nn("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(n){ac(n)?nn("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield ol(n)}yield t.X(6e4)}))}}class WN{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,C.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>t.te(n,e))})()}te(e,t){const n=new Set;let s=t,l=!0;return pt.doWhile(()=>!0===l&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!n.has(u))return nn("IndexBackfiller",`Processing collection: ${u}`),this.ne(e,u,s).next(h=>{s-=h,n.add(u)});l=!1})).next(()=>t-s)}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,n).next(l=>{const u=l.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.re(s,l)).next(h=>(nn("IndexBackfiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>u.size)}))}re(e,t){let n=e;return t.changes.forEach((s,l)=>{const u=dD(l);Ob(u,n)>0&&(n=u)}),new La(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Va=(()=>{class r{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ie(s),this.se=s=>n.writeSequenceNumber(s))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return r.oe=-1,r})();function Am(r){return null==r}function ep(r){return 0===r&&1/r==-1/0}function Vb(r){return"number"==typeof r&&Number.isInteger(r)&&!ep(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function js(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Ub(e)),e=qN(r.get(t),e);return Ub(e)}function qN(r,e){let t=e;const n=r.length;for(let s=0;s<n;s++){const l=r.charAt(s);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function Ub(r){return r+"\x01\x01"}function Ua(r){const e=r.length;if(Un(e>=2),2===e)return Un("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),Gr.emptyPath();const t=e-2,n=[];let s="";for(let l=0;l<e;){const u=r.indexOf("\x01",l);switch((u<0||u>t)&&Rn(),r.charAt(u+1)){case"\x01":const h=r.substring(l,u);let p;0===s.length?p=h:(s+=h,p=s,s=""),n.push(p);break;case"\x10":s+=r.substring(l,u),s+="\0";break;case"\x11":s+=r.substring(l,u+1);break;default:Rn()}l=u+2}return new Gr(n)}const hD=["userId","batchId"];function tp(r,e){return[r,js(e)]}function fD(r,e,t){return[r,js(e),t]}const np={},KN=["prefixPath","collectionGroup","readTime","documentId"],XN=["prefixPath","collectionGroup","documentId"],pD=["collectionGroup","readTime","prefixPath","documentId"],gD=["canonicalId","targetId"],QN=["targetId","path"],YN=["path","targetId"],mD=["collectionId","parent"],JN=["indexId","uid"],_D=["uid","sequenceNumber"],D2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],R2=["indexId","uid","orderedDocumentKey"],Tm=["userId","collectionPath","documentId"],ZN=["userId","collectionPath","largestBatchId"],ek=["userId","collectionGroup","largestBatchId"],vD=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],yD=[...vD,"documentOverlays"],ED=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ID=ED,Bb=[...ID,"indexConfiguration","indexState","indexEntries"],tk=Bb,nk=[...Bb,"globals"];class $b extends sc{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Uo(r,e){const t=mn(r);return Kc.F(t._e,e)}function rk(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function oh(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function ik(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class eo{constructor(e,t){this.comparator=e,this.root=t||Hs.EMPTY}insert(e,t){return new eo(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Hs.BLACK,null,null))}remove(e){return new eo(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(0===s)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jb(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jb(this.root,e,this.comparator,!1)}getReverseIterator(){return new jb(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jb(this.root,e,this.comparator,!0)}}class jb{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?n(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Hs{constructor(e,t,n,s,l){this.key=e,this.value=t,this.color=null!=n?n:Hs.RED,this.left=null!=s?s:Hs.EMPTY,this.right=null!=l?l:Hs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,l){return new Hs(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=s?s:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const l=n(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,n),null):0===l?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Hs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Hs.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Rn();const e=this.left.check();if(e!==this.right.check())throw Rn();return e+(this.isRed()?0:1)}}Hs.EMPTY=null,Hs.RED=!0,Hs.BLACK=!1,Hs.EMPTY=new class{constructor(){this.size=0}get key(){throw Rn()}get value(){throw Rn()}get color(){throw Rn()}get left(){throw Rn()}get right(){throw Rn()}copy(e,t,n,s,l){return this}insert(e,t,n){return new Hs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ji{constructor(e){this.comparator=e,this.data=new eo(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bD(this.data.getIterator())}getIteratorFrom(e){return new bD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof ji)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=n.getNext().key;if(0!==this.comparator(s,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ji(this.comparator);return t.data=e,t}}class bD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Xc(r){return r.hasNext()?r.getNext():void 0}class As{constructor(e){this.fields=e,e.sort(si.comparator)}static empty(){return new As([])}unionWith(e){let t=new ji(si.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new As(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nh(this.fields,e.fields,(t,n)=>t.isEqual(n))}}class Hb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class _o{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Hb("Invalid base64 string: "+l):l}}(e);return new _o(t)}static fromUint8Array(e){const t=function(s){let l="";for(let u=0;u<s.length;++u)l+=String.fromCharCode(s[u]);return l}(e);return new _o(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return gr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_o.EMPTY_BYTE_STRING=new _o("");const ok=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qc(r){if(Un(!!r),"string"==typeof r){let e=0;const t=ok.exec(r);if(Un(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:to(r.seconds),nanos:to(r.nanos)}}function to(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function Ea(r){return"string"==typeof r?_o.fromBase64String(r):_o.fromUint8Array(r)}function zs(r){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==r?void 0:r.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ts(r){const e=r.mapValue.fields.__previous_value__;return zs(e)?Ts(e):e}function rp(r){const e=Qc(r.mapValue.fields.__local_write_time__.timestampValue);return new uo(e.seconds,e.nanos)}class P2{constructor(e,t,n,s,l,u,h,p,E){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=E}}class Ku{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ku("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ku&&e.projectId===this.projectId&&e.database===this.database}}const sh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zb={nullValue:"NULL_VALUE"};function Yc(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?zs(r)?4:Gb(r)?9007199254740991:jy(r)?10:11:Rn()}function Sl(r,e){if(r===e)return!0;const t=Yc(r);if(t!==Yc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return rp(r).isEqual(rp(e));case 3:return function(s,l){if("string"==typeof s.timestampValue&&"string"==typeof l.timestampValue&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const u=Qc(s.timestampValue),h=Qc(l.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return l=e,Ea(r.bytesValue).isEqual(Ea(l.bytesValue));case 7:return r.referenceValue===e.referenceValue;case 8:return function(s,l){return to(s.geoPointValue.latitude)===to(l.geoPointValue.latitude)&&to(s.geoPointValue.longitude)===to(l.geoPointValue.longitude)}(r,e);case 2:return function(s,l){if("integerValue"in s&&"integerValue"in l)return to(s.integerValue)===to(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const u=to(s.doubleValue),h=to(l.doubleValue);return u===h?ep(u)===ep(h):isNaN(u)&&isNaN(h)}return!1}(r,e);case 9:return nh(r.arrayValue.values||[],e.arrayValue.values||[],Sl);case 10:case 11:return function(s,l){const u=s.mapValue.fields||{},h=l.mapValue.fields||{};if(rk(u)!==rk(h))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===h[p]||!Sl(u[p],h[p])))return!1;return!0}(r,e);default:return Rn()}var l}function Uy(r,e){return void 0!==(r.values||[]).find(t=>Sl(t,e))}function Dl(r,e){if(r===e)return 0;const t=Yc(r),n=Yc(e);if(t!==n)return gr(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return gr(r.booleanValue,e.booleanValue);case 2:return function(l,u){const h=to(l.integerValue||l.doubleValue),p=to(u.integerValue||u.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1}(r,e);case 3:return By(r.timestampValue,e.timestampValue);case 4:return By(rp(r),rp(e));case 5:return gr(r.stringValue,e.stringValue);case 6:return function(l,u){const h=Ea(l),p=Ea(u);return h.compareTo(p)}(r.bytesValue,e.bytesValue);case 7:return function(l,u){const h=l.split("/"),p=u.split("/");for(let E=0;E<h.length&&E<p.length;E++){const w=gr(h[E],p[E]);if(0!==w)return w}return gr(h.length,p.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,u){const h=gr(to(l.latitude),to(u.latitude));return 0!==h?h:gr(to(l.longitude),to(u.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return $y(r.arrayValue,e.arrayValue);case 10:return function(l,u){var h,p,E,w;const ce=null===(h=(l.fields||{}).value)||void 0===h?void 0:h.arrayValue,De=null===(p=(u.fields||{}).value)||void 0===p?void 0:p.arrayValue,dt=gr((null===(E=null==ce?void 0:ce.values)||void 0===E?void 0:E.length)||0,(null===(w=null==De?void 0:De.values)||void 0===w?void 0:w.length)||0);return 0!==dt?dt:$y(ce,De)}(r.mapValue,e.mapValue);case 11:return function(l,u){if(l===sh.mapValue&&u===sh.mapValue)return 0;if(l===sh.mapValue)return 1;if(u===sh.mapValue)return-1;const h=l.fields||{},p=Object.keys(h),E=u.fields||{},w=Object.keys(E);p.sort(),w.sort();for(let x=0;x<p.length&&x<w.length;++x){const G=gr(p[x],w[x]);if(0!==G)return G;const ce=Dl(h[p[x]],E[w[x]]);if(0!==ce)return ce}return gr(p.length,w.length)}(r.mapValue,e.mapValue);default:throw Rn()}}function By(r,e){if("string"==typeof r&&"string"==typeof e&&r.length===e.length)return gr(r,e);const t=Qc(r),n=Qc(e),s=gr(t.seconds,n.seconds);return 0!==s?s:gr(t.nanos,n.nanos)}function $y(r,e){const t=r.values||[],n=e.values||[];for(let s=0;s<t.length&&s<n.length;++s){const l=Dl(t[s],n[s]);if(l)return l}return gr(t.length,n.length)}function ip(r){return Xu(r)}function Xu(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const n=Qc(t);return`time(${n.seconds},${n.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?Ea(r.bytesValue).toBase64():"referenceValue"in r?_n.fromName(r.referenceValue).toString():"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let n="[",s=!0;for(const l of t.values||[])s?s=!1:n+=",",n+=Xu(l);return n+"]"}(r.arrayValue):"mapValue"in r?function(t){const n=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const u of n)l?l=!1:s+=",",s+=`${u}:${Xu(t.fields[u])}`;return s+"}"}(r.mapValue):Rn()}function Qu(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Sm(r){return!!r&&"integerValue"in r}function Yu(r){return!!r&&"arrayValue"in r}function CD(r){return!!r&&"nullValue"in r}function AD(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Dm(r){return!!r&&"mapValue"in r}function jy(r){var e,t;return"__vector__"===(null===(t=((null===(e=null==r?void 0:r.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Rm(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return oh(r.mapValue.fields,(t,n)=>e.mapValue.fields[t]=Rm(n)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Rm(r.arrayValue.values[t]);return e}return Object.assign({},r)}function Gb(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}const Hy={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Pm(r){return"nullValue"in r?zb:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?Qu(Ku.empty(),_n.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?jy(r)?Hy:{mapValue:{}}:Rn()}function zy(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?Qu(Ku.empty(),_n.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?Hy:"mapValue"in r?jy(r)?{mapValue:{}}:sh:Rn()}function Gy(r,e){const t=Dl(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function TD(r,e){const t=Dl(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class Ss{constructor(e){this.value=e}static empty(){return new Ss({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Dm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rm(t)}setAll(e){let t=si.emptyPath(),n={},s=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,n,s),n={},s=[],t=h.popLast()}u?n[h.lastSegment()]=Rm(u):s.push(h.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,n,s)}delete(e){const t=this.field(e.popLast());Dm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Sl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];Dm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){oh(t,(s,l)=>e[s]=l);for(const s of n)delete e[s]}clone(){return new Ss(Rm(this.value))}}function Wy(r){const e=[];return oh(r.fields,(t,n)=>{const s=new si([t]);if(Dm(n)){const l=Wy(n.mapValue).fields;if(0===l.length)e.push(s);else for(const u of l)e.push(s.child(u))}else e.push(s)}),new As(e)}class Wi{constructor(e,t,n,s,l,u,h){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=l,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Wi(e,0,qn.min(),qn.min(),qn.min(),Ss.empty(),0)}static newFoundDocument(e,t,n,s){return new Wi(e,1,t,qn.min(),n,s,0)}static newNoDocument(e,t){return new Wi(e,2,t,qn.min(),qn.min(),Ss.empty(),0)}static newUnknownDocument(e,t){return new Wi(e,3,t,qn.min(),qn.min(),Ss.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(qn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ss.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ss.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Wi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ia{constructor(e,t){this.position=e,this.inclusive=t}}function Wb(r,e,t){let n=0;for(let s=0;s<r.position.length;s++){const l=e[s],u=r.position[s];if(n=l.field.isKeyField()?_n.comparator(_n.fromName(u.referenceValue),t.key):Dl(u,t.data.field(l.field)),"desc"===l.dir&&(n*=-1),0!==n)break}return n}function qb(r,e){if(null===r)return null===e;if(null===e||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Sl(r.position[t],e.position[t]))return!1;return!0}class xm{constructor(e,t="asc"){this.field=e,this.dir=t}}function x2(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class Mm{}class Wr extends Mm{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new km(e,t,n):"array-contains"===t?new sk(e,n):"in"===t?new Yb(e,n):"not-in"===t?new ak(e,n):"array-contains-any"===t?new lk(e,n):new Wr(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new SD(e,n):new Qb(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Dl(t,this.value)):null!==t&&Yc(this.value)===Yc(t)&&this.matchesComparison(Dl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Rn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yi extends Mm{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new yi(e,t)}matches(e){return ah(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ah(r){return"and"===r.op}function qy(r){return"or"===r.op}function Nm(r){return Kb(r)&&ah(r)}function Kb(r){for(const e of r.filters)if(e instanceof yi)return!1;return!0}function sp(r){if(r instanceof Wr)return r.field.canonicalString()+r.op.toString()+ip(r.value);if(Nm(r))return r.filters.map(e=>sp(e)).join(",");{const e=r.filters.map(t=>sp(t)).join(",");return`${r.op}(${e})`}}function lh(r,e){return r instanceof Wr?(n=r,(s=e)instanceof Wr&&n.op===s.op&&n.field.isEqual(s.field)&&Sl(n.value,s.value)):r instanceof yi?function(n,s){return s instanceof yi&&n.op===s.op&&n.filters.length===s.filters.length&&n.filters.reduce((l,u,h)=>l&&lh(u,s.filters[h]),!0)}(r,e):void Rn();var n,s}function Xb(r,e){const t=r.filters.concat(e);return yi.create(t,r.op)}function Ky(r){return r instanceof Wr?`${(t=r).field.canonicalString()} ${t.op} ${ip(t.value)}`:r instanceof yi?function(t){return t.op.toString()+" {"+t.getFilters().map(Ky).join(" ,")+"}"}(r):"Filter";var t}class km extends Wr{constructor(e,t,n){super(e,t,n),this.key=_n.fromName(n.referenceValue)}matches(e){const t=_n.comparator(e.key,this.key);return this.matchesComparison(t)}}class SD extends Wr{constructor(e,t){super(e,"in",t),this.keys=Om(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Qb extends Wr{constructor(e,t){super(e,"not-in",t),this.keys=Om(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Om(r,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(n=>_n.fromName(n.referenceValue))}class sk extends Wr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yu(t)&&Uy(t.arrayValue,this.value)}}class Yb extends Wr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Uy(this.value.arrayValue,t)}}class ak extends Wr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Uy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Uy(this.value.arrayValue,t)}}class lk extends Wr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>Uy(this.value.arrayValue,n))}}class ck{constructor(e,t=null,n=[],s=[],l=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=l,this.startAt=u,this.endAt=h,this.ue=null}}function Xy(r,e=null,t=[],n=[],s=null,l=null,u=null){return new ck(r,e,t,n,s,l,u)}function Ju(r){const e=mn(r);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>sp(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>{return(l=n).field.canonicalString()+l.dir;var l}).join(","),Am(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>ip(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>ip(n)).join(",")),e.ue=t}return e.ue}function pr(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!x2(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!lh(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!qb(r.startAt,e.startAt)&&qb(r.endAt,e.endAt)}function Fm(r){return _n.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function Lm(r,e){return r.filters.filter(t=>t instanceof Wr&&t.field.isEqual(e))}function ch(r,e,t){let n=zb,s=!0;for(const l of Lm(r,e)){let u=zb,h=!0;switch(l.op){case"<":case"<=":u=Pm(l.value);break;case"==":case"in":case">=":u=l.value;break;case">":u=l.value,h=!1;break;case"!=":case"not-in":u=zb}Gy({value:n,inclusive:s},{value:u,inclusive:h})<0&&(n=u,s=h)}if(null!==t)for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const u=t.position[l];Gy({value:n,inclusive:s},{value:u,inclusive:t.inclusive})<0&&(n=u,s=t.inclusive);break}return{value:n,inclusive:s}}function Jb(r,e,t){let n=sh,s=!0;for(const l of Lm(r,e)){let u=sh,h=!0;switch(l.op){case">=":case">":u=zy(l.value),h=!1;break;case"==":case"in":case"<=":u=l.value;break;case"<":u=l.value,h=!1;break;case"!=":case"not-in":u=sh}TD({value:n,inclusive:s},{value:u,inclusive:h})>0&&(n=u,s=h)}if(null!==t)for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const u=t.position[l];TD({value:n,inclusive:s},{value:u,inclusive:t.inclusive})>0&&(n=u,s=t.inclusive);break}return{value:n,inclusive:s}}class lc{constructor(e,t=null,n=[],s=[],l=null,u="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=l,this.limitType=u,this.startAt=h,this.endAt=p,this.ce=null,this.le=null,this.he=null}}function DD(r,e,t,n,s,l,u,h){return new lc(r,e,t,n,s,l,u,h)}function Jc(r){return new lc(r)}function Zu(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}function Vm(r){return null!==r.collectionGroup}function cc(r){const e=mn(r);if(null===e.ce){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new ji(si.comparator);return u.filters.forEach(p=>{p.getFlattenedFilters().forEach(E=>{E.isInequality()&&(h=h.add(E.field))})}),h})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new xm(l,n))}),t.has(si.keyField().canonicalString())||e.ce.push(new xm(si.keyField(),n))}return e.ce}function Ds(r){const e=mn(r);return e.le||(e.le=function Yy(r,e){if("F"===r.limitType)return Xy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(s=>new xm(s.field,"desc"===s.dir?"asc":"desc"));const t=r.endAt?new Ia(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new Ia(r.startAt.position,r.startAt.inclusive):null;return Xy(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}(e,cc(r))),e.le}function Um(r,e){const t=r.filters.concat([e]);return new lc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Bm(r,e,t){return new lc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function uh(r,e){return pr(Ds(r),Ds(e))&&r.limitType===e.limitType}function RD(r){return`${Ju(Ds(r))}|lt:${r.limitType}`}function ap(r){return`Query(target=${function(t){let n=t.path.canonicalString();return null!==t.collectionGroup&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(s=>Ky(s)).join(", ")}]`),Am(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(s=>{return`${(u=s).field.canonicalString()} (${u.dir})`;var u}).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>ip(s)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>ip(s)).join(",")),`Target(${n})`}(Ds(r))}; limitType=${r.limitType})`}function $m(r,e){return e.isFoundDocument()&&function(n,s){const l=s.key.path;return null!==n.collectionGroup?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(l):_n.isDocumentKey(n.path)?n.path.isEqual(l):n.path.isImmediateParentOf(l)}(r,e)&&function(n,s){for(const l of cc(n))if(!l.field.isKeyField()&&null===s.data.field(l.field))return!1;return!0}(r,e)&&function(n,s){for(const l of n.filters)if(!l.matches(s))return!1;return!0}(r,e)&&(s=e,!((n=r).startAt&&!function(u,h,p){const E=Wb(u,h,p);return u.inclusive?E<=0:E<0}(n.startAt,cc(n),s)||n.endAt&&!function(u,h,p){const E=Wb(u,h,p);return u.inclusive?E>=0:E>0}(n.endAt,cc(n),s)));var n,s}function Zb(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function PD(r){return(e,t)=>{let n=!1;for(const s of cc(r)){const l=uk(s,e,t);if(0!==l)return l;n=n||s.field.isKeyField()}return 0}}function uk(r,e,t){const n=r.field.isKeyField()?_n.comparator(e.key,t.key):function(l,u,h){const p=u.data.field(l),E=h.data.field(l);return null!==p&&null!==E?Dl(p,E):Rn()}(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return Rn()}}class Zc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[s,l]of n)if(this.equalsFn(s,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(void 0===s)return this.inner[n]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return 1===n.length?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){oh(this.inner,(t,n)=>{for(const[s,l]of n)e(s,l)})}isEmpty(){return ik(this.inner)}size(){return this.innerSize}}const dk=new eo(_n.comparator);function ia(){return dk}const ew=new eo(_n.comparator);function jm(...r){let e=ew;for(const t of r)e=e.insert(t.key,t);return e}function xD(r){let e=ew;return r.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function vo(){return Hm()}function MD(){return Hm()}function Hm(){return new Zc(r=>r.toString(),(r,e)=>r.isEqual(e))}const M2=new eo(_n.comparator),tw=new ji(_n.comparator);function wr(...r){let e=tw;for(const t of r)e=e.add(t);return e}const hk=new ji(gr);function nw(){return hk}function rw(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ep(e)?"-0":e}}function iw(r){return{integerValue:""+r}}function ND(r,e){return Vb(e)?iw(e):rw(r,e)}class Jy{constructor(){this._=void 0}}function ow(r,e,t){return r instanceof lp?function(s,l){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&zs(l)&&(l=Ts(l)),l&&(u.fields.__previous_value__=l),{mapValue:u}}(t,e):r instanceof dh?OD(r,e):r instanceof Gs?Zy(r,e):function(s,l){const u=kD(s,l),h=FD(u)+FD(s.Pe);return Sm(u)&&Sm(s.Pe)?iw(h):rw(s.serializer,h)}(r,e)}function fk(r,e,t){return r instanceof dh?OD(r,e):r instanceof Gs?Zy(r,e):t}function kD(r,e){return r instanceof cp?Sm(n=e)||(l=n)&&"doubleValue"in l?e:{integerValue:0}:null;var n,l}class lp extends Jy{}class dh extends Jy{constructor(e){super(),this.elements=e}}function OD(r,e){const t=sw(e);for(const n of r.elements)t.some(s=>Sl(s,n))||t.push(n);return{arrayValue:{values:t}}}class Gs extends Jy{constructor(e){super(),this.elements=e}}function Zy(r,e){let t=sw(e);for(const n of r.elements)t=t.filter(s=>!Sl(s,n));return{arrayValue:{values:t}}}class cp extends Jy{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function FD(r){return to(r.integerValue||r.doubleValue)}function sw(r){return Yu(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class up{constructor(e,t){this.field=e,this.transform=t}}class aw{constructor(e,t){this.version=e,this.transformResults=t}}class yo{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new yo}static exists(e){return new yo(void 0,e)}static updateTime(e){return new yo(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zm(r,e){return void 0!==r.updateTime?e.isFoundDocument()&&e.version.isEqual(r.updateTime):void 0===r.exists||r.exists===e.isFoundDocument()}class Gm{}function lw(r,e){if(!r.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return r.isNoDocument()?new sl(r.key,yo.none()):new dp(r.key,r.data,yo.none());{const t=r.data,n=Ss.empty();let s=new ji(si.comparator);for(let l of e.fields)if(!s.has(l)){let u=t.field(l);null===u&&l.length>1&&(l=l.popLast(),u=t.field(l)),null===u?n.delete(l):n.set(l,u),s=s.add(l)}return new Rl(r.key,n,new As(s.toArray()),yo.none())}}function t0(r,e,t){r instanceof dp?function(s,l,u){const h=s.value.clone(),p=fh(s.fieldTransforms,l,u.transformResults);h.setAll(p),l.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(r,e,t):r instanceof Rl?function(s,l,u){if(!zm(s.precondition,l))return void l.convertToUnknownDocument(u.version);const h=fh(s.fieldTransforms,l,u.transformResults),p=l.data;p.setAll(VD(s)),p.setAll(h),l.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(r,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function hh(r,e,t,n){return r instanceof dp?function(l,u,h,p){if(!zm(l.precondition,u))return h;const E=l.value.clone(),w=cw(l.fieldTransforms,p,u);return E.setAll(w),u.convertToFoundDocument(u.version,E).setHasLocalMutations(),null}(r,e,t,n):r instanceof Rl?function(l,u,h,p){if(!zm(l.precondition,u))return h;const E=cw(l.fieldTransforms,p,u),w=u.data;return w.setAll(VD(l)),w.setAll(E),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null===h?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(x=>x.field))}(r,e,t,n):(h=t,zm(r.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h);var u,h}function eu(r,e){let t=null;for(const n of r.fieldTransforms){const s=e.data.field(n.field),l=kD(n.transform,s||null);null!=l&&(null===t&&(t=Ss.empty()),t.set(n.field,l))}return t||null}function LD(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(n=r.fieldTransforms)&&void 0===s||n&&s&&nh(n,s,(l,u)=>function e0(r,e){return r.field.isEqual(e.field)&&(s=e.transform,(n=r.transform)instanceof dh&&s instanceof dh||n instanceof Gs&&s instanceof Gs?nh(n.elements,s.elements,Sl):n instanceof cp&&s instanceof cp?Sl(n.Pe,s.Pe):n instanceof lp&&s instanceof lp);var n,s}(l,u))))&&(0===r.type?r.value.isEqual(e.value):1!==r.type||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask));var n,s}class dp extends Gm{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Rl extends Gm{constructor(e,t,n,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function VD(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}}),e}function fh(r,e,t){const n=new Map;Un(r.length===t.length);for(let s=0;s<t.length;s++){const l=r[s],u=l.transform,h=e.data.field(l.field);n.set(l.field,fk(u,h,t[s]))}return n}function cw(r,e,t){const n=new Map;for(const s of r){const l=s.transform,u=t.data.field(s.field);n.set(s.field,ow(l,u,e))}return n}class sl extends Gm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ed extends Gm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Wm{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&t0(l,e,n[s])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=hh(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=hh(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=MD();return this.mutations.forEach(s=>{const l=e.get(s.key),u=l.overlayedDocument;let h=this.applyToLocalView(u,l.mutatedFields);h=t.has(s.key)?null:h;const p=lw(u,h);null!==p&&n.set(s.key,p),u.isValidDocument()||u.convertToNoDocument(qn.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),wr())}isEqual(e){return this.batchId===e.batchId&&nh(this.mutations,e.mutations,(t,n)=>LD(t,n))&&nh(this.baseMutations,e.baseMutations,(t,n)=>LD(t,n))}}class ph{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){Un(e.mutations.length===n.length);let s=function(){return M2}();const l=e.mutations;for(let u=0;u<l.length;u++)s=s.insert(l[u].key,n[u].version);return new ph(e,t,n,s)}}class n0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class pk{constructor(e,t){this.count=e,this.unchangedNames=t}}var qo,Jr;function UD(r){switch(r){default:return Rn();case Rt.CANCELLED:case Rt.UNKNOWN:case Rt.DEADLINE_EXCEEDED:case Rt.RESOURCE_EXHAUSTED:case Rt.INTERNAL:case Rt.UNAVAILABLE:case Rt.UNAUTHENTICATED:return!1;case Rt.INVALID_ARGUMENT:case Rt.NOT_FOUND:case Rt.ALREADY_EXISTS:case Rt.PERMISSION_DENIED:case Rt.FAILED_PRECONDITION:case Rt.ABORTED:case Rt.OUT_OF_RANGE:case Rt.UNIMPLEMENTED:case Rt.DATA_LOSS:return!0}}function BD(r){if(void 0===r)return No("GRPC error has no .code"),Rt.UNKNOWN;switch(r){case qo.OK:return Rt.OK;case qo.CANCELLED:return Rt.CANCELLED;case qo.UNKNOWN:return Rt.UNKNOWN;case qo.DEADLINE_EXCEEDED:return Rt.DEADLINE_EXCEEDED;case qo.RESOURCE_EXHAUSTED:return Rt.RESOURCE_EXHAUSTED;case qo.INTERNAL:return Rt.INTERNAL;case qo.UNAVAILABLE:return Rt.UNAVAILABLE;case qo.UNAUTHENTICATED:return Rt.UNAUTHENTICATED;case qo.INVALID_ARGUMENT:return Rt.INVALID_ARGUMENT;case qo.NOT_FOUND:return Rt.NOT_FOUND;case qo.ALREADY_EXISTS:return Rt.ALREADY_EXISTS;case qo.PERMISSION_DENIED:return Rt.PERMISSION_DENIED;case qo.FAILED_PRECONDITION:return Rt.FAILED_PRECONDITION;case qo.ABORTED:return Rt.ABORTED;case qo.OUT_OF_RANGE:return Rt.OUT_OF_RANGE;case qo.UNIMPLEMENTED:return Rt.UNIMPLEMENTED;case qo.DATA_LOSS:return Rt.DATA_LOSS;default:return Rn()}}(Jr=qo||(qo={}))[Jr.OK=0]="OK",Jr[Jr.CANCELLED=1]="CANCELLED",Jr[Jr.UNKNOWN=2]="UNKNOWN",Jr[Jr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jr[Jr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jr[Jr.NOT_FOUND=5]="NOT_FOUND",Jr[Jr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jr[Jr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jr[Jr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jr[Jr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jr[Jr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jr[Jr.ABORTED=10]="ABORTED",Jr[Jr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jr[Jr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jr[Jr.INTERNAL=13]="INTERNAL",Jr[Jr.UNAVAILABLE=14]="UNAVAILABLE",Jr[Jr.DATA_LOSS=15]="DATA_LOSS";function dw(){return new TextEncoder}const gk=new th([4294967295,4294967295],0);function qm(r){const e=dw().encode(r),t=new Db;return t.update(e),new Uint8Array(t.digest())}function $D(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new th([t,n],0),new th([s,l],0)]}class o0{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Km(`Invalid padding: ${t}`);if(n<0)throw new Km(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Km(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Km(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=th.fromNumber(this.Ie)}Ee(e,t,n){let s=e.add(t.multiply(th.fromNumber(n)));return 1===s.compare(gk)&&(s=new th([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=qm(e),[n,s]=$D(t);for(let l=0;l<this.hashCount;l++){const u=this.Ee(n,s,l);if(!this.de(u))return!1}return!0}static create(e,t,n){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new o0(l,s,t);return n.forEach(h=>u.insert(h)),u}insert(e){if(0===this.Ie)return;const t=qm(e),[n,s]=$D(t);for(let l=0;l<this.hashCount;l++){const u=this.Ee(n,s,l);this.Ae(u)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Km extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class hp{constructor(e,t,n,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,Xm.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new hp(qn.min(),s,new eo(gr),ia(),wr())}}class Xm{constructor(e,t,n,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Xm(n,t,wr(),wr(),wr())}}class s0{constructor(e,t,n,s){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=s}}class hw{constructor(e,t){this.targetId=e,this.me=t}}class a0{constructor(e,t,n=_o.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class fw{constructor(){this.fe=0,this.ge=pp(),this.pe=_o.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=wr(),t=wr(),n=wr();return this.ge.forEach((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:Rn()}}),new Xm(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=pp()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Un(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Qm{constructor(e){this.Le=e,this.Be=new Map,this.ke=ia(),this.qe=fp(),this.Qe=new eo(gr)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Rn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((n,s)=>{this.ze(s)&&t(s)})}He(e){const t=e.targetId,n=e.me.count,s=this.Je(t);if(s){const l=s.target;if(Fm(l))if(0===n){const u=new _n(l.path);this.Ue(t,u,Wi.newNoDocument(u,qn.min()))}else Un(1===n);else{const u=this.Ye(t);if(u!==n){const h=this.Ze(e),p=h?this.Xe(h,e,u):1;0!==p&&(this.je(t),this.Qe=this.Qe.insert(t,2===p?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:l=0}=t;let u,h;try{u=Ea(n).toUint8Array()}catch(p){if(p instanceof Hb)return $s("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new o0(u,s,l)}catch(p){return $s(p instanceof Km?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return 0===h.Ie?null:h}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let s=0;return n.forEach(l=>{const u=this.Le.tt(),h=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.Ue(t,l,null),s++)}),s}rt(e){const t=new Map;this.Be.forEach((l,u)=>{const h=this.Je(u);if(h){if(l.current&&Fm(h.target)){const p=new _n(h.target.path);null!==this.ke.get(p)||this.it(u,p)||this.Ue(u,p,Wi.newNoDocument(p,e))}l.be&&(t.set(u,l.ve()),l.Ce())}});let n=wr();this.qe.forEach((l,u)=>{let h=!0;u.forEachWhile(p=>{const E=this.Je(p);return!E||"TargetPurposeLimboResolution"===E.purpose||(h=!1,!1)}),h&&(n=n.add(l))}),this.ke.forEach((l,u)=>u.setReadTime(e));const s=new hp(e,t,this.Qe,this.ke,n);return this.ke=ia(),this.qe=fp(),this.Qe=new eo(gr),s}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,t)?s.Fe(t,1):s.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new fw,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new ji(gr),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||nn("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new fw),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function fp(){return new eo(_n.comparator)}function pp(){return new eo(_n.comparator)}const mk={asc:"ASCENDING",desc:"DESCENDING"},_k={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vk={and:"AND",or:"OR"};class l0{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ym(r,e){return r.useProto3Json||Am(e)?e:{value:e}}function gp(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yk(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function N2(r,e){return gp(r,e.toTimestamp())}function Bo(r){return Un(!!r),qn.fromTimestamp(function(t){const n=Qc(t);return new uo(n.seconds,n.nanos)}(r))}function pw(r,e){return jD(r,e).canonicalString()}function jD(r,e){const t=(s=r,new Gr(["projects",s.projectId,"databases",s.database])).child("documents");var s;return void 0===e?t:t.child(e)}function HD(r){const e=Gr.fromString(r);return Un(yw(e)),e}function c0(r,e){return pw(r.databaseId,e.path)}function uc(r,e){const t=HD(e);if(t.get(1)!==r.databaseId.projectId)throw new Jt(Rt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Jt(Rt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new _n(mp(t))}function zD(r,e){return pw(r.databaseId,e)}function GD(r){const e=HD(r);return 4===e.length?Gr.emptyPath():mp(e)}function Jm(r){return new Gr(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function mp(r){return Un(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function u0(r,e,t){return{name:c0(r,e),fields:t.value.mapValue.fields}}function Zm(r,e,t){const n=uc(r,e.name),s=Bo(e.updateTime),l=e.createTime?Bo(e.createTime):qn.min(),u=new Ss({mapValue:{fields:e.fields}}),h=Wi.newFoundDocument(n,s,l,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function _p(r,e){let t;if(e instanceof dp)t={update:u0(r,e.key,e.value)};else if(e instanceof sl)t={delete:c0(r,e.key)};else if(e instanceof Rl)t={update:u0(r,e.key,e.data),updateMask:KD(e.fieldMask)};else{if(!(e instanceof ed))return Rn();t={verify:c0(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(l,u){const h=u.transform;if(h instanceof lp)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof dh)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Gs)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof cp)return{fieldPath:u.field.canonicalString(),increment:h.Pe};throw Rn()}(0,n))),e.precondition.isNone||(t.currentDocument=void 0!==(l=e.precondition).updateTime?{updateTime:N2(r,l.updateTime)}:void 0!==l.exists?{exists:l.exists}:Rn()),t;var l}function gw(r,e){const t=e.currentDocument?void 0!==(l=e.currentDocument).updateTime?yo.updateTime(Bo(l.updateTime)):void 0!==l.exists?yo.exists(l.exists):yo.none():yo.none(),n=e.updateTransforms?e.updateTransforms.map(s=>function(u,h){let p=null;"setToServerValue"in h?(Un("REQUEST_TIME"===h.setToServerValue),p=new lp):"appendMissingElements"in h?p=new dh(h.appendMissingElements.values||[]):"removeAllFromArray"in h?p=new Gs(h.removeAllFromArray.values||[]):"increment"in h?p=new cp(u,h.increment):Rn();const E=si.fromServerFormat(h.fieldPath);return new up(E,p)}(r,s)):[];var l;if(e.update){const s=uc(r,e.update.name),l=new Ss({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new As((e.updateMask.fieldPaths||[]).map(w=>si.fromServerFormat(w)));return new Rl(s,l,u,t,n)}return new dp(s,l,t,n)}if(e.delete){const s=uc(r,e.delete);return new sl(s,t)}if(e.verify){const s=uc(r,e.verify);return new ed(s,t)}return Rn()}function mw(r,e){return{documents:[zD(r,e.path)]}}function n_(r,e){const t={structuredQuery:{}},n=e.path;let s;null!==e.collectionGroup?(s=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=zD(r,s);const l=function(E){if(0!==E.length)return i_(yi.create(E,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const u=function(E){if(0!==E.length)return E.map(w=>{return{field:td((G=w).field),direction:Ik(G.dir)};var G})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=Ym(r,e.limit);return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(E=e.startAt).inclusive,values:E.position}),e.endAt&&(t.structuredQuery.endAt=function(E){return{before:!E.inclusive,values:E.position}}(e.endAt)),{_t:t,parent:s};var E}function vw(r){let e=GD(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let s=null;if(n>0){Un(1===n);const w=t.from[0];w.allDescendants?s=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=function(x){const G=qD(x);return G instanceof yi&&Nm(G)?G.getFilters():[G]}(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(G=>{return new xm(vp((De=G).field),function(lt){switch(lt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(De.direction));var De}));let h=null;t.limit&&(h=function(x){let G;return G="object"==typeof x?x.value:x,Am(G)?null:G}(t.limit));let p=null;var x;t.startAt&&(p=new Ia((x=t.startAt).values||[],!!x.before));let E=null;return t.endAt&&(E=function(x){return new Ia(x.values||[],!x.before)}(t.endAt)),DD(e,s,u,l,h,"F",p,E)}function qD(r){return void 0!==r.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=vp(t.unaryFilter.field);return Wr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=vp(t.unaryFilter.field);return Wr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=vp(t.unaryFilter.field);return Wr.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=vp(t.unaryFilter.field);return Wr.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Rn()}}(r):void 0!==r.fieldFilter?Wr.create(vp((t=r).fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Rn()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==r.compositeFilter?function(t){return yi.create(t.compositeFilter.filters.map(n=>qD(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Rn()}}(t.compositeFilter.op))}(r):Rn();var t}function Ik(r){return mk[r]}function r_(r){return _k[r]}function bk(r){return vk[r]}function td(r){return{fieldPath:r.canonicalString()}}function vp(r){return si.fromServerFormat(r.fieldPath)}function i_(r){return r instanceof Wr?function(t){if("=="===t.op){if(AD(t.value))return{unaryFilter:{field:td(t.field),op:"IS_NAN"}};if(CD(t.value))return{unaryFilter:{field:td(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(AD(t.value))return{unaryFilter:{field:td(t.field),op:"IS_NOT_NAN"}};if(CD(t.value))return{unaryFilter:{field:td(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:td(t.field),op:r_(t.op),value:t.value}}}(r):r instanceof yi?function(t){const n=t.getFilters().map(s=>i_(s));return 1===n.length?n[0]:{compositeFilter:{op:bk(t.op),filters:n}}}(r):Rn()}function KD(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function yw(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}class dc{constructor(e,t,n,s,l=qn.min(),u=qn.min(),h=_o.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new dc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new dc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new dc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new dc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class XD{constructor(e){this.ct=e}}function d0(r,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:gh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document={name:c0(l=r.ct,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:gp(l,u.version.toTimestamp()),createTime:gp(l,u.createTime.toTimestamp())};else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:mh(e.version)};else{if(!e.isUnknownDocument())return Rn();n.unknownDocument={path:t.path.toArray(),version:mh(e.version)}}var l,u;return n}function gh(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function mh(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function _h(r){const e=new uo(r.seconds,r.nanoseconds);return qn.fromTimestamp(e)}function vh(r,e){const t=(e.baseMutations||[]).map(l=>gw(r.ct,l));for(let l=0;l<e.mutations.length-1;++l)l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(e.mutations[l].updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l);const n=e.mutations.map(l=>gw(r.ct,l)),s=uo.fromMillis(e.localWriteTimeMs);return new Wm(e.batchId,s,t,n)}function o_(r){const e=_h(r.readTime),t=void 0!==r.lastLimboFreeSnapshotVersion?_h(r.lastLimboFreeSnapshotVersion):qn.min();let n;return n=void 0!==r.query.documents?(Un(1===(l=r.query).documents.length),Ds(Jc(GD(l.documents[0])))):function(l){return Ds(vw(l))}(r.query),new dc(n,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,_o.fromBase64String(r.resumeToken));var l}function YD(r,e){const t=mh(e.snapshotVersion),n=mh(e.lastLimboFreeSnapshotVersion);let s;s=Fm(e.target)?mw(r.ct,e.target):n_(r.ct,e.target)._t;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ju(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function Ew(r){const e=vw({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?Bm(e,e.limit,"L"):e}function s_(r,e){return new n0(e.largestBatchId,gw(r.ct,e.overlayMutation))}function yp(r,e){const t=e.path.lastSegment();return[r,js(e.path.popLast()),t]}function Iw(r,e,t,n){return{indexId:r,uid:e,sequenceNumber:t,readTime:mh(n.readTime),documentKey:js(n.documentKey.path),largestBatchId:n.largestBatchId}}class JD{getBundleMetadata(e,t){return ZD(e).get(t).next(n=>{if(n)return{id:(l=n).bundleId,createTime:_h(l.createTime),version:l.version};var l})}saveBundleMetadata(e,t){return ZD(e).put({bundleId:(s=t).id,createTime:mh(Bo(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return Ep(e).get(t).next(n=>{if(n)return{name:(l=n).name,query:Ew(l.bundledQuery),readTime:_h(l.readTime)};var l})}saveNamedQuery(e,t){return Ep(e).put({name:(s=t).name,readTime:mh(Bo(s.readTime)),bundledQuery:s.bundledQuery});var s}}function ZD(r){return Uo(r,"bundles")}function Ep(r){return Uo(r,"namedQueries")}class yh{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new yh(e,t.uid||"")}getOverlay(e,t){return h0(e).get(yp(this.userId,t)).next(n=>n?s_(this.serializer,n):null)}getOverlays(e,t){const n=vo();return pt.forEach(t,s=>this.getOverlay(e,s).next(l=>{null!==l&&n.set(s,l)})).next(()=>n)}saveOverlays(e,t,n){const s=[];return n.forEach((l,u)=>{const h=new n0(t,u);s.push(this.ht(e,h))}),pt.waitFor(s)}removeOverlaysForBatchId(e,t,n){const s=new Set;t.forEach(u=>s.add(js(u.getCollectionPath())));const l=[];return s.forEach(u=>{const h=IDBKeyRange.bound([this.userId,u,n],[this.userId,u,n+1],!1,!0);l.push(h0(e).j("collectionPathOverlayIndex",h))}),pt.waitFor(l)}getOverlaysForCollection(e,t,n){const s=vo(),l=js(t),u=IDBKeyRange.bound([this.userId,l,n],[this.userId,l,Number.POSITIVE_INFINITY],!0);return h0(e).U("collectionPathOverlayIndex",u).next(h=>{for(const p of h){const E=s_(this.serializer,p);s.set(E.getKey(),E)}return s})}getOverlaysForCollectionGroup(e,t,n,s){const l=vo();let u;const h=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return h0(e).J({index:"collectionGroupOverlayIndex",range:h},(p,E,w)=>{const x=s_(this.serializer,E);l.size()<s||x.largestBatchId===u?(l.set(x.getKey(),x),u=x.largestBatchId):w.done()}).next(()=>l)}ht(e,t){return h0(e).put(function(s,l,u){const[h,p,E]=yp(l,u.mutation.key);return{userId:l,collectionPath:p,documentId:E,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:_p(s.ct,u.mutation)}}(this.serializer,this.userId,t))}}function h0(r){return Uo(r,"documentOverlays")}class wk{Pt(e){return Uo(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const n=null==t?void 0:t.value;return n?_o.fromUint8Array(n):_o.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class nd{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(to(e.integerValue));else if("doubleValue"in e){const n=to(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),ep(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=Qc(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Ea(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?Gb(e)?this.dt(t,Number.MAX_SAFE_INTEGER):jy(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Rn()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const s of Object.keys(n))this.Vt(s,t),this.Tt(n[s],t)}wt(e,t){var n,s;const l=e.fields||{};this.dt(t,53);const u="value",h=(null===(s=null===(n=l[u].arrayValue)||void 0===n?void 0:n.values)||void 0===s?void 0:s.length)||0;this.dt(t,15),t.At(to(h)),this.Vt(u,t),this.Tt(l[u],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const s of n)this.Tt(s,t)}yt(e,t){this.dt(t,37),_n.fromName(e).path.forEach(n=>{this.dt(t,60),this.Dt(n,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function bw(r){if(0===r)return 8;let e=0;return!(r>>4)&&(e+=4,r<<=4),!(r>>6)&&(e+=2,r<<=2),!(r>>7)&&(e+=1),e}function eR(r){const e=64-function(n){let s=0;for(let l=0;l<8;++l){const u=bw(255&n[l]);if(s+=u,8!==u)break}return s}(r);return Math.ceil(e/8)}nd.vt=new nd;class tR{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ft(n.value),n=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ot(n.value),n=t.next();this.Nt()}Lt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const s=t.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const s=t.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const t=this.qt(e),n=eR(t);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let s=t.length-n;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Kt(e){const t=this.qt(e),n=eR(t);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let s=t.length-n;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(l){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,l,!1),new Uint8Array(u.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let s=1;s<t.length;++s)t[s]^=n?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class Ck{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class nR{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Ip{constructor(){this.jt=new tR,this.Ht=new Ck(this.jt),this.Jt=new nR(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class rd{constructor(e,t,n,s){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=s}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new rd(this.indexId,this.documentKey,this.arrayValue,n)}}function hc(r,e){let t=r.indexId-e.indexId;return 0!==t?t:(t=rR(r.arrayValue,e.arrayValue),0!==t?t:(t=rR(r.directionalValue,e.directionalValue),0!==t?t:_n.comparator(r.documentKey,e.documentKey)))}function rR(r,e){for(let t=0;t<r.length&&t<e.length;++t){const n=r[t]-e[t];if(0!==n)return n}return r.length-e.length}class iR{constructor(e){this.Xt=new ji((t,n)=>si.comparator(t.field,n.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const n=t;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Un(e.collectionGroup===this.collectionId),this.nn)return!1;const t=cD(e);if(void 0!==t&&!this.sn(t))return!1;const n=Yf(e);let s=new Set,l=0,u=0;for(;l<n.length&&this.sn(n[l]);++l)s=s.add(n[l].fieldPath.canonicalString());if(l===n.length)return!0;if(this.Xt.size>0){const h=this.Xt.getIterator().getNext();if(!s.has(h.field.canonicalString())){const p=n[l];if(!this.on(h,p)||!this._n(this.en[u++],p))return!1}++l}for(;l<n.length;++l)if(u>=this.en.length||!this._n(this.en[u++],n[l]))return!1;return!0}an(){if(this.nn)return null;let e=new ji(si.comparator);const t=[];for(const n of this.tn)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new Jf(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Jf(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Jf(n.field,"asc"===n.dir?0:1)));return new Qf(Qf.UNKNOWN_ID,this.collectionId,t,rh.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function oR(r){var e,t;if(Un(r instanceof Wr||r instanceof yi),r instanceof Wr){if(r instanceof Yb){const s=(null===(t=null===(e=r.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(l=>Wr.create(r.field,"==",l)))||[];return yi.create(s,"or")}return r}const n=r.filters.map(s=>oR(s));return yi.create(n,r.op)}function Ak(r){if(0===r.getFilters().length)return[];const e=Aw(oR(r));return Un(f0(e)),ww(e)||Cw(e)?[e]:e.getFilters()}function ww(r){return r instanceof Wr}function Cw(r){return r instanceof yi&&Nm(r)}function f0(r){return ww(r)||Cw(r)||function(t){if(t instanceof yi&&qy(t)){for(const n of t.getFilters())if(!ww(n)&&!Cw(n))return!1;return!0}return!1}(r)}function Aw(r){if(Un(r instanceof Wr||r instanceof yi),r instanceof Wr)return r;if(1===r.filters.length)return Aw(r.filters[0]);const e=r.filters.map(n=>Aw(n));let t=yi.create(e,r.op);return t=fc(t),f0(t)?t:(Un(t instanceof yi),Un(ah(t)),Un(t.filters.length>1),t.filters.reduce((n,s)=>Tw(n,s)))}function Tw(r,e){let t;return Un(r instanceof Wr||r instanceof yi),Un(e instanceof Wr||e instanceof yi),t=r instanceof Wr?e instanceof Wr?yi.create([r,e],"and"):sR(r,e):e instanceof Wr?sR(e,r):function(s,l){if(Un(s.filters.length>0&&l.filters.length>0),ah(s)&&ah(l))return Xb(s,l.getFilters());const u=qy(s)?s:l,h=qy(s)?l:s,p=u.filters.map(E=>Tw(E,h));return yi.create(p,"or")}(r,e),fc(t)}function sR(r,e){if(ah(e))return Xb(e,r.getFilters());{const t=e.filters.map(n=>Tw(r,n));return yi.create(t,"or")}}function fc(r){if(Un(r instanceof Wr||r instanceof yi),r instanceof Wr)return r;const e=r.getFilters();if(1===e.length)return fc(e[0]);if(Kb(r))return r;const t=e.map(s=>fc(s)),n=[];return t.forEach(s=>{s instanceof Wr?n.push(s):s instanceof yi&&(s.op===r.op?n.push(...s.filters):n.push(s))}),1===n.length?n[0]:yi.create(n,r.op)}class a_{constructor(){this.un=new l_}addToCollectionParentIndex(e,t){return this.un.add(t),pt.resolve()}getCollectionParents(e,t){return pt.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return pt.resolve()}deleteFieldIndex(e,t){return pt.resolve()}deleteAllFieldIndexes(e){return pt.resolve()}createTargetIndexes(e,t){return pt.resolve()}getDocumentsMatchingTarget(e,t){return pt.resolve(null)}getIndexType(e,t){return pt.resolve(0)}getFieldIndexes(e,t){return pt.resolve([])}getNextCollectionGroupToUpdate(e){return pt.resolve(null)}getMinOffset(e,t){return pt.resolve(La.min())}getMinOffsetFromCollectionGroup(e,t){return pt.resolve(La.min())}updateCollectionGroup(e,t,n){return pt.resolve()}updateIndexEntries(e,t){return pt.resolve()}}class l_{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new ji(Gr.comparator),l=!s.has(n);return this.index[t]=s.add(n),l}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new ji(Gr.comparator)).toArray()}}const bp=new Uint8Array(0);class Tk{constructor(e,t){this.databaseId=t,this.cn=new l_,this.ln=new Zc(n=>Ju(n),(n,s)=>pr(n,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const n=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const l={collectionId:n,parent:js(s)};return Eh(e).put(l)}return pt.resolve()}getCollectionParents(e,t){const n=[],s=IDBKeyRange.bound([t,""],[kb(t),""],!1,!0);return Eh(e).U(s).next(l=>{for(const u of l){if(u.collectionId!==t)break;n.push(Ua(u.parent))}return n})}addFieldIndex(e,t){const n=c_(e),s={indexId:(h=t).indexId,collectionGroup:h.collectionGroup,fields:h.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])};var h;delete s.indexId;const l=n.add(s);if(t.indexState){const u=wp(e);return l.next(h=>{u.put(Iw(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const n=c_(e),s=wp(e),l=Ih(e);return n.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=c_(e),n=Ih(e),s=wp(e);return t.j().next(()=>n.j()).next(()=>s.j())}createTargetIndexes(e,t){return pt.forEach(this.hn(t),n=>this.getIndexType(e,n).next(s=>{if(0===s||1===s){const l=new iR(n).an();if(null!=l)return this.addFieldIndex(e,l)}}))}getDocumentsMatchingTarget(e,t){const n=Ih(e);let s=!0;const l=new Map;return pt.forEach(this.hn(t),u=>this.Pn(e,u).next(h=>{s&&(s=!!h),l.set(u,h)})).next(()=>{if(s){let u=wr();const h=[];return pt.forEach(l,(p,E)=>{var cn;nn("IndexedDbIndexManager",`Using index ${cn=p,`id=${cn.indexId}|cg=${cn.collectionGroup}|f=${cn.fields.map(An=>`${An.fieldPath}:${An.kind}`).join(",")}`} to execute ${Ju(t)}`);const w=function(cn,An){const Yn=cD(An);if(void 0===Yn)return null;for(const ar of Lm(cn,Yn.fieldPath))switch(ar.op){case"array-contains-any":return ar.value.arrayValue.values||[];case"array-contains":return[ar.value]}return null}(E,p),x=function(cn,An){const Yn=new Map;for(const ar of Yf(An))for(const it of Lm(cn,ar.fieldPath))switch(it.op){case"==":case"in":Yn.set(ar.fieldPath.canonicalString(),it.value);break;case"not-in":case"!=":return Yn.set(ar.fieldPath.canonicalString(),it.value),Array.from(Yn.values())}return null}(E,p),G=function(cn,An){const Yn=[];let ar=!0;for(const it of Yf(An)){const Me=0===it.kind?ch(cn,it.fieldPath,cn.startAt):Jb(cn,it.fieldPath,cn.startAt);Yn.push(Me.value),ar&&(ar=Me.inclusive)}return new Ia(Yn,ar)}(E,p),ce=function(cn,An){const Yn=[];let ar=!0;for(const it of Yf(An)){const Me=0===it.kind?Jb(cn,it.fieldPath,cn.endAt):ch(cn,it.fieldPath,cn.endAt);Yn.push(Me.value),ar&&(ar=Me.inclusive)}return new Ia(Yn,ar)}(E,p),De=this.In(p,E,G),dt=this.In(p,E,ce),lt=this.Tn(p,E,x),ln=this.En(p.indexId,w,De,G.inclusive,dt,ce.inclusive,lt);return pt.forEach(ln,vn=>n.G(vn,t.limit).next(cn=>{cn.forEach(An=>{const Yn=_n.fromSegments(An.documentKey);u.has(Yn)||(u=u.add(Yn),h.push(Yn))})}))}).next(()=>h)}return pt.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:Ak(yi.create(e.filters,"and")).map(n=>Xy(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,n,s,l,u,h){const p=(null!=t?t.length:1)*Math.max(n.length,l.length),E=p/(null!=t?t.length:1),w=[];for(let x=0;x<p;++x){const G=t?this.dn(t[x/E]):bp,ce=this.An(e,G,n[x%E],s),De=this.Rn(e,G,l[x%E],u),dt=h.map(lt=>this.An(e,G,lt,!0));w.push(...this.createRange(ce,De,dt))}return w}An(e,t,n,s){const l=new rd(e,_n.empty(),t,n);return s?l:l.Zt()}Rn(e,t,n,s){const l=new rd(e,_n.empty(),t,n);return s?l.Zt():l}Pn(e,t){const n=new iR(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(l=>{let u=null;for(const h of l)n.rn(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u})}getIndexType(e,t){let n=2;const s=this.hn(t);return pt.forEach(s,l=>this.Pn(e,l).next(u=>{u?0!==n&&u.fields.length<function(p){let E=new ji(si.comparator),w=!1;for(const x of p.filters)for(const G of x.getFlattenedFilters())G.field.isKeyField()||("array-contains"===G.op||"array-contains-any"===G.op?w=!0:E=E.add(G.field));for(const x of p.orderBy)x.field.isKeyField()||(E=E.add(x.field));return E.size+(w?1:0)}(l)&&(n=1):n=0})).next(()=>null!==t.limit&&s.length>1&&2===n?1:n)}Vn(e,t){const n=new Ip;for(const s of Yf(e)){const l=t.data.field(s.fieldPath);if(null==l)return null;const u=n.Yt(s.kind);nd.vt.It(l,u)}return n.zt()}dn(e){const t=new Ip;return nd.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const n=new Ip;return nd.vt.It(Qu(this.databaseId,t),n.Yt(function(l){const u=Yf(l);return 0===u.length?0:u[u.length-1].kind}(e))),n.zt()}Tn(e,t,n){if(null===n)return[];let s=[];s.push(new Ip);let l=0;for(const u of Yf(e)){const h=n[l++];for(const p of s)if(this.fn(t,u.fieldPath)&&Yu(h))s=this.gn(s,u,h);else{const E=p.Yt(u.kind);nd.vt.It(h,E)}}return this.pn(s)}In(e,t,n){return this.Tn(e,t,n.position)}pn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].zt();return t}gn(e,t,n){const s=[...e],l=[];for(const u of n.arrayValue.values||[])for(const h of s){const p=new Ip;p.seed(h.zt()),nd.vt.It(u,p.Yt(t.kind)),l.push(p)}return l}fn(e,t){return!!e.filters.find(n=>n instanceof Wr&&n.field.isEqual(t)&&("in"===n.op||"not-in"===n.op))}getFieldIndexes(e,t){const n=c_(e),s=wp(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next(l=>{const u=[];return pt.forEach(l,h=>s.get([h.indexId,this.uid]).next(p=>{u.push(function(w,x){const G=x?new rh(x.sequenceNumber,new La(_h(x.readTime),new _n(Ua(x.documentKey)),x.largestBatchId)):rh.empty(),ce=w.fields.map(([De,dt])=>new Jf(si.fromServerFormat(De),dt));return new Qf(w.indexId,w.collectionGroup,ce,G)}(h,p))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((n,s)=>{const l=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==l?l:gr(n.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,n){const s=c_(e),l=wp(e);return this.yn(e).next(u=>s.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>pt.forEach(h,p=>l.put(Iw(p.indexId,this.uid,u,n)))))}updateIndexEntries(e,t){const n=new Map;return pt.forEach(t,(s,l)=>{const u=n.get(s.collectionGroup);return(u?pt.resolve(u):this.getFieldIndexes(e,s.collectionGroup)).next(h=>(n.set(s.collectionGroup,h),pt.forEach(h,p=>this.wn(e,s,p).next(E=>{const w=this.Sn(l,p);return E.isEqual(w)?pt.resolve():this.bn(e,l,p,E,w)}))))})}Dn(e,t,n,s){return Ih(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(n,t.key),documentKey:t.key.path.toArray()})}vn(e,t,n,s){return Ih(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(n,t.key),t.key.path.toArray()])}wn(e,t,n){const s=Ih(e);let l=new ji(hc);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,t)])},(u,h)=>{l=l.add(new rd(n.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>l)}Sn(e,t){let n=new ji(hc);const s=this.Vn(t,e);if(null==s)return n;const l=cD(t);if(null!=l){const u=e.data.field(l.fieldPath);if(Yu(u))for(const h of u.arrayValue.values||[])n=n.add(new rd(t.indexId,e.key,this.dn(h),s))}else n=n.add(new rd(t.indexId,e.key,bp,s));return n}bn(e,t,n,s,l){nn("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(p,E,w,x,G){const ce=p.getIterator(),De=E.getIterator();let dt=Xc(ce),lt=Xc(De);for(;dt||lt;){let ln=!1,vn=!1;if(dt&&lt){const cn=w(dt,lt);cn<0?vn=!0:cn>0&&(ln=!0)}else null!=dt?vn=!0:ln=!0;ln?(x(lt),lt=Xc(De)):vn?(G(dt),dt=Xc(ce)):(dt=Xc(ce),lt=Xc(De))}}(s,l,hc,h=>{u.push(this.Dn(e,t,n,h))},h=>{u.push(this.vn(e,t,n,h))}),pt.waitFor(u)}yn(e){let t=1;return wp(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,s,l)=>{l.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((u,h)=>hc(u,h)).filter((u,h,p)=>!h||0!==hc(u,p[h-1]));const s=[];s.push(e);for(const u of n){const h=hc(u,e),p=hc(u,t);if(0===h)s[0]=e.Zt();else if(h>0&&p<0)s.push(u),s.push(u.Zt());else if(p>0)break}s.push(t);const l=[];for(let u=0;u<s.length;u+=2){if(this.Cn(s[u],s[u+1]))return[];l.push(IDBKeyRange.bound([s[u].indexId,this.uid,s[u].arrayValue,s[u].directionalValue,bp,[]],[s[u+1].indexId,this.uid,s[u+1].arrayValue,s[u+1].directionalValue,bp,[]]))}return l}Cn(e,t){return hc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(aR)}getMinOffset(e,t){return pt.mapArray(this.hn(t),n=>this.Pn(e,n).next(s=>s||Rn())).next(aR)}}function Eh(r){return Uo(r,"collectionParents")}function Ih(r){return Uo(r,"indexEntries")}function c_(r){return Uo(r,"indexConfiguration")}function wp(r){return Uo(r,"indexState")}function aR(r){Un(0!==r.length);let e=r[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<r.length;n++){const s=r[n].indexState.offset;Ob(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new La(e.readTime,e.documentKey,t)}const lR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ws{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Ws(e,Ws.DEFAULT_COLLECTION_PERCENTILE,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Sw(r,e,t){const n=r.store("mutations"),s=r.store("documentMutations"),l=[],u=IDBKeyRange.only(t.batchId);let h=0;const p=n.J({range:u},(w,x,G)=>(h++,G.delete()));l.push(p.next(()=>{Un(1===h)}));const E=[];for(const w of t.mutations){const x=fD(e,w.key.path,t.batchId);l.push(s.delete(x)),E.push(w.key)}return pt.waitFor(l).next(()=>E)}function p0(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Rn();e=r.noDocument}return JSON.stringify(e).length}Ws.DEFAULT_COLLECTION_PERCENTILE=10,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ws.DEFAULT=new Ws(41943040,Ws.DEFAULT_COLLECTION_PERCENTILE,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ws.DISABLED=new Ws(-1,0,0);class u_{constructor(e,t,n,s){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=s,this.Fn={}}static lt(e,t,n,s){Un(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new u_(l,t,n,s)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return id(e).J({index:"userMutationsIndex",range:n},(s,l,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,n,s){const l=Cp(e),u=id(e);return u.add({}).next(h=>{Un("number"==typeof h);const p=new Wm(h,t,n,s),E=function(ce,De,dt){const lt=dt.baseMutations.map(vn=>_p(ce.ct,vn)),ln=dt.mutations.map(vn=>_p(ce.ct,vn));return{userId:De,batchId:dt.batchId,localWriteTimeMs:dt.localWriteTime.toMillis(),baseMutations:lt,mutations:ln}}(this.serializer,this.userId,p),w=[];let x=new ji((G,ce)=>gr(G.canonicalString(),ce.canonicalString()));for(const G of s){const ce=fD(this.userId,G.key.path,h);x=x.add(G.key.path.popLast()),w.push(u.put(E)),w.push(l.put(ce,np))}return x.forEach(G=>{w.push(this.indexManager.addToCollectionParentIndex(e,G))}),e.addOnCommittedListener(()=>{this.Fn[h]=p.keys()}),pt.waitFor(w).next(()=>p)})}lookupMutationBatch(e,t){return id(e).get(t).next(n=>n?(Un(n.userId===this.userId),vh(this.serializer,n)):null)}Mn(e,t){return this.Fn[t]?pt.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(n=>{if(n){const s=n.keys();return this.Fn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=IDBKeyRange.lowerBound([this.userId,n]);let l=null;return id(e).J({index:"userMutationsIndex",range:s},(u,h,p)=>{h.userId===this.userId&&(Un(h.batchId>=n),l=vh(this.serializer,h)),p.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return id(e).J({index:"userMutationsIndex",range:t,reverse:!0},(s,l,u)=>{n=l.batchId,u.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return id(e).U("userMutationsIndex",t).next(n=>n.map(s=>vh(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=tp(this.userId,t.path),s=IDBKeyRange.lowerBound(n),l=[];return Cp(e).J({range:s},(u,h,p)=>{const[E,w,x]=u,G=Ua(w);if(E===this.userId&&t.path.isEqual(G))return id(e).get(x).next(ce=>{if(!ce)throw Rn();Un(ce.userId===this.userId),l.push(vh(this.serializer,ce))});p.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ji(gr);const s=[];return t.forEach(l=>{const u=tp(this.userId,l.path),h=IDBKeyRange.lowerBound(u),p=Cp(e).J({range:h},(E,w,x)=>{const[G,ce,De]=E,dt=Ua(ce);G===this.userId&&l.path.isEqual(dt)?n=n.add(De):x.done()});s.push(p)}),pt.waitFor(s).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1,l=tp(this.userId,n),u=IDBKeyRange.lowerBound(l);let h=new ji(gr);return Cp(e).J({range:u},(p,E,w)=>{const[x,G,ce]=p,De=Ua(G);x===this.userId&&n.isPrefixOf(De)?De.length===s&&(h=h.add(ce)):w.done()}).next(()=>this.xn(e,h))}xn(e,t){const n=[],s=[];return t.forEach(l=>{s.push(id(e).get(l).next(u=>{if(null===u)throw Rn();Un(u.userId===this.userId),n.push(vh(this.serializer,u))}))}),pt.waitFor(s).next(()=>n)}removeMutationBatch(e,t){return Sw(e._e,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),pt.forEach(n,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return pt.resolve();const n=IDBKeyRange.lowerBound(function(u){return[u]}(this.userId)),s=[];return Cp(e).J({range:n},(l,u,h)=>{if(l[0]===this.userId){const p=Ua(l[1]);s.push(p)}else h.done()}).next(()=>{Un(0===s.length)})})}containsKey(e,t){return d_(e,this.userId,t)}Nn(e){return Dw(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function d_(r,e,t){const n=tp(e,t.path),s=n[1],l=IDBKeyRange.lowerBound(n);let u=!1;return Cp(r).J({range:l,H:!0},(h,p,E)=>{const[w,x,G]=h;w===e&&x===s&&(u=!0),E.done()}).next(()=>u)}function id(r){return Uo(r,"mutations")}function Cp(r){return Uo(r,"documentMutations")}function Dw(r){return Uo(r,"mutationQueues")}class bh{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new bh(0)}static kn(){return new bh(-1)}}class Sk{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const n=new bh(t.highestTargetId);return t.highestTargetId=n.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>qn.fromTimestamp(new uo(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.qn(e).next(s=>(s.highestListenSequenceNumber=t,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Qn(e,s)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(t,n),this.Qn(e,n))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>al(e).delete(t.targetId)).next(()=>this.qn(e)).next(n=>(Un(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,t,n){let s=0;const l=[];return al(e).J((u,h)=>{const p=o_(h);p.sequenceNumber<=t&&null===n.get(p.targetId)&&(s++,l.push(this.removeTargetData(e,p)))}).next(()=>pt.waitFor(l)).next(()=>s)}forEachTarget(e,t){return al(e).J((n,s)=>{const l=o_(s);t(l)})}qn(e){return wh(e).get("targetGlobalKey").next(t=>(Un(null!==t),t))}Qn(e,t){return wh(e).put("targetGlobalKey",t)}Kn(e,t){return al(e).put(YD(this.serializer,t))}$n(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const n=Ju(t),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let l=null;return al(e).J({range:s,index:"queryTargetsIndex"},(u,h,p)=>{const E=o_(h);pr(t,E.target)&&(l=E,p.done())}).next(()=>l)}addMatchingKeys(e,t,n){const s=[],l=ll(e);return t.forEach(u=>{const h=js(u.path);s.push(l.put({targetId:n,path:h})),s.push(this.referenceDelegate.addReference(e,n,u))}),pt.waitFor(s)}removeMatchingKeys(e,t,n){const s=ll(e);return pt.forEach(t,l=>{const u=js(l.path);return pt.waitFor([s.delete([n,u]),this.referenceDelegate.removeReference(e,n,l)])})}removeMatchingKeysForTargetId(e,t){const n=ll(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),s=ll(e);let l=wr();return s.J({range:n,H:!0},(u,h,p)=>{const E=Ua(u[1]),w=new _n(E);l=l.add(w)}).next(()=>l)}containsKey(e,t){const n=js(t.path),s=IDBKeyRange.bound([n],[kb(n)],!1,!0);let l=0;return ll(e).J({index:"documentTargetsIndex",H:!0,range:s},([u,h],p,E)=>{0!==u&&(l++,E.done())}).next(()=>l>0)}ot(e,t){return al(e).get(t).next(n=>n?o_(n):null)}}function al(r){return Uo(r,"targets")}function wh(r){return Uo(r,"targetGlobal")}function ll(r){return Uo(r,"targetDocuments")}function Dk([r,e],[t,n]){const s=gr(r,t);return 0===s?gr(e,n):s}class cR{constructor(e){this.Un=e,this.buffer=new ji(Dk),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();Dk(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class uR{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var t=this;nn("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,C.A)(function*(){t.jn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(n){ac(n)?nn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield ol(n)}yield t.Hn(3e5)}))}}class dR{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(0===t)return pt.resolve(Va.oe);const n=new cR(t);return this.Jn.forEachTarget(e,s=>n.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>n.zn(s))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(nn("LruGarbageCollector","Garbage collection skipped; disabled"),pt.resolve(lR)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(nn("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lR):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let n,s,l,u,h,p,E;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(nn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),s=this.params.maximumSequenceNumbersToCollect):s=x,u=Date.now(),this.nthSequenceNumber(e,s))).next(x=>(n=x,h=Date.now(),this.removeTargets(e,n,t))).next(x=>(l=x,p=Date.now(),this.removeOrphanedDocuments(e,n))).next(x=>(E=Date.now(),qu()<=Nn.DEBUG&&nn("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-w}ms\n\tDetermined least recently used ${s} in `+(h-u)+`ms\n\tRemoved ${l} targets in `+(p-h)+`ms\n\tRemoved ${x} documents in `+(E-p)+`ms\nTotal Duration: ${E-w}ms`),pt.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:x})))}}class fR{constructor(e,t){this.db=e,this.garbageCollector=function hR(r,e){return new dR(r,e)}(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>t.next(s=>n+s))}er(e){let t=0;return this.Zn(e,n=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(n,s)=>t(s))}addReference(e,t,n){return Rw(e,n)}removeReference(e,t,n){return Rw(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Rw(e,t)}nr(e,t){return function(s,l){let u=!1;return Dw(s).Y(h=>d_(s,h,l).next(p=>(p&&(u=!0),pt.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let l=0;return this.tr(e,(u,h)=>{if(h<=t){const p=this.nr(e,u).next(E=>{if(!E)return l++,n.getEntry(e,u).next(()=>(n.removeEntry(u,qn.min()),ll(e).delete([0,js(u.path)])))});s.push(p)}}).next(()=>pt.waitFor(s)).next(()=>n.apply(e)).next(()=>l)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Rw(e,t)}tr(e,t){const n=ll(e);let s,l=Va.oe;return n.J({index:"documentTargetsIndex"},([u,h],{path:p,sequenceNumber:E})=>{0===u?(l!==Va.oe&&t(new _n(Ua(s)),l),l=E,s=p):l=Va.oe}).next(()=>{l!==Va.oe&&t(new _n(Ua(s)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Rw(r,e){return ll(r).put((s=r.currentSequenceNumber,{targetId:0,path:js(e.path),sequenceNumber:s}));var s}class pR{constructor(){this.changes=new Zc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?pt.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class h_{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Ch(e).put(n)}removeEntry(e,t,n){return Ch(e).delete(function(l,u){const h=l.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],gh(u),h[h.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.rr(e,n)))}getEntry(e,t){let n=Wi.newInvalidDocument(t);return Ch(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(m0(t))},(s,l)=>{n=this.ir(t,l)}).next(()=>n)}sr(e,t){let n={size:0,document:Wi.newInvalidDocument(t)};return Ch(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(m0(t))},(s,l)=>{n={document:this.ir(t,l),size:p0(l)}}).next(()=>n)}getEntries(e,t){let n=ia();return this._r(e,t,(s,l)=>{const u=this.ir(s,l);n=n.insert(s,u)}).next(()=>n)}ar(e,t){let n=ia(),s=new eo(_n.comparator);return this._r(e,t,(l,u)=>{const h=this.ir(l,u);n=n.insert(l,h),s=s.insert(l,p0(u))}).next(()=>({documents:n,ur:s}))}_r(e,t,n){if(t.isEmpty())return pt.resolve();let s=new ji(qs);t.forEach(p=>s=s.add(p));const l=IDBKeyRange.bound(m0(s.first()),m0(s.last())),u=s.getIterator();let h=u.getNext();return Ch(e).J({index:"documentKeyIndex",range:l},(p,E,w)=>{const x=_n.fromSegments([...E.prefixPath,E.collectionGroup,E.documentId]);for(;h&&qs(h,x)<0;)n(h,null),h=u.getNext();h&&h.isEqual(x)&&(n(h,E),h=u.hasNext()?u.getNext():null),h?w.$(m0(h)):w.done()}).next(()=>{for(;h;)n(h,null),h=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,n,s,l){const u=t.path,h=[u.popLast().toArray(),u.lastSegment(),gh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],p=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ch(e).U(IDBKeyRange.bound(h,p,!0)).next(E=>{null==l||l.incrementDocumentReadCount(E.length);let w=ia();for(const x of E){const G=this.ir(_n.fromSegments(x.prefixPath.concat(x.collectionGroup,x.documentId)),x);G.isFoundDocument()&&($m(t,G)||s.has(G.key))&&(w=w.insert(G.key,G))}return w})}getAllFromCollectionGroup(e,t,n,s){let l=ia();const u=Pw(t,n),h=Pw(t,La.max());return Ch(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,h,!0)},(p,E,w)=>{const x=this.ir(_n.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);l=l.insert(x.key,x),l.size===s&&w.done()}).next(()=>l)}newChangeBuffer(e){return new Rk(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return gR(e).get("remoteDocumentGlobalKey").next(t=>(Un(!!t),t))}rr(e,t){return gR(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const n=function QD(r,e){let t;if(e.document)t=Zm(r.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=_n.fromSegments(e.noDocument.path),s=_h(e.noDocument.readTime);t=Wi.newNoDocument(n,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Rn();{const n=_n.fromSegments(e.unknownDocument.path),s=_h(e.unknownDocument.version);t=Wi.newUnknownDocument(n,s)}}return e.readTime&&t.setReadTime(function(s){const l=new uo(s[0],s[1]);return qn.fromTimestamp(l)}(e.readTime)),t}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(qn.min()))return n}return Wi.newInvalidDocument(e)}}function g0(r){return new h_(r)}class Rk extends pR{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Zc(n=>n.toString(),(n,s)=>n.isEqual(s))}applyChanges(e){const t=[];let n=0,s=new ji((l,u)=>gr(l.canonicalString(),u.canonicalString()));return this.changes.forEach((l,u)=>{const h=this.lr.get(l);if(t.push(this.cr.removeEntry(e,l,h.readTime)),u.isValidDocument()){const p=d0(this.cr.serializer,u);s=s.add(l.path.popLast());const E=p0(p);n+=E-h.size,t.push(this.cr.addEntry(e,l,p))}else if(n-=h.size,this.trackRemovals){const p=d0(this.cr.serializer,u.convertToNoDocument(qn.min()));t.push(this.cr.addEntry(e,l,p))}}),s.forEach(l=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.cr.updateMetadata(e,n)),pt.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(n=>(this.lr.set(t,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:n,ur:s})=>(s.forEach((l,u)=>{this.lr.set(l,{size:u,readTime:n.get(l).readTime})}),n))}}function gR(r){return Uo(r,"remoteDocumentGlobal")}function Ch(r){return Uo(r,"remoteDocumentsV14")}function m0(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Pw(r,e){const t=e.documentKey.path.toArray();return[r,gh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function qs(r,e){const t=r.path.toArray(),n=e.path.toArray();let s=0;for(let l=0;l<t.length-2&&l<n.length-2;++l)if(s=gr(t[l],n[l]),s)return s;return s=gr(t.length,n.length),s||(s=gr(t[t.length-2],n[n.length-2]),s||gr(t[t.length-1],n[n.length-1]))}class mR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class xw{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==n&&hh(n.mutation,s,As.empty(),uo.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,wr()).next(()=>n))}getLocalViewOfDocuments(e,t,n=wr()){const s=vo();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,n).next(l=>{let u=jm();return l.forEach((h,p)=>{u=u.insert(h,p.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const n=vo();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,wr()))}populateOverlays(e,t,n){const s=[];return n.forEach(l=>{t.has(l)||s.push(l)}),this.documentOverlayCache.getOverlays(e,s).next(l=>{l.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,n,s){let l=ia();const u=Hm(),h=Hm();return t.forEach((p,E)=>{const w=n.get(E.key);s.has(E.key)&&(void 0===w||w.mutation instanceof Rl)?l=l.insert(E.key,E):void 0!==w?(u.set(E.key,w.mutation.getFieldMask()),hh(w.mutation,E,w.mutation.getFieldMask(),uo.now())):u.set(E.key,As.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((E,w)=>u.set(E,w)),t.forEach((E,w)=>{var x;return h.set(E,new mR(w,null!==(x=u.get(E))&&void 0!==x?x:null))}),h))}recalculateAndSaveOverlays(e,t){const n=Hm();let s=new eo((u,h)=>u-h),l=wr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(p=>{const E=t.get(p);if(null===E)return;let w=n.get(p)||As.empty();w=h.applyToLocalView(E,w),n.set(p,w);const x=(s.get(h.batchId)||wr()).add(p);s=s.insert(h.batchId,x)})}).next(()=>{const u=[],h=s.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),E=p.key,w=p.value,x=MD();w.forEach(G=>{if(!l.has(G)){const ce=lw(t.get(G),n.get(G));null!==ce&&x.set(G,ce),l=l.add(G)}}),u.push(this.documentOverlayCache.saveOverlays(e,E,x))}return pt.waitFor(u)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,s){return _n.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Vm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,s):this.getDocumentsMatchingCollectionQuery(e,t,n,s);var u}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next(l=>{const u=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-l.size):pt.resolve(vo());let h=-1,p=l;return u.next(E=>pt.forEach(E,(w,x)=>(h<x.largestBatchId&&(h=x.largestBatchId),l.get(w)?pt.resolve():this.remoteDocumentCache.getEntry(e,w).next(G=>{p=p.insert(w,G)}))).next(()=>this.populateOverlays(e,E,l)).next(()=>this.computeViews(e,p,E,wr())).next(w=>({batchId:h,changes:xD(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _n(t)).next(n=>{let s=jm();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,n,s){const l=t.collectionGroup;let u=jm();return this.indexManager.getCollectionParents(e,l).next(h=>pt.forEach(h,p=>{const E=(x=t,G=p.child(l),new lc(G,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt));var x,G;return this.getDocumentsMatchingCollectionQuery(e,E,n,s).next(w=>{w.forEach((x,G)=>{u=u.insert(x,G)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,n,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,l,s))).next(u=>{l.forEach((p,E)=>{const w=E.getKey();null===u.get(w)&&(u=u.insert(w,Wi.newInvalidDocument(w)))});let h=jm();return u.forEach((p,E)=>{const w=l.get(p);void 0!==w&&hh(w.mutation,E,As.empty(),uo.now()),$m(t,E)&&(h=h.insert(p,E))}),h})}}class _R{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return pt.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(s=t).id,version:s.version,createTime:Bo(s.createTime)}),pt.resolve();var s}getNamedQuery(e,t){return pt.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(s=t).name,query:Ew(s.bundledQuery),readTime:Bo(s.readTime)}),pt.resolve();var s}}class k2{constructor(){this.overlays=new eo(_n.comparator),this.Ir=new Map}getOverlay(e,t){return pt.resolve(this.overlays.get(t))}getOverlays(e,t){const n=vo();return pt.forEach(t,s=>this.getOverlay(e,s).next(l=>{null!==l&&n.set(s,l)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((s,l)=>{this.ht(e,t,l)}),pt.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.Ir.get(n);return void 0!==s&&(s.forEach(l=>this.overlays=this.overlays.remove(l)),this.Ir.delete(n)),pt.resolve()}getOverlaysForCollection(e,t,n){const s=vo(),l=t.length+1,u=new _n(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const p=h.getNext().value,E=p.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===l&&p.largestBatchId>n&&s.set(p.getKey(),p)}return pt.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let l=new eo((E,w)=>E-w);const u=this.overlays.getIterator();for(;u.hasNext();){const E=u.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>n){let w=l.get(E.largestBatchId);null===w&&(w=vo(),l=l.insert(E.largestBatchId,w)),w.set(E.getKey(),E)}}const h=vo(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((E,w)=>h.set(E,w)),!(h.size()>=s)););return pt.resolve(h)}ht(e,t,n){const s=this.overlays.get(n.key);if(null!==s){const u=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(n.key,new n0(t,n));let l=this.Ir.get(t);void 0===l&&(l=wr(),this.Ir.set(t,l)),this.Ir.set(t,l.add(n.key))}}class no{constructor(){this.sessionToken=_o.EMPTY_BYTE_STRING}getSessionToken(e){return pt.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,pt.resolve()}}class Mw{constructor(){this.Tr=new ji(Ko.Er),this.dr=new ji(Ko.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new Ko(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.Vr(new Ko(e,t))}mr(e,t){e.forEach(n=>this.removeReference(n,t))}gr(e){const t=new _n(new Gr([])),n=new Ko(t,e),s=new Ko(t,e+1),l=[];return this.dr.forEachInRange([n,s],u=>{this.Vr(u),l.push(u.key)}),l}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new _n(new Gr([])),n=new Ko(t,e),s=new Ko(t,e+1);let l=wr();return this.dr.forEachInRange([n,s],u=>{l=l.add(u.key)}),l}containsKey(e){const t=new Ko(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Ko{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return _n.comparator(e.key,t.key)||gr(e.wr,t.wr)}static Ar(e,t){return gr(e.wr,t.wr)||_n.comparator(e.key,t.key)}}class Pk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new ji(Ko.Er)}checkEmpty(e){return pt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,s){const l=this.Sr;this.Sr++;const u=new Wm(l,t,n,s);this.mutationQueue.push(u);for(const h of s)this.br=this.br.add(new Ko(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return pt.resolve(u)}lookupMutationBatch(e,t){return pt.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.vr(t+1),l=s<0?0:s;return pt.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return pt.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return pt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ko(t,0),s=new Ko(t,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([n,s],u=>{const h=this.Dr(u.wr);l.push(h)}),pt.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ji(gr);return t.forEach(s=>{const l=new Ko(s,0),u=new Ko(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,u],h=>{n=n.add(h.wr)})}),pt.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let l=n;_n.isDocumentKey(l)||(l=l.child(""));const u=new Ko(new _n(l),0);let h=new ji(gr);return this.br.forEachWhile(p=>{const E=p.key.path;return!!n.isPrefixOf(E)&&(E.length===s&&(h=h.add(p.wr)),!0)},u),pt.resolve(this.Cr(h))}Cr(e){const t=[];return e.forEach(n=>{const s=this.Dr(n);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){Un(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return pt.forEach(t.mutations,s=>{const l=new Ko(s.key,t.batchId);return n=n.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new Ko(t,0),s=this.br.firstAfterOrEqual(n);return pt.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return pt.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class xk{constructor(e){this.Mr=e,this.docs=new eo(_n.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),l=s?s.size:0,u=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return pt.resolve(n?n.document.mutableCopy():Wi.newInvalidDocument(t))}getEntries(e,t){let n=ia();return t.forEach(s=>{const l=this.docs.get(s);n=n.insert(s,l?l.document.mutableCopy():Wi.newInvalidDocument(s))}),pt.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let l=ia();const u=t.path,h=new _n(u.child("")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:E,value:{document:w}}=p.getNext();if(!u.isPrefixOf(E.path))break;E.path.length>u.length+1||Ob(dD(w),n)<=0||(s.has(w.key)||$m(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return pt.resolve(l)}getAllFromCollectionGroup(e,t,n,s){Rn()}Or(e,t){return pt.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new Nw(this)}getSize(e){return pt.resolve(this.size)}}class Nw extends pR{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?t.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),pt.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class vR{constructor(e){this.persistence=e,this.Nr=new Zc(t=>Ju(t),pr),this.lastRemoteSnapshotVersion=qn.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Mw,this.targetCount=0,this.kr=bh.Bn()}forEachTarget(e,t){return this.Nr.forEach((n,s)=>t(s)),pt.resolve()}getLastRemoteSnapshotVersion(e){return pt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pt.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),pt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),pt.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new bh(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,pt.resolve()}updateTargetData(e,t){return this.Kn(t),pt.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,pt.resolve()}removeTargets(e,t,n){let s=0;const l=[];return this.Nr.forEach((u,h)=>{h.sequenceNumber<=t&&null===n.get(h.targetId)&&(this.Nr.delete(u),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),pt.waitFor(l).next(()=>s)}getTargetCount(e){return pt.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return pt.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),pt.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach(u=>{l.push(s.markPotentiallyOrphaned(e,u))}),pt.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),pt.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return pt.resolve(n)}containsKey(e,t){return pt.resolve(this.Br.containsKey(t))}}class _0{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Va(0),this.Kr=!1,this.Kr=!0,this.$r=new no,this.referenceDelegate=e(this),this.Ur=new vR(this),this.indexManager=new a_,this.remoteDocumentCache=new xk(n=>this.referenceDelegate.Wr(n)),this.serializer=new XD(t),this.Gr=new _R(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new k2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new Pk(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){nn("MemoryPersistence","Starting transaction:",e);const s=new kw(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(l=>this.referenceDelegate.jr(s).next(()=>l)).toPromise().then(l=>(s.raiseOnCommittedEvent(),l))}Hr(e,t){return pt.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class kw extends sc{constructor(e){super(),this.currentSequenceNumber=e}}class v0{constructor(e){this.persistence=e,this.Jr=new Mw,this.Yr=null}static Zr(e){return new v0(e)}get Xr(){if(this.Yr)return this.Yr;throw Rn()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),pt.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),pt.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),pt.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(l=>this.Xr.add(l.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pt.forEach(this.Xr,n=>{const s=_n.fromPath(n);return this.ei(e,s).next(l=>{l||t.removeEntry(s,qn.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(n=>{n?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return pt.or([()=>pt.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class yR{constructor(e){this.serializer=e}O(e,t,n,s){const l=new Cm("createOrUpgrade",t);var p;n<1&&s>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hD,{unique:!0}),p.createObjectStore("documentMutations"),ER(e),function(p){p.createObjectStore("remoteDocuments")}(e));let u=pt.resolve();return n<3&&s>=3&&(0!==n&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),ER(e)),u=u.next(()=>function(p){const E=p.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:qn.min().toTimestamp(),targetCount:0};return E.put("targetGlobalKey",w)}(l))),n<4&&s>=4&&(0!==n&&(u=u.next(()=>function(p,E){return E.store("mutations").U().next(w=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hD,{unique:!0});const x=E.store("mutations"),G=w.map(ce=>x.put(ce));return pt.waitFor(G)})}(e,l))),u=u.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),n<5&&s>=5&&(u=u.next(()=>this.ni(l))),n<6&&s>=6&&(u=u.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.ri(l)))),n<7&&s>=7&&(u=u.next(()=>this.ii(l))),n<8&&s>=8&&(u=u.next(()=>this.si(e,l))),n<9&&s>=9&&(u=u.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&s>=10&&(u=u.next(()=>this.oi(l))),n<11&&s>=11&&(u=u.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&s>=12&&(u=u.next(()=>{!function(p){const E=p.createObjectStore("documentOverlays",{keyPath:Tm});E.createIndex("collectionPathOverlayIndex",ZN,{unique:!1}),E.createIndex("collectionGroupOverlayIndex",ek,{unique:!1})}(e)})),n<13&&s>=13&&(u=u.next(()=>function(p){const E=p.createObjectStore("remoteDocumentsV14",{keyPath:KN});E.createIndex("documentKeyIndex",XN),E.createIndex("collectionGroupIndex",pD)}(e)).next(()=>this._i(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&s>=14&&(u=u.next(()=>this.ai(e,l))),n<15&&s>=15&&(u=u.next(()=>function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:JN}).createIndex("sequenceNumberIndex",_D,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:D2}).createIndex("documentKeyIndex",R2,{unique:!1})}(e))),n<16&&s>=16&&(u=u.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),n<17&&s>=17&&(u=u.next(()=>{!function(p){p.createObjectStore("globals",{keyPath:"name"})}(e)})),u}ri(e){let t=0;return e.store("remoteDocuments").J((n,s)=>{t+=p0(s)}).next(()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next(s=>pt.forEach(s,l=>{const u=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",u).next(h=>pt.forEach(h,p=>{Un(p.userId===l.userId);const E=vh(this.serializer,p);return Sw(e,l.userId,E).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const l=[];return n.J((u,h)=>{const p=new Gr(u),E=[0,js(p)];l.push(t.get(E).next(w=>w?pt.resolve():t.put({targetId:0,path:js(p),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>pt.waitFor(l))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:mD});const n=t.store("collectionParents"),s=new l_,l=u=>{if(s.add(u)){const h=u.lastSegment(),p=u.popLast();return n.put({collectionId:h,parent:js(p)})}};return t.store("remoteDocuments").J({H:!0},(u,h)=>{const p=new Gr(u);return l(p.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([u,h,p],E)=>{const w=Ua(h);return l(w.popLast())}))}oi(e){const t=e.store("targets");return t.J((n,s)=>{const l=o_(s),u=YD(this.serializer,l);return t.put(u)})}_i(e,t){const n=t.store("remoteDocuments"),s=[];return n.J((l,u)=>{const h=t.store("remoteDocumentsV14"),p=(x=u,x.document?new _n(Gr.fromString(x.document.name).popFirst(5)):x.noDocument?_n.fromSegments(x.noDocument.path):x.unknownDocument?_n.fromSegments(x.unknownDocument.path):Rn()).path.toArray(),E={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};var x;s.push(h.put(E))}).next(()=>pt.waitFor(s))}ai(e,t){const n=t.store("mutations"),s=g0(this.serializer),l=new _0(v0.Zr,this.serializer.ct);return n.U().next(u=>{const h=new Map;return u.forEach(p=>{var E;let w=null!==(E=h.get(p.userId))&&void 0!==E?E:wr();vh(this.serializer,p).keys().forEach(x=>w=w.add(x)),h.set(p.userId,w)}),pt.forEach(h,(p,E)=>{const w=new Mo(E),x=yh.lt(this.serializer,w),G=l.getIndexManager(w),ce=u_.lt(w,this.serializer,G,l.referenceDelegate);return new xw(s,ce,x,G).recalculateAndSaveOverlaysForDocumentKeys(new $b(t,Va.oe),p).next()})})}}function ER(r){r.createObjectStore("targetDocuments",{keyPath:QN}).createIndex("documentTargetsIndex",YN,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",gD,{unique:!0}),r.createObjectStore("targetGlobal")}const Rs="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class E0{constructor(e,t,n,s,l,u,h,p,E,w,x=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.ui=l,this.window=u,this.document=h,this.ci=E,this.li=w,this.hi=x,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=G=>Promise.resolve(),!E0.D())throw new Jt(Rt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new fR(this,s),this.Ai=t+"main",this.serializer=new XD(p),this.Ri=new Kc(this.Ai,this.hi,new yR(this.serializer)),this.$r=new wk,this.Ur=new Sk(this.referenceDelegate,this.serializer),this.remoteDocumentCache=g0(this.serializer),this.Gr=new JD,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===w&&No("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Jt(Rt.FAILED_PRECONDITION,Rs);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Va(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var t=this;return this.di=function(){var n=(0,C.A)(function*(s){if(t.started)return e(s)});return function(s){return n.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var t=(0,C.A)(function*(n){null===n.newVersion&&(yield e())});return function(n){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,C.A)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>I0(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(ac(e))return nn("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return nn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Ah(e).get("owner").next(t=>pt.resolve(this.vi(t)))}Ci(e){return I0(e).delete(this.clientId)}Fi(){var e=this;return(0,C.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const s=Uo(n,"clientMetadata");return s.U().next(l=>{const u=e.xi(l,18e5),h=l.filter(p=>-1===u.indexOf(p));return pt.forEach(h,p=>s.delete(p.clientId)).next(()=>h)})}).catch(()=>[]);if(e.Vi)for(const n of t)e.Vi.removeItem(e.Oi(n.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?pt.resolve(!0):Ah(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new Jt(Rt.FAILED_PRECONDITION,Rs);return!1}}return!(!this.networkEnabled||!this.inForeground)||I0(e).U().next(n=>void 0===this.xi(n,5e3).find(s=>!(this.clientId===s.clientId||!(!this.networkEnabled&&s.networkEnabled||!this.inForeground&&s.inForeground&&this.networkEnabled===s.networkEnabled))))}).next(t=>(this.isPrimary!==t&&nn("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,C.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const n=new $b(t,Va.oe);return e.bi(n).next(()=>e.Ci(n))}),e.Ri.close(),e.qi()})()}xi(e,t){return e.filter(n=>this.Mi(n.updateTimeMs,t)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>I0(e).U().next(t=>this.xi(t,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return u_.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Tk(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return yh.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,n){nn("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",l=17===(p=this.hi)?nk:16===p?tk:15===p?Bb:14===p?ID:13===p?ED:12===p?yD:11===p?vD:void Rn();var p;let u;return this.Ri.runTransaction(e,s,l,h=>(u=new $b(h,this.Qr?this.Qr.next():Va.oe),"readwrite-primary"===t?this.wi(u).next(p=>!!p||this.Si(u)).next(p=>{if(!p)throw No(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Jt(Rt.FAILED_PRECONDITION,Fy);return n(u)}).next(p=>this.Di(u).next(()=>p)):this.Ki(u).next(()=>n(u)))).then(h=>(u.raiseOnCommittedEvent(),h))}Ki(e){return Ah(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Jt(Rt.FAILED_PRECONDITION,Rs)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ah(e).put("owner",t)}static D(){return Kc.D()}bi(e){const t=Ah(e);return t.get("owner").next(n=>this.vi(n)?(nn("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):pt.resolve())}Mi(e,t){const n=Date.now();return!(e<n-t||e>n&&(No(`Detected an update time that is in the future: ${e} > ${n}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;je()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const n=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return nn("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return No("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){No("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ah(r){return Uo(r,"owner")}function I0(r){return Uo(r,"clientMetadata")}function b0(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class Ow{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=s}static Wi(e,t){let n=wr(),s=wr();for(const l of t.docChanges)switch(l.type){case 0:n=n.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new Ow(e,t.fromCache,n,s)}}class IR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class bR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=je()?8:zN(Gt())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,s){const l={result:null};return this.Yi(e,t).next(u=>{l.result=u}).next(()=>{if(!l.result)return this.Zi(e,t,s,n).next(u=>{l.result=u})}).next(()=>{if(l.result)return;const u=new IR;return this.Xi(e,t,u).next(h=>{if(l.result=h,this.zi)return this.es(e,t,u,h.size)})}).next(()=>l.result)}es(e,t,n,s){return n.documentReadCount<this.ji?(qu()<=Nn.DEBUG&&nn("QueryEngine","SDK will not create cache indexes for query:",ap(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),pt.resolve()):(qu()<=Nn.DEBUG&&nn("QueryEngine","Query:",ap(t),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(qu()<=Nn.DEBUG&&nn("QueryEngine","The SDK decides to create cache indexes for query:",ap(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ds(t))):pt.resolve())}Yi(e,t){if(Zu(t))return pt.resolve(null);let n=Ds(t);return this.indexManager.getIndexType(e,n).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=Bm(t,null,"F"),n=Ds(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(l=>{const u=wr(...l);return this.Ji.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,n).next(p=>{const E=this.ts(t,h);return this.ns(t,E,u,p.readTime)?this.Yi(e,Bm(t,null,"F")):this.rs(e,E,t,p)}))})))}Zi(e,t,n,s){return Zu(t)||s.isEqual(qn.min())?pt.resolve(null):this.Ji.getDocuments(e,n).next(l=>{const u=this.ts(t,l);return this.ns(t,u,n,s)?pt.resolve(null):(qu()<=Nn.DEBUG&&nn("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ap(t)),this.rs(e,u,t,uD(s,-1)).next(h=>h))})}ts(e,t){let n=new ji(PD(e));return t.forEach((s,l)=>{$m(e,l)&&(n=n.add(l))}),n}ns(e,t,n,s){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const l="F"===e.limitType?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}Xi(e,t,n){return qu()<=Nn.DEBUG&&nn("QueryEngine","Using full collection scan to execute query:",ap(t)),this.Ji.getDocumentsMatchingQuery(e,t,La.min(),n)}rs(e,t,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(l=>(t.forEach(u=>{l=l.insert(u.key,u)}),l))}}class Mk{constructor(e,t,n,s){this.persistence=e,this.ss=t,this.serializer=s,this.os=new eo(gr),this._s=new Zc(l=>Ju(l),pr),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xw(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function f_(r,e,t,n){return new Mk(r,e,t,n)}function w0(r,e){return pc.apply(this,arguments)}function pc(){return pc=(0,C.A)(function*(r,e){const t=mn(r);return yield t.persistence.runTransaction("Handle user change","readonly",n=>{let s;return t.mutationQueue.getAllMutationBatches(n).next(l=>(s=l,t.ls(e),t.mutationQueue.getAllMutationBatches(n))).next(l=>{const u=[],h=[];let p=wr();for(const E of s){u.push(E.batchId);for(const w of E.mutations)p=p.add(w.key)}for(const E of l){h.push(E.batchId);for(const w of E.mutations)p=p.add(w.key)}return t.localDocuments.getDocuments(n,p).next(E=>({hs:E,removedBatchIds:u,addedBatchIds:h}))})})}),pc.apply(this,arguments)}function Fw(r){const e=mn(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function wR(r,e,t){let n=wr(),s=wr();return t.forEach(l=>n=n.add(l)),e.getEntries(r,n).next(l=>{let u=ia();return t.forEach((h,p)=>{const E=l.get(h);p.isFoundDocument()!==E.isFoundDocument()&&(s=s.add(h)),p.isNoDocument()&&p.version.isEqual(qn.min())?(e.removeEntry(h,p.readTime),u=u.insert(h,p)):!E.isValidDocument()||p.version.compareTo(E.version)>0||0===p.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(p),u=u.insert(h,p)):nn("LocalStore","Ignoring outdated watch update for ",h,". Current version:",E.version," Watch version:",p.version)}),{Ps:u,Is:s}})}function Nk(r,e){const t=mn(r);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function od(r,e){const t=mn(r);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return t.Ur.getTargetData(n,e).next(l=>l?(s=l,pt.resolve(s)):t.Ur.allocateTargetId(n).next(u=>(s=new dc(e,u,"TargetPurposeListen",n.currentSequenceNumber),t.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=t.os.get(n.targetId);return(null===s||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.os=t.os.insert(n.targetId,n),t._s.set(e,n.targetId)),n})}function Th(r,e,t){return gc.apply(this,arguments)}function gc(){return gc=(0,C.A)(function*(r,e,t){const n=mn(r),s=n.os.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield n.persistence.runTransaction("Release target",l,u=>n.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!ac(u))throw u;nn("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}n.os=n.os.remove(e),n._s.delete(s.target)}),gc.apply(this,arguments)}function sd(r,e,t){const n=mn(r);let s=qn.min(),l=wr();return n.persistence.runTransaction("Execute query","readwrite",u=>function(p,E,w){const x=mn(p),G=x._s.get(w);return void 0!==G?pt.resolve(x.os.get(G)):x.Ur.getTargetData(E,w)}(n,u,Ds(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(u,h.targetId).next(p=>{l=p})}).next(()=>n.ss.getDocumentsMatchingQuery(u,e,t?s:qn.min(),t?l:wr())).next(h=>(Lw(n,Zb(e),h),{documents:h,Ts:l})))}function kk(r,e){const t=mn(r),n=mn(t.Ur),s=t.os.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",l=>n.ot(l,e).next(u=>u?u.target:null))}function g_(r,e){const t=mn(r),n=t.us.get(e)||qn.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.cs.getAllFromCollectionGroup(s,e,uD(n,-1),Number.MAX_SAFE_INTEGER)).then(s=>(Lw(t,e,s),s))}function Lw(r,e,t){let n=r.us.get(e)||qn.min();t.forEach((s,l)=>{l.readTime.compareTo(n)>0&&(n=l.readTime)}),r.us.set(e,n)}function Vw(){return Vw=(0,C.A)(function*(r,e,t,n){const s=mn(r);let l=wr(),u=ia();for(const E of t){const w=e.Es(E.metadata.name);E.document&&(l=l.add(w));const x=e.ds(E);x.setReadTime(e.As(E.metadata.readTime)),u=u.insert(w,x)}const h=s.cs.newChangeBuffer({trackRemovals:!0}),p=yield od(s,(w=n,Ds(Jc(Gr.fromString(`__bundle__/docs/${w}`)))));var w;return s.persistence.runTransaction("Apply bundle documents","readwrite",E=>wR(E,h,u).next(w=>(h.apply(E),w)).next(w=>s.Ur.removeMatchingKeysForTargetId(E,p.targetId).next(()=>s.Ur.addMatchingKeys(E,l,p.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(E,w.Ps,w.Is)).next(()=>w.Ps)))}),Vw.apply(this,arguments)}function m_(r,e){return Uw.apply(this,arguments)}function Uw(){return Uw=(0,C.A)(function*(r,e,t=wr()){const n=yield od(r,Ds(Ew(e.bundledQuery))),s=mn(r);return s.persistence.runTransaction("Save named query","readwrite",l=>{const u=Bo(e.readTime);if(n.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(l,e);const h=n.withResumeToken(_o.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(h.targetId,h),s.Ur.updateTargetData(l,h).next(()=>s.Ur.removeMatchingKeysForTargetId(l,n.targetId)).next(()=>s.Ur.addMatchingKeys(l,t,n.targetId)).next(()=>s.Gr.saveNamedQuery(l,e))})}),Uw.apply(this,arguments)}function AR(r,e){return`firestore_clients_${r}_${e}`}function TR(r,e,t){let n=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function Bw(r,e){return`firestore_targets_${r}_${e}`}class A0{constructor(e,t,n,s){this.user=e,this.batchId=t,this.state=n,this.error=s}static Rs(e,t,n){const s=JSON.parse(n);let l,u="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return u&&s.error&&(u="string"==typeof s.error.message&&"string"==typeof s.error.code,u&&(l=new Jt(s.error.code,s.error.message))),u?new A0(e,t,s.state,l):(No("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class __{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Rs(e,t){const n=JSON.parse(t);let s,l="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return l&&n.error&&(l="string"==typeof n.error.message&&"string"==typeof n.error.code,l&&(s=new Jt(n.error.code,n.error.message))),l?new __(e,n.state,s):(No("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class T0{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const n=JSON.parse(t);let s="object"==typeof n&&n.activeTargetIds instanceof Array,l=nw();for(let u=0;s&&u<n.activeTargetIds.length;++u)s=Vb(n.activeTargetIds[u]),l=l.add(n.activeTargetIds[u]);return s?new T0(e,l):(No("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class $w{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new $w(t.clientId,t.onlineState):(No("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ap{constructor(){this.activeTargetIds=nw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jw{constructor(e,t,n,s,l){this.window=e,this.ui=t,this.persistenceKey=n,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new eo(gr),this.started=!1,this.bs=[];const u=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Ds=AR(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new Ap),this.Cs=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,C.A)(function*(){const t=yield e.syncEngine.Qi();for(const s of t){if(s===e.ps)continue;const l=e.getItem(AR(e.persistenceKey,s));if(l){const u=T0.Rs(s,l);u&&(e.Ss=e.Ss.insert(u.clientId,u))}}e.Ns();const n=e.storage.getItem(e.xs);if(n){const s=e.Ls(n);s&&e.Bs(s)}for(const s of e.bs)e.ws(s);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((n,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,n){this.qs(e,t,n),this.Qs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Bw(this.persistenceKey,e));if(n){const s=__.Rs(e,n);s&&(t=s.state)}}return this.Ks.fs(e),this.Ns(),t}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Bw(this.persistenceKey,e))}updateQueryState(e,t,n){this.$s(e,t,n)}handleUserChange(e,t,n){t.forEach(s=>{this.Qs(s)}),this.currentUser=e,n.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return nn("SharedClientState","READ",e,t),t}setItem(e,t){nn("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){nn("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var t=this;const n=e;if(n.storageArea===this.storage){if(nn("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void No("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,C.A)(function*(){if(t.started){if(null!==n.key)if(t.Cs.test(n.key)){if(null==n.newValue){const s=t.Gs(n.key);return t.zs(s,null)}{const s=t.js(n.key,n.newValue);if(s)return t.zs(s.clientId,s)}}else if(t.Fs.test(n.key)){if(null!==n.newValue){const s=t.Hs(n.key,n.newValue);if(s)return t.Js(s)}}else if(t.Ms.test(n.key)){if(null!==n.newValue){const s=t.Ys(n.key,n.newValue);if(s)return t.Zs(s)}}else if(n.key===t.xs){if(null!==n.newValue){const s=t.Ls(n.newValue);if(s)return t.Bs(s)}}else if(n.key===t.vs){const s=function(u){let h=Va.oe;if(null!=u)try{const p=JSON.parse(u);Un("number"==typeof p),h=p}catch(p){No("SharedClientState","Failed to read sequence number from WebStorage",p)}return h}(n.newValue);s!==Va.oe&&t.sequenceNumberHandler(s)}else if(n.key===t.Os){const s=t.Xs(n.newValue);yield Promise.all(s.map(l=>t.syncEngine.eo(l)))}}else t.bs.push(n)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,n){const s=new A0(this.currentUser,e,t,n),l=TR(this.persistenceKey,this.currentUser,e);this.setItem(l,s.Vs())}Qs(e){const t=TR(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,t,n){const s=Bw(this.persistenceKey,e),l=new __(e,t,n);this.setItem(s,l.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const n=this.Gs(e);return T0.Rs(n,t)}Hs(e,t){const n=this.Fs.exec(e),s=Number(n[1]);return A0.Rs(new Mo(void 0!==n[2]?n[2]:null),s,t)}Ys(e,t){const n=this.Ms.exec(e),s=Number(n[1]);return __.Rs(s,t)}Ls(e){return $w.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var t=this;return(0,C.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.no(e.batchId,e.state,e.error);nn("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const n=t?this.Ss.insert(e,t):this.Ss.remove(e),s=this.ks(this.Ss),l=this.ks(n),u=[],h=[];return l.forEach(p=>{s.has(p)||u.push(p)}),s.forEach(p=>{l.has(p)||h.push(p)}),this.syncEngine.io(u,h).then(()=>{this.Ss=n})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=nw();return e.forEach((n,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class SR{constructor(){this.so=new Ap,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ap,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class DR{_o(e){}shutdown(){}}class Hw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){nn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){nn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Tp=null;function S0(){return null===Tp?Tp=268435456+Math.round(2147483648*Math.random()):Tp++,"0x"+Tp.toString(16)}const Ok={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class RR{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const ms="WebChannelConnection";class PR extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+t.host,this.vo=`projects/${s}/databases/${l}`,this.Co="(default)"===this.databaseId.database?`project_id=${s}`:`project_id=${s}&database_id=${l}`}get Fo(){return!1}Mo(t,n,s,l,u){const h=S0(),p=this.xo(t,n.toUriEncodedString());nn("RestConnection",`Sending RPC '${t}' ${h}:`,p,s);const E={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(E,l,u),this.No(t,p,E,s).then(w=>(nn("RestConnection",`Received RPC '${t}' ${h}: `,w),w),w=>{throw $s("RestConnection",`RPC '${t}' ${h} failed with error: `,w,"url: ",p,"request:",s),w})}Lo(t,n,s,l,u,h){return this.Mo(t,n,s,l,u)}Oo(t,n,s){t["X-Goog-Api-Client"]="gl-js/ fire/"+Kf,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((l,u)=>t[u]=l),s&&s.headers.forEach((l,u)=>t[u]=l)}xo(t,n){return`${this.Do}/v1/${n}:${Ok[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,s){const l=S0();return new Promise((u,h)=>{const p=new Ry;p.setWithCredentials(!0),p.listenOnce(iD.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Wu.NO_ERROR:const w=p.getResponseJson();nn(ms,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(w)),u(w);break;case Wu.TIMEOUT:nn(ms,`RPC '${e}' ${l} timed out`),h(new Jt(Rt.DEADLINE_EXCEEDED,"Request time out"));break;case Wu.HTTP_ERROR:const x=p.getStatus();if(nn(ms,`RPC '${e}' ${l} failed with status:`,x,"response text:",p.getResponseText()),x>0){let G=p.getResponseJson();Array.isArray(G)&&(G=G[0]);const ce=null==G?void 0:G.error;if(ce&&ce.status&&ce.message){const De=function(lt){const ln=lt.toLowerCase().replace(/_/g,"-");return Object.values(Rt).indexOf(ln)>=0?ln:Rt.UNKNOWN}(ce.status);h(new Jt(De,ce.message))}else h(new Jt(Rt.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new Jt(Rt.UNAVAILABLE,"Connection failed."));break;default:Rn()}}finally{nn(ms,`RPC '${e}' ${l} completed.`)}});const E=JSON.stringify(s);nn(ms,`RPC '${e}' ${l} sending request:`,s),p.send(t,"POST",E,n,15)})}Bo(e,t,n){const s=S0(),l=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=BN(),h=oD(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;void 0!==E&&(p.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(p.xmlHttpFactory=new Rb({})),this.Oo(p.initMessageHeaders,t,n),p.encodeInitMessageHeaders=!0;const w=l.join("");nn(ms,`Creating RPC '${e}' stream ${s}: ${w}`,p);const x=u.createWebChannel(w,p);let G=!1,ce=!1;const De=new RR({Io:lt=>{ce?nn(ms,`Not sending because RPC '${e}' stream ${s} is closed:`,lt):(G||(nn(ms,`Opening RPC '${e}' stream ${s} transport.`),x.open(),G=!0),nn(ms,`RPC '${e}' stream ${s} sending:`,lt),x.send(lt))},To:()=>x.close()}),dt=(lt,ln,vn)=>{lt.listen(ln,cn=>{try{vn(cn)}catch(An){setTimeout(()=>{throw An},0)}})};return dt(x,bm.EventType.OPEN,()=>{ce||(nn(ms,`RPC '${e}' stream ${s} transport opened.`),De.yo())}),dt(x,bm.EventType.CLOSE,()=>{ce||(ce=!0,nn(ms,`RPC '${e}' stream ${s} transport closed`),De.So())}),dt(x,bm.EventType.ERROR,lt=>{ce||(ce=!0,$s(ms,`RPC '${e}' stream ${s} transport errored:`,lt),De.So(new Jt(Rt.UNAVAILABLE,"The operation could not be completed")))}),dt(x,bm.EventType.MESSAGE,lt=>{var ln;if(!ce){const vn=lt.data[0];Un(!!vn);const An=vn.error||(null===(ln=vn[0])||void 0===ln?void 0:ln.error);if(An){nn(ms,`RPC '${e}' stream ${s} received error:`,An);const Yn=An.status;let ar=function(Be){const st=qo[Be];if(void 0!==st)return BD(st)}(Yn),it=An.message;void 0===ar&&(ar=Rt.INTERNAL,it="Unknown error status: "+Yn+" with message "+An.message),ce=!0,De.So(new Jt(ar,it)),x.close()}else nn(ms,`RPC '${e}' stream ${s} received:`,vn),De.bo(vn)}}),dt(h,xy.STAT_EVENT,lt=>{lt.stat===Py.PROXY?nn(ms,`RPC '${e}' stream ${s} detected buffering proxy`):lt.stat===Py.NOPROXY&&nn(ms,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{De.wo()},0),De}}function zw(){return typeof window<"u"?window:null}function D0(){return typeof document<"u"?document:null}function v_(r){return new l0(r,!0)}class Gw{constructor(e,t,n=1e3,s=1.5,l=6e4){this.ui=e,this.timerId=t,this.ko=n,this.qo=s,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,t-n);s>0&&nn("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class R0{constructor(e,t,n,s,l,u,h,p){this.ui=e,this.Ho=n,this.Jo=s,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Gw(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,C.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,C.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){var n=this;return(0,C.A)(function*(){n.u_(),n.c_(),n.t_.cancel(),n.Yo++,4!==e?n.t_.reset():t&&t.code===Rt.RESOURCE_EXHAUSTED?(No(t.toString()),No("Using maximum backoff delay to prevent overloading the backend."),n.t_.Wo()):t&&t.code===Rt.UNAUTHENTICATED&&3!==n.state&&(n.authCredentialsProvider.invalidateToken(),n.appCheckCredentialsProvider.invalidateToken()),null!==n.stream&&(n.l_(),n.stream.close(),n.stream=null),n.state=e,yield n.listener.mo(t)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===t&&this.P_(n,s)},n=>{e(()=>{const s=new Jt(Rt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>1==++this.e_?this.E_(s):this.onNext(s))})}i_(){var e=this;this.state=5,this.t_.Go((0,C.A)(function*(){e.state=0,e.start()}))}I_(e){return nn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(nn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ww extends R0{constructor(e,t,n,s,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,u),this.serializer=l}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function e_(r,e){let t;if("targetChange"in e){const n="NO_CHANGE"===(E=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:Rn(),s=e.targetChange.targetIds||[],l=function(E,w){return E.useProto3Json?(Un(void 0===w||"string"==typeof w),_o.fromBase64String(w||"")):(Un(void 0===w||w instanceof Buffer||w instanceof Uint8Array),_o.fromUint8Array(w||new Uint8Array))}(r,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(E){const w=void 0===E.code?Rt.UNKNOWN:BD(E.code);return new Jt(w,E.message||"")}(u);t=new a0(n,s,l,h||null)}else if("documentChange"in e){const n=e.documentChange,s=uc(r,n.document.name),l=Bo(n.document.updateTime),u=n.document.createTime?Bo(n.document.createTime):qn.min(),h=new Ss({mapValue:{fields:n.document.fields}}),p=Wi.newFoundDocument(s,l,u,h);t=new s0(n.targetIds||[],n.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const n=e.documentDelete,s=uc(r,n.document),l=n.readTime?Bo(n.readTime):qn.min(),u=Wi.newNoDocument(s,l);t=new s0([],n.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const n=e.documentRemove,s=uc(r,n.document);t=new s0([],n.removedTargetIds||[],s,null)}else{if(!("filter"in e))return Rn();{const n=e.filter,{count:s=0,unchangedNames:l}=n,u=new pk(s,l);t=new hw(n.targetId,u)}}var E;return t}(this.serializer,e),n=function(l){if(!("targetChange"in l))return qn.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?qn.min():u.readTime?Bo(u.readTime):qn.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=Jm(this.serializer),t.addTarget=function(l,u){let h;const p=u.target;if(h=Fm(p)?{documents:mw(l,p)}:{query:n_(l,p)._t},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=yk(l,u.resumeToken);const E=Ym(l,u.expectedCount);null!==E&&(h.expectedCount=E)}else if(u.snapshotVersion.compareTo(qn.min())>0){h.readTime=gp(l,u.snapshotVersion.toTimestamp());const E=Ym(l,u.expectedCount);null!==E&&(h.expectedCount=E)}return h}(this.serializer,e);const n=function Ek(r,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Rn()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=Jm(this.serializer),t.removeTarget=e,this.a_(t)}}class xR extends R0{constructor(e,t,n,s,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,u),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Un(!!e.streamToken),this.lastStreamToken=e.streamToken,Un(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Un(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function t_(r,e){return r&&r.length>0?(Un(void 0!==e),r.map(t=>function(s,l){let u=Bo(s.updateTime?s.updateTime:l);return u.isEqual(qn.min())&&(u=Bo(l)),new aw(u,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),n=Bo(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=Jm(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>_p(this.serializer,n))};this.a_(t)}}class qw extends class{}{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Jt(Rt.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Mo(e,jD(t,n),s,l,u)).catch(l=>{throw"FirebaseError"===l.name?(l.code===Rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Jt(Rt.UNKNOWN,l.toString())})}Lo(e,t,n,s,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Lo(e,jD(t,n),s,u,h,l)).catch(u=>{throw"FirebaseError"===u.name?(u.code===Rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Jt(Rt.UNKNOWN,u.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Kw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(No(t),this.D_=!1):nn("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Fk{constructor(e,t,n,s,l){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o(h=>{n.enqueueAndForget((0,C.A)(function*(){var p;tu(u)&&(nn("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,C.A)(function*(w){const x=mn(w);x.L_.add(4),yield Sp(x),x.q_.set("Unknown"),x.L_.delete(4),yield y_(x)}),function E(w){return p.apply(this,arguments)})(u))}))}),this.q_=new Kw(n,s)}}function y_(r){return Xw.apply(this,arguments)}function Xw(){return Xw=(0,C.A)(function*(r){if(tu(r))for(const e of r.B_)yield e(!0)}),Xw.apply(this,arguments)}function Sp(r){return P0.apply(this,arguments)}function P0(){return P0=(0,C.A)(function*(r){for(const e of r.B_)yield e(!1)}),P0.apply(this,arguments)}function Dp(r,e){const t=mn(r);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Yw(t)?M0(t):E_(t).r_()&&x0(t,e))}function ad(r,e){const t=mn(r),n=E_(t);t.N_.delete(e),n.r_()&&Qw(t,e),0===t.N_.size&&(n.r_()?n.o_():tu(t)&&t.q_.set("Unknown"))}function x0(r,e){if(r.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qn.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}E_(r).A_(e)}function Qw(r,e){r.Q_.xe(e),E_(r).R_(e)}function M0(r){r.Q_=new Qm({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>r.N_.get(e)||null,tt:()=>r.datastore.serializer.databaseId}),E_(r).start(),r.q_.v_()}function Yw(r){return tu(r)&&!E_(r).n_()&&r.N_.size>0}function tu(r){return 0===mn(r).L_.size}function MR(r){r.Q_=void 0}function Jw(r){return N0.apply(this,arguments)}function N0(){return N0=(0,C.A)(function*(r){r.q_.set("Online")}),N0.apply(this,arguments)}function NR(r){return kR.apply(this,arguments)}function kR(){return kR=(0,C.A)(function*(r){r.N_.forEach((e,t)=>{x0(r,e)})}),kR.apply(this,arguments)}function O2(r,e){return k0.apply(this,arguments)}function k0(){return k0=(0,C.A)(function*(r,e){MR(r),Yw(r)?(r.q_.M_(e),M0(r)):r.q_.set("Unknown")}),k0.apply(this,arguments)}function OR(r,e,t){return O0.apply(this,arguments)}function O0(){return O0=(0,C.A)(function*(r,e,t){if(r.q_.set("Online"),e instanceof a0&&2===e.state&&e.cause)try{yield(n=(0,C.A)(function*(l,u){const h=u.cause;for(const p of u.targetIds)l.N_.has(p)&&(yield l.remoteSyncer.rejectListen(p,h),l.N_.delete(p),l.Q_.removeTarget(p))}),function s(l,u){return n.apply(this,arguments)})(r,e)}catch(n){nn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),yield Rp(r,n)}else if(e instanceof s0?r.Q_.Ke(e):e instanceof hw?r.Q_.He(e):r.Q_.We(e),!t.isEqual(qn.min()))try{const n=yield Fw(r.localStore);t.compareTo(n)>=0&&(yield function(l,u){const h=l.Q_.rt(u);return h.targetChanges.forEach((p,E)=>{if(p.resumeToken.approximateByteSize()>0){const w=l.N_.get(E);w&&l.N_.set(E,w.withResumeToken(p.resumeToken,u))}}),h.targetMismatches.forEach((p,E)=>{const w=l.N_.get(p);if(!w)return;l.N_.set(p,w.withResumeToken(_o.EMPTY_BYTE_STRING,w.snapshotVersion)),Qw(l,p);const x=new dc(w.target,p,E,w.sequenceNumber);x0(l,x)}),l.remoteSyncer.applyRemoteEvent(h)}(r,t))}catch(n){nn("RemoteStore","Failed to raise snapshot:",n),yield Rp(r,n)}var n}),O0.apply(this,arguments)}function Rp(r,e,t){return F0.apply(this,arguments)}function F0(){return F0=(0,C.A)(function*(r,e,t){if(!ac(e))throw e;r.L_.add(1),yield Sp(r),r.q_.set("Offline"),t||(t=()=>Fw(r.localStore)),r.asyncQueue.enqueueRetryable((0,C.A)(function*(){nn("RemoteStore","Retrying IndexedDB access"),yield t(),r.L_.delete(1),yield y_(r)}))}),F0.apply(this,arguments)}function Zw(r,e){return e().catch(t=>Rp(r,t,e))}function Sh(r){return L0.apply(this,arguments)}function L0(){return L0=(0,C.A)(function*(r){const e=mn(r),t=Dh(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Lk(e);)try{const s=yield Nk(e.localStore,n);if(null===s){0===e.O_.length&&t.o_();break}n=s.batchId,F2(e,s)}catch(s){yield Rp(e,s)}Vk(e)&&Uk(e)}),L0.apply(this,arguments)}function Lk(r){return tu(r)&&r.O_.length<10}function F2(r,e){r.O_.push(e);const t=Dh(r);t.r_()&&t.V_&&t.m_(e.mutations)}function Vk(r){return tu(r)&&!Dh(r).n_()&&r.O_.length>0}function Uk(r){Dh(r).start()}function L2(r){return FR.apply(this,arguments)}function FR(){return FR=(0,C.A)(function*(r){Dh(r).p_()}),FR.apply(this,arguments)}function V2(r){return LR.apply(this,arguments)}function LR(){return LR=(0,C.A)(function*(r){const e=Dh(r);for(const t of r.O_)e.m_(t.mutations)}),LR.apply(this,arguments)}function U2(r,e,t){return V0.apply(this,arguments)}function V0(){return V0=(0,C.A)(function*(r,e,t){const n=r.O_.shift(),s=ph.from(n,e,t);yield Zw(r,()=>r.remoteSyncer.applySuccessfulWrite(s)),yield Sh(r)}),V0.apply(this,arguments)}function VR(r,e){return UR.apply(this,arguments)}function UR(){return UR=(0,C.A)(function*(r,e){var t;e&&Dh(r).V_&&(yield(t=(0,C.A)(function*(s,l){if(UD(h=l.code)&&h!==Rt.ABORTED){const u=s.O_.shift();Dh(s).s_(),yield Zw(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,l)),yield Sh(s)}var h}),function n(s,l){return t.apply(this,arguments)})(r,e)),Vk(r)&&Uk(r)}),UR.apply(this,arguments)}function Bk(r,e){return BR.apply(this,arguments)}function BR(){return BR=(0,C.A)(function*(r,e){const t=mn(r);t.asyncQueue.verifyOperationInProgress(),nn("RemoteStore","RemoteStore received new credentials");const n=tu(t);t.L_.add(3),yield Sp(t),n&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield y_(t)}),BR.apply(this,arguments)}function $R(r,e){return jR.apply(this,arguments)}function jR(){return jR=(0,C.A)(function*(r,e){const t=mn(r);e?(t.L_.delete(2),yield y_(t)):e||(t.L_.add(2),yield Sp(t),t.q_.set("Unknown"))}),jR.apply(this,arguments)}function E_(r){return r.K_||(r.K_=function(t,n,s){const l=mn(t);return l.w_(),new Ww(n,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)}(r.datastore,r.asyncQueue,{Eo:Jw.bind(null,r),Ro:NR.bind(null,r),mo:O2.bind(null,r),d_:OR.bind(null,r)}),r.B_.push(function(){var e=(0,C.A)(function*(t){t?(r.K_.s_(),Yw(r)?M0(r):r.q_.set("Unknown")):(yield r.K_.stop(),MR(r))});return function(t){return e.apply(this,arguments)}}())),r.K_}function Dh(r){return r.U_||(r.U_=function(t,n,s){const l=mn(t);return l.w_(),new xR(n,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)}(r.datastore,r.asyncQueue,{Eo:()=>Promise.resolve(),Ro:L2.bind(null,r),mo:VR.bind(null,r),f_:V2.bind(null,r),g_:U2.bind(null,r)}),r.B_.push(function(){var e=(0,C.A)(function*(t){t?(r.U_.s_(),yield Sh(r)):(yield r.U_.stop(),r.O_.length>0&&(nn("RemoteStore",`Stopping write stream with ${r.O_.length} pending writes`),r.O_=[]))});return function(t){return e.apply(this,arguments)}}())),r.U_}class HR{constructor(e,t,n,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=l,this.deferred=new ko,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,s,l){const u=Date.now()+n,h=new HR(e,t,u,s,l);return h.start(n),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Jt(Rt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function I_(r,e){if(No("AsyncQueue",`${e}: ${r}`),ac(r))return new Jt(Rt.UNAVAILABLE,`${e}: ${r}`);throw r}class Pp{constructor(e){this.comparator=e?(t,n)=>e(t,n)||_n.comparator(t.key,n.key):(t,n)=>_n.comparator(t.key,n.key),this.keyedMap=jm(),this.sortedSet=new eo(this.comparator)}static emptySet(e){return new Pp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Pp)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=n.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Pp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Rh{constructor(){this.W_=new eo(_n.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Rn():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class mc{constructor(e,t,n,s,l,u,h,p,E){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=E}static fromInitialDocuments(e,t,n,s,l){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new mc(e,t,Pp.emptySet(t),u,n,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}class $k{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class B2{constructor(){this.queries=eC(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,n){const s=mn(t),l=s.queries;s.queries=eC(),l.forEach((u,h)=>{for(const p of h.j_)p.onError(n)})}(this,new Jt(Rt.ABORTED,"Firestore shutting down"))}}function eC(){return new Zc(r=>RD(r),uh)}function tC(r,e){return zR.apply(this,arguments)}function zR(){return zR=(0,C.A)(function*(r,e){const t=mn(r);let n=3;const s=e.query;let l=t.queries.get(s);l?!l.H_()&&e.J_()&&(n=2):(l=new $k,n=e.J_()?0:1);try{switch(n){case 0:l.z_=yield t.onListen(s,!0);break;case 1:l.z_=yield t.onListen(s,!1);break;case 2:yield t.onFirstRemoteStoreListen(s)}}catch(u){const h=I_(u,`Initialization of query '${ap(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,l),l.j_.push(e),e.Z_(t.onlineState),l.z_&&e.X_(l.z_)&&B0(t)}),zR.apply(this,arguments)}function nC(r,e){return rC.apply(this,arguments)}function rC(){return rC=(0,C.A)(function*(r,e){const t=mn(r),n=e.query;let s=3;const l=t.queries.get(n);if(l){const u=l.j_.indexOf(e);u>=0&&(l.j_.splice(u,1),0===l.j_.length?s=e.J_()?0:1:!l.H_()&&e.J_()&&(s=2))}switch(s){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}),rC.apply(this,arguments)}function jk(r,e){const t=mn(r);let n=!1;for(const s of e){const u=t.queries.get(s.query);if(u){for(const h of u.j_)h.X_(s)&&(n=!0);u.z_=s}}n&&B0(t)}function U0(r,e,t){const n=mn(r),s=n.queries.get(e);if(s)for(const l of s.j_)l.onError(t);n.queries.delete(e)}function B0(r){r.Y_.forEach(e=>{e.next()})}var iC,oC;(oC=iC||(iC={})).ea="default",oC.Cache="cache";class GR{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)3!==s.type&&n.push(s);e=new mc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=mc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==iC.Cache}}class WR{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}class Hk{constructor(e){this.serializer=e}Es(e){return uc(this.serializer,e)}ds(e){return e.metadata.exists?Zm(this.serializer,e.document,!1):Wi.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Bo(e)}}class zk{constructor(e,t,n){this.ca=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=sC(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const n=Gr.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,n=new Hk(this.serializer);for(const s of e)if(s.metadata.queries){const l=n.Es(s.metadata.name);for(const u of s.metadata.queries){const h=(t.get(u)||wr()).add(l);t.set(u,h)}}return t}complete(){var e=this;return(0,C.A)(function*(){const t=yield function CR(r,e,t,n){return Vw.apply(this,arguments)}(e.localStore,new Hk(e.serializer),e.documents,e.ca.id),n=e.ha(e.documents);for(const s of e.queries)yield m_(e.localStore,s,n.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:t}})()}}function sC(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class $0{constructor(e){this.key=e}}class qR{constructor(e){this.key=e}}class KR{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=wr(),this.mutatedKeys=wr(),this.Aa=PD(e),this.Ra=new Pp(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new Rh,s=t?t.Ra:this.Ra;let l=t?t.mutatedKeys:this.mutatedKeys,u=s,h=!1;const p="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,E="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((w,x)=>{const G=s.get(w),ce=$m(this.query,x)?x:null,De=!!G&&this.mutatedKeys.has(G.key),dt=!!ce&&(ce.hasLocalMutations||this.mutatedKeys.has(ce.key)&&ce.hasCommittedMutations);let lt=!1;G&&ce?G.data.isEqual(ce.data)?De!==dt&&(n.track({type:3,doc:ce}),lt=!0):this.ga(G,ce)||(n.track({type:2,doc:ce}),lt=!0,(p&&this.Aa(ce,p)>0||E&&this.Aa(ce,E)<0)&&(h=!0)):!G&&ce?(n.track({type:0,doc:ce}),lt=!0):G&&!ce&&(n.track({type:1,doc:G}),lt=!0,(p||E)&&(h=!0)),lt&&(ce?(u=u.add(ce),l=dt?l.add(w):l.delete(w)):(u=u.delete(w),l=l.delete(w)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const w="F"===this.query.limitType?u.last():u.first();u=u.delete(w.key),l=l.delete(w.key),n.track({type:1,doc:w})}return{Ra:u,fa:n,ns:h,mutatedKeys:l}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,s){const l=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const u=e.fa.G_();u.sort((w,x)=>function(ce,De){const dt=lt=>{switch(lt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Rn()}};return dt(ce)-dt(De)}(w.type,x.type)||this.Aa(w.doc,x.doc)),this.pa(n),s=null!=s&&s;const h=t&&!s?this.ya():[],p=0===this.da.size&&this.current&&!s?1:0,E=p!==this.Ea;return this.Ea=p,0!==u.length||E?{snapshot:new mc(this.query,e.Ra,l,u,e.mutatedKeys,0===p,E,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Rh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=wr(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const t=[];return e.forEach(n=>{this.da.has(n)||t.push(new qR(n))}),this.da.forEach(n=>{e.has(n)||t.push(new $0(n))}),t}ba(e){this.Ta=e.Ts,this.da=wr();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return mc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class j0{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Gk{constructor(e){this.key=e,this.va=!1}}class Wk{constructor(e,t,n,s,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Ca={},this.Fa=new Zc(h=>RD(h),uh),this.Ma=new Map,this.xa=new Set,this.Oa=new eo(_n.comparator),this.Na=new Map,this.La=new Mw,this.Ba={},this.ka=new Map,this.qa=bh.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function qk(r,e){return aC.apply(this,arguments)}function aC(){return aC=(0,C.A)(function*(r,e,t=!0){const n=Mh(r);let s;const l=n.Fa.get(e);return l?(n.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.Da()):s=yield XR(n,e,t,!0),s}),aC.apply(this,arguments)}function Kk(r,e){return lC.apply(this,arguments)}function lC(){return lC=(0,C.A)(function*(r,e){const t=Mh(r);yield XR(t,e,!0,!1)}),lC.apply(this,arguments)}function XR(r,e,t,n){return H0.apply(this,arguments)}function H0(){return H0=(0,C.A)(function*(r,e,t,n){const s=yield od(r.localStore,Ds(e)),l=s.targetId,u=t?r.sharedClientState.addLocalQueryTarget(l):"not-current";let h;return n&&(h=yield z0(r,e,l,"current"===u,s.resumeToken)),r.isPrimaryClient&&t&&Dp(r.remoteStore,s),h}),H0.apply(this,arguments)}function z0(r,e,t,n,s){return cC.apply(this,arguments)}function cC(){return cC=(0,C.A)(function*(r,e,t,n,s){r.Ka=(x,G,ce)=>{return(De=(0,C.A)(function*(lt,ln,vn,cn){let An=ln.view.ma(vn);An.ns&&(An=yield sd(lt.localStore,ln.query,!1).then(({documents:Me})=>ln.view.ma(Me,An)));const Yn=cn&&cn.targetChanges.get(ln.targetId),ar=cn&&null!=cn.targetMismatches.get(ln.targetId),it=ln.view.applyChanges(An,lt.isPrimaryClient,Yn,ar);return Eo(lt,ln.targetId,it.wa),it.snapshot}),function dt(lt,ln,vn,cn){return De.apply(this,arguments)})(r,x,G,ce);var De};const l=yield sd(r.localStore,e,!0),u=new KR(e,l.Ts),h=u.ma(l.documents),p=Xm.createSynthesizedTargetChangeForCurrentChange(t,n&&"Offline"!==r.onlineState,s),E=u.applyChanges(h,r.isPrimaryClient,p);Eo(r,t,E.wa);const w=new j0(e,t,u);return r.Fa.set(e,w),r.Ma.has(t)?r.Ma.get(t).push(e):r.Ma.set(t,[e]),E.snapshot}),cC.apply(this,arguments)}function $2(r,e,t){return G0.apply(this,arguments)}function G0(){return G0=(0,C.A)(function*(r,e,t){const n=mn(r),s=n.Fa.get(e),l=n.Ma.get(s.targetId);if(l.length>1)return n.Ma.set(s.targetId,l.filter(u=>!uh(u,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Th(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),t&&ad(n.remoteStore,s.targetId),oa(n,s.targetId)}).catch(ol))):(oa(n,s.targetId),yield Th(n.localStore,s.targetId,!0))}),G0.apply(this,arguments)}function QR(r,e){return nu.apply(this,arguments)}function nu(){return nu=(0,C.A)(function*(r,e){const t=mn(r),n=t.Fa.get(e),s=t.Ma.get(n.targetId);t.isPrimaryClient&&1===s.length&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),ad(t.remoteStore,n.targetId))}),nu.apply(this,arguments)}function uC(){return uC=(0,C.A)(function*(r,e,t){const n=T_(r);try{const s=yield function(u,h){const p=mn(u),E=uo.now(),w=h.reduce((ce,De)=>ce.add(De.key),wr());let x,G;return p.persistence.runTransaction("Locally write mutations","readwrite",ce=>{let De=ia(),dt=wr();return p.cs.getEntries(ce,w).next(lt=>{De=lt,De.forEach((ln,vn)=>{vn.isValidDocument()||(dt=dt.add(ln))})}).next(()=>p.localDocuments.getOverlayedDocuments(ce,De)).next(lt=>{x=lt;const ln=[];for(const vn of h){const cn=eu(vn,x.get(vn.key).overlayedDocument);null!=cn&&ln.push(new Rl(vn.key,cn,Wy(cn.value.mapValue),yo.exists(!0)))}return p.mutationQueue.addMutationBatch(ce,E,ln,h)}).next(lt=>{G=lt;const ln=lt.applyToLocalDocumentSet(x,dt);return p.documentOverlayCache.saveOverlays(ce,lt.batchId,ln)})}).then(()=>({batchId:G.batchId,changes:xD(x)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(u,h,p){let E=u.Ba[u.currentUser.toKey()];E||(E=new eo(gr)),E=E.insert(h,p),u.Ba[u.currentUser.toKey()]=E}(n,s.batchId,t),yield Xo(n,s.changes),yield Sh(n.remoteStore)}catch(s){const l=I_(s,"Failed to persist write");t.reject(l)}}),uC.apply(this,arguments)}function Xk(r,e){return b_.apply(this,arguments)}function b_(){return b_=(0,C.A)(function*(r,e){const t=mn(r);try{const n=yield function p_(r,e){const t=mn(r),n=e.snapshotVersion;let s=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=t.cs.newChangeBuffer({trackRemovals:!0});s=t.os;const h=[];e.targetChanges.forEach((w,x)=>{const G=s.get(x);if(!G)return;h.push(t.Ur.removeMatchingKeys(l,w.removedDocuments,x).next(()=>t.Ur.addMatchingKeys(l,w.addedDocuments,x)));let ce=G.withSequenceNumber(l.currentSequenceNumber);var dt,lt,ln;null!==e.targetMismatches.get(x)?ce=ce.withResumeToken(_o.EMPTY_BYTE_STRING,qn.min()).withLastLimboFreeSnapshotVersion(qn.min()):w.resumeToken.approximateByteSize()>0&&(ce=ce.withResumeToken(w.resumeToken,n)),s=s.insert(x,ce),lt=ce,ln=w,(0===(dt=G).resumeToken.approximateByteSize()||lt.snapshotVersion.toMicroseconds()-dt.snapshotVersion.toMicroseconds()>=3e8||ln.addedDocuments.size+ln.modifiedDocuments.size+ln.removedDocuments.size>0)&&h.push(t.Ur.updateTargetData(l,ce))});let p=ia(),E=wr();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))}),h.push(wR(l,u,e.documentUpdates).next(w=>{p=w.Ps,E=w.Is})),!n.isEqual(qn.min())){const w=t.Ur.getLastRemoteSnapshotVersion(l).next(x=>t.Ur.setTargetsMetadata(l,l.currentSequenceNumber,n));h.push(w)}return pt.waitFor(h).next(()=>u.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,E)).next(()=>p)}).then(l=>(t.os=s,l))}(t.localStore,e);e.targetChanges.forEach((s,l)=>{const u=t.Na.get(l);u&&(Un(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?u.va=!0:s.modifiedDocuments.size>0?Un(u.va):s.removedDocuments.size>0&&(Un(u.va),u.va=!1))}),yield Xo(t,n,e)}catch(n){yield ol(n)}}),b_.apply(this,arguments)}function W0(r,e,t){const n=mn(r);if(n.isPrimaryClient&&0===t||!n.isPrimaryClient&&1===t){const s=[];n.Fa.forEach((l,u)=>{const h=u.view.Z_(e);h.snapshot&&s.push(h.snapshot)}),function(u,h){const p=mn(u);p.onlineState=h;let E=!1;p.queries.forEach((w,x)=>{for(const G of x.j_)G.Z_(h)&&(E=!0)}),E&&B0(p)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}function Qk(r,e,t){return q0.apply(this,arguments)}function q0(){return q0=(0,C.A)(function*(r,e,t){const n=mn(r);n.sharedClientState.updateQueryState(e,"rejected",t);const s=n.Na.get(e),l=s&&s.key;if(l){let u=new eo(_n.comparator);u=u.insert(l,Wi.newNoDocument(l,qn.min()));const h=wr().add(l),p=new hp(qn.min(),new Map,new eo(gr),u,h);yield Xk(n,p),n.Oa=n.Oa.remove(l),n.Na.delete(e),Np(n)}else yield Th(n.localStore,e,!1).then(()=>oa(n,e,t)).catch(ol)}),q0.apply(this,arguments)}function dC(r,e){return hC.apply(this,arguments)}function hC(){return hC=(0,C.A)(function*(r,e){const t=mn(r),n=e.batch.batchId;try{const s=yield function C0(r,e){const t=mn(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),l=t.cs.newChangeBuffer({trackRemovals:!0});return function(h,p,E,w){const x=E.batch,G=x.keys();let ce=pt.resolve();return G.forEach(De=>{ce=ce.next(()=>w.getEntry(p,De)).next(dt=>{const lt=E.docVersions.get(De);Un(null!==lt),dt.version.compareTo(lt)<0&&(x.applyToRemoteDocument(dt,E),dt.isValidDocument()&&(dt.setReadTime(E.commitVersion),w.addEntry(dt)))})}),ce.next(()=>h.mutationQueue.removeMutationBatch(p,x))}(t,n,e,l).next(()=>l.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(h){let p=wr();for(let E=0;E<h.mutationResults.length;++E)h.mutationResults[E].transformResults.length>0&&(p=p.add(h.batch.mutations[E].key));return p}(e))).next(()=>t.localDocuments.getDocuments(n,s))})}(t.localStore,e);pC(t,n,null),w_(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),yield Xo(t,s)}catch(s){yield ol(s)}}),hC.apply(this,arguments)}function j2(r,e,t){return xp.apply(this,arguments)}function xp(){return xp=(0,C.A)(function*(r,e,t){const n=mn(r);try{const s=yield function(u,h){const p=mn(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let w;return p.mutationQueue.lookupMutationBatch(E,h).next(x=>(Un(null!==x),w=x.keys(),p.mutationQueue.removeMutationBatch(E,x))).next(()=>p.mutationQueue.performConsistencyCheck(E)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(E,w,h)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,w)).next(()=>p.localDocuments.getDocuments(E,w))})}(n.localStore,e);pC(n,e,t),w_(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),yield Xo(n,s)}catch(s){yield ol(s)}}),xp.apply(this,arguments)}function fC(){return fC=(0,C.A)(function*(r,e){const t=mn(r);tu(t.remoteStore)||nn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=yield function(u){const h=mn(u);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>h.mutationQueue.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===n)return void e.resolve();const s=t.ka.get(n)||[];s.push(e),t.ka.set(n,s)}catch(n){const s=I_(n,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),fC.apply(this,arguments)}function w_(r,e){(r.ka.get(e)||[]).forEach(t=>{t.resolve()}),r.ka.delete(e)}function pC(r,e,t){const n=mn(r);let s=n.Ba[n.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function oa(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Ma.get(e))r.Fa.delete(n),t&&r.Ca.$a(n,t);r.Ma.delete(e),r.isPrimaryClient&&r.La.gr(e).forEach(n=>{r.La.containsKey(n)||Mp(r,n)})}function Mp(r,e){r.xa.delete(e.path.canonicalString());const t=r.Oa.get(e);null!==t&&(ad(r.remoteStore,t),r.Oa=r.Oa.remove(e),r.Na.delete(t),Np(r))}function Eo(r,e,t){for(const n of t)n instanceof $0?(r.La.addReference(n.key,e),Ph(r,n)):n instanceof qR?(nn("SyncEngine","Document no longer in limbo: "+n.key),r.La.removeReference(n.key,e),r.La.containsKey(n.key)||Mp(r,n.key)):Rn()}function Ph(r,e){const t=e.key,n=t.path.canonicalString();r.Oa.get(t)||r.xa.has(n)||(nn("SyncEngine","New document in limbo: "+t),r.xa.add(n),Np(r))}function Np(r){for(;r.xa.size>0&&r.Oa.size<r.maxConcurrentLimboResolutions;){const e=r.xa.values().next().value;r.xa.delete(e);const t=new _n(Gr.fromString(e)),n=r.qa.next();r.Na.set(n,new Gk(t)),r.Oa=r.Oa.insert(t,n),Dp(r.remoteStore,new dc(Ds(Jc(t.path)),n,"TargetPurposeLimboResolution",Va.oe))}}function Xo(r,e,t){return ld.apply(this,arguments)}function ld(){return ld=(0,C.A)(function*(r,e,t){const n=mn(r),s=[],l=[],u=[];var h;n.Fa.isEmpty()||(n.Fa.forEach((h,p)=>{u.push(n.Ka(p,e,t).then(E=>{var w;if((E||t)&&n.isPrimaryClient){const x=E?!E.fromCache:null===(w=null==t?void 0:t.targetChanges.get(p.targetId))||void 0===w?void 0:w.current;n.sharedClientState.updateQueryState(p.targetId,x?"current":"not-current")}if(E){s.push(E);const x=Ow.Wi(p.targetId,E);l.push(x)}}))}),yield Promise.all(u),n.Ca.d_(s),yield(h=(0,C.A)(function*(E,w){const x=mn(E);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",G=>pt.forEach(w,ce=>pt.forEach(ce.$i,De=>x.persistence.referenceDelegate.addReference(G,ce.targetId,De)).next(()=>pt.forEach(ce.Ui,De=>x.persistence.referenceDelegate.removeReference(G,ce.targetId,De)))))}catch(G){if(!ac(G))throw G;nn("LocalStore","Failed to update sequence numbers: "+G)}for(const G of w){const ce=G.targetId;if(!G.fromCache){const De=x.os.get(ce),lt=De.withLastLimboFreeSnapshotVersion(De.snapshotVersion);x.os=x.os.insert(ce,lt)}}}),function p(E,w){return h.apply(this,arguments)})(n.localStore,l))}),ld.apply(this,arguments)}function Jk(r,e){return xh.apply(this,arguments)}function xh(){return xh=(0,C.A)(function*(r,e){const t=mn(r);if(!t.currentUser.isEqual(e)){nn("SyncEngine","User change. New user:",e.toKey());const n=yield w0(t.localStore,e);t.currentUser=e,(l=t).ka.forEach(h=>{h.forEach(p=>{p.reject(new Jt(Rt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),l.ka.clear(),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),yield Xo(t,n.hs)}var l}),xh.apply(this,arguments)}function gC(r,e){const t=mn(r),n=t.Na.get(e);if(n&&n.va)return wr().add(n.key);{let s=wr();const l=t.Ma.get(e);if(!l)return s;for(const u of l){const h=t.Fa.get(u);s=s.unionWith(h.view.Va)}return s}}function JR(r,e){return K0.apply(this,arguments)}function K0(){return K0=(0,C.A)(function*(r,e){const t=mn(r),n=yield sd(t.localStore,e.query,!0),s=e.view.ba(n);return t.isPrimaryClient&&Eo(t,e.targetId,s.wa),s}),K0.apply(this,arguments)}function Zk(r,e){return mC.apply(this,arguments)}function mC(){return mC=(0,C.A)(function*(r,e){const t=mn(r);return g_(t.localStore,e).then(n=>Xo(t,n))}),mC.apply(this,arguments)}function $o(r,e,t,n){return X0.apply(this,arguments)}function X0(){return X0=(0,C.A)(function*(r,e,t,n){const s=mn(r),l=yield function(h,p){const E=mn(h),w=mn(E.mutationQueue);return E.persistence.runTransaction("Lookup mutation documents","readonly",x=>w.Mn(x,p).next(G=>G?E.localDocuments.getDocuments(x,G):pt.resolve(null)))}(s.localStore,e);var p;null!==l?("pending"===t?yield Sh(s.remoteStore):"acknowledged"===t||"rejected"===t?(pC(s,e,n||null),w_(s,e),p=e,mn(mn(s.localStore).mutationQueue).On(p)):Rn(),yield Xo(s,l)):nn("SyncEngine","Cannot apply mutation batch with id: "+e)}),X0.apply(this,arguments)}function Io(){return Io=(0,C.A)(function*(r,e){const t=mn(r);if(Mh(t),T_(t),!0===e&&!0!==t.Qa){const n=t.sharedClientState.getAllActiveQueryTargets(),s=yield kp(t,n.toArray());t.Qa=!0,yield $R(t.remoteStore,!0);for(const l of s)Dp(t.remoteStore,l)}else if(!1===e&&!1!==t.Qa){const n=[];let s=Promise.resolve();t.Ma.forEach((l,u)=>{t.sharedClientState.isLocalQueryTarget(u)?n.push(u):s=s.then(()=>(oa(t,u),Th(t.localStore,u,!0))),ad(t.remoteStore,u)}),yield s,yield kp(t,n),function(u){const h=mn(u);h.Na.forEach((p,E)=>{ad(h.remoteStore,E)}),h.La.pr(),h.Na=new Map,h.Oa=new eo(_n.comparator)}(t),t.Qa=!1,yield $R(t.remoteStore,!1)}}),Io.apply(this,arguments)}function kp(r,e,t){return cd.apply(this,arguments)}function cd(){return cd=(0,C.A)(function*(r,e,t){const n=mn(r),s=[],l=[];for(const u of e){let h;const p=n.Ma.get(u);if(p&&0!==p.length){h=yield od(n.localStore,Ds(p[0]));for(const E of p){const w=n.Fa.get(E),x=yield JR(n,w);x.snapshot&&l.push(x.snapshot)}}else{const E=yield kk(n.localStore,u);h=yield od(n.localStore,E),yield z0(n,C_(E),u,!1,h.resumeToken)}s.push(h)}return n.Ca.d_(l),s}),cd.apply(this,arguments)}function C_(r){return DD(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function A_(r){return t=mn(r).localStore,mn(mn(t).persistence).Qi();var t}function Q0(r,e,t,n){return Y0.apply(this,arguments)}function Y0(){return Y0=(0,C.A)(function*(r,e,t,n){const s=mn(r);if(s.Qa)return void nn("SyncEngine","Ignoring unexpected query state notification.");const l=s.Ma.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const u=yield g_(s.localStore,Zb(l[0])),h=hp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,_o.EMPTY_BYTE_STRING);yield Xo(s,u,h);break}case"rejected":yield Th(s.localStore,e,!0),oa(s,e,n);break;default:Rn()}}),Y0.apply(this,arguments)}function ZR(r,e,t){return J0.apply(this,arguments)}function J0(){return J0=(0,C.A)(function*(r,e,t){const n=Mh(r);if(n.Qa){for(const s of e){if(n.Ma.has(s)&&n.sharedClientState.isActiveQueryTarget(s)){nn("SyncEngine","Adding an already active target "+s);continue}const l=yield kk(n.localStore,s),u=yield od(n.localStore,l);yield z0(n,C_(l),u.targetId,!1,u.resumeToken),Dp(n.remoteStore,u)}for(const s of t)n.Ma.has(s)&&(yield Th(n.localStore,s,!1).then(()=>{ad(n.remoteStore,s),oa(n,s)}).catch(ol))}}),J0.apply(this,arguments)}function Mh(r){const e=mn(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Xk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Qk.bind(null,e),e.Ca.d_=jk.bind(null,e.eventManager),e.Ca.$a=U0.bind(null,e.eventManager),e}function T_(r){const e=mn(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=j2.bind(null,e),e}class ru{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,C.A)(function*(){t.serializer=v_(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return f_(this.persistence,new bR,e.initialUser,this.serializer)}createPersistence(e){return new _0(v0.Zr,this.serializer)}createSharedClientState(e){return new SR}terminate(){var e=this;return(0,C.A)(function*(){var t,n;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(n=e.indexBackfillerScheduler)||void 0===n||n.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class _C extends ru{constructor(e,t,n){super(),this.Wa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,n=this;return(0,C.A)(function*(){yield t().call(n,e),yield n.Wa.initialize(n,e),yield T_(n.Wa.syncEngine),yield Sh(n.Wa.remoteStore),yield n.persistence.yi(()=>(n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(),n.indexBackfillerScheduler&&!n.indexBackfillerScheduler.started&&n.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return f_(this.persistence,new bR,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new uR(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new WN(t,this.persistence);return new GN(e.asyncQueue,n)}createPersistence(e){const t=b0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Ws.withCacheSize(this.cacheSizeBytes):Ws.DEFAULT;return new E0(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,zw(),D0(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new SR}}class ba extends _C{constructor(e,t){super(e,t,!1),this.Wa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,n=this;return(0,C.A)(function*(){yield t().call(n,e);const s=n.Wa.syncEngine;n.sharedClientState instanceof jw&&(n.sharedClientState.syncEngine={no:$o.bind(null,s),ro:Q0.bind(null,s),io:ZR.bind(null,s),Qi:A_.bind(null,s),eo:Zk.bind(null,s)},yield n.sharedClientState.start()),yield n.persistence.yi(function(){var l=(0,C.A)(function*(u){yield function eO(r,e){return Io.apply(this,arguments)}(n.Wa.syncEngine,u),n.gcScheduler&&(u&&!n.gcScheduler.started?n.gcScheduler.start():u||n.gcScheduler.stop()),n.indexBackfillerScheduler&&(u&&!n.indexBackfillerScheduler.started?n.indexBackfillerScheduler.start():u||n.indexBackfillerScheduler.stop())});return function(u){return l.apply(this,arguments)}}())})()}createSharedClientState(e){const t=zw();if(!jw.D(t))throw new Jt(Rt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=b0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new jw(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Op{initialize(e,t){var n=this;return(0,C.A)(function*(){n.localStore||(n.localStore=e.localStore,n.sharedClientState=e.sharedClientState,n.datastore=n.createDatastore(t),n.remoteStore=n.createRemoteStore(t),n.eventManager=n.createEventManager(t),n.syncEngine=n.createSyncEngine(t,!e.synchronizeTabs),n.sharedClientState.onlineStateHandler=s=>W0(n.syncEngine,s,1),n.remoteStore.remoteSyncer.handleCredentialChange=Jk.bind(null,n.syncEngine),yield $R(n.remoteStore,n.syncEngine.isPrimaryClient))})()}createEventManager(e){return new B2}createDatastore(e){const t=v_(e.databaseInfo.databaseId),n=new PR(e.databaseInfo);return new qw(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return n=this.localStore,s=this.datastore,l=e.asyncQueue,u=t=>W0(this.syncEngine,t,0),h=Hw.D()?new Hw:new DR,new Fk(n,s,l,u,h);var n,s,l,u,h}createSyncEngine(e,t){return function(s,l,u,h,p,E,w){const x=new Wk(s,l,u,h,p,E);return w&&(x.Qa=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,C.A)(function*(){var t,n,s;yield(s=(0,C.A)(function*(u){const h=mn(u);nn("RemoteStore","RemoteStore shutting down."),h.L_.add(5),yield Sp(h),h.k_.shutdown(),h.q_.set("Unknown")}),function l(u){return s.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate(),null===(n=e.eventManager)||void 0===n||n.terminate()})()}}function tP(r,e=10240){let t=0;return{read:()=>(0,C.A)(function*(){if(t<r.byteLength){const n={value:r.slice(t,t+e),done:!1};return t+=e,n}return{done:!0}})(),cancel:()=>(0,C.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Fp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):No("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class nP{constructor(e,t){this.ja=e,this.serializer=t,this.metadata=new ko,this.buffer=new Uint8Array,this.Ha=new TextDecoder("utf-8"),this.Ja().then(n=>{n&&n.ua()?this.metadata.resolve(n.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==n?void 0:n.aa)}`))},n=>this.metadata.reject(n))}close(){return this.ja.cancel()}getMetadata(){var e=this;return(0,C.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,C.A)(function*(){return yield e.getMetadata(),e.Ja()})()}Ja(){var e=this;return(0,C.A)(function*(){const t=yield e.Ya();if(null===t)return null;const n=e.Ha.decode(t),s=Number(n);isNaN(s)&&e.Za(`length string (${n}) is not valid number`);const l=yield e.Xa(s);return new WR(JSON.parse(l),t.length+s)})()}eu(){return this.buffer.findIndex(e=>123===e)}Ya(){var e=this;return(0,C.A)(function*(){for(;e.eu()<0&&!(yield e.tu()););if(0===e.buffer.length)return null;const t=e.eu();t<0&&e.Za("Reached the end of bundle when a length string is expected.");const n=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),n})()}Xa(e){var t=this;return(0,C.A)(function*(){for(;t.buffer.length<e;)(yield t.tu())&&t.Za("Reached the end of bundle when more is expected.");const n=t.Ha.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),n})()}Za(e){throw this.ja.cancel(),new Error(`Invalid bundle format: ${e}`)}tu(){var e=this;return(0,C.A)(function*(){const t=yield e.ja.read();if(!t.done){const n=new Uint8Array(e.buffer.length+t.value.length);n.set(e.buffer),n.set(t.value,e.buffer.length),e.buffer=n}return t.done})()}}class rP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,C.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new Jt(Rt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const n=yield(s=(0,C.A)(function*(u,h){const p=mn(u),E={documents:h.map(ce=>c0(p.serializer,ce))},w=yield p.Lo("BatchGetDocuments",p.serializer.databaseId,Gr.emptyPath(),E,h.length),x=new Map;w.forEach(ce=>{const De=function WD(r,e){return"found"in e?function(n,s){Un(!!s.found);const l=uc(n,s.found.name),u=Bo(s.found.updateTime),h=s.found.createTime?Bo(s.found.createTime):qn.min(),p=new Ss({mapValue:{fields:s.found.fields}});return Wi.newFoundDocument(l,u,h,p)}(r,e):"missing"in e?function(n,s){Un(!!s.missing),Un(!!s.readTime);const l=uc(n,s.missing),u=Bo(s.readTime);return Wi.newNoDocument(l,u)}(r,e):Rn()}(p.serializer,ce);x.set(De.key.toString(),De)});const G=[];return h.forEach(ce=>{const De=x.get(ce.toString());Un(!!De),G.push(De)}),G}),function l(u,h){return s.apply(this,arguments)})(t.datastore,e);var s;return n.forEach(s=>t.recordVersion(s)),n})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new sl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,C.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var n;e.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,s)=>{const l=_n.fromPath(s);e.mutations.push(new ed(l,e.precondition(l)))}),yield(n=(0,C.A)(function*(l,u){const h=mn(l),p={writes:u.map(E=>_p(h.serializer,E))};yield h.Mo("Commit",h.serializer.databaseId,Gr.emptyPath(),p)}),function s(l,u){return n.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Rn();t=qn.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Jt(Rt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(qn.min())?yo.exists(!1):yo.updateTime(t):yo.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(qn.min()))throw new Jt(Rt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yo.updateTime(t)}return yo.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class tO{constructor(e,t,n,s,l){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=s,this.deferred=l,this.nu=n.maxAttempts,this.t_=new Gw(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){var e=this;this.t_.Go((0,C.A)(function*(){const t=new rP(e.datastore),n=e.su(t);n&&n.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(l=>{e.ou(l)}))}).catch(s=>{e.ou(s)})}))}su(e){try{const t=this.updateFunction(e);return!Am(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ou(e){this.nu>0&&this._u(e)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(e)}_u(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!UD(t)}return!1}}class H2{constructor(e,t,n,s){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=Mo.UNAUTHENTICATED,this.clientId=Nb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,function(){var u=(0,C.A)(function*(h){nn("FirestoreClient","Received user=",h.uid),yield l.authCredentialListener(h),l.user=h});return function(h){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(n,u=>(nn("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Jt(Rt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ko;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,C.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=I_(n,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function Z0(r,e){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,C.A)(function*(r,e){r.asyncQueue.verifyOperationInProgress(),nn("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;yield e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener(function(){var s=(0,C.A)(function*(l){n.isEqual(l)||(yield w0(e.localStore,l),n=l)});return function(l){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}),Lp.apply(this,arguments)}function S_(r,e){return D_.apply(this,arguments)}function D_(){return D_=(0,C.A)(function*(r,e){r.asyncQueue.verifyOperationInProgress();const t=yield eE(r);nn("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,r.configuration),r.setCredentialChangeListener(n=>Bk(e.remoteStore,n)),r.setAppCheckTokenChangeListener((n,s)=>Bk(e.remoteStore,s)),r._onlineComponents=e}),D_.apply(this,arguments)}function kh(r){return"FirebaseError"===r.name?r.code===Rt.FAILED_PRECONDITION||r.code===Rt.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code}function eE(r){return tE.apply(this,arguments)}function tE(){return tE=(0,C.A)(function*(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){nn("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Z0(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!kh(t))throw t;$s("Error using user provided cache. Falling back to memory cache: "+t),yield Z0(r,new ru)}}else nn("FirestoreClient","Using default OfflineComponentProvider"),yield Z0(r,new ru);return r._offlineComponents}),tE.apply(this,arguments)}function iu(r){return R_.apply(this,arguments)}function R_(){return R_=(0,C.A)(function*(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(nn("FirestoreClient","Using user provided OnlineComponentProvider"),yield S_(r,r._uninitializedComponentsProvider._online)):(nn("FirestoreClient","Using default OnlineComponentProvider"),yield S_(r,new Op))),r._onlineComponents}),R_.apply(this,arguments)}function nE(r){return eE(r).then(e=>e.persistence)}function Oh(r){return eE(r).then(e=>e.localStore)}function vC(r){return iu(r).then(e=>e.remoteStore)}function rE(r){return iu(r).then(e=>e.syncEngine)}function Vp(r){return ud.apply(this,arguments)}function ud(){return ud=(0,C.A)(function*(r){const e=yield iu(r),t=e.eventManager;return t.onListen=qk.bind(null,e.syncEngine),t.onUnlisten=$2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Kk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=QR.bind(null,e.syncEngine),t}),ud.apply(this,arguments)}function sP(r,e,t={}){const n=new ko;return r.asyncQueue.enqueueAndForget((0,C.A)(function*(){return function(l,u,h,p,E){const w=new Fp({next:G=>{u.enqueueAndForget(()=>nC(l,x));const ce=G.docs.has(h);!ce&&G.fromCache?E.reject(new Jt(Rt.UNAVAILABLE,"Failed to get document because the client is offline.")):ce&&G.fromCache&&p&&"server"===p.source?E.reject(new Jt(Rt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(G)},error:G=>E.reject(G)}),x=new GR(Jc(h.path),w,{includeMetadataChanges:!0,_a:!0});return tC(l,x)}(yield Vp(r),r.asyncQueue,e,t,n)})),n.promise}function yC(r,e,t={}){const n=new ko;return r.asyncQueue.enqueueAndForget((0,C.A)(function*(){return function(l,u,h,p,E){const w=new Fp({next:G=>{u.enqueueAndForget(()=>nC(l,x)),G.fromCache&&"server"===p.source?E.reject(new Jt(Rt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(G)},error:G=>E.reject(G)}),x=new GR(h,w,{includeMetadataChanges:!0,_a:!0});return tC(l,x)}(yield Vp(r),r.asyncQueue,e,t,n)})),n.promise}function lP(r){const e={};return void 0!==r.timeoutSeconds&&(e.timeoutSeconds=r.timeoutSeconds),e}const cP=new Map;function bC(r,e,t){if(!t)throw new Jt(Rt.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function uP(r,e,t,n){if(!0===e&&!0===n)throw new Jt(Rt.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function dP(r){if(!_n.isDocumentKey(r))throw new Jt(Rt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function hP(r){if(_n.isDocumentKey(r))throw new Jt(Rt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function iE(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const e=(n=r).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof r?"a function":Rn()}function Nr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Jt(Rt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=iE(r);throw new Jt(Rt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function fP(r,e){if(e<=0)throw new Jt(Rt.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}class pP{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Jt(Rt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Jt(Rt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=lP(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(l){if(void 0!==l.timeoutSeconds){if(isNaN(l.timeoutSeconds))throw new Jt(Rt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Jt(Rt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Jt(Rt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class P_{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pP({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Jt(Rt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Jt(Rt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pP(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new aD;switch(n.type){case"firstParty":return new jN(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Jt(Rt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=cP.get(t);n&&(nn("ComponentProvider","Removing Datastore"),cP.delete(t),n.terminate())}(this),Promise.resolve()}}class Ps{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ps(this.firestore,e,this._query)}}class ro{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ro(this.firestore,e,this._key)}}class Pl extends Ps{constructor(e,t,n){super(e,t,Jc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ro(this.firestore,null,new _n(e))}withConverter(e){return new Pl(this.firestore,e,this._path)}}function wC(r,e,...t){if(r=Xt(r),bC("collection","path",e),r instanceof P_){const n=Gr.fromString(e,...t);return hP(n),new Pl(r,null,n)}{if(!(r instanceof ro||r instanceof Pl))throw new Jt(Rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Gr.fromString(e,...t));return hP(n),new Pl(r.firestore,null,n)}}function Up(r,e,...t){if(r=Xt(r),1===arguments.length&&(e=Nb.newId()),bC("doc","path",e),r instanceof P_){const n=Gr.fromString(e,...t);return dP(n),new ro(r,null,new _n(n))}{if(!(r instanceof ro||r instanceof Pl))throw new Jt(Rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Gr.fromString(e,...t));return dP(n),new ro(r.firestore,r instanceof Pl?r.converter:null,new _n(n))}}function mP(r,e){return r=Xt(r),e=Xt(e),(r instanceof ro||r instanceof Pl)&&(e instanceof ro||e instanceof Pl)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function oE(r,e){return r=Xt(r),e=Xt(e),r instanceof Ps&&e instanceof Ps&&r.firestore===e.firestore&&uh(r._query,e._query)&&r.converter===e.converter}class lO{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Gw(this,"async_queue_retry"),this.Eu=()=>{const t=D0();t&&nn("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()};const e=D0();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const t=D0();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const t=new ko;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){var e=this;return(0,C.A)(function*(){if(0!==e.uu.length){try{yield e.uu[0](),e.uu.shift(),e.t_.reset()}catch(t){if(!ac(t))throw t;nn("AsyncQueue","Operation failed with retryable error: "+t)}e.uu.length>0&&e.t_.Go(()=>e.Ru())}})()}Au(e){const t=this.au.then(()=>(this.Pu=!0,e().catch(n=>{throw this.hu=n,this.Pu=!1,No("INTERNAL UNHANDLED ERROR: ",function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),h}(n)),n}).then(n=>(this.Pu=!1,n))));return this.au=t,t}enqueueAfterDelay(e,t,n){this.du(),this.Tu.indexOf(e)>-1&&(t=0);const s=HR.createAndSchedule(this,e,t,n,l=>this.Vu(l));return this.lu.push(s),s}du(){this.hu&&Rn()}verifyOperationInProgress(){}mu(){var e=this;return(0,C.A)(function*(){let t;do{t=e.au,yield t}while(t!==e.au)})()}fu(e){for(const t of this.lu)if(t.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.lu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const t=this.lu.indexOf(e);this.lu.splice(t,1)}}function sE(r){return function(t,n){if("object"!=typeof t||null===t)return!1;const s=t;for(const l of["next","error","complete"])if(l in s&&"function"==typeof s[l])return!0;return!1}(r)}class _P{constructor(){this._progressObserver={},this._taskCompletionResolver=new ko,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ei extends P_{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new lO,this._persistenceKey=(null==s?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||aE(this),this._firestoreClient.terminate()}}function xi(r){return r._firestoreClient||aE(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function aE(r){var e,t,n;const s=r._freezeSettings(),l=(p=(null===(e=r._app)||void 0===e?void 0:e.options.appId)||"",new P2(r._databaseId,p,r._persistenceKey,(w=s).host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,lP(w.experimentalLongPollingOptions),w.useFetchStreams));var p,w;r._firestoreClient=new H2(r._authCredentials,r._appCheckCredentials,r._queue,l),null!==(t=s.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(n=s.localCache)&&void 0!==n&&n._onlineComponentProvider&&(r._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}function Fh(r,e,t){const n=new ko;return r.asyncQueue.enqueue((0,C.A)(function*(){try{yield Z0(r,t),yield S_(r,e),n.resolve()}catch(s){const l=s;if(!kh(l))throw l;$s("Error enabling indexeddb cache. Falling back to memory cache: "+l),n.reject(l)}})).then(()=>n.promise)}function CC(r){if(r._initialized||r._terminated)throw new Jt(Rt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class xl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xl(_o.fromBase64String(e))}catch(t){throw new Jt(Rt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xl(_o.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class _c{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Jt(Rt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new si(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class hd{constructor(e){this._methodName=e}}class k_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Jt(Rt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Jt(Rt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return gr(this._lat,e._lat)||gr(this._long,e._long)}}class Lh{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let l=0;l<n.length;++l)if(n[l]!==s[l])return!1;return!0}(this._values,e._values)}}const fd=/^__.*__$/;class dO{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Rl(e,this.data,this.fieldMask,t,this.fieldTransforms):new dp(e,this.data,t,this.fieldTransforms)}}class EP{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Rl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function lE(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Rn()}}class vc{constructor(e,t,n,s,l,u){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=s,void 0===l&&this.yu(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new vc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Su({path:n,Du:!1});return s.vu(e),s}Cu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Su({path:n,Du:!1});return s.yu(),s}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return pE(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(0===e.length)throw this.Mu("Document fields must not be empty");if(lE(this.wu)&&fd.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class AC{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||v_(e)}Nu(e,t,n,s=!1){return new vc({wu:e,methodName:t,Ou:n,path:si.emptyPath(),Du:!1,xu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vh(r){const e=r._freezeSettings(),t=v_(r._databaseId);return new AC(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Kp(r,e,t,n,s,l={}){const u=r.Nu(l.merge||l.mergeFields?2:0,e,t,s);hE("Data must be an object, but it was:",u,n);const h=RC(n,u);let p,E;if(l.merge)p=new As(u.fieldMask),E=u.fieldTransforms;else if(l.mergeFields){const w=[];for(const x of l.mergeFields){const G=Xp(e,x,t);if(!u.contains(G))throw new Jt(Rt.INVALID_ARGUMENT,`Field '${G}' is specified in your field mask but missing from your input data.`);PC(w,G)||w.push(G)}p=new As(w),E=u.fieldTransforms.filter(x=>p.covers(x.field))}else p=null,E=u.fieldTransforms;return new dO(new Ss(h),p,E)}class cE extends hd{_toFieldTransform(e){if(2!==e.wu)throw e.Mu(1===e.wu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cE}}function hO(r,e,t){return new vc({wu:3,Ou:e.settings.Ou,methodName:r._methodName,Du:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class TC extends hd{_toFieldTransform(e){return new up(e.path,new lp)}isEqual(e){return e instanceof TC}}class SC extends hd{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=hO(this,e,!0),n=this.Lu.map(l=>Uh(l,t)),s=new dh(n);return new up(e.path,s)}isEqual(e){return e instanceof SC&&Ot(this.Lu,e.Lu)}}class uE extends hd{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=hO(this,e,!0),n=this.Lu.map(l=>Uh(l,t)),s=new Gs(n);return new up(e.path,s)}isEqual(e){return e instanceof uE&&Ot(this.Lu,e.Lu)}}class DC extends hd{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=new cp(e.serializer,ND(e.serializer,this.Bu));return new up(e.path,t)}isEqual(e){return e instanceof DC&&this.Bu===e.Bu}}function jo(r,e,t,n){const s=r.Nu(1,e,t);hE("Data must be an object, but it was:",s,n);const l=[],u=Ss.empty();oh(n,(p,E)=>{const w=fE(e,p,t);E=Xt(E);const x=s.Cu(w);if(E instanceof cE)l.push(w);else{const G=Uh(E,x);null!=G&&(l.push(w),u.set(w,G))}});const h=new As(l);return new EP(u,h,s.fieldTransforms)}function dE(r,e,t,n,s,l){const u=r.Nu(1,e,t),h=[Xp(e,n,t)],p=[s];if(l.length%2!=0)throw new Jt(Rt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let G=0;G<l.length;G+=2)h.push(Xp(e,l[G])),p.push(l[G+1]);const E=[],w=Ss.empty();for(let G=h.length-1;G>=0;--G)if(!PC(E,h[G])){const ce=h[G];let De=p[G];De=Xt(De);const dt=u.Cu(ce);if(De instanceof cE)E.push(ce);else{const lt=Uh(De,dt);null!=lt&&(E.push(ce),w.set(ce,lt))}}const x=new As(E);return new EP(w,x,u.fieldTransforms)}function IP(r,e,t,n=!1){return Uh(t,r.Nu(n?4:3,e))}function Uh(r,e){if(bP(r=Xt(r)))return hE("Unsupported field value:",e,r),RC(r,e);if(r instanceof hd)return function(n,s){if(!lE(s.wu))throw s.Mu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Mu(`${n._methodName}() is not currently supported inside arrays`);const l=n._toFieldTransform(s);l&&s.fieldTransforms.push(l)}(r,e),null;if(void 0===r&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Du&&4!==e.wu)throw e.Mu("Nested arrays are not supported");return function(n,s){const l=[];let u=0;for(const h of n){let p=Uh(h,s.Fu(u));null==p&&(p={nullValue:"NULL_VALUE"}),l.push(p),u++}return{arrayValue:{values:l}}}(r,e)}return function(n,s){if(null===(n=Xt(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return ND(s.serializer,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const l=uo.fromDate(n);return{timestampValue:gp(s.serializer,l)}}if(n instanceof uo){const l=new uo(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:gp(s.serializer,l)}}if(n instanceof k_)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof xl)return{bytesValue:yk(s.serializer,n._byteString)};if(n instanceof ro){const l=s.databaseId,u=n.firestore._databaseId;if(!u.isEqual(l))throw s.Mu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:pw(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Lh)return h=s,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:n.toArray().map(p=>{if("number"!=typeof p)throw h.Mu("VectorValues must only contain numeric values.");return rw(h.serializer,p)})}}}}};var h;throw s.Mu(`Unsupported field value: ${iE(n)}`)}(r,e)}function RC(r,e){const t={};return ik(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oh(r,(n,s)=>{const l=Uh(s,e.bu(n));null!=l&&(t[n]=l)}),{mapValue:{fields:t}}}function bP(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof uo||r instanceof k_||r instanceof xl||r instanceof ro||r instanceof hd||r instanceof Lh)}function hE(r,e,t){if(!bP(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const n=iE(t);throw e.Mu("an object"===n?r+" a custom object":r+" "+n)}var s}function Xp(r,e,t){if((e=Xt(e))instanceof _c)return e._internalPath;if("string"==typeof e)return fE(r,e);throw pE("Field path arguments must be of type string or ",r,!1,void 0,t)}const Qp=new RegExp("[~\\*/\\[\\]]");function fE(r,e,t){if(e.search(Qp)>=0)throw pE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new _c(...e.split("."))._internalPath}catch{throw pE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function pE(r,e,t,n,s){const l=n&&!n.isEmpty(),u=void 0!==s;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(l||u)&&(p+=" (found",l&&(p+=` in field ${n}`),u&&(p+=` in document ${s}`),p+=")"),new Jt(Rt.INVALID_ARGUMENT,h+r+p)}function PC(r,e){return r.some(t=>t.isEqual(e))}class O_{constructor(e,t,n,s,l){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ro(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new wP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class wP extends O_{data(){return super.data()}}function xC(r,e){return"string"==typeof e?fE(r,e):e instanceof _c?e._internalPath:e._delegate._internalPath}function gE(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new Jt(Rt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class F_{}class Yp extends F_{}function yc(r,e,...t){let n=[];e instanceof F_&&n.push(e),n=n.concat(t),function(l){const u=l.filter(p=>p instanceof Jp).length,h=l.filter(p=>p instanceof wa).length;if(u>1||u>0&&h>0)throw new Jt(Rt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)r=s._apply(r);return r}class wa extends Yp{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new wa(e,t,n)}_apply(e){const t=this._parse(e);return kC(e._query,t),new Ps(e.firestore,e.converter,Um(e._query,t))}_parse(e){const t=Vh(e.firestore);return function(l,u,h,p,E,w,x){let G;if(E.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Jt(Rt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){NC(x,w);const ce=[];for(const De of x)ce.push(SP(p,l,De));G={arrayValue:{values:ce}}}else G=SP(p,l,x)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||NC(x,w),G=IP(h,"where",x,"in"===w||"not-in"===w);return Wr.create(E,w,G)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Jp extends F_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Jp(e,t)}_parse(e){const t=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return 1===t.length?t[0]:yi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,l){let u=s;const h=l.getFlattenedFilters();for(const p of h)kC(u,p),u=Um(u,p)}(e._query,t),new Ps(e.firestore,e.converter,Um(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ba extends Yp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ba(e,t)}_apply(e){const t=function(s,l,u){if(null!==s.startAt)throw new Jt(Rt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Jt(Rt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xm(l,u)}(e._query,this._field,this._direction);return new Ps(e.firestore,e.converter,function(s,l){const u=s.explicitOrderBy.concat([l]);return new lc(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class L_ extends Yp{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new L_(e,t,n)}_apply(e){return new Ps(e.firestore,e.converter,Bm(e._query,this._limit,this._limitType))}}class mE extends Yp{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new mE(e,t,n)}_apply(e){const t=TP(e,this.type,this._docOrFields,this._inclusive);return new Ps(e.firestore,e.converter,(l=t,new lc((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,l,s.endAt)));var s,l}}class pd extends Yp{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new pd(e,t,n)}_apply(e){const t=TP(e,this.type,this._docOrFields,this._inclusive);return new Ps(e.firestore,e.converter,(l=t,new lc((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,l)));var s,l}}function TP(r,e,t,n){if(t[0]=Xt(t[0]),t[0]instanceof O_)return function(l,u,h,p,E){if(!p)throw new Jt(Rt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const w=[];for(const x of cc(l))if(x.field.isKeyField())w.push(Qu(u,p.key));else{const G=p.data.field(x.field);if(zs(G))throw new Jt(Rt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===G){const ce=x.field.canonicalString();throw new Jt(Rt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ce}' (used as the orderBy) does not exist.`)}w.push(G)}return new Ia(w,E)}(r._query,r.firestore._databaseId,e,t[0]._document,n);{const s=Vh(r.firestore);return function(u,h,p,E,w,x){const G=u.explicitOrderBy;if(w.length>G.length)throw new Jt(Rt.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const ce=[];for(let De=0;De<w.length;De++){const dt=w[De];if(G[De].field.isKeyField()){if("string"!=typeof dt)throw new Jt(Rt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof dt}`);if(!Vm(u)&&-1!==dt.indexOf("/"))throw new Jt(Rt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${E}() must be a plain document ID, but '${dt}' contains a slash.`);const lt=u.path.child(Gr.fromString(dt));if(!_n.isDocumentKey(lt))throw new Jt(Rt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${E}() must result in a valid document path, but '${lt}' is not because it contains an odd number of segments.`);const ln=new _n(lt);ce.push(Qu(h,ln))}else{const lt=IP(p,E,dt);ce.push(lt)}}return new Ia(ce,x)}(r._query,r.firestore._databaseId,s,e,t,n)}}function SP(r,e,t){if("string"==typeof(t=Xt(t))){if(""===t)throw new Jt(Rt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vm(e)&&-1!==t.indexOf("/"))throw new Jt(Rt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(Gr.fromString(t));if(!_n.isDocumentKey(n))throw new Jt(Rt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Qu(r,new _n(n))}if(t instanceof ro)return Qu(r,t._key);throw new Jt(Rt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${iE(t)}.`)}function NC(r,e){if(!Array.isArray(r)||0===r.length)throw new Jt(Rt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kC(r,e){const t=function(s,l){for(const u of s)for(const h of u.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null}(r.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Jt(Rt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class OC{convertValue(e,t="none"){switch(Yc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return to(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ea(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Rn()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return oh(e,(s,l)=>{n[s]=this.convertValue(l,t)}),n}convertVectorValue(e){var t,n,s;const l=null===(s=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===s?void 0:s.map(u=>to(u.doubleValue));return new Lh(l)}convertGeoPoint(e){return new k_(to(e.latitude),to(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Ts(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(rp(e));default:return null}}convertTimestamp(e){const t=Qc(e);return new uo(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Gr.fromString(e);Un(yw(n));const s=new Ku(n.get(1),n.get(3)),l=new _n(n.popFirst(5));return s.isEqual(t)||No(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function U_(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}class vO extends OC{constructor(e){super(),this.firestore=e}convertBytes(e){return new xl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ro(this.firestore,null,t)}}class Bh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class su extends O_{constructor(e,t,n,s,l,u){super(e,t,n,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new B_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(xC("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class B_ extends su{data(e={}){return super.data(e)}}class gd{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Bh(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new B_(this._firestore,this._userDataWriter,n.key,n,new Bh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Jt(Rt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,l){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map(h=>({type:"added",doc:new B_(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Bh(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:u++}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>l||3!==h.type).map(h=>{const p=new B_(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Bh(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let E=-1,w=-1;return 0!==h.type&&(E=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),1!==h.type&&(u=u.add(h.doc),w=u.indexOf(h.doc.key)),{type:EO(h.type),doc:p,oldIndex:E,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function EO(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Rn()}}function _E(r,e){return r instanceof su&&e instanceof su?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(null===r._document?null===e._document:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof gd&&e instanceof gd&&r._firestore===e._firestore&&oE(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}class md extends OC{constructor(e){super(),this.firestore=e}convertBytes(e){return new xl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ro(this.firestore,null,t)}}function xP(r,e,t){r=Nr(r,ro);const n=Nr(r.firestore,Ei),s=U_(r.converter,e,t);return $_(n,[Kp(Vh(n),"setDoc",r._key,s,null!==r.converter,t).toMutation(r._key,yo.none())])}function MP(r,e,t,...n){r=Nr(r,ro);const s=Nr(r.firestore,Ei),l=Vh(s);let u;return u="string"==typeof(e=Xt(e))||e instanceof _c?dE(l,"updateDoc",r._key,e,t,n):jo(l,"updateDoc",r._key,e),$_(s,[u.toMutation(r._key,yo.exists(!0))])}function NP(r,...e){var t,n,s;r=Xt(r);let l={includeMetadataChanges:!1,source:"default"},u=0;"object"!=typeof e[u]||sE(e[u])||(l=e[u],u++);const h={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(sE(e[u])){const x=e[u];e[u]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[u+1]=null===(n=x.error)||void 0===n?void 0:n.bind(x),e[u+2]=null===(s=x.complete)||void 0===s?void 0:s.bind(x)}let p,E,w;if(r instanceof ro)E=Nr(r.firestore,Ei),w=Jc(r._key.path),p={next:x=>{e[u]&&e[u](LC(E,r,x))},error:e[u+1],complete:e[u+2]};else{const x=Nr(r,Ps);E=Nr(x.firestore,Ei),w=x._query;const G=new md(E);p={next:ce=>{e[u]&&e[u](new gd(E,G,x,ce))},error:e[u+1],complete:e[u+2]},gE(r._query)}return function(G,ce,De,dt){const lt=new Fp(dt),ln=new GR(ce,lt,De);return G.asyncQueue.enqueueAndForget((0,C.A)(function*(){return tC(yield Vp(G),ln)})),()=>{lt.za(),G.asyncQueue.enqueueAndForget((0,C.A)(function*(){return nC(yield Vp(G),ln)}))}}(xi(E),w,h,p)}function $_(r,e){return function(n,s){const l=new ko;return n.asyncQueue.enqueueAndForget((0,C.A)(function*(){return function YR(r,e,t){return uC.apply(this,arguments)}(yield rE(n),s,l)})),l.promise}(xi(r),e)}function LC(r,e,t){const n=t.docs.get(e._key),s=new md(r);return new su(r,s,e._key,n,new Bh(t.hasPendingWrites,t.fromCache),e.converter)}const yE={maxAttempts:5};class EE{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Vh(e)}set(e,t,n){this._verifyNotCommitted();const s=au(e,this._firestore),l=U_(s.converter,t,n),u=Kp(this._dataReader,"WriteBatch.set",s._key,l,null!==s.converter,n);return this._mutations.push(u.toMutation(s._key,yo.none())),this}update(e,t,n,...s){this._verifyNotCommitted();const l=au(e,this._firestore);let u;return u="string"==typeof(t=Xt(t))||t instanceof _c?dE(this._dataReader,"WriteBatch.update",l._key,t,n,s):jo(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(u.toMutation(l._key,yo.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=au(e,this._firestore);return this._mutations=this._mutations.concat(new sl(t._key,yo.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Jt(Rt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function au(r,e){if((r=Xt(r)).firestore!==e)throw new Jt(Rt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class xO extends class{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=Vh(t)}get(t){const n=au(t,this._firestore),s=new vO(this._firestore);return this._transaction.lookup([n._key]).then(l=>{if(!l||1!==l.length)return Rn();const u=l[0];if(u.isFoundDocument())return new O_(this._firestore,s,u.key,u,n.converter);if(u.isNoDocument())return new O_(this._firestore,s,n._key,null,n.converter);throw Rn()})}set(t,n,s){const l=au(t,this._firestore),u=U_(l.converter,n,s),h=Kp(this._dataReader,"Transaction.set",l._key,u,null!==l.converter,s);return this._transaction.set(l._key,h),this}update(t,n,s,...l){const u=au(t,this._firestore);let h;return h="string"==typeof(n=Xt(n))||n instanceof _c?dE(this._dataReader,"Transaction.update",u._key,n,s,l):jo(this._dataReader,"Transaction.update",u._key,n),this._transaction.update(u._key,h),this}delete(t){const n=au(t,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=au(e,this._firestore),n=new md(this._firestore);return super.get(e).then(s=>new su(this._firestore,n,t._key,s._document,new Bh(!1,!1),t.converter))}}function bE(r,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Jt("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}function $P(){if(typeof Uint8Array>"u")throw new Jt("unimplemented","Uint8Arrays are not available in this environment.")}function eg(){if(!function wD(){return typeof atob<"u"}())throw new Jt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){Kf=en,Nt(new er("firestore",(n,{instanceIdentifier:s,options:l})=>{const u=n.getProvider("app").getImmediate(),h=new Ei(new Pb(n.getProvider("auth-internal")),new w2(n.getProvider("app-check-internal")),function(E,w){if(!Object.prototype.hasOwnProperty.apply(E.options,["projectId"]))throw new Jt(Rt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ku(E.options.projectId,w)}(u,s),u);return l=Object.assign({useFetchStreams:t},l),h._setSettings(l),h},"PUBLIC").setMultipleInstances(!0)),Hr($N,"4.7.1",e),Hr($N,"4.7.1","esm2017")}();class lu{constructor(e){this._delegate=e}static fromBase64String(e){return eg(),new lu(xl.fromBase64String(e))}static fromUint8Array(e){return $P(),new lu(xl.fromUint8Array(e))}toBase64(){return eg(),this._delegate.toBase64()}toUint8Array(){return $P(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function jC(r){return function FO(r,e){if("object"!=typeof r||null===r)return!1;const t=r;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(r,["next","error","complete"])}class jP{enableIndexedDbPersistence(e,t){return function Bp(r,e){CC(r=Nr(r,Ei));const t=xi(r);if(t._uninitializedComponentsProvider)throw new Jt(Rt.FAILED_PRECONDITION,"SDK cache is already specified.");$s("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=r._freezeSettings(),s=new Op;return Fh(t,s,new _C(s,n.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function $p(r){CC(r=Nr(r,Ei));const e=xi(r);if(e._uninitializedComponentsProvider)throw new Jt(Rt.FAILED_PRECONDITION,"SDK cache is already specified.");$s("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings(),n=new Op;return Fh(e,n,new ba(n,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function jp(r){if(r._initialized&&!r._terminated)throw new Jt(Rt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ko;return r._queue.enqueueAndForgetEvenWhileRestricted((0,C.A)(function*(){try{yield(t=(0,C.A)(function*(s){if(!Kc.D())return Promise.resolve();const l=s+"main";yield Kc.delete(l)}),function n(s){return t.apply(this,arguments)})(b0(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class tg{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ku||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&$s("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){!function gP(r,e,t,n={}){var s;const l=(r=Nr(r,P_))._getSettings(),u=`${e}:${t}`;if("firestore.googleapis.com"!==l.host&&l.host!==u&&$s("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},l),{host:u,ssl:!1})),n.mockUserToken){let h,p;if("string"==typeof n.mockUserToken)h=n.mockUserToken,p=Mo.MOCK_USER;else{h=Ut(n.mockUserToken,null===(s=r._app)||void 0===s?void 0:s.options.projectId);const E=n.mockUserToken.sub||n.mockUserToken.user_id;if(!E)throw new Jt(Rt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Mo(E)}r._authCredentials=new Oy(new ky(h,p))}}(this._delegate,e,t,n)}enableNetwork(){return function zp(r){return function oP(r){return r.asyncQueue.enqueue((0,C.A)(function*(){const e=yield nE(r),t=yield vC(r);return e.setNetworkEnabled(!0),function(s){const l=mn(s);return l.L_.delete(0),y_(l)}(t)}))}(xi(r=Nr(r,Ei)))}(this._delegate)}disableNetwork(){return function Gp(r){return function nO(r){return r.asyncQueue.enqueue((0,C.A)(function*(){const e=yield nE(r),t=yield vC(r);return e.setNetworkEnabled(!1),(n=(0,C.A)(function*(l){const u=mn(l);u.L_.add(0),yield Sp(u),u.q_.set("Offline")}),function s(l){return n.apply(this,arguments)})(t);var n}))}(xi(r=Nr(r,Ei)))}(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,uP("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Hp(r){return function(t){const n=new ko;return t.asyncQueue.enqueueAndForget((0,C.A)(function*(){return function Yk(r,e){return fC.apply(this,arguments)}(yield rE(t),n)})),n.promise}(xi(r=Nr(r,Ei)))}(this._delegate)}onSnapshotsInSync(e){return function Q2(r,e){return function z2(r,e){const t=new Fp(e);return r.asyncQueue.enqueueAndForget((0,C.A)(function*(){return s=yield Vp(r),l=t,mn(s).Y_.add(l),void l.next();var s,l})),()=>{t.za(),r.asyncQueue.enqueueAndForget((0,C.A)(function*(){return s=yield Vp(r),l=t,void mn(s).Y_.delete(l);var s,l}))}}(xi(r=Nr(r,Ei)),sE(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Jt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new cu(this,wC(this._delegate,e))}catch(t){throw sa(t,"collection()","Firestore.collection()")}}doc(e){try{return new $a(this,Up(this._delegate,e))}catch(t){throw sa(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Aa(this,function dd(r,e){if(r=Nr(r,P_),bC("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Jt(Rt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ps(r,null,(n=e,new lc(Gr.emptyPath(),n)));var n}(this._delegate,e))}catch(t){throw sa(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function MO(r,e,t){r=Nr(r,Ei);const n=Object.assign(Object.assign({},yE),t);return function(l){if(l.maxAttempts<1)throw new Jt(Rt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(l,u,h){const p=new ko;return l.asyncQueue.enqueueAndForget((0,C.A)(function*(){const E=yield function iP(r){return iu(r).then(e=>e.datastore)}(l);new tO(l.asyncQueue,E,h,u,p).ru()})),p.promise}(xi(r),s=>e(new xO(r,s)),n)}(this._delegate,t=>e(new HP(this,t)))}batch(){return xi(this._delegate),new HC(new EE(this._delegate,e=>$_(this._delegate,e)))}loadBundle(e){return function Wp(r,e){const t=xi(r=Nr(r,Ei)),n=new _P;return function oO(r,e,t,n){const s=function(u,h){let p;return p="string"==typeof u?dw().encode(u):u,w=function(w,x){if(w instanceof Uint8Array)return tP(w,x);if(w instanceof ArrayBuffer)return tP(new Uint8Array(w),x);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new nP(w,h);var w}(t,v_(e));r.asyncQueue.enqueueAndForget((0,C.A)(function*(){!function eP(r,e,t){const n=mn(r);var s;(s=(0,C.A)(function*(u,h,p){try{const E=yield h.getMetadata();if(yield function(De,dt){const lt=mn(De),ln=Bo(dt.createTime);return lt.persistence.runTransaction("hasNewerBundle","readonly",vn=>lt.Gr.getBundleMetadata(vn,dt.id)).then(vn=>!!vn&&vn.createTime.compareTo(ln)>=0)}(u.localStore,E))return yield h.close(),p._completeWith({taskState:"Success",documentsLoaded:(De=E).totalDocuments,bytesLoaded:De.totalBytes,totalDocuments:De.totalDocuments,totalBytes:De.totalBytes}),Promise.resolve(new Set);p._updateProgress(sC(E));const w=new zk(E,u.localStore,h.serializer);let x=yield h.Ua();for(;x;){const ce=yield w.la(x);ce&&p._updateProgress(ce),x=yield h.Ua()}const G=yield w.complete();return yield Xo(u,G.Ia,void 0),yield function(De,dt){const lt=mn(De);return lt.persistence.runTransaction("Save bundle","readwrite",ln=>lt.Gr.saveBundleMetadata(ln,dt))}(u.localStore,E),p._completeWith(G.progress),Promise.resolve(G.Pa)}catch(E){return $s("SyncEngine",`Loading bundle failed with ${E}`),p._failWith(E),Promise.resolve(new Set)}var De}),function l(u,h,p){return s.apply(this,arguments)})(n,e,t).then(s=>{n.sharedClientState.notifyBundleLoaded(s)})}(yield rE(r),s,n)}))}(t,r._databaseId,e,n),n}(this._delegate,e)}namedQuery(e){return function vP(r,e){return function EC(r,e){return r.asyncQueue.enqueue((0,C.A)(function*(){return function(n,s){const l=mn(n);return l.persistence.runTransaction("Get named query","readonly",u=>l.Gr.getNamedQuery(u,s))}(yield Oh(r),e)}))}(xi(r=Nr(r,Ei)),e).then(t=>t?new Ps(r,null,t.query):null)}(this._delegate,e).then(t=>t?new Aa(this,t):null)}}class wE extends OC{constructor(e){super(),this.firestore=e}convertBytes(e){return new lu(new xl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return $a.forKey(t,this.firestore,null)}}class HP{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new wE(e)}get(e){const t=Hh(e);return this._delegate.get(t).then(n=>new CE(this._firestore,new su(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,t.converter)))}set(e,t,n){const s=Hh(e);return n?(bE("Transaction.set",n),this._delegate.set(s,t,n)):this._delegate.set(s,t),this}update(e,t,n,...s){const l=Hh(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,n,...s),this}delete(e){const t=Hh(e);return this._delegate.delete(t),this}}class HC{constructor(e){this._delegate=e}set(e,t,n){const s=Hh(e);return n?(bE("WriteBatch.set",n),this._delegate.set(s,t,n)):this._delegate.set(s,t),this}update(e,t,n,...s){const l=Hh(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,n,...s),this}delete(e){const t=Hh(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class _d{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new B_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new AE(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=_d.INSTANCES;let s=n.get(e);s||(s=new WeakMap,n.set(e,s));let l=s.get(t);return l||(l=new _d(e,new wE(e),t),s.set(t,l)),l}}_d.INSTANCES=new WeakMap;class $a{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wE(e)}static forPath(e,t,n){if(e.length%2!=0)throw new Jt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new $a(t,new ro(t._delegate,n,new _n(e)))}static forKey(e,t,n){return new $a(t,new ro(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new cu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new cu(this.firestore,wC(this._delegate,e))}catch(t){throw sa(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Xt(e))instanceof ro&&mP(this._delegate,e)}set(e,t){t=bE("DocumentReference.set",t);try{return t?xP(this._delegate,e,t):xP(this._delegate,e)}catch(n){throw sa(n,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?MP(this._delegate,e):MP(this._delegate,e,t,...n)}catch(s){throw sa(s,"updateDoc()","DocumentReference.update()")}}delete(){return function bO(r){return $_(Nr(r.firestore,Ei),[new sl(r._key,yo.none())])}(this._delegate)}onSnapshot(...e){const t=zC(e),n=zP(e,s=>new CE(this.firestore,new su(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return NP(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function FC(r){r=Nr(r,ro);const e=Nr(r.firestore,Ei),t=xi(e),n=new md(e);return function rO(r,e){const t=new ko;return r.asyncQueue.enqueueAndForget((0,C.A)(function*(){return(n=(0,C.A)(function*(l,u,h){try{const p=yield function(w,x){const G=mn(w);return G.persistence.runTransaction("read document","readonly",ce=>G.localDocuments.getDocument(ce,x))}(l,u);p.isFoundDocument()?h.resolve(p):p.isNoDocument()?h.resolve(null):h.reject(new Jt(Rt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const E=I_(p,`Failed to get document '${u} from cache`);h.reject(E)}}),function s(l,u,h){return n.apply(this,arguments)})(yield Oh(r),e,t);var n})),t.promise}(t,r._key).then(s=>new su(e,n,r._key,s,new Bh(null!==s&&s.hasLocalMutations,!0),r.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function DP(r){r=Nr(r,ro);const e=Nr(r.firestore,Ei);return sP(xi(e),r._key,{source:"server"}).then(t=>LC(e,r,t))}(this._delegate):function X2(r){r=Nr(r,ro);const e=Nr(r.firestore,Ei);return sP(xi(e),r._key).then(t=>LC(e,r,t))}(this._delegate),t.then(n=>new CE(this.firestore,new su(this.firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,this._delegate.converter)))}withConverter(e){return new $a(this.firestore,this._delegate.withConverter(e?_d.getInstance(this.firestore,e):null))}}function sa(r,e,t){return r.message=r.message.replace(e,t),r}function zC(r){for(const e of r)if("object"==typeof e&&!jC(e))return e;return{}}function zP(r,e){var t,n;let s;return s=jC(r[0])?r[0]:jC(r[1])?r[1]:"function"==typeof r[0]?{next:r[0],error:r[1],complete:r[2]}:{next:r[1],error:r[2],complete:r[3]},{next:l=>{s.next&&s.next(e(l))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(n=s.complete)||void 0===n?void 0:n.bind(s)}}class CE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new $a(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return _E(this._delegate,e._delegate)}}class AE extends CE{data(e){const t=this._delegate.data(e);return this._delegate._converter||function Ny(r,e){r||Rn()}(void 0!==t),t}}class Aa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wE(e)}where(e,t,n){try{return new Aa(this.firestore,yc(this._delegate,function fO(r,e,t){const n=e,s=xC("where",r);return wa._create(s,n,t)}(e,t,n)))}catch(s){throw sa(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Aa(this.firestore,yc(this._delegate,function CP(r,e="asc"){const t=e,n=xC("orderBy",r);return Ba._create(n,t)}(e,t)))}catch(n){throw sa(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Aa(this.firestore,yc(this._delegate,function pO(r){return fP("limit",r),L_._create("limit",r,"F")}(e)))}catch(t){throw sa(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Aa(this.firestore,yc(this._delegate,function gO(r){return fP("limitToLast",r),L_._create("limitToLast",r,"L")}(e)))}catch(t){throw sa(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Aa(this.firestore,yc(this._delegate,function mO(...r){return mE._create("startAt",r,!0)}(...e)))}catch(t){throw sa(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Aa(this.firestore,yc(this._delegate,function MC(...r){return mE._create("startAfter",r,!1)}(...e)))}catch(t){throw sa(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Aa(this.firestore,yc(this._delegate,function _O(...r){return pd._create("endBefore",r,!1)}(...e)))}catch(t){throw sa(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Aa(this.firestore,yc(this._delegate,function AP(...r){return pd._create("endAt",r,!0)}(...e)))}catch(t){throw sa(t,"endAt()","Query.endAt()")}}isEqual(e){return oE(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function PP(r){r=Nr(r,Ps);const e=Nr(r.firestore,Ei),t=xi(e),n=new md(e);return function aP(r,e){const t=new ko;return r.asyncQueue.enqueueAndForget((0,C.A)(function*(){return(n=(0,C.A)(function*(l,u,h){try{const p=yield sd(l,u,!0),E=new KR(u,p.Ts),w=E.ma(p.documents),x=E.applyChanges(w,!1);h.resolve(x.snapshot)}catch(p){const E=I_(p,`Failed to execute query '${u} against cache`);h.reject(E)}}),function s(l,u,h){return n.apply(this,arguments)})(yield Oh(r),e,t);var n})),t.promise}(t,r._query).then(s=>new gd(e,n,r,s))}(this._delegate):"server"===(null==e?void 0:e.source)?function IO(r){r=Nr(r,Ps);const e=Nr(r.firestore,Ei),t=xi(e),n=new md(e);return yC(t,r._query,{source:"server"}).then(s=>new gd(e,n,r,s))}(this._delegate):function RP(r){r=Nr(r,Ps);const e=Nr(r.firestore,Ei),t=xi(e),n=new md(e);return gE(r._query),yC(t,r._query).then(s=>new gd(e,n,r,s))}(this._delegate),t.then(n=>new TE(this.firestore,new gd(this.firestore._delegate,this._userDataWriter,this._delegate,n._snapshot)))}onSnapshot(...e){const t=zC(e),n=zP(e,s=>new TE(this.firestore,new gd(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return NP(this._delegate,t,n)}withConverter(e){return new Aa(this.firestore,this._delegate.withConverter(e?_d.getInstance(this.firestore,e):null))}}class nU{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new AE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class TE{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Aa(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new AE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new nU(this._firestore,t))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new AE(this._firestore,n))})}isEqual(e){return _E(this._delegate,e._delegate)}}class cu extends Aa{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new $a(this.firestore,e):null}doc(e){try{return new $a(this.firestore,void 0===e?Up(this._delegate):Up(this._delegate,e))}catch(t){throw sa(t,"doc()","CollectionReference.doc()")}}add(e){return function wO(r,e){const t=Nr(r.firestore,Ei),n=Up(r),s=U_(r.converter,e);return $_(t,[Kp(Vh(r.firestore),"addDoc",n._key,s,null!==r.converter,{}).toMutation(n._key,yo.exists(!1))]).then(()=>n)}(this._delegate,e).then(t=>new $a(this.firestore,t))}isEqual(e){return mP(this._delegate,e._delegate)}withConverter(e){return new cu(this.firestore,this._delegate.withConverter(e?_d.getInstance(this.firestore,e):null))}}function Hh(r){return Nr(r,ro)}class GC{constructor(...e){this._delegate=new _c(...e)}static documentId(){return new GC(si.keyField().canonicalString())}isEqual(e){return(e=Xt(e))instanceof _c&&this._delegate._internalPath.isEqual(e._internalPath)}}class vd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function FP(){return new TC("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new vd(e)}static delete(){const e=function OP(){return new cE("deleteField")}();return e._methodName="FieldValue.delete",new vd(e)}static arrayUnion(...e){const t=function LP(...r){return new SC("arrayUnion",r)}(...e);return t._methodName="FieldValue.arrayUnion",new vd(t)}static arrayRemove(...e){const t=function $h(...r){return new uE("arrayRemove",r)}(...e);return t._methodName="FieldValue.arrayRemove",new vd(t)}static increment(e){const t=function NO(r){return new DC("increment",r)}(e);return t._methodName="FieldValue.increment",new vd(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const G_={Firestore:tg,GeoPoint:k_,Timestamp:uo,Blob:lu,Transaction:HP,WriteBatch:HC,DocumentReference:$a,DocumentSnapshot:CE,Query:Aa,QueryDocumentSnapshot:AE,QuerySnapshot:TE,CollectionReference:cu,FieldPath:GC,FieldValue:vd,setLogLevel:function LO(r){!function sD(r){Tl.setLogLevel(r)}(r)},CACHE_SIZE_UNLIMITED:-1};!function UO(r){(function VO(r,e){r.INTERNAL.registerComponent(new er("firestore-compat",t=>{const n=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(n,s)},"PUBLIC").setServiceProps(Object.assign({},G_)))})(r,(e,t)=>new tg(e,t,new jP)),r.registerVersion("@firebase/firestore-compat","0.3.36")}(B);const GP="firebasestorage.googleapis.com",WP="storageBucket";class bo extends gn{constructor(e,t,n=0){super(zh(e),`Firebase Storage: ${t} (${zh(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,bo.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return zh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var ho=function(r){return r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment",r}(ho||{});function zh(r){return"storage/"+r}function WC(){return new bo(ho.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function SE(){return new bo(ho.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function YP(){return new bo(ho.CANCELED,"User canceled the upload/download.")}function e1(){return new bo(ho.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Gh(r){return new bo(ho.INVALID_ARGUMENT,r)}function t1(){return new bo(ho.APP_DELETED,"The Firebase app was deleted.")}function n1(r){return new bo(ho.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function W_(r,e){return new bo(ho.INVALID_FORMAT,"String does not match format '"+r+"': "+e)}function q_(r){throw new bo(ho.INTERNAL_ERROR,"Internal error: "+r)}class Ks{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Ks.makeFromUrl(e,t)}catch{return new Ks(e,"")}if(""===n.path)return n;throw function ZP(r){return new bo(ho.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}(e)}static makeFromUrl(e,t){let n=null;const s="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+s+"(/(.*))?$","i");function E(An){An.path_=decodeURIComponent(An.path)}const x=t.replace(/[.]/g,"\\."),cn=[{regex:h,indices:{bucket:1,path:3},postModify:function l(An){"/"===An.path.charAt(An.path.length-1)&&(An.path_=An.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${x}/v[A-Za-z0-9_]+/b/${s}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:E},{regex:new RegExp(`^https?://${t===GP?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${s}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:E}];for(let An=0;An<cn.length;An++){const Yn=cn[An],ar=Yn.regex.exec(e);if(ar){let Me=ar[Yn.indices.path];Me||(Me=""),n=new Ks(ar[Yn.indices.bucket],Me),Yn.postModify(n);break}}if(null==n)throw function JP(r){return new bo(ho.INVALID_URL,"Invalid URL '"+r+"'.")}(e);return n}}class WO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function DE(r){return"string"==typeof r||r instanceof String}function KC(r){return XC()&&r instanceof Blob}function XC(){return typeof Blob<"u"}function QC(r,e,t,n){if(n<e)throw Gh(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw Gh(`Invalid value for '${r}'. Expected ${t} or less.`)}function Ic(r,e,t){let n=e;return null==t&&(n=`https://${e}`),`${t}://${n}/v0${r}`}function YC(r){const e=encodeURIComponent;let t="?";for(const n in r)r.hasOwnProperty(n)&&(t=t+(e(n)+"=")+e(r[n])+"&");return t=t.slice(0,-1),t}var yd=function(r){return r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT",r}(yd||{});function JC(r,e){const t=r>=500&&r<600,s=-1!==[408,429].indexOf(r),l=-1!==e.indexOf(r);return t||s||l}class QO{constructor(e,t,n,s,l,u,h,p,E,w,x,G=!0){this.url_=e,this.method_=t,this.headers_=n,this.body_=s,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=p,this.timeout_=E,this.progressCallback_=w,this.connectionFactory_=x,this.retry=G,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((ce,De)=>{this.resolve_=ce,this.reject_=De,this.start_()})}start_(){const t=(n,s)=>{const l=this.resolve_,u=this.reject_,h=s.connection;if(s.wasSuccessCode)try{const p=this.callback_(h,h.getResponse());!function r1(r){return void 0!==r}(p)?l():l(p)}catch(p){u(p)}else if(null!==h){const p=WC();p.serverResponse=h.getErrorText(),u(this.errorCallback_?this.errorCallback_(h,p):p)}else u(s.canceled?this.appDelete_?t1():YP():SE())};this.canceled_?t(0,new ng(!1,null,!0)):this.backoffId_=function qO(r,e,t){let n=1,s=null,l=null,u=!1,h=0;function p(){return 2===h}let E=!1;function w(...lt){E||(E=!0,e.apply(null,lt))}function x(lt){s=setTimeout(()=>{s=null,r(ce,p())},lt)}function G(){l&&clearTimeout(l)}function ce(lt,...ln){if(E)return void G();if(lt)return G(),void w.call(null,lt,...ln);if(p()||u)return G(),void w.call(null,lt,...ln);let cn;n<64&&(n*=2),1===h?(h=2,cn=0):cn=1e3*(n+Math.random()),x(cn)}let De=!1;function dt(lt){De||(De=!0,G(),!E&&(null!==s?(lt||(h=2),clearTimeout(s),x(0)):lt||(h=1)))}return x(0),l=setTimeout(()=>{u=!0,dt(!0)},t),dt}((n,s)=>{if(s)return void n(!1,new ng(!1,null,!0));const l=this.connectionFactory_();this.pendingConnection_=l;const u=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const h=l.getErrorCode()===yd.NO_ERROR,p=l.getStatus();if(!h||JC(p,this.additionalRetryCodes_)&&this.retry){const w=l.getErrorCode()===yd.ABORT;return void n(!1,new ng(!1,null,w))}const E=-1!==this.successCodes_.indexOf(p);n(!0,new ng(E,l))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function KO(r){r(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ng{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function c1(...r){const e=function l1(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let n=0;n<r.length;n++)t.append(r[n]);return t.getBlob()}if(XC())return new Blob(r);throw new bo(ho.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const aa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class RE{constructor(e,t){this.data=e,this.contentType=t||null}}function PE(r,e){switch(r){case aa.RAW:return new RE(ZC(e));case aa.BASE64:case aa.BASE64URL:return new RE(eA(r,e));case aa.DATA_URL:return new RE(function h1(r){const e=new tA(r);return e.base64?eA(aa.BASE64,e.rest):function d1(r){let e;try{e=decodeURIComponent(r)}catch{throw W_(aa.DATA_URL,"Malformed data URL.")}return ZC(e)}(e.rest)}(e),function f1(r){return new tA(r).contentType}(e))}throw WC()}function ZC(r){const e=[];for(let t=0;t<r.length;t++){let n=r.charCodeAt(t);n<=127?e.push(n):n<=2047?e.push(192|n>>6,128|63&n):55296==(64512&n)?t<r.length-1&&56320==(64512&r.charCodeAt(t+1))?(n=65536|(1023&n)<<10|1023&r.charCodeAt(++t),e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n)):e.push(239,191,189):56320==(64512&n)?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|63&n)}return new Uint8Array(e)}function eA(r,e){switch(r){case aa.BASE64:{const s=-1!==e.indexOf("-"),l=-1!==e.indexOf("_");if(s||l)throw W_(r,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case aa.BASE64URL:{const s=-1!==e.indexOf("+"),l=-1!==e.indexOf("/");if(s||l)throw W_(r,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function u1(r){if(typeof atob>"u")throw function GO(r){return new bo(ho.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(r)}(e)}catch(s){throw s.message.includes("polyfill")?s:W_(r,"Invalid character found")}const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n}class tA{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw W_(aa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function p1(r,e){return r.length>=e.length&&r.substring(r.length-e.length)===e}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Ml{constructor(e,t){let n=0,s="";KC(e)?(this.data_=e,n=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(KC(this.data_)){const s=function JO(r,e,t){return r.webkitSlice?r.webkitSlice(e,t):r.mozSlice?r.mozSlice(e,t):r.slice?r.slice(e,t):null}(this.data_,e,t);return null===s?null:new Ml(s)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Ml(n,!0)}}static getBlob(...e){if(XC()){const t=e.map(n=>n instanceof Ml?n.data_:n);return new Ml(c1.apply(null,t))}{const t=e.map(u=>DE(u)?PE(aa.RAW,u).data:u.data_);let n=0;t.forEach(u=>{n+=u.byteLength});const s=new Uint8Array(n);let l=0;return t.forEach(u=>{for(let h=0;h<u.length;h++)s[l++]=u[h]}),new Ml(s,!0)}}uploadData(){return this.data_}}function xE(r){let e;try{e=JSON.parse(r)}catch{return null}return function XO(r){return"object"==typeof r&&!Array.isArray(r)}(e)?e:null}function m1(r){const e=r.lastIndexOf("/",r.length-2);return-1===e?r:r.slice(e+1)}function eF(r,e){return e}class xs{constructor(e,t,n,s){this.server=e,this.local=t||e,this.writable=!!n,this.xform=s||eF}}let ME=null;function K_(){if(ME)return ME;const r=[];r.push(new xs("bucket")),r.push(new xs("generation")),r.push(new xs("metageneration")),r.push(new xs("name","fullPath",!0));const t=new xs("name");t.xform=function e(l,u){return function tF(r){return!DE(r)||r.length<2?r:m1(r)}(u)},r.push(t);const s=new xs("size");return s.xform=function n(l,u){return void 0!==u?Number(u):u},r.push(s),r.push(new xs("timeCreated")),r.push(new xs("updated")),r.push(new xs("md5Hash",null,!0)),r.push(new xs("cacheControl",null,!0)),r.push(new xs("contentDisposition",null,!0)),r.push(new xs("contentEncoding",null,!0)),r.push(new xs("contentLanguage",null,!0)),r.push(new xs("contentType",null,!0)),r.push(new xs("metadata","customMetadata",!0)),ME=r,ME}function _1(r,e,t){const n=xE(e);return null===n?null:function rF(r,e,t){const n={type:"file"},s=t.length;for(let l=0;l<s;l++){const u=t[l];n[u.local]=u.xform(n,e[u.server])}return function nF(r,e){Object.defineProperty(r,"ref",{get:function t(){const l=new Ks(r.bucket,r.fullPath);return e._makeStorageReference(l)}})}(n,r),n}(r,n,t)}function nA(r,e){const t={},n=e.length;for(let s=0;s<n;s++){const l=e[s];l.writable&&(t[l.server]=r[l.local])}return JSON.stringify(t)}const v1="prefixes",y1="items";class Nl{constructor(e,t,n,s){this.url=e,this.method=t,this.handler=n,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function kl(r){if(!r)throw WC()}function X_(r,e){return function t(n,s){const l=_1(r,s,e);return kl(null!==l),l}}function Wh(r){return function e(t,n){let s;return s=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function QP(){return new bo(ho.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function $O(){return new bo(ho.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function XP(r){return new bo(ho.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(r.bucket):403===t.getStatus()?function jO(r){return new bo(ho.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}(r.path):n,s.status=t.getStatus(),s.serverResponse=n.serverResponse,s}}function rg(r){const e=Wh(r);return function t(n,s){let l=e(n,s);return 404===n.getStatus()&&(l=function KP(r){return new bo(ho.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}(r.path)),l.serverResponse=s.serverResponse,l}}function rA(r,e,t){const s=Ic(e.fullServerUrl(),r.host,r._protocol),u=r.maxOperationRetryTime,h=new Nl(s,"GET",X_(r,t),u);return h.errorHandler=rg(e),h}function C1(r,e,t,n,s){const l={};l.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(l.delimiter=t),n&&(l.pageToken=n),s&&(l.maxResults=s);const h=Ic(e.bucketOnlyServerUrl(),r.host,r._protocol),E=r.maxOperationRetryTime,w=new Nl(h,"GET",function b1(r,e){return function t(n,s){const l=function I1(r,e,t){const n=xE(t);return null===n?null:function E1(r,e,t){const n={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[v1])for(const s of t[v1]){const l=s.replace(/\/$/,""),u=r._makeStorageReference(new Ks(e,l));n.prefixes.push(u)}if(t[y1])for(const s of t[y1]){const l=r._makeStorageReference(new Ks(e,s.name));n.items.push(l)}return n}(r,e,n)}(r,e,s);return kl(null!==l),l}}(r,e.bucket),E);return w.urlParams=l,w.errorHandler=Wh(e),w}function aA(r,e,t){const n=Object.assign({},t);return n.fullPath=r.path,n.size=e.size(),n.contentType||(n.contentType=function sA(r,e){return r&&r.contentType||e&&e.type()||"application/octet-stream"}(null,e)),n}class Q_{constructor(e,t,n,s){this.current=e,this.total=t,this.finalized=!!n,this.metadata=s||null}}function NE(r,e){let t=null;try{t=r.getResponseHeader("X-Goog-Upload-Status")}catch{kl(!1)}return kl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const sF={STATE_CHANGED:"state_changed"},Xs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function kE(r){switch(r){case"running":case"pausing":case"canceling":return Xs.RUNNING;case"paused":return Xs.PAUSED;case"success":return Xs.SUCCESS;case"canceled":return Xs.CANCELED;default:return Xs.ERROR}}class R1{constructor(e,t,n){if(function i1(r){return"function"==typeof r}(e)||null!=t||null!=n)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=n?n:void 0;else{const l=e;this.next=l.next,this.error=l.error,this.complete=l.complete}}}function ig(r){return(...e)=>{Promise.resolve().then(()=>r(...e))}}let P1=null;class aF{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=yd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=yd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=yd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,s){if(this.sent_)throw q_("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==s)for(const l in s)s.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,s[l].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw q_("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw q_("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw q_("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw q_("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class uA extends aF{initXhr(){this.xhr_.responseType="text"}}function ja(){return P1?P1():new uA}class OE{constructor(e,t,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=K_(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(ho.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const l=this.isExponentialBackoffExpired();if(JC(s.status,[])){if(!l)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();s=SE()}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(ho.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,l)=>{this._resolve=s,this._reject=l,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,n])=>{switch(this._state){case"running":e(t,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const n=function T1(r,e,t,n,s){const l=e.bucketOnlyServerUrl(),u=aA(e,n,s),h={name:u.fullPath},p=Ic(l,r.host,r._protocol),w={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},x=nA(u,t),De=new Nl(p,"POST",function ce(dt){let lt;NE(dt);try{lt=dt.getResponseHeader("X-Goog-Upload-URL")}catch{kl(!1)}return kl(DE(lt)),lt},r.maxUploadRetryTime);return De.urlParams=h,De.headers=w,De.body=x,De.errorHandler=Wh(e),De}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(n,ja,e,t);this._request=s,s.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,n)=>{const s=function S1(r,e,t,n){const p=new Nl(t,"POST",function l(E){const w=NE(E,["active","final"]);let x=null;try{x=E.getResponseHeader("X-Goog-Upload-Size-Received")}catch{kl(!1)}x||kl(!1);const G=Number(x);return kl(!isNaN(G)),new Q_(G,n.size(),"final"===w)},r.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=Wh(e),p}(this._ref.storage,this._ref._location,e,this._blob),l=this._ref.storage._makeRequest(s,ja,t,n);this._request=l,l.getPromise().then(u=>{this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Q_(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((s,l)=>{let u;try{u=function D1(r,e,t,n,s,l,u,h){const p=new Q_(0,0);if(u?(p.current=u.current,p.total=u.total):(p.current=0,p.total=n.size()),n.size()!==p.total)throw function zO(){return new bo(ho.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const E=p.total-p.current;let w=E;s>0&&(w=Math.min(w,s));const x=p.current;let ce="";ce=0===w?"finalize":E===w?"upload, finalize":"upload";const De={"X-Goog-Upload-Command":ce,"X-Goog-Upload-Offset":`${p.current}`},dt=n.slice(x,x+w);if(null===dt)throw e1();const cn=new Nl(t,"POST",function lt(An,Yn){const ar=NE(An,["active","final"]),it=p.current+w,Me=n.size();let Be;return Be="final"===ar?X_(e,l)(An,Yn):null,new Q_(it,Me,"final"===ar,Be)},e.maxUploadRetryTime);return cn.headers=De,cn.body=dt.uploadData(),cn.progressCallback=h||null,cn.errorHandler=Wh(r),cn}(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const h=this._ref.storage._makeRequest(u,ja,s,l,!1);this._request=h,h.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const n=rA(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(n,ja,e,t);this._request=s,s.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const n=function lA(r,e,t,n,s){const l=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},p=function h(){let cn="";for(let An=0;An<2;An++)cn+=Math.random().toString().slice(2);return cn}();u["Content-Type"]="multipart/related; boundary="+p;const E=aA(e,n,s),w=nA(E,t),ce=Ml.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+w+"\r\n--"+p+"\r\nContent-Type: "+E.contentType+"\r\n\r\n",n,"\r\n--"+p+"--");if(null===ce)throw e1();const De={name:E.fullPath},dt=Ic(l,r.host,r._protocol),ln=r.maxUploadRetryTime,vn=new Nl(dt,"POST",X_(r,t),ln);return vn.urlParams=De,vn.headers=u,vn.body=ce.uploadData(),vn.errorHandler=Wh(e),vn}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(n,ja,e,t);this._request=s,s.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=YP(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=kE(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,s){const l=new R1(t||void 0,n||void 0,s||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(kE(this._state)){case Xs.SUCCESS:ig(this._resolve.bind(null,this.snapshot))();break;case Xs.CANCELED:case Xs.ERROR:ig(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(kE(this._state)){case Xs.RUNNING:case Xs.PAUSED:e.next&&ig(e.next.bind(e,this.snapshot))();break;case Xs.SUCCESS:e.complete&&ig(e.complete.bind(e))();break;default:e.error&&ig(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class qh{constructor(e,t){this._service=e,this._location=t instanceof Ks?t:Ks.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new qh(e,t)}get root(){const e=new Ks(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return m1(this._location.path)}get storage(){return this._service}get parent(){const e=function g1(r){if(0===r.length)return null;const e=r.lastIndexOf("/");return-1===e?"":r.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ks(this._location.bucket,e);return new qh(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw n1(e)}}function fA(r,e,t){return og.apply(this,arguments)}function og(){return og=(0,C.A)(function*(r,e,t){const s=yield fF(r,{pageToken:t});e.prefixes.push(...s.prefixes),e.items.push(...s.items),null!=s.nextPageToken&&(yield fA(r,e,s.nextPageToken))}),og.apply(this,arguments)}function fF(r,e){null!=e&&"number"==typeof e.maxResults&&QC("options.maxResults",1,1e3,e.maxResults);const t=e||{},n=C1(r.storage,r._location,"/",t.pageToken,t.maxResults);return r.storage.makeRequestWithTokens(n,ja)}function gF(r){r._throwIfRoot("getDownloadURL");const e=function oF(r,e,t){const s=Ic(e.fullServerUrl(),r.host,r._protocol),u=r.maxOperationRetryTime,h=new Nl(s,"GET",function w1(r,e){return function t(n,s){const l=_1(r,s,e);return kl(null!==l),function iF(r,e,t,n){const s=xE(e);if(null===s||!DE(s.downloadTokens))return null;const l=s.downloadTokens;if(0===l.length)return null;const u=encodeURIComponent;return l.split(",").map(E=>{const x=r.fullPath;return Ic("/b/"+u(r.bucket)+"/o/"+u(x),t,n)+YC({alt:"media",token:E})})[0]}(l,s,r.host,r._protocol)}}(r,t),u);return h.errorHandler=rg(e),h}(r.storage,r._location,K_());return r.storage.makeRequestWithTokens(e,ja).then(t=>{if(null===t)throw function qC(){return new bo(ho.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function k1(r,e){const t=function ZO(r,e){const t=e.split("/").filter(n=>n.length>0).join("/");return 0===r.length?t:r+"/"+t}(r._location.path,e),n=new Ks(r._location.bucket,t);return new qh(r.storage,n)}function O1(r,e){if(r instanceof pA){const t=r;if(null==t._bucket)throw function HO(){return new bo(ho.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+WP+"' property when initializing the app?")}();const n=new qh(t,t._bucket);return null!=e?O1(n,e):n}return void 0!==e?k1(r,e):r}function yF(r,e){if(e&&function _F(r){return/^[A-Za-z]+:\/\//.test(r)}(e)){if(r instanceof pA)return function vF(r,e){return new qh(r,e)}(r,e);throw Gh("To use ref(service, url), the first argument must be a Storage instance.")}return O1(r,e)}function F1(r,e){const t=null==e?void 0:e[WP];return null==t?null:Ks.makeFromBucketSpec(t,r)}class pA{constructor(e,t,n,s,l){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=s,this._firebaseVersion=l,this._bucket=null,this._host=GP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?Ks.makeFromBucketSpec(s,this._host):F1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ks.makeFromBucketSpec(this._url,e):F1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){QC("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){QC("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,C.A)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const n=yield t.getToken();if(null!==n)return n.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,C.A)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new qh(this,e)}_makeRequest(e,t,n,s,l=!0){if(this._deleted)return new WO(t1());{const u=function YO(r,e,t,n,s,l,u=!0){const h=YC(r.urlParams),p=r.url+h,E=Object.assign({},r.headers);return function iU(r,e){e&&(r["X-Firebase-GMPID"]=e)}(E,e),function o1(r,e){null!==e&&e.length>0&&(r.Authorization="Firebase "+e)}(E,t),function s1(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(E,l),function a1(r,e){null!==e&&(r["X-Firebase-AppCheck"]=e)}(E,n),new QO(p,r.method,E,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,s,u)}(e,this._appId,n,s,t,this._firebaseVersion,l);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var n=this;return(0,C.A)(function*(){const[s,l]=yield Promise.all([n._getAuthToken(),n._getAppCheckToken()]);return n._makeRequest(e,t,s,l).getPromise()})()}}const sg="@firebase/storage";function U1(r,e){return yF(r=Xt(r),e)}function la(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),s=r.getProvider("app-check-internal");return new pA(t,n,s,e,en)}!function ag(){Nt(new er("storage",la,"PUBLIC").setMultipleInstances(!0)),Hr(sg,"0.13.1",""),Hr(sg,"0.13.1","esm2017")}();class VE{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class $1{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new VE(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(n=>{if(e)return e(new VE(n,this,this._ref))},t)}on(e,t,n,s){let l;return t&&(l="function"==typeof t?u=>t(new VE(u,this,this._ref)):{next:t.next?u=>t.next(new VE(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,l,n||void 0,s||void 0)}}class DF{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Ed(e,this._service))}get items(){return this._delegate.items.map(e=>new Ed(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ed{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function SF(r,e){return k1(r,e)}(this._delegate,e);return new Ed(t,this.storage)}get root(){return new Ed(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Ed(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new $1(function L1(r,e,t){return function dF(r,e,t){return r._throwIfRoot("uploadBytesResumable"),new OE(r,new Ml(e),t)}(r=Xt(r),e,t)}(this._delegate,e,t),this)}putString(e,t=aa.RAW,n){this._throwIfRoot("putString");const s=PE(t,e),l=Object.assign({},n);return null==l.contentType&&null!=s.contentType&&(l.contentType=s.contentType),new $1(new OE(this._delegate,new Ml(s.data,!0),l),this)}listAll(){return function V1(r){return function FE(r){const e={prefixes:[],items:[]};return fA(r,e).then(()=>e)}(r=Xt(r))}(this._delegate).then(e=>new DF(e,this.storage))}list(e){return function sU(r,e){return fF(r=Xt(r),e)}(this._delegate,e||void 0).then(t=>new DF(t,this.storage))}getMetadata(){return function CF(r){return function pF(r){r._throwIfRoot("getMetadata");const e=rA(r.storage,r._location,K_());return r.storage.makeRequestWithTokens(e,ja)}(r=Xt(r))}(this._delegate)}updateMetadata(e){return function oU(r,e){return function N1(r,e){r._throwIfRoot("updateMetadata");const t=function iA(r,e,t,n){const l=Ic(e.fullServerUrl(),r.host,r._protocol),h=nA(t,n),E=r.maxOperationRetryTime,w=new Nl(l,"PATCH",X_(r,n),E);return w.headers={"Content-Type":"application/json; charset=utf-8"},w.body=h,w.errorHandler=rg(e),w}(r.storage,r._location,e,K_());return r.storage.makeRequestWithTokens(t,ja)}(r=Xt(r),e)}(this._delegate,e)}getDownloadURL(){return function AF(r){return gF(r=Xt(r))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function TF(r){return function mF(r){r._throwIfRoot("deleteObject");const e=function oA(r,e){const n=Ic(e.fullServerUrl(),r.host,r._protocol),h=new Nl(n,"DELETE",function u(p,E){},r.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=rg(e),h}(r.storage,r._location);return r.storage.makeRequestWithTokens(e,ja)}(r=Xt(r))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw n1(e)}}class lg{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(j1(e))throw Gh("ref() expected a child path but got a URL, use refFromURL instead.");return new Ed(U1(this._delegate,e),this)}refFromURL(e){if(!j1(e))throw Gh("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ks.makeFromUrl(e,this._delegate.host)}catch{throw Gh("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ed(U1(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,n={}){!function B1(r,e,t,n={}){!function EF(r,e,t,n={}){r.host=`${e}:${t}`,r._protocol="http";const{mockUserToken:s}=n;s&&(r._overrideAuthToken="string"==typeof s?s:Ut(s,r.app.options.projectId))}(r,e,t,n)}(this._delegate,e,t,n)}}function j1(r){return/^[A-Za-z]+:\/\//.test(r)}function PF(r,{instanceIdentifier:e}){const t=r.getProvider("app-compat").getImmediate(),n=r.getProvider("storage").getImmediate({identifier:e});return new lg(t,n)}!function xF(r){const e={TaskState:Xs,TaskEvent:sF,StringFormat:aa,Storage:lg,Reference:Ed};r.INTERNAL.registerComponent(new er("storage-compat",PF,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),r.registerVersion("@firebase/storage-compat","0.3.11")}(B);const z1="@firebase/database";let BE="";function vA(r){BE=r}class $E{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Kt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Jn(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class yA{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return pn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const MF=function(r){try{if(typeof window<"u"&&typeof window[r]<"u"){const e=window[r];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new $E(e)}}catch{}return new yA},Id=MF("localStorage"),EA=MF("sessionStorage"),Kh=new gi("@firebase/database"),Xh=function(){let r=1;return function(){return r++}}(),G1=function(r){const e=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);if(s>=55296&&s<=56319){const l=s-55296;n++,ue(n<r.length,"Surrogate pair missing trail surrogate."),s=65536+(l<<10)+(r.charCodeAt(n)-56320)}s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=63&s|128):s<65536?(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=63&s|128):(e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=63&s|128)}return e}(r),t=new so;t.update(e);const n=t.digest();return Ve.encodeByteArray(n)},cg=function(...r){let e="";for(let t=0;t<r.length;t++){const n=r[t];Array.isArray(n)||n&&"object"==typeof n&&"number"==typeof n.length?e+=cg.apply(null,n):e+="object"==typeof n?Kt(n):n,e+=" "}return e};let uu=null,NF=!0;const W1=function(r,e){ue(!e||!0===r||!1===r,"Can't turn on custom loggers persistently."),!0===r?(Kh.logLevel=Nn.VERBOSE,uu=Kh.log.bind(Kh),e&&EA.set("logging_enabled",!0)):"function"==typeof r?uu=r:(uu=null,EA.remove("logging_enabled"))},_s=function(...r){if(!0===NF&&(NF=!1,null===uu&&!0===EA.get("logging_enabled")&&W1(!0)),uu){const e=cg.apply(null,r);uu(e)}},Y_=function(r){return function(...e){_s(r,...e)}},jE=function(...r){const e="FIREBASE INTERNAL ERROR: "+cg(...r);Kh.error(e)},Ol=function(...r){const e=`FIREBASE FATAL ERROR: ${cg(...r)}`;throw Kh.error(e),new Error(e)},Qs=function(...r){const e="FIREBASE WARNING: "+cg(...r);Kh.warn(e)},J_=function(r){return"number"==typeof r&&(r!=r||r===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY)},bd="[MIN_NAME]",bc="[MAX_NAME]",Qh=function(r,e){if(r===e)return 0;if(r===bd||e===bc)return-1;if(e===bd||r===bc)return 1;{const t=OF(r),n=OF(e);return null!==t?null!==n?t-n==0?r.length-e.length:t-n:-1:null!==n?1:r<e?-1:1}},K1=function(r,e){return r===e?0:r<e?-1:1},ug=function(r,e){if(e&&r in e)return e[r];throw new Error("Missing required key ("+r+") in object: "+Kt(e))},HE=function(r){if("object"!=typeof r||null===r)return Kt(r);const e=[];for(const n in r)e.push(n);e.sort();let t="{";for(let n=0;n<e.length;n++)0!==n&&(t+=","),t+=Kt(e[n]),t+=":",t+=HE(r[e[n]]);return t+="}",t},IA=function(r,e){const t=r.length;if(t<=e)return[r];const n=[];for(let s=0;s<t;s+=e)n.push(r.substring(s,s+e>t?t:s+e));return n};function vs(r,e){for(const t in r)r.hasOwnProperty(t)&&e(t,r[t])}const X1=function(r){ue(!J_(r),"Invalid JSON number");const n=1023;let s,l,u,h,p;0===r?(l=0,u=0,s=1/r==-1/0?1:0):(s=r<0,(r=Math.abs(r))>=Math.pow(2,1-n)?(h=Math.min(Math.floor(Math.log(r)/Math.LN2),n),l=h+n,u=Math.round(r*Math.pow(2,52-h)-Math.pow(2,52))):(l=0,u=Math.round(r/Math.pow(2,-1074))));const E=[];for(p=52;p;p-=1)E.push(u%2?1:0),u=Math.floor(u/2);for(p=11;p;p-=1)E.push(l%2?1:0),l=Math.floor(l/2);E.push(s?1:0),E.reverse();const w=E.join("");let x="";for(p=0;p<64;p+=8){let G=parseInt(w.substr(p,8),2).toString(16);1===G.length&&(G="0"+G),x+=G}return x.toLowerCase()},dU=new RegExp("^-?(0*)\\d{1,10}$"),OF=function(r){if(dU.test(r)){const e=Number(r);if(e>=-2147483648&&e<=2147483647)return e}return null},Z_=function(r){try{r()}catch(e){setTimeout(()=>{throw Qs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},zE=function(r,e){const t=setTimeout(r,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Y1{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(n=>this.appCheck=n)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){Qs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class gU{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(_s("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Qs(e)}}let GE=(()=>{class r{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return r.OWNER="owner",r})();const ex=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,rx="websocket",ix="long_polling";class WE{constructor(e,t,n,s,l=!1,u="",h=!1,p=!1){this.secure=t,this.namespace=n,this.webSocketOnly=s,this.nodeAdmin=l,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Id.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Id.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function ox(r,e,t){let n;if(ue("string"==typeof e,"typeof type must == string"),ue("object"==typeof t,"typeof params must == object"),e===rx)n=(r.secure?"wss://":"ws://")+r.internalHost+"/.ws?";else{if(e!==ix)throw new Error("Unknown connection type: "+e);n=(r.secure?"https://":"http://")+r.internalHost+"/.lp?"}(function FF(r){return r.host!==r.internalHost||r.isCustomHost()||r.includeNamespaceInQueryParams})(r)&&(t.ns=r.namespace);const s=[];return vs(t,(l,u)=>{s.push(l+"="+u)}),n+s.join("&")}class LF{constructor(){this.counters_={}}incrementCounter(e,t=1){pn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return function tt(r){return nt(void 0,r)}(this.counters_)}}const wA={},CA={};function AA(r){const e=r.toString();return wA[e]||(wA[e]=new LF),wA[e]}class UF{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<n.length;++s)n[s]&&Z_(()=>{this.onMessage_(n[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class du{constructor(e,t,n,s,l,u,h){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=s,this.authToken=l,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Y_(e),this.stats_=AA(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),ox(t,ix,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new UF(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(r){if("complete"===document.readyState)r();else{let e=!1;const t=function(){document.body?e||(e=!0,r()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new DA((...l)=>{const[u,h,p,E,w]=l;if(this.incrementIncomingBytes_(l),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=h,this.password=p;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...l)=>{const[u,h]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const n={start:"t"};n.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(n.cb=this.scriptTagHolder.uniqueCallbackIdentifier),n.v="5",this.transportSessionId&&(n.s=this.transportSessionId),this.lastSessionId&&(n.ls=this.lastSessionId),this.applicationId&&(n.p=this.applicationId),this.appCheckToken&&(n.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&ex.test(location.hostname)&&(n.r="f");const s=this.urlFn(n);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){du.forceAllow_=!0}static forceDisallow(){du.forceDisallow_=!0}static isAvailable(){return!(!du.forceAllow_&&(du.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Kt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Le(t),s=IA(n,1840);for(let l=0;l<s.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Kt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class DA{constructor(e,t,n,s){this.onDisconnect=n,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Xh(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=DA.createIFrame_();let l="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(l='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){_s("frame writing exception"),h.stack&&_s(h.stack),_s(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||_s("No IE domain setting required")}catch{const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){const u=this.pendingSegs.shift();n=n+"&seg"+s+"="+u.seg+"&ts"+s+"="+u.ts+"&d"+s+"="+u.d,s++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(n,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(s),n()})}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const s=n.readyState;(!s||"loaded"===s||"complete"===s)&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{_s("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}}let nv=null;typeof MozWebSocket<"u"?nv=MozWebSocket:typeof WebSocket<"u"&&(nv=WebSocket);let Yh=(()=>{class r{constructor(t,n,s,l,u,h,p){this.connId=t,this.applicationId=s,this.appCheckToken=l,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Y_(this.connId),this.stats_=AA(n),this.connURL=r.connectionURL_(n,h,p,l,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(t,n,s,l,u){const h={v:"5"};return typeof location<"u"&&location.hostname&&ex.test(location.hostname)&&(h.r="f"),n&&(h.s=n),s&&(h.ls=s),l&&(h.ac=l),u&&(h.p=u),ox(t,rx,h)}open(t,n){this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Id.set("previous_websocket_failure",!0);try{let s;0,this.mySock=new nv(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const l=s.message||s.data;return l&&this.log_(l),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const l=s.message||s.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){r.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const s=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);s&&s.length>1&&parseFloat(s[1])<4.4&&(t=!0)}return!t&&null!==nv&&!r.forceDisallow_}static previouslyFailed(){return Id.isInMemoryStorage||!0===Id.get("previous_websocket_failure")}markConnectionHealthy(){Id.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=Jn(n);this.onMessage(s)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(ue(null===this.frames,"We already have a frame buffer"),t.length<=6){const n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);null!==s&&this.appendFrame_(s)}}send(t){this.resetKeepAlive();const n=Kt(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=IA(n,16384);s.length>1&&this.sendString_(String(s.length));for(let l=0;l<s.length;l++)this.sendString_(s[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return r.responsesRequiredToBeHealthy=2,r.healthyTimeout=3e4,r})(),KE=(()=>{class r{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[du,Yh]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const n=Yh&&Yh.isAvailable();let s=n&&!Yh.previouslyFailed();if(t.webSocketOnly&&(n||Qs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Yh];else{const l=this.transports_=[];for(const u of r.ALL_TRANSPORTS)u&&u.isAvailable()&&l.push(u);r.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return r.globalTransportInitialized_=!1,r})();class _x{constructor(e,t,n,s,l,u,h,p,E,w){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=s,this.authToken_=l,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=p,this.onKill_=E,this.lastSessionId=w,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Y_("c:"+this.id+":"),this.transportManager_=new KE(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=zE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=ug("t",e),n=ug("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=ug("t",e),n=ug("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=ug("t",e);if("d"in e){const n=e.d;if("h"===t){const s=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?jE("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):jE("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&Qs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),zE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):zE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Id.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class vx{put(e,t,n,s){}merge(e,t,n,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class QF{constructor(e){this.allowedEvents_=e,this.listeners_={},ue(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let s=0;s<n.length;s++)n[s].callback.apply(n[s].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const s=this.getInitialEvent(e);s&&t.apply(n,s)}off(e,t,n){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let l=0;l<s.length;l++)if(s[l].callback===t&&(!n||n===s[l].context))return void s.splice(l,1)}validateEventType_(e){ue(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class QE extends QF{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Wt()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new QE}getInitialEvent(e){return ue("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Ii{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let n=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[n]=this.pieces_[s],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Zr(){return new Ii("")}function kr(r){return r.pieceNum_>=r.pieces_.length?null:r.pieces_[r.pieceNum_]}function Jh(r){return r.pieces_.length-r.pieceNum_}function Mi(r){let e=r.pieceNum_;return e<r.pieces_.length&&e++,new Ii(r.pieces_,e)}function kA(r){return r.pieceNum_<r.pieces_.length?r.pieces_[r.pieces_.length-1]:null}function Zh(r,e=0){return r.pieces_.slice(r.pieceNum_+e)}function OA(r){if(r.pieceNum_>=r.pieces_.length)return null;const e=[];for(let t=r.pieceNum_;t<r.pieces_.length-1;t++)e.push(r.pieces_[t]);return new Ii(e,0)}function wo(r,e){const t=[];for(let n=r.pieceNum_;n<r.pieces_.length;n++)t.push(r.pieces_[n]);if(e instanceof Ii)for(let n=e.pieceNum_;n<e.pieces_.length;n++)t.push(e.pieces_[n]);else{const n=e.split("/");for(let s=0;s<n.length;s++)n[s].length>0&&t.push(n[s])}return new Ii(t,0)}function Cr(r){return r.pieceNum_>=r.pieces_.length}function Ta(r,e){const t=kr(r),n=kr(e);if(null===t)return e;if(t===n)return Ta(Mi(r),Mi(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+r+")")}function YF(r,e){const t=Zh(r,0),n=Zh(e,0);for(let s=0;s<t.length&&s<n.length;s++){const l=Qh(t[s],n[s]);if(0!==l)return l}return t.length===n.length?0:t.length<n.length?-1:1}function fg(r,e){if(Jh(r)!==Jh(e))return!1;for(let t=r.pieceNum_,n=e.pieceNum_;t<=r.pieces_.length;t++,n++)if(r.pieces_[t]!==e.pieces_[n])return!1;return!0}function cl(r,e){let t=r.pieceNum_,n=e.pieceNum_;if(Jh(r)>Jh(e))return!1;for(;t<r.pieces_.length;){if(r.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0}class _U{constructor(e,t){this.errorPrefix_=t,this.parts_=Zh(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=gt(this.parts_[n]);YE(this)}}function YE(r){if(r.byteLength_>768)throw new Error(r.errorPrefix_+"has a key path longer than 768 bytes ("+r.byteLength_+").");if(r.parts_.length>32)throw new Error(r.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+wd(r))}function wd(r){return 0===r.parts_.length?"":"in property '"+r.parts_.join(".")+"'"}class wc extends QF{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const n=!document[e];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}static getInstance(){return new wc}getInitialEvent(e){return ue("visible"===e,"Unknown event type: "+e),[this.visible_]}}const pg=1e3;let UA,ef=(()=>{class r extends vx{constructor(t,n,s,l,u,h,p,E){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=l,this.onServerInfoUpdate_=u,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=E,this.id=r.nextPersistentConnectionId_++,this.log_=Y_("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=pg,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,E)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");wc.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&QE.getInstance().on("online",this.onOnline_,this)}sendRequest(t,n,s){const l=++this.requestNumber_,u={r:l,a:t,b:n};this.log_(Kt(u)),ue(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),s&&(this.requestCBHash_[l]=s)}get(t){this.initConnection_();const n=new Pt,l={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const p=h.d;"ok"===h.s?n.resolve(p):n.reject(p)}};return this.outstandingGets_.push(l),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),n.promise}listen(t,n,s,l){this.initConnection_();const u=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+u),this.listens.has(h)||this.listens.set(h,new Map),ue(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ue(!this.listens.get(h).has(u),"listen() called twice for same path/queryId.");const p={onComplete:l,hashFn:n,query:t,tag:s};this.listens.get(h).set(u,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const n=this.outstandingGets_[t];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(t){const n=t.query,s=n._path.toString(),l=n._queryIdentifier;this.log_("Listen on "+s+" for "+l);const u={p:s};t.tag&&(u.q=n._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,p=>{const E=p.d,w=p.s;r.warnOnListenWarnings_(E,n),(this.listens.get(s)&&this.listens.get(s).get(l))===t&&(this.log_("listen response",p),"ok"!==w&&this.removeListen_(s,l),t.onComplete&&t.onComplete(w,E))})}static warnOnListenWarnings_(t,n){if(t&&"object"==typeof t&&pn(t,"w")){const s=yr(t,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const l='".indexOn": "'+n._queryParams.getIndex().toString()+'"',u=n._path.toString();Qs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(r){const e=zn(r).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,n=function(r){const t=zn(r).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",s={cred:t};null===this.authOverride_?s.noauth=!0:"object"==typeof this.authOverride_&&(s.authvar=this.authOverride_),this.sendRequest(n,s,l=>{const u=l.s,h=l.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const n=t.s,s=t.d||"error";"ok"===n?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(t,n){const s=t._path.toString(),l=t._queryIdentifier;this.log_("Unlisten called for "+s+" "+l),ue(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,l)&&this.connected_&&this.sendUnlisten_(s,l,t._queryObject,n)}sendUnlisten_(t,n,s,l){this.log_("Unlisten on "+t+" for "+n);const u={p:t};l&&(u.q=s,u.t=l),this.sendRequest("n",u)}onDisconnectPut(t,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,n,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:n,onComplete:s})}onDisconnectMerge(t,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,n,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:n,onComplete:s})}onDisconnectCancel(t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(t,n,s,l){const u={p:n,d:s};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,h=>{l&&setTimeout(()=>{l(h.s,h.d)},Math.floor(0))})}put(t,n,s,l){this.putInternal("p",t,n,s,l)}merge(t,n,s,l){this.putInternal("m",t,n,s,l)}putInternal(t,n,s,l,u){this.initConnection_();const h={p:n,d:s};void 0!==u&&(h.h=u),this.outstandingPuts_.push({action:t,request:h,onComplete:l}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+n)}sendPut_(t){const n=this.outstandingPuts_[t].action,s=this.outstandingPuts_[t].request,l=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,s,u=>{this.log_(n+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),l&&l(u.s,u.d)})}reportStats(t){if(this.connected_){const n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,s=>{"ok"!==s.s&&this.log_("reportStats","Error sending stats: "+s.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Kt(t));const n=t.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,n){this.log_("handleServerMessage",t,n),"d"===t?this.onDataUpdate_(n.p,n.d,!1,n.t):"m"===t?this.onDataUpdate_(n.p,n.d,!0,n.t):"c"===t?this.onListenRevoked_(n.p,n.q):"ac"===t?this.onAuthRevoked_(n.s,n.d):"apc"===t?this.onAppCheckRevoked_(n.s,n.d):"sd"===t?this.onSecurityDebugPacket_(n):jE("Unrecognized action received from server: "+Kt(t)+"\nAre you using the latest client?")}onReady_(t,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){ue(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=pg,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=pg,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=pg),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,C.A)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const n=t.onDataMessage_.bind(t),s=t.onReady_.bind(t),l=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+r.nextConnectionId_++,h=t.lastSessionId;let p=!1,E=null;const w=function(){E?E.close():(p=!0,l())};t.realtime_={close:w,sendRequest:function(ce){ue(E,"sendRequest call when we're not connected not allowed."),E.sendRequest(ce)}};const G=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[ce,De]=yield Promise.all([t.authTokenProvider_.getToken(G),t.appCheckTokenProvider_.getToken(G)]);p?_s("getToken() completed but was canceled"):(_s("getToken() completed. Creating connection."),t.authToken_=ce&&ce.accessToken,t.appCheckToken_=De&&De.token,E=new _x(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,n,s,l,dt=>{Qs(dt+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(ce){t.log_("Failed to get token: "+ce),p||(t.repoInfo_.nodeAdmin&&Qs(ce),w())}}})()}interrupt(t){_s("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){_s("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Zn(this.interruptReasons_)&&(this.reconnectDelay_=pg,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const n=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const n=this.outstandingPuts_[t];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,n){let s;s=n?n.map(u=>HE(u)).join("$"):"default";const l=this.removeListen_(t,s);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(t,n){const s=new Ii(t).toString();let l;if(this.listens.has(s)){const u=this.listens.get(s);l=u.get(n),u.delete(n),0===u.size&&this.listens.delete(s)}else l=void 0;return l}onAuthRevoked_(t,n){_s("Auth token revoked: "+t+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,n){_s("App check token revoked: "+t+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const n of t.values())this.sendListen_(n);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let n="js";t["sdk."+n+"."+BE.replace(/\./g,"-")]=1,Wt()?t["framework.cordova"]=1:Y()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=QE.getInstance().currentlyOnline();return Zn(this.interruptReasons_)&&t}}return r.nextPersistentConnectionId_=0,r.nextConnectionId_=0,r})();class Or{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Or(e,t)}}class VA{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new Or(bd,e),s=new Or(bd,t);return 0!==this.compare(n,s)}minPost(){return Or.MIN}}class nL extends VA{static get __EMPTY_NODE(){return UA}static set __EMPTY_NODE(e){UA=e}compare(e,t){return Qh(e.name,t.name)}isDefinedOn(e){throw Ke("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Or.MIN}maxPost(){return new Or(bc,UA)}makePost(e,t){return ue("string"==typeof e,"KeyIndex indexValue must always be a string."),new Or(e,UA)}toString(){return".key"}}const hu=new nL;class BA{constructor(e,t,n,s,l=null){this.isReverse_=s,this.resultGenerator_=l,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(u=t?n(e.key,t):1,s&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let jA,Cc=(()=>{class r{constructor(t,n,s,l,u){this.key=t,this.value=n,this.color=null!=s?s:r.RED,this.left=null!=l?l:ca.EMPTY_NODE,this.right=null!=u?u:ca.EMPTY_NODE}copy(t,n,s,l,u){return new r(null!=t?t:this.key,null!=n?n:this.value,null!=s?s:this.color,null!=l?l:this.left,null!=u?u:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let l=this;const u=s(t,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(t,n,s),null):0===u?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(t,n,s)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return ca.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,n){let s,l;if(s=this,n(t,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),0===n(t,s.key)){if(s.right.isEmpty())return ca.EMPTY_NODE;l=s.right.min_(),s=s.copy(l.key,l.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,r.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return r.RED=!0,r.BLACK=!1,r})();class ca{constructor(e,t=ca.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ca(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Cc.BLACK,null,null))}remove(e){return new ca(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Cc.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,s=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return s?s.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(s=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new BA(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new BA(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new BA(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new BA(this.root_,null,this.comparator_,!0,e)}}function bx(r,e){return Qh(r.name,e.name)}function $A(r,e){return Qh(r,e)}ca.EMPTY_NODE=new class yU{copy(e,t,n,s,l){return this}insert(e,t,n){return new Cc(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const rL=function(r){return"number"==typeof r?"number:"+X1(r):"string:"+r},iL=function(r){if(r.isLeafNode()){const e=r.val();ue("string"==typeof e||"number"==typeof e||"object"==typeof e&&pn(e,".sv"),"Priority must be a string or number.")}else ue(r===jA||r.isEmpty(),"priority of unexpected type.");ue(r===jA||r.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let oL,HA,ov,iv=(()=>{class r{constructor(t,n=r.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,ue(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),iL(this.priorityNode_)}static set __childrenNodeConstructor(t){oL=t}static get __childrenNodeConstructor(){return oL}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new r(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:r.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Cr(t)?this:".priority"===kr(t)?this.priorityNode_:r.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,n){return null}updateImmediateChild(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:r.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){const s=kr(t);return null===s?n:n.isEmpty()&&".priority"!==s?this:(ue(".priority"!==s||1===Jh(t),".priority must be the last token in a path"),this.updateImmediateChild(s,r.__childrenNodeConstructor.EMPTY_NODE.updateChild(Mi(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,n){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+rL(this.priorityNode_.val())+":");const n=typeof this.value_;t+=n+":",t+="number"===n?X1(this.value_):this.value_,this.lazyHash_=G1(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===r.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof r.__childrenNodeConstructor?-1:(ue(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const n=typeof t.value_,s=typeof this.value_,l=r.VALUE_TYPE_ORDER.indexOf(n),u=r.VALUE_TYPE_ORDER.indexOf(s);return ue(l>=0,"Unknown leaf type: "+n),ue(u>=0,"Unknown leaf type: "+s),l===u?"object"===s?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-l}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return r.VALUE_TYPE_ORDER=["object","boolean","number","string"],r})();const ai=new class wx extends VA{compare(e,t){const n=e.node.getPriority(),s=t.node.getPriority(),l=n.compareTo(s);return 0===l?Qh(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Or.MIN}maxPost(){return new Or(bc,new iv("[PRIORITY-POST]",ov))}makePost(e,t){const n=HA(e);return new Or(t,new iv("[PRIORITY-POST]",n))}toString(){return".priority"}},Cx=Math.log(2);class zA{constructor(e){this.count=parseInt(Math.log(e+1)/Cx,10),this.current_=this.count-1;const s=(l=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const gg=function(r,e,t,n){r.sort(e);const s=function(p,E){const w=E-p;let x,G;if(0===w)return null;if(1===w)return x=r[p],G=t?t(x):x,new Cc(G,x.node,Cc.BLACK,null,null);{const ce=parseInt(w/2,10)+p,De=s(p,ce),dt=s(ce+1,E);return x=r[ce],G=t?t(x):x,new Cc(G,x.node,Cc.BLACK,De,dt)}},h=function(p){let E=null,w=null,x=r.length;const G=function(De,dt){const lt=x-De,ln=x;x-=De;const vn=s(lt+1,ln),cn=r[lt],An=t?t(cn):cn;ce(new Cc(An,cn.node,dt,null,vn))},ce=function(De){E?(E.left=De,E=De):(w=De,E=De)};for(let De=0;De<p.count;++De){const dt=p.nextBitIsOne(),lt=Math.pow(2,p.count-(De+1));dt?G(lt,Cc.BLACK):(G(lt,Cc.BLACK),G(lt,Cc.RED))}return w}(new zA(r.length));return new ca(n||e,h)};let GA;const Cd={};class Ll{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return ue(Cd&&ai,"ChildrenNode.ts has not been loaded"),GA=GA||new Ll({".priority":Cd},{".priority":ai}),GA}get(e){const t=yr(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ca?t:null}hasIndex(e){return pn(this.indexSet_,e.toString())}addIndex(e,t){ue(e!==hu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let s=!1;const l=t.getIterator(Or.Wrap);let h,u=l.getNext();for(;u;)s=s||e.isDefinedOn(u.node),n.push(u),u=l.getNext();h=s?gg(n,e.getCompare()):Cd;const p=e.toString(),E=Object.assign({},this.indexSet_);E[p]=e;const w=Object.assign({},this.indexes_);return w[p]=h,new Ll(w,E)}addToIndexes(e,t){const n=bn(this.indexes_,(s,l)=>{const u=yr(this.indexSet_,l);if(ue(u,"Missing index implementation for "+l),s===Cd){if(u.isDefinedOn(e.node)){const h=[],p=t.getIterator(Or.Wrap);let E=p.getNext();for(;E;)E.name!==e.name&&h.push(E),E=p.getNext();return h.push(e),gg(h,u.getCompare())}return Cd}{const h=t.get(e.name);let p=s;return h&&(p=p.remove(new Or(e.name,h))),p.insert(e,e.node)}});return new Ll(n,this.indexSet_)}removeFromIndexes(e,t){const n=bn(this.indexes_,s=>{if(s===Cd)return s;{const l=t.get(e.name);return l?s.remove(new Or(e.name,l)):s}});return new Ll(n,this.indexSet_)}}let Ad,Tr=(()=>{class r{constructor(t,n,s){this.children_=t,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&iL(this.priorityNode_),this.children_.isEmpty()&&ue(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ad||(Ad=new r(new ca($A),null,Ll.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ad}updatePriority(t){return this.children_.isEmpty()?this:new r(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const n=this.children_.get(t);return null===n?Ad:n}}getChild(t){const n=kr(t);return null===n?this:this.getImmediateChild(n).getChild(Mi(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,n){if(ue(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);{const s=new Or(t,n);let l,u;n.isEmpty()?(l=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(s,this.children_)):(l=this.children_.insert(t,n),u=this.indexMap_.addToIndexes(s,this.children_));const h=l.isEmpty()?Ad:this.priorityNode_;return new r(l,h,u)}}updateChild(t,n){const s=kr(t);if(null===s)return n;{ue(".priority"!==kr(t)||1===Jh(t),".priority must be the last token in a path");const l=this.getImmediateChild(s).updateChild(Mi(t),n);return this.updateImmediateChild(s,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const n={};let s=0,l=0,u=!0;if(this.forEachChild(ai,(h,p)=>{n[h]=p.val(t),s++,u&&r.INTEGER_REGEXP_.test(h)?l=Math.max(l,Number(h)):u=!1}),!t&&u&&l<2*s){const h=[];for(const p in n)h[p]=n[p];return h}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+rL(this.getPriority().val())+":"),this.forEachChild(ai,(n,s)=>{const l=s.hash();""!==l&&(t+=":"+n+":"+l)}),this.lazyHash_=""===t?"":G1(t)}return this.lazyHash_}getPredecessorChildName(t,n,s){const l=this.resolveIndex_(s);if(l){const u=l.getPredecessorKey(new Or(t,n));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const n=this.resolveIndex_(t);if(n){const s=n.minKey();return s&&s.name}return this.children_.minKey()}getFirstChild(t){const n=this.getFirstChildName(t);return n?new Or(n,this.children_.get(n)):null}getLastChildName(t){const n=this.resolveIndex_(t);if(n){const s=n.maxKey();return s&&s.name}return this.children_.maxKey()}getLastChild(t){const n=this.getLastChildName(t);return n?new Or(n,this.children_.get(n)):null}forEachChild(t,n){const s=this.resolveIndex_(t);return s?s.inorderTraversal(l=>n(l.name,l.node)):this.children_.inorderTraversal(n)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(t,l=>l);{const l=this.children_.getIteratorFrom(t.name,Or.Wrap);let u=l.peek();for(;null!=u&&n.compare(u,t)<0;)l.getNext(),u=l.peek();return l}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(t,l=>l);{const l=this.children_.getReverseIteratorFrom(t.name,Or.Wrap);let u=l.peek();for(;null!=u&&n.compare(u,t)>0;)l.getNext(),u=l.peek();return l}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===JE?-1:0}withIndex(t){if(t===hu||this.indexMap_.hasIndex(t))return this;{const n=this.indexMap_.addIndex(t,this.children_);return new r(this.children_,this.priorityNode_,n)}}isIndexed(t){return t===hu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const n=t;if(this.getPriority().equals(n.getPriority())){if(this.children_.count()===n.children_.count()){const s=this.getIterator(ai),l=n.getIterator(ai);let u=s.getNext(),h=l.getNext();for(;u&&h;){if(u.name!==h.name||!u.node.equals(h.node))return!1;u=s.getNext(),h=l.getNext()}return null===u&&null===h}return!1}return!1}}resolveIndex_(t){return t===hu?null:this.indexMap_.get(t.toString())}}return r.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,r})();const JE=new class IU extends Tr{constructor(){super(new ca($A),Tr.EMPTY_NODE,Ll.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Tr.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Or,{MIN:{value:new Or(bd,Tr.EMPTY_NODE)},MAX:{value:new Or(bc,JE)}}),nL.__EMPTY_NODE=Tr.EMPTY_NODE,iv.__childrenNodeConstructor=Tr,function EU(r){jA=r}(JE),function aL(r){ov=r}(JE);const Ax=!0;function Co(r,e=null){if(null===r)return Tr.EMPTY_NODE;if("object"==typeof r&&".priority"in r&&(e=r[".priority"]),ue(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof r&&".value"in r&&null!==r[".value"]&&(r=r[".value"]),"object"!=typeof r||".sv"in r)return new iv(r,Co(e));if(r instanceof Array||!Ax){let t=Tr.EMPTY_NODE;return vs(r,(n,s)=>{if(pn(r,n)&&"."!==n.substring(0,1)){const l=Co(s);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(n,l))}}),t.updatePriority(Co(e))}{const t=[];let n=!1;if(vs(r,(u,h)=>{if("."!==u.substring(0,1)){const p=Co(h);p.isEmpty()||(n=n||!p.getPriority().isEmpty(),t.push(new Or(u,p)))}}),0===t.length)return Tr.EMPTY_NODE;const l=gg(t,bx,u=>u.name,$A);if(n){const u=gg(t,ai.getCompare());return new Tr(l,Co(e),new Ll({".priority":u},{".priority":ai}))}return new Tr(l,Co(e),Ll.Default)}}!function sL(r){HA=r}(Co);class WA extends VA{constructor(e){super(),this.indexPath_=e,ue(!Cr(e)&&".priority"!==kr(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),s=this.extractChild(t.node),l=n.compareTo(s);return 0===l?Qh(e.name,t.name):l}makePost(e,t){const n=Co(e),s=Tr.EMPTY_NODE.updateChild(this.indexPath_,n);return new Or(t,s)}maxPost(){const e=Tr.EMPTY_NODE.updateChild(this.indexPath_,JE);return new Or(bc,e)}toString(){return Zh(this.indexPath_,0).join("/")}}const qA=new class lL extends VA{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?Qh(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Or.MIN}maxPost(){return Or.MAX}makePost(e,t){const n=Co(e);return new Or(t,n)}toString(){return".value"}};function KA(r){return{type:"value",snapshotNode:r}}function tf(r,e){return{type:"child_added",snapshotNode:e,childName:r}}function mg(r,e){return{type:"child_removed",snapshotNode:e,childName:r}}function sv(r,e,t){return{type:"child_changed",snapshotNode:e,childName:r,oldSnap:t}}class ZE{constructor(e){this.index_=e}updateChild(e,t,n,s,l,u){ue(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(s).equals(n.getChild(s))&&h.isEmpty()===n.isEmpty()||(null!=u&&(n.isEmpty()?e.hasChild(t)?u.trackChildChange(mg(t,h)):ue(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(tf(t,n)):u.trackChildChange(sv(t,n,h))),e.isLeafNode()&&n.isEmpty())?e:e.updateImmediateChild(t,n).withIndex(this.index_)}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(ai,(s,l)=>{t.hasChild(s)||n.trackChildChange(mg(s,l))}),t.isLeafNode()||t.forEachChild(ai,(s,l)=>{if(e.hasChild(s)){const u=e.getImmediateChild(s);u.equals(l)||n.trackChildChange(sv(s,l,u))}else n.trackChildChange(tf(s,l))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Tr.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class nf{constructor(e){this.indexedFilter_=new ZE(e.getIndex()),this.index_=e.getIndex(),this.startPost_=nf.getStartPost_(e),this.endPost_=nf.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,s,l,u){return this.matches(new Or(t,n))||(n=Tr.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,s,l,u)}updateFullNode(e,t,n){t.isLeafNode()&&(t=Tr.EMPTY_NODE);let s=t.withIndex(this.index_);s=s.updatePriority(Tr.EMPTY_NODE);const l=this;return t.forEachChild(ai,(u,h)=>{l.matches(new Or(u,h))||(s=s.updateImmediateChild(u,Tr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class bU{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const n=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?n<=0:n<0},this.withinEndPost=t=>{const n=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?n<=0:n<0},this.rangedFilter_=new nf(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,s,l,u){return this.rangedFilter_.matches(new Or(t,n))||(n=Tr.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,s,l,u):this.fullLimitUpdateChild_(e,t,n,l,u)}updateFullNode(e,t,n){let s;if(t.isLeafNode()||t.isEmpty())s=Tr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let l;s=Tr.EMPTY_NODE.withIndex(this.index_),l=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;l.hasNext()&&u<this.limit_;){const h=l.getNext();if(this.withinDirectionalStart(h)){if(!this.withinDirectionalEnd(h))break;s=s.updateImmediateChild(h.name,h.node),u++}}}else{let l;s=t.withIndex(this.index_),s=s.updatePriority(Tr.EMPTY_NODE),l=this.reverse_?s.getReverseIterator(this.index_):s.getIterator(this.index_);let u=0;for(;l.hasNext();){const h=l.getNext();u<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?u++:s=s.updateImmediateChild(h.name,Tr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,s,l){let u;if(this.reverse_){const x=this.index_.getCompare();u=(G,ce)=>x(ce,G)}else u=this.index_.getCompare();const h=e;ue(h.numChildren()===this.limit_,"");const p=new Or(t,n),E=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),w=this.rangedFilter_.matches(p);if(h.hasChild(t)){const x=h.getImmediateChild(t);let G=s.getChildAfterChild(this.index_,E,this.reverse_);for(;null!=G&&(G.name===t||h.hasChild(G.name));)G=s.getChildAfterChild(this.index_,G,this.reverse_);const ce=null==G?1:u(G,p);if(w&&!n.isEmpty()&&ce>=0)return null!=l&&l.trackChildChange(sv(t,n,x)),h.updateImmediateChild(t,n);{null!=l&&l.trackChildChange(mg(t,x));const dt=h.updateImmediateChild(t,Tr.EMPTY_NODE);return null!=G&&this.rangedFilter_.matches(G)?(null!=l&&l.trackChildChange(tf(G.name,G.node)),dt.updateImmediateChild(G.name,G.node)):dt}}return n.isEmpty()?e:w&&u(E,p)>=0?(null!=l&&(l.trackChildChange(mg(E.name,E.node)),l.trackChildChange(tf(t,n))),h.updateImmediateChild(t,n).updateImmediateChild(E.name,Tr.EMPTY_NODE)):e}}class av{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ai}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return ue(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ue(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:bd}hasEnd(){return this.endSet_}getIndexEndValue(){return ue(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ue(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:bc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return ue(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ai}copy(){const e=new av;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Tx(r,e,t){const n=r.copy();return n.startSet_=!0,void 0===e&&(e=null),n.indexStartValue_=e,null!=t?(n.startNameSet_=!0,n.indexStartName_=t):(n.startNameSet_=!1,n.indexStartName_=""),n}function QA(r,e,t){const n=r.copy();return n.endSet_=!0,void 0===e&&(e=null),n.indexEndValue_=e,void 0!==t?(n.endNameSet_=!0,n.indexEndName_=t):(n.endNameSet_=!1,n.indexEndName_=""),n}function YA(r,e){const t=r.copy();return t.index_=e,t}function Qo(r){const e={};if(r.isDefault())return e;let t;if(r.index_===ai?t="$priority":r.index_===qA?t="$value":r.index_===hu?t="$key":(ue(r.index_ instanceof WA,"Unrecognized index type!"),t=r.index_.toString()),e.orderBy=Kt(t),r.startSet_){const n=r.startAfterSet_?"startAfter":"startAt";e[n]=Kt(r.indexStartValue_),r.startNameSet_&&(e[n]+=","+Kt(r.indexStartName_))}if(r.endSet_){const n=r.endBeforeSet_?"endBefore":"endAt";e[n]=Kt(r.indexEndValue_),r.endNameSet_&&(e[n]+=","+Kt(r.indexEndName_))}return r.limitSet_&&(r.isViewFromLeft()?e.limitToFirst=r.limit_:e.limitToLast=r.limit_),e}function _g(r){const e={};if(r.startSet_&&(e.sp=r.indexStartValue_,r.startNameSet_&&(e.sn=r.indexStartName_),e.sin=!r.startAfterSet_),r.endSet_&&(e.ep=r.indexEndValue_,r.endNameSet_&&(e.en=r.indexEndName_),e.ein=!r.endBeforeSet_),r.limitSet_){e.l=r.limit_;let t=r.viewFrom_;""===t&&(t=r.isViewFromLeft()?"l":"r"),e.vf=t}return r.index_!==ai&&(e.i=r.index_.toString()),e}class rf extends vx{constructor(e,t,n,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=s,this.log_=Y_("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(ue(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,s){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const u=rf.getListenId_(e,n),h={};this.listens_[u]=h;const p=Qo(e._queryParams);this.restRequest_(l+".json",p,(E,w)=>{let x=w;if(404===E&&(x=null,E=null),null===E&&this.onDataUpdate_(l,x,!1,n),yr(this.listens_,u)===h){let G;G=E?401===E?"permission_denied":"rest_error:"+E:"ok",s(G,null)}})}unlisten(e,t){const n=rf.getListenId_(e,t);delete this.listens_[n]}get(e){const t=Qo(e._queryParams),n=e._path.toString(),s=new Pt;return this.restRequest_(n+".json",t,(l,u)=>{let h=u;404===l&&(h=null,l=null),null===l?(this.onDataUpdate_(n,h,!1,null),s.resolve(h)):s.reject(new Error(h))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,l])=>{s&&s.accessToken&&(t.auth=s.accessToken),l&&l.token&&(t.ac=l.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ir(t);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(n&&4===h.readyState){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=Jn(h.responseText)}catch{Qs("Failed to parse JSON response for "+u+": "+h.responseText)}n(null,p)}else 401!==h.status&&404!==h.status&&Qs("Got unsuccessful REST response for "+u+" Status: "+h.status),n(h.status);n=null}},h.open("GET",u,!0),h.send()})}}class eI{constructor(){this.rootNode_=Tr.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function lv(){return{value:null,children:new Map}}function cv(r,e,t){if(Cr(e))r.value=t,r.children.clear();else if(null!==r.value)r.value=r.value.updateChild(e,t);else{const n=kr(e);r.children.has(n)||r.children.set(n,lv()),cv(r.children.get(n),e=Mi(e),t)}}function JA(r,e){if(Cr(e))return r.value=null,r.children.clear(),!0;if(null!==r.value){if(r.value.isLeafNode())return!1;{const t=r.value;return r.value=null,t.forEachChild(ai,(n,s)=>{cv(r,new Ii(n),s)}),JA(r,e)}}if(r.children.size>0){const t=kr(e);return e=Mi(e),r.children.has(t)&&JA(r.children.get(t),e)&&r.children.delete(t),0===r.children.size}return!0}function Sx(r,e,t){null!==r.value?t(e,r.value):function CU(r,e){r.children.forEach((t,n)=>{e(n,t)})}(r,(n,s)=>{Sx(s,new Ii(e.toString()+"/"+n),t)})}class ZA{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&vs(this.last_,(n,s)=>{t[n]=t[n]-s}),this.last_=e,t}}class xx{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new ZA(e);const n=1e4+2e4*Math.random();zE(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;vs(e,(s,l)=>{l>0&&pn(this.statsToReport_,s)&&(t[s]=l,n=!0)}),n&&this.server_.reportStats(t),zE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Vl=function(r){return r[r.OVERWRITE=0]="OVERWRITE",r[r.MERGE=1]="MERGE",r[r.ACK_USER_WRITE=2]="ACK_USER_WRITE",r[r.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",r}(Vl||{});function tI(r){return{fromUser:!1,fromServer:!0,queryId:r,tagged:!0}}class nI{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Vl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Cr(this.path)){if(null!=this.affectedTree.value)return ue(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Ii(e));return new nI(Zr(),t,this.revert)}}return ue(kr(this.path)===e,"operationForChild called for unrelated child."),new nI(Mi(this.path),this.affectedTree,this.revert)}}class vg{constructor(e,t){this.source=e,this.path=t,this.type=Vl.LISTEN_COMPLETE}operationForChild(e){return Cr(this.path)?new vg(this.source,Zr()):new vg(this.source,Mi(this.path))}}class Ac{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Vl.OVERWRITE}operationForChild(e){return Cr(this.path)?new Ac(this.source,Zr(),this.snap.getImmediateChild(e)):new Ac(this.source,Mi(this.path),this.snap)}}class Tc{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Vl.MERGE}operationForChild(e){if(Cr(this.path)){const t=this.children.subtree(new Ii(e));return t.isEmpty()?null:t.value?new Ac(this.source,Zr(),t.value):new Tc(this.source,Zr(),t)}return ue(kr(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Tc(this.source,Mi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ul{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Cr(e))return this.isFullyInitialized()&&!this.filtered_;const t=kr(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Mx{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function rI(r,e,t,n,s,l){const u=n.filter(h=>h.type===t);u.sort((h,p)=>function TU(r,e,t){if(null==e.childName||null==t.childName)throw Ke("Should only compare child_ events.");const n=new Or(e.childName,e.snapshotNode),s=new Or(t.childName,t.snapshotNode);return r.index_.compare(n,s)}(r,h,p)),u.forEach(h=>{const p=function AU(r,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,r.index_)),e}(r,h,l);s.forEach(E=>{E.respondsTo(h.type)&&e.push(E.createEvent(p,r.query_))})})}function iI(r,e){return{eventCache:r,serverCache:e}}function uv(r,e,t,n){return iI(new Ul(e,t,n),r.serverCache)}function fL(r,e,t,n){return iI(r.eventCache,new Ul(e,t,n))}function dv(r){return r.eventCache.isFullyInitialized()?r.eventCache.getNode():null}function Td(r){return r.serverCache.isFullyInitialized()?r.serverCache.getNode():null}let kx;class io{constructor(e,t=(()=>(kx||(kx=new ca(K1)),kx))()){this.value=e,this.children=t}static fromObject(e){let t=new io(null);return vs(e,(n,s)=>{t=t.set(new Ii(n),s)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Zr(),value:this.value};if(Cr(e))return null;{const n=kr(e),s=this.children.get(n);if(null!==s){const l=s.findRootMostMatchingPathAndValue(Mi(e),t);return null!=l?{path:wo(new Ii(n),l.path),value:l.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Cr(e))return this;{const t=kr(e),n=this.children.get(t);return null!==n?n.subtree(Mi(e)):new io(null)}}set(e,t){if(Cr(e))return new io(t,this.children);{const n=kr(e),l=(this.children.get(n)||new io(null)).set(Mi(e),t),u=this.children.insert(n,l);return new io(this.value,u)}}remove(e){if(Cr(e))return this.children.isEmpty()?new io(null):new io(null,this.children);{const t=kr(e),n=this.children.get(t);if(n){const s=n.remove(Mi(e));let l;return l=s.isEmpty()?this.children.remove(t):this.children.insert(t,s),null===this.value&&l.isEmpty()?new io(null):new io(this.value,l)}return this}}get(e){if(Cr(e))return this.value;{const t=kr(e),n=this.children.get(t);return n?n.get(Mi(e)):null}}setTree(e,t){if(Cr(e))return t;{const n=kr(e),l=(this.children.get(n)||new io(null)).setTree(Mi(e),t);let u;return u=l.isEmpty()?this.children.remove(n):this.children.insert(n,l),new io(this.value,u)}}fold(e){return this.fold_(Zr(),e)}fold_(e,t){const n={};return this.children.inorderTraversal((s,l)=>{n[s]=l.fold_(wo(e,s),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,Zr(),t)}findOnPath_(e,t,n){const s=!!this.value&&n(t,this.value);if(s)return s;if(Cr(e))return null;{const l=kr(e),u=this.children.get(l);return u?u.findOnPath_(Mi(e),wo(t,l),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Zr(),t)}foreachOnPath_(e,t,n){if(Cr(e))return this;{this.value&&n(t,this.value);const s=kr(e),l=this.children.get(s);return l?l.foreachOnPath_(Mi(e),wo(t,s),n):new io(null)}}foreach(e){this.foreach_(Zr(),e)}foreach_(e,t){this.children.inorderTraversal((n,s)=>{s.foreach_(wo(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}}class Sc{constructor(e){this.writeTree_=e}static empty(){return new Sc(new io(null))}}function sI(r,e,t){if(Cr(e))return new Sc(new io(t));{const n=r.writeTree_.findRootMostValueAndPath(e);if(null!=n){const s=n.path;let l=n.value;const u=Ta(s,e);return l=l.updateChild(u,t),new Sc(r.writeTree_.set(s,l))}{const s=new io(t),l=r.writeTree_.setTree(e,s);return new Sc(l)}}}function nT(r,e,t){let n=r;return vs(t,(s,l)=>{n=sI(n,wo(e,s),l)}),n}function pL(r,e){if(Cr(e))return Sc.empty();{const t=r.writeTree_.setTree(e,new io(null));return new Sc(t)}}function Ox(r,e){return null!=sf(r,e)}function sf(r,e){const t=r.writeTree_.findRootMostValueAndPath(e);return null!=t?r.writeTree_.get(t.path).getChild(Ta(t.path,e)):null}function Fx(r){const e=[],t=r.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(ai,(n,s)=>{e.push(new Or(n,s))}):r.writeTree_.children.inorderTraversal((n,s)=>{null!=s.value&&e.push(new Or(n,s.value))}),e}function af(r,e){if(Cr(e))return r;{const t=sf(r,e);return new Sc(null!=t?new io(t):r.writeTree_.subtree(e))}}function aI(r){return r.writeTree_.isEmpty()}function yg(r,e){return gL(Zr(),r.writeTree_,e)}function gL(r,e,t){if(null!=e.value)return t.updateChild(r,e.value);{let n=null;return e.children.inorderTraversal((s,l)=>{".priority"===s?(ue(null!==l.value,"Priority writes must always be leaf nodes"),n=l.value):t=gL(wo(r,s),l,t)}),!t.getChild(r).isEmpty()&&null!==n&&(t=t.updateChild(wo(r,".priority"),n)),t}}function lI(r,e){return sT(e,r)}function DU(r,e){if(r.snap)return cl(r.path,e);for(const t in r.children)if(r.children.hasOwnProperty(t)&&cl(wo(r.path,t),e))return!0;return!1}function Ux(r){return r.visible}function Bx(r,e,t){let n=Sc.empty();for(let s=0;s<r.length;++s){const l=r[s];if(e(l)){const u=l.path;let h;if(l.snap)cl(t,u)?(h=Ta(t,u),n=sI(n,h,l.snap)):cl(u,t)&&(h=Ta(u,t),n=sI(n,Zr(),l.snap.getChild(h)));else{if(!l.children)throw Ke("WriteRecord should have .snap or .children");if(cl(t,u))h=Ta(t,u),n=nT(n,h,l.children);else if(cl(u,t))if(h=Ta(u,t),Cr(h))n=nT(n,Zr(),l.children);else{const p=yr(l.children,kr(h));if(p){const E=p.getChild(Mi(h));n=sI(n,Zr(),E)}}}}}return n}function rT(r,e,t,n,s){if(n||s){const l=af(r.visibleWrites,e);return!s&&aI(l)?t:s||null!=t||Ox(l,Zr())?yg(Bx(r.allWrites,function(E){return(E.visible||s)&&(!n||!~n.indexOf(E.writeId))&&(cl(E.path,e)||cl(e,E.path))},e),t||Tr.EMPTY_NODE):null}{const l=sf(r.visibleWrites,e);if(null!=l)return l;{const u=af(r.visibleWrites,e);return aI(u)?t:null!=t||Ox(u,Zr())?yg(u,t||Tr.EMPTY_NODE):null}}}function cI(r,e,t,n){return rT(r.writeTree,r.treePath,e,t,n)}function uI(r,e){return function vL(r,e,t){let n=Tr.EMPTY_NODE;const s=sf(r.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(ai,(l,u)=>{n=n.updateImmediateChild(l,u)}),n;if(t){const l=af(r.visibleWrites,e);return t.forEachChild(ai,(u,h)=>{const p=yg(af(l,new Ii(u)),h);n=n.updateImmediateChild(u,p)}),Fx(l).forEach(u=>{n=n.updateImmediateChild(u.name,u.node)}),n}return Fx(af(r.visibleWrites,e)).forEach(u=>{n=n.updateImmediateChild(u.name,u.node)}),n}(r.writeTree,r.treePath,e)}function IL(r,e,t,n){return function iT(r,e,t,n,s){ue(n||s,"Either existingEventSnap or existingServerSnap must exist");const l=wo(e,t);if(Ox(r.visibleWrites,l))return null;{const u=af(r.visibleWrites,l);return aI(u)?s.getChild(t):yg(u,s.getChild(t))}}(r.writeTree,r.treePath,e,t,n)}function dI(r,e){return function yL(r,e){return sf(r.visibleWrites,e)}(r.writeTree,wo(r.treePath,e))}function oT(r,e,t){return function $x(r,e,t,n){const s=wo(e,t),l=sf(r.visibleWrites,s);return null!=l?l:n.isCompleteForChild(t)?yg(af(r.visibleWrites,s),n.getNode().getImmediateChild(t)):null}(r.writeTree,r.treePath,e,t)}function Hx(r,e){return sT(wo(r.treePath,e),r.writeTree)}function sT(r,e){return{treePath:r,writeTree:e}}class zx{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;ue("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),ue(".priority"!==n,"Only non-priority child changes can be tracked.");const s=this.changeMap.get(n);if(s){const l=s.type;if("child_added"===t&&"child_removed"===l)this.changeMap.set(n,sv(n,e.snapshotNode,s.snapshotNode));else if("child_removed"===t&&"child_added"===l)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===l)this.changeMap.set(n,mg(n,s.oldSnap));else if("child_changed"===t&&"child_added"===l)this.changeMap.set(n,tf(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==l)throw Ke("Illegal combination of changes: "+e+" occurred after "+s);this.changeMap.set(n,sv(n,e.snapshotNode,s.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const aT=new class wL{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class hI{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const n=null!=this.optCompleteServerCache_?new Ul(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return oT(this.writes_,e,n)}}getChildAfterChild(e,t,n){const s=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Td(this.viewCache_),l=function bL(r,e,t,n,s,l){return function EL(r,e,t,n,s,l,u){let h;const p=af(r.visibleWrites,e),E=sf(p,Zr());if(null!=E)h=E;else{if(null==t)return[];h=yg(p,t)}if(h=h.withIndex(u),h.isEmpty()||h.isLeafNode())return[];{const w=[],x=u.getCompare(),G=l?h.getReverseIteratorFrom(n,u):h.getIteratorFrom(n,u);let ce=G.getNext();for(;ce&&w.length<s;)0!==x(ce,n)&&w.push(ce),ce=G.getNext();return w}}(r.writeTree,r.treePath,e,t,n,s,l)}(this.writes_,s,t,1,n,e);return 0===l.length?null:l[0]}}function cT(r,e,t,n,s,l){const u=e.eventCache;if(null!=dI(n,t))return e;{let h,p;if(Cr(t))if(ue(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const E=Td(e),x=uI(n,E instanceof Tr?E:Tr.EMPTY_NODE);h=r.filter.updateFullNode(e.eventCache.getNode(),x,l)}else{const E=cI(n,Td(e));h=r.filter.updateFullNode(e.eventCache.getNode(),E,l)}else{const E=kr(t);if(".priority"===E){ue(1===Jh(t),"Can't have a priority with additional path components");const w=u.getNode();p=e.serverCache.getNode();const x=IL(n,t,w,p);h=null!=x?r.filter.updatePriority(w,x):u.getNode()}else{const w=Mi(t);let x;if(u.isCompleteForChild(E)){p=e.serverCache.getNode();const G=IL(n,t,u.getNode(),p);x=null!=G?u.getNode().getImmediateChild(E).updateChild(w,G):u.getNode().getImmediateChild(E)}else x=oT(n,E,e.serverCache);h=null!=x?r.filter.updateChild(u.getNode(),E,x,w,s,l):u.getNode()}}return uv(e,h,u.isFullyInitialized()||Cr(t),r.filter.filtersNodes())}}function fI(r,e,t,n,s,l,u,h){const p=e.serverCache;let E;const w=u?r.filter:r.filter.getIndexedFilter();if(Cr(t))E=w.updateFullNode(p.getNode(),n,null);else if(w.filtersNodes()&&!p.isFiltered()){const ce=p.getNode().updateChild(t,n);E=w.updateFullNode(p.getNode(),ce,null)}else{const ce=kr(t);if(!p.isCompleteForPath(t)&&Jh(t)>1)return e;const De=Mi(t),lt=p.getNode().getImmediateChild(ce).updateChild(De,n);E=".priority"===ce?w.updatePriority(p.getNode(),lt):w.updateChild(p.getNode(),ce,lt,De,aT,null)}const x=fL(e,E,p.isFullyInitialized()||Cr(t),w.filtersNodes());return cT(r,x,t,s,new hI(s,x,l),h)}function uT(r,e,t,n,s,l,u){const h=e.eventCache;let p,E;const w=new hI(s,e,l);if(Cr(t))E=r.filter.updateFullNode(e.eventCache.getNode(),n,u),p=uv(e,E,!0,r.filter.filtersNodes());else{const x=kr(t);if(".priority"===x)E=r.filter.updatePriority(e.eventCache.getNode(),n),p=uv(e,E,h.isFullyInitialized(),h.isFiltered());else{const G=Mi(t),ce=h.getNode().getImmediateChild(x);let De;if(Cr(G))De=n;else{const dt=w.getCompleteChild(x);De=null!=dt?".priority"===kA(G)&&dt.getChild(OA(G)).isEmpty()?dt:dt.updateChild(G,n):Tr.EMPTY_NODE}p=ce.equals(De)?e:uv(e,r.filter.updateChild(h.getNode(),x,De,G,w,u),h.isFullyInitialized(),r.filter.filtersNodes())}}return p}function fv(r,e){return r.eventCache.isCompleteForChild(e)}function Gx(r,e,t){return t.foreach((n,s)=>{e=e.updateChild(n,s)}),e}function pI(r,e,t,n,s,l,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let E,p=e;E=Cr(t)?n:new io(null).setTree(t,n);const w=e.serverCache.getNode();return E.children.inorderTraversal((x,G)=>{if(w.hasChild(x)){const De=Gx(0,e.serverCache.getNode().getImmediateChild(x),G);p=fI(r,p,new Ii(x),De,s,l,u,h)}}),E.children.inorderTraversal((x,G)=>{const ce=!e.serverCache.isCompleteForChild(x)&&null===G.value;if(!w.hasChild(x)&&!ce){const dt=Gx(0,e.serverCache.getNode().getImmediateChild(x),G);p=fI(r,p,new Ii(x),dt,s,l,u,h)}}),p}class SL{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,s=new ZE(n.getIndex()),l=function XA(r){return r.loadsAllData()?new ZE(r.getIndex()):r.hasLimit()?new bU(r):new nf(r)}(n);this.processor_=function RU(r){return{filter:r}}(l);const u=t.serverCache,h=t.eventCache,p=s.updateFullNode(Tr.EMPTY_NODE,u.getNode(),null),E=l.updateFullNode(Tr.EMPTY_NODE,h.getNode(),null),w=new Ul(p,u.isFullyInitialized(),s.filtersNodes()),x=new Ul(E,h.isFullyInitialized(),l.filtersNodes());this.viewCache_=iI(x,w),this.eventGenerator_=new Mx(this.query_)}get query(){return this.query_}}function MU(r,e){const t=Td(r.viewCache_);return t&&(r.query._queryParams.loadsAllData()||!Cr(e)&&!t.getImmediateChild(kr(e)).isEmpty())?t.getChild(e):null}function RL(r){return 0===r.eventRegistrations_.length}function qx(r,e,t){const n=[];if(t){ue(null==e,"A cancel should cancel all event registrations.");const s=r.query._path;r.eventRegistrations_.forEach(l=>{const u=l.createCancelEvent(t,s);u&&n.push(u)})}if(e){let s=[];for(let l=0;l<r.eventRegistrations_.length;++l){const u=r.eventRegistrations_[l];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(r.eventRegistrations_.slice(l+1));break}}else s.push(u)}r.eventRegistrations_=s}else r.eventRegistrations_=[];return n}function PL(r,e,t,n){e.type===Vl.MERGE&&null!==e.source.queryId&&(ue(Td(r.viewCache_),"We should always have a full cache before handling merges"),ue(dv(r.viewCache_),"Missing event cache, even though we have a server cache"));const s=r.viewCache_,l=function hv(r,e,t,n,s){const l=new zx;let u,h;if(t.type===Vl.OVERWRITE){const E=t;E.source.fromUser?u=uT(r,e,E.path,E.snap,n,s,l):(ue(E.source.fromServer,"Unknown source."),h=E.source.tagged||e.serverCache.isFiltered()&&!Cr(E.path),u=fI(r,e,E.path,E.snap,n,s,h,l))}else if(t.type===Vl.MERGE){const E=t;E.source.fromUser?u=function AL(r,e,t,n,s,l,u){let h=e;return n.foreach((p,E)=>{const w=wo(t,p);fv(e,kr(w))&&(h=uT(r,h,w,E,s,l,u))}),n.foreach((p,E)=>{const w=wo(t,p);fv(e,kr(w))||(h=uT(r,h,w,E,s,l,u))}),h}(r,e,E.path,E.children,n,s,l):(ue(E.source.fromServer,"Unknown source."),h=E.source.tagged||e.serverCache.isFiltered(),u=pI(r,e,E.path,E.children,n,s,h,l))}else if(t.type===Vl.ACK_USER_WRITE){const E=t;u=E.revert?function TL(r,e,t,n,s,l){let u;if(null!=dI(n,t))return e;{const h=new hI(n,e,s),p=e.eventCache.getNode();let E;if(Cr(t)||".priority"===kr(t)){let w;if(e.serverCache.isFullyInitialized())w=cI(n,Td(e));else{const x=e.serverCache.getNode();ue(x instanceof Tr,"serverChildren would be complete if leaf node"),w=uI(n,x)}E=r.filter.updateFullNode(p,w,l)}else{const w=kr(t);let x=oT(n,w,e.serverCache);null==x&&e.serverCache.isCompleteForChild(w)&&(x=p.getImmediateChild(w)),E=null!=x?r.filter.updateChild(p,w,x,Mi(t),h,l):e.eventCache.getNode().hasChild(w)?r.filter.updateChild(p,w,Tr.EMPTY_NODE,Mi(t),h,l):p,E.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=cI(n,Td(e)),u.isLeafNode()&&(E=r.filter.updateFullNode(E,u,l)))}return u=e.serverCache.isFullyInitialized()||null!=dI(n,Zr()),uv(e,E,u,r.filter.filtersNodes())}}(r,e,E.path,n,s,l):function Wx(r,e,t,n,s,l,u){if(null!=dI(s,t))return e;const h=e.serverCache.isFiltered(),p=e.serverCache;if(null!=n.value){if(Cr(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return fI(r,e,t,p.getNode().getChild(t),s,l,h,u);if(Cr(t)){let E=new io(null);return p.getNode().forEachChild(hu,(w,x)=>{E=E.set(new Ii(w),x)}),pI(r,e,t,E,s,l,h,u)}return e}{let E=new io(null);return n.foreach((w,x)=>{const G=wo(t,w);p.isCompleteForPath(G)&&(E=E.set(w,p.getNode().getChild(G)))}),pI(r,e,t,E,s,l,h,u)}}(r,e,E.path,E.affectedTree,n,s,l)}else{if(t.type!==Vl.LISTEN_COMPLETE)throw Ke("Unknown operation type: "+t.type);u=function PU(r,e,t,n,s){const l=e.serverCache;return cT(r,fL(e,l.getNode(),l.isFullyInitialized()||Cr(t),l.isFiltered()),t,n,aT,s)}(r,e,t.path,n,l)}const p=l.getChanges();return function lT(r,e,t){const n=e.eventCache;if(n.isFullyInitialized()){const s=n.getNode().isLeafNode()||n.getNode().isEmpty(),l=dv(r);(t.length>0||!r.eventCache.isFullyInitialized()||s&&!n.getNode().equals(l)||!n.getNode().getPriority().equals(l.getPriority()))&&t.push(KA(dv(e)))}}(e,u,p),{viewCache:u,changes:p}}(r.processor_,s,e,t,n);return function CL(r,e){ue(e.eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),ue(e.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed")}(r.processor_,l.viewCache),ue(l.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),r.viewCache_=l.viewCache,Kx(r,l.changes,l.viewCache.eventCache.getNode(),null)}function Kx(r,e,t,n){return function Nx(r,e,t,n){const s=[],l=[];return e.forEach(u=>{"child_changed"===u.type&&r.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&l.push(function cL(r,e){return{type:"child_moved",snapshotNode:e,childName:r}}(u.childName,u.snapshotNode))}),rI(r,s,"child_removed",e,n,t),rI(r,s,"child_added",e,n,t),rI(r,s,"child_moved",l,n,t),rI(r,s,"child_changed",e,n,t),rI(r,s,"value",e,n,t),s}(r.eventGenerator_,e,t,n?[n]:r.eventRegistrations_)}let dT,mI;class ML{constructor(){this.views=new Map}}function Xx(r,e,t,n){const s=e.source.queryId;if(null!==s){const l=r.views.get(s);return ue(null!=l,"SyncTree gave us an op for an invalid query."),PL(l,e,t,n)}{let l=[];for(const u of r.views.values())l=l.concat(PL(u,e,t,n));return l}}function Qx(r,e,t,n,s){const u=r.views.get(e._queryIdentifier);if(!u){let h=cI(t,s?n:null),p=!1;h?p=!0:n instanceof Tr?(h=uI(t,n),p=!1):(h=Tr.EMPTY_NODE,p=!1);const E=iI(new Ul(h,p,!1),new Ul(n,s,!1));return new SL(e,E)}return u}function NL(r){const e=[];for(const t of r.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function lf(r,e){let t=null;for(const n of r.views.values())t=t||MU(n,e);return t}function Yx(r,e){return e._queryParams.loadsAllData()?gI(r):r.views.get(e._queryIdentifier)}function Jx(r,e){return null!=Yx(r,e)}function Sd(r){return null!=gI(r)}function gI(r){for(const e of r.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let FL=1;class Zx{constructor(e){this.listenProvider_=e,this.syncPointTree_=new io(null),this.pendingWriteTree_=function jx(){return{visibleWrites:Sc.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function eM(r,e,t,n,s){return function Lx(r,e,t,n,s){ue(n>r.lastWriteId,"Stacking an older write on top of newer ones"),void 0===s&&(s=!0),r.allWrites.push({path:e,snap:t,writeId:n,visible:s}),s&&(r.visibleWrites=sI(r.visibleWrites,e,t)),r.lastWriteId=n}(r.pendingWriteTree_,e,t,n,s),s?q(r,new Ac({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function i(r,e,t=!1){const n=function mL(r,e){for(let t=0;t<r.allWrites.length;t++){const n=r.allWrites[t];if(n.writeId===e)return n}return null}(r.pendingWriteTree_,e);if(function _L(r,e){const t=r.allWrites.findIndex(h=>h.writeId===e);ue(t>=0,"removeWrite called with nonexistent writeId.");const n=r.allWrites[t];r.allWrites.splice(t,1);let s=n.visible,l=!1,u=r.allWrites.length-1;for(;s&&u>=0;){const h=r.allWrites[u];h.visible&&(u>=t&&DU(h,n.path)?s=!1:cl(n.path,h.path)&&(l=!0)),u--}return!!s&&(l?(function Vx(r){r.visibleWrites=Bx(r.allWrites,Ux,Zr()),r.lastWriteId=r.allWrites.length>0?r.allWrites[r.allWrites.length-1].writeId:-1}(r),!0):(n.snap?r.visibleWrites=pL(r.visibleWrites,n.path):vs(n.children,p=>{r.visibleWrites=pL(r.visibleWrites,wo(n.path,p))}),!0))}(r.pendingWriteTree_,e)){let l=new io(null);return null!=n.snap?l=l.set(Zr(),!0):vs(n.children,u=>{l=l.set(new Ii(u),!0)}),q(r,new nI(n.path,l,t))}return[]}function o(r,e,t){return q(r,new Ac({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function f(r,e,t,n,s=!1){const l=e._path,u=r.syncPointTree_.get(l);let h=[];if(u&&("default"===e._queryIdentifier||Jx(u,e))){const p=function VU(r,e,t,n){const s=e._queryIdentifier,l=[];let u=[];const h=Sd(r);if("default"===s)for(const[p,E]of r.views.entries())u=u.concat(qx(E,t,n)),RL(E)&&(r.views.delete(p),E.query._queryParams.loadsAllData()||l.push(E.query));else{const p=r.views.get(s);p&&(u=u.concat(qx(p,t,n)),RL(p)&&(r.views.delete(s),p.query._queryParams.loadsAllData()||l.push(p.query)))}return h&&!Sd(r)&&l.push(new(function OU(){return ue(dT,"Reference.ts has not been loaded"),dT}())(e._repo,e._path)),{removed:l,events:u}}(u,e,t,n);(function FU(r){return 0===r.views.size})(u)&&(r.syncPointTree_=r.syncPointTree_.remove(l));const E=p.removed;if(h=p.events,!s){const w=-1!==E.findIndex(G=>G._queryParams.loadsAllData()),x=r.syncPointTree_.findOnPath(l,(G,ce)=>Sd(ce));if(w&&!x){const G=r.syncPointTree_.subtree(l);if(!G.isEmpty()){const ce=function Er(r){return r.fold((e,t,n)=>{if(t&&Sd(t))return[gI(t)];{let s=[];return t&&(s=NL(t)),vs(n,(l,u)=>{s=s.concat(u)}),s}})}(G);for(let De=0;De<ce.length;++De){const dt=ce[De],lt=dt.query,ln=Ce(r,dt);r.listenProvider_.startListening($r(lt),vt(r,lt),ln.hashFn,ln.onComplete)}}}!x&&E.length>0&&!n&&(w?r.listenProvider_.stopListening($r(e),null):E.forEach(G=>{const ce=r.queryToTagMap.get(jt(G));r.listenProvider_.stopListening($r(G),ce)}))}!function Ms(r,e){for(let t=0;t<e.length;++t){const n=e[t];if(!n._queryParams.loadsAllData()){const s=jt(n),l=r.queryToTagMap.get(s);r.queryToTagMap.delete(s),r.tagToQueryMap.delete(l)}}}(r,E)}return h}function m(r,e,t,n){const s=Zt(r,n);if(null!=s){const l=Mt(s),u=l.path,h=l.queryId,p=Ta(u,e);return Qn(r,u,new Ac(tI(h),p,t))}return[]}function A(r,e,t,n=!1){const s=e._path;let l=null,u=!1;r.syncPointTree_.foreachOnPath(s,(G,ce)=>{const De=Ta(G,s);l=l||lf(ce,De),u=u||Sd(ce)});let p,h=r.syncPointTree_.get(s);h?(u=u||Sd(h),l=l||lf(h,Zr())):(h=new ML,r.syncPointTree_=r.syncPointTree_.set(s,h)),null!=l?p=!0:(p=!1,l=Tr.EMPTY_NODE,r.syncPointTree_.subtree(s).foreachChild((ce,De)=>{const dt=lf(De,Zr());dt&&(l=l.updateImmediateChild(ce,dt))}));const E=Jx(h,e);if(!E&&!e._queryParams.loadsAllData()){const G=jt(e);ue(!r.queryToTagMap.has(G),"View does not exist, but we have a tag");const ce=function Ys(){return FL++}();r.queryToTagMap.set(G,ce),r.tagToQueryMap.set(ce,G)}let x=function LU(r,e,t,n,s,l){const u=Qx(r,e,n,s,l);return r.views.has(e._queryIdentifier)||r.views.set(e._queryIdentifier,u),function NU(r,e){r.eventRegistrations_.push(e)}(u,t),function xL(r,e){const t=r.viewCache_.eventCache,n=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(ai,(l,u)=>{n.push(tf(l,u))}),t.isFullyInitialized()&&n.push(KA(t.getNode())),Kx(r,n,t.getNode(),e)}(u,t)}(h,e,t,lI(r.pendingWriteTree_,s),l,p);if(!E&&!u&&!n){const G=Yx(h,e);x=x.concat(function Bl(r,e,t){const n=e._path,s=vt(r,e),l=Ce(r,t),u=r.listenProvider_.startListening($r(e),s,l.hashFn,l.onComplete),h=r.syncPointTree_.subtree(n);if(s)ue(!Sd(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((E,w,x)=>{if(!Cr(E)&&w&&Sd(w))return[gI(w).query];{let G=[];return w&&(G=G.concat(NL(w).map(ce=>ce.query))),vs(x,(ce,De)=>{G=G.concat(De)}),G}});for(let E=0;E<p.length;++E){const w=p[E];r.listenProvider_.stopListening($r(w),vt(r,w))}}return u}(r,e,G))}return x}function O(r,e,t){const s=r.pendingWriteTree_,l=r.syncPointTree_.findOnPath(e,(u,h)=>{const E=lf(h,Ta(u,e));if(E)return E});return rT(s,e,l,t,!0)}function q(r,e){return ge(e,r.syncPointTree_,null,lI(r.pendingWriteTree_,Zr()))}function ge(r,e,t,n){if(Cr(r.path))return Ae(r,e,t,n);{const s=e.get(Zr());null==t&&null!=s&&(t=lf(s,Zr()));let l=[];const u=kr(r.path),h=r.operationForChild(u),p=e.children.get(u);if(p&&h){const E=t?t.getImmediateChild(u):null,w=Hx(n,u);l=l.concat(ge(h,p,E,w))}return s&&(l=l.concat(Xx(s,r,n,t))),l}}function Ae(r,e,t,n){const s=e.get(Zr());null==t&&null!=s&&(t=lf(s,Zr()));let l=[];return e.children.inorderTraversal((u,h)=>{const p=t?t.getImmediateChild(u):null,E=Hx(n,u),w=r.operationForChild(u);w&&(l=l.concat(Ae(w,h,p,E)))}),s&&(l=l.concat(Xx(s,r,n,t))),l}function Ce(r,e){const t=e.query,n=vt(r,t);return{hashFn:()=>(function xU(r){return r.viewCache_.serverCache.getNode()}(e)||Tr.EMPTY_NODE).hash(),onComplete:s=>{if("ok"===s)return n?function d(r,e,t){const n=Zt(r,t);if(n){const s=Mt(n),l=s.path,u=s.queryId,h=Ta(l,e);return Qn(r,l,new vg(tI(u),h))}return[]}(r,t._path,n):function c(r,e){return q(r,new vg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(r,t._path);{const l=function uU(r,e){let t="Unknown Error";"too_big"===r?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===r?t="Client doesn't have permission to access the desired data.":"unavailable"===r&&(t="The service is unavailable");const n=new Error(r+" at "+e._path.toString()+": "+t);return n.code=r.toUpperCase(),n}(s,t);return f(r,t,null,l)}}}}function vt(r,e){const t=jt(e);return r.queryToTagMap.get(t)}function jt(r){return r._path.toString()+"$"+r._queryIdentifier}function Zt(r,e){return r.tagToQueryMap.get(e)}function Mt(r){const e=r.indexOf("$");return ue(-1!==e&&e<r.length-1,"Bad queryKey."),{queryId:r.substr(e+1),path:new Ii(r.substr(0,e))}}function Qn(r,e,t){const n=r.syncPointTree_.get(e);return ue(n,"Missing sync point for query tag that we're tracking"),Xx(n,t,lI(r.pendingWriteTree_,e),null)}function $r(r){return r._queryParams.loadsAllData()&&!r._queryParams.isDefault()?new(function OL(){return ue(mI,"Reference.ts has not been loaded"),mI}())(r._repo,r._path):r}class fu{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new fu(t)}node(){return this.node_}}class pv{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=wo(this.path_,e);return new pv(this.syncTree_,t)}node(){return O(this.syncTree_,this.path_)}}const LL=function(r){return(r=r||{}).timestamp=r.timestamp||(new Date).getTime(),r},tM=function(r,e,t){return r&&"object"==typeof r?(ue(".sv"in r,"Unexpected leaf node or priority contents"),"string"==typeof r[".sv"]?Y$(r[".sv"],e,t):"object"==typeof r[".sv"]?J$(r[".sv"],e):void ue(!1,"Unexpected server value: "+JSON.stringify(r,null,2))):r},Y$=function(r,e,t){if("timestamp"===r)return t.timestamp;ue(!1,"Unexpected server value: "+r)},J$=function(r,e,t){r.hasOwnProperty("increment")||ue(!1,"Unexpected server value: "+JSON.stringify(r,null,2));const n=r.increment;"number"!=typeof n&&ue(!1,"Unexpected increment value: "+n);const s=e.node();if(ue(null!==s&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return n;const u=s.getValue();return"number"!=typeof u?n:u+n},BU=function(r,e,t,n){return UL(e,new pv(t,r),n)},VL=function(r,e,t){return UL(r,new fu(e),t)};function UL(r,e,t){const n=r.getPriority().val(),s=tM(n,e.getImmediateChild(".priority"),t);let l;if(r.isLeafNode()){const u=r,h=tM(u.getValue(),e,t);return h!==u.getValue()||s!==u.getPriority().val()?new iv(h,Co(s)):r}{const u=r;return l=u,s!==u.getPriority().val()&&(l=l.updatePriority(new iv(s))),u.forEachChild(ai,(h,p)=>{const E=UL(p,e.getImmediateChild(h),t);E!==p&&(l=l.updateImmediateChild(h,E))}),l}}class BL{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function nM(r,e){let t=e instanceof Ii?e:new Ii(e),n=r,s=kr(t);for(;null!==s;){const l=yr(n.node.children,s)||{children:{},childCount:0};n=new BL(s,n,l),t=Mi(t),s=kr(t)}return n}function gv(r){return r.node.value}function $L(r,e){r.node.value=e,jL(r)}function $U(r){return r.node.childCount>0}function rM(r,e){vs(r.node.children,(t,n)=>{e(new BL(t,r,n))})}function jU(r,e,t,n){t&&!n&&e(r),rM(r,s=>{jU(s,e,!0,n)}),t&&n&&e(r)}function hT(r){return new Ii(null===r.parent?r.name:hT(r.parent)+"/"+r.name)}function jL(r){null!==r.parent&&function tj(r,e,t){const n=function Z$(r){return void 0===gv(r)&&!$U(r)}(t),s=pn(r.node.children,e);n&&s?(delete r.node.children[e],r.node.childCount--,jL(r)):!n&&!s&&(r.node.children[e]=t.node,r.node.childCount++,jL(r))}(r.parent,r.name,r)}const nj=/[\[\].#$\/\u0000-\u001F\u007F]/,rj=/[\[\].#$\u0000-\u001F\u007F]/,HL=10485760,iM=function(r){return"string"==typeof r&&0!==r.length&&!nj.test(r)},HU=function(r){return"string"==typeof r&&0!==r.length&&!rj.test(r)},fT=function(r){return null===r||"string"==typeof r||"number"==typeof r&&!J_(r)||r&&"object"==typeof r&&pn(r,".sv")},Dd=function(r,e,t,n){n&&void 0===e||pT(Kr(r,"value"),e,t)},pT=function(r,e,t){const n=t instanceof Ii?new _U(t,r):t;if(void 0===e)throw new Error(r+"contains undefined "+wd(n));if("function"==typeof e)throw new Error(r+"contains a function "+wd(n)+" with contents = "+e.toString());if(J_(e))throw new Error(r+"contains "+e.toString()+" "+wd(n));if("string"==typeof e&&e.length>HL/3&&gt(e)>HL)throw new Error(r+"contains a string greater than "+HL+" utf8 bytes "+wd(n)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let s=!1,l=!1;if(vs(e,(u,h)=>{if(".value"===u)s=!0;else if(".priority"!==u&&".sv"!==u&&(l=!0,!iM(u)))throw new Error(r+" contains an invalid key ("+u+") "+wd(n)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function vU(r,e){r.parts_.length>0&&(r.byteLength_+=1),r.parts_.push(e),r.byteLength_+=gt(e),YE(r)})(n,u),pT(r,h,n),function JF(r){const e=r.parts_.pop();r.byteLength_-=gt(e),r.parts_.length>0&&(r.byteLength_-=1)}(n)}),s&&l)throw new Error(r+' contains ".value" child '+wd(n)+" in addition to actual children.")}},zU=function(r,e,t,n){if(n&&void 0===e)return;const s=Kr(r,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const l=[];vs(e,(u,h)=>{const p=new Ii(u);if(pT(s,h,wo(t,p)),".priority"===kA(p)&&!fT(h))throw new Error(s+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(p)}),function(r,e){let t,n;for(t=0;t<e.length;t++){n=e[t];const l=Zh(n);for(let u=0;u<l.length;u++)if((".priority"!==l[u]||u!==l.length-1)&&!iM(l[u]))throw new Error(r+"contains an invalid key ("+l[u]+") in path "+n.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(YF);let s=null;for(t=0;t<e.length;t++){if(n=e[t],null!==s&&cl(s,n))throw new Error(r+"contains a path "+s.toString()+" that is ancestor of another path "+n.toString());s=n}}(s,l)},zL=function(r,e,t){if(!t||void 0!==e){if(J_(e))throw new Error(Kr(r,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!fT(e))throw new Error(Kr(r,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},gT=function(r,e,t,n){if(!(n&&void 0===t||iM(t)))throw new Error(Kr(r,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},mT=function(r,e,t,n){if(!(n&&void 0===t||HU(t)))throw new Error(Kr(r,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},sj=function(r,e,t,n){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),mT(r,e,t,n)},Dc=function(r,e){if(".info"===kr(e))throw new Error(r+" failed = Can't modify data under /.info/")},GU=function(r,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!iM(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(r){return r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),HU(r)}(t))throw new Error(Kr(r,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class aj{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function oM(r,e){let t=null;for(let n=0;n<e.length;n++){const s=e[n],l=s.getPath();null!==t&&!fg(l,t.path)&&(r.eventLists_.push(t),t=null),null===t&&(t={events:[],path:l}),t.events.push(s)}t&&r.eventLists_.push(t)}function WU(r,e,t){oM(r,t),qU(r,n=>fg(n,e))}function $l(r,e,t){oM(r,t),qU(r,n=>cl(n,e)||cl(e,n))}function qU(r,e){r.recursionDepth_++;let t=!0;for(let n=0;n<r.eventLists_.length;n++){const s=r.eventLists_[n];s&&(e(s.path)?(lj(r.eventLists_[n]),r.eventLists_[n]=null):t=!1)}t&&(r.eventLists_=[]),r.recursionDepth_--}function lj(r){for(let e=0;e<r.events.length;e++){const t=r.events[e];if(null!==t){r.events[e]=null;const n=t.getEventRunner();uu&&_s("event: "+t.toString()),Z_(n)}}}const KU="repo_interrupt",cj=25;class uj{constructor(e,t,n,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new aj,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=lv(),this.transactionQueueTree_=new BL,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function XU(r){const t=r.infoData_.getNode(new Ii(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function _T(r){return LL({timestamp:XU(r)})}function QU(r,e,t,n,s){r.dataUpdateCount++;const l=new Ii(e);t=r.interceptServerDataCallback_?r.interceptServerDataCallback_(e,t):t;let u=[];if(s)if(n){const p=bn(t,E=>Co(E));u=function I(r,e,t,n){const s=Zt(r,n);if(s){const l=Mt(s),u=l.path,h=l.queryId,p=Ta(u,e),E=io.fromObject(t);return Qn(r,u,new Tc(tI(h),p,E))}return[]}(r.serverSyncTree_,l,p,s)}else{const p=Co(t);u=m(r.serverSyncTree_,l,p,s)}else if(n){const p=bn(t,E=>Co(E));u=function a(r,e,t){const n=io.fromObject(t);return q(r,new Tc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}(r.serverSyncTree_,l,p)}else{const p=Co(t);u=o(r.serverSyncTree_,l,p)}let h=l;u.length>0&&(h=vI(r,l)),$l(r.eventQueue_,h,u)}function YU(r,e){GL(r,"connected",e),!1===e&&function gj(r){_I(r,"onDisconnectEvents");const e=_T(r),t=lv();Sx(r.onDisconnect_,Zr(),(s,l)=>{const u=BU(s,l,r.serverSyncTree_,e);cv(t,s,u)});let n=[];Sx(t,Zr(),(s,l)=>{n=n.concat(o(r.serverSyncTree_,s,l));const u=XL(r,s);vI(r,u)}),r.onDisconnect_=lv(),$l(r.eventQueue_,Zr(),n)}(r)}function GL(r,e,t){const n=new Ii("/.info/"+e),s=Co(t);r.infoData_.updateSnapshot(n,s);const l=o(r.infoSyncTree_,n,s);$l(r.eventQueue_,n,l)}function sM(r){return r.nextWriteId_++}function WL(r,e,t,n,s){_I(r,"set",{path:e.toString(),value:t,priority:n});const l=_T(r),u=Co(t,n),h=O(r.serverSyncTree_,e),p=VL(u,h,l),E=sM(r),w=eM(r.serverSyncTree_,e,p,E,!0);oM(r.eventQueue_,w),r.server_.put(e.toString(),u.val(!0),(G,ce)=>{const De="ok"===G;De||Qs("set at "+e+" failed: "+G);const dt=i(r.serverSyncTree_,E,!De);$l(r.eventQueue_,e,dt),Eg(0,s,G,ce)});const x=XL(r,e);vI(r,x),$l(r.eventQueue_,x,[])}function mj(r,e,t){r.server_.onDisconnectCancel(e.toString(),(n,s)=>{"ok"===n&&JA(r.onDisconnect_,e),Eg(0,t,n,s)})}function JU(r,e,t,n){const s=Co(t);r.server_.onDisconnectPut(e.toString(),s.val(!0),(l,u)=>{"ok"===l&&cv(r.onDisconnect_,e,s),Eg(0,n,l,u)})}function qL(r,e,t){let n;n=".info"===kr(e._path)?f(r.infoSyncTree_,e,t):f(r.serverSyncTree_,e,t),WU(r.eventQueue_,e._path,n)}function ZU(r){r.persistentConnection_&&r.persistentConnection_.interrupt(KU)}function _I(r,...e){let t="";r.persistentConnection_&&(t=r.persistentConnection_.id+":"),_s(t,...e)}function Eg(r,e,t,n){e&&Z_(()=>{if("ok"===t)e(null);else{const s=(t||"error").toUpperCase();let l=s;n&&(l+=": "+n);const u=new Error(l);u.code=s,e(u)}})}function KL(r,e,t){return O(r.serverSyncTree_,e,t)||Tr.EMPTY_NODE}function aM(r,e=r.transactionQueueTree_){if(e||lM(r,e),gv(e)){const t=tB(r,e);ue(t.length>0,"Sending zero length transaction queue"),t.every(s=>0===s.status)&&function bj(r,e,t){const n=t.map(E=>E.currentWriteId),s=KL(r,e,n);let l=s;const u=s.hash();for(let E=0;E<t.length;E++){const w=t[E];ue(0===w.status,"tryToSendTransactionQueue_: items in queue should all be run."),w.status=1,w.retryCount++;const x=Ta(e,w.path);l=l.updateChild(x,w.currentOutputSnapshotRaw)}const h=l.val(!0),p=e;r.server_.put(p.toString(),h,E=>{_I(r,"transaction put response",{path:p.toString(),status:E});let w=[];if("ok"===E){const x=[];for(let G=0;G<t.length;G++)t[G].status=2,w=w.concat(i(r.serverSyncTree_,t[G].currentWriteId)),t[G].onComplete&&x.push(()=>t[G].onComplete(null,!0,t[G].currentOutputSnapshotResolved)),t[G].unwatcher();lM(r,nM(r.transactionQueueTree_,e)),aM(r,r.transactionQueueTree_),$l(r.eventQueue_,e,w);for(let G=0;G<x.length;G++)Z_(x[G])}else{if("datastale"===E)for(let x=0;x<t.length;x++)t[x].status=3===t[x].status?4:0;else{Qs("transaction at "+p.toString()+" failed: "+E);for(let x=0;x<t.length;x++)t[x].status=4,t[x].abortReason=E}vI(r,e)}},u)}(r,hT(e),t)}else $U(e)&&rM(e,t=>{aM(r,t)})}function vI(r,e){const t=eB(r,e),n=hT(t);return function wj(r,e,t){if(0===e.length)return;const n=[];let s=[];const u=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const p=e[h],E=Ta(t,p.path);let x,w=!1;if(ue(null!==E,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)w=!0,x=p.abortReason,s=s.concat(i(r.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=cj)w=!0,x="maxretry",s=s.concat(i(r.serverSyncTree_,p.currentWriteId,!0));else{const G=KL(r,p.path,u);p.currentInputSnapshot=G;const ce=e[h].update(G.val());if(void 0!==ce){pT("transaction failed: Data returned ",ce,p.path);let De=Co(ce);"object"==typeof ce&&null!=ce&&pn(ce,".priority")||(De=De.updatePriority(G.getPriority()));const lt=p.currentWriteId,ln=_T(r),vn=VL(De,G,ln);p.currentOutputSnapshotRaw=De,p.currentOutputSnapshotResolved=vn,p.currentWriteId=sM(r),u.splice(u.indexOf(lt),1),s=s.concat(eM(r.serverSyncTree_,p.path,vn,p.currentWriteId,p.applyLocally)),s=s.concat(i(r.serverSyncTree_,lt,!0))}else w=!0,x="nodata",s=s.concat(i(r.serverSyncTree_,p.currentWriteId,!0))}$l(r.eventQueue_,t,s),s=[],w&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&n.push("nodata"===x?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(x),!1,null)))}lM(r,r.transactionQueueTree_);for(let h=0;h<n.length;h++)Z_(n[h]);aM(r,r.transactionQueueTree_)}(r,tB(r,t),n),n}function eB(r,e){let t,n=r.transactionQueueTree_;for(t=kr(e);null!==t&&void 0===gv(n);)n=nM(n,t),t=kr(e=Mi(e));return n}function tB(r,e){const t=[];return nB(r,e,t),t.sort((n,s)=>n.order-s.order),t}function nB(r,e,t){const n=gv(e);if(n)for(let s=0;s<n.length;s++)t.push(n[s]);rM(e,s=>{nB(r,s,t)})}function lM(r,e){const t=gv(e);if(t){let n=0;for(let s=0;s<t.length;s++)2!==t[s].status&&(t[n]=t[s],n++);t.length=n,$L(e,t.length>0?t:void 0)}rM(e,n=>{lM(r,n)})}function XL(r,e){const t=hT(eB(r,e)),n=nM(r.transactionQueueTree_,e);return function ej(r,e,t){let n=t?r:r.parent;for(;null!==n;){if(e(n))return!0;n=n.parent}}(n,s=>{QL(r,s)}),QL(r,n),jU(n,s=>{QL(r,s)}),t}function QL(r,e){const t=gv(e);if(t){const n=[];let s=[],l=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?(ue(l===u-1,"All SENT items should be at beginning of queue."),l=u,t[u].status=3,t[u].abortReason="set"):(ue(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),s=s.concat(i(r.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&n.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===l?$L(e,void 0):t.length=l+1,$l(r.eventQueue_,hT(e),s);for(let u=0;u<n.length;u++)Z_(n[u])}}const YL=function(r,e){const t=Tj(r),n=t.namespace;return"firebase.com"===t.domain&&Ol(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||"undefined"===n)&&"localhost"!==t.domain&&Ol("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Qs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new WE(t.host,t.secure,n,"ws"===t.scheme||"wss"===t.scheme,e,"",n!==t.subdomain),path:new Ii(t.pathString)}},Tj=function(r){let e="",t="",n="",s="",l="",u=!0,h="https",p=443;if("string"==typeof r){let E=r.indexOf("//");E>=0&&(h=r.substring(0,E-1),r=r.substring(E+2));let w=r.indexOf("/");-1===w&&(w=r.length);let x=r.indexOf("?");-1===x&&(x=r.length),e=r.substring(0,Math.min(w,x)),w<x&&(s=function Cj(r){let e="";const t=r.split("/");for(let n=0;n<t.length;n++)if(t[n].length>0){let s=t[n];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}(r.substring(w,x)));const G=function Aj(r){const e={};"?"===r.charAt(0)&&(r=r.substring(1));for(const t of r.split("&")){if(0===t.length)continue;const n=t.split("=");2===n.length?e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):Qs(`Invalid query segment '${t}' in query '${r}'`)}return e}(r.substring(Math.min(r.length,x)));E=e.indexOf(":"),E>=0?(u="https"===h||"wss"===h,p=parseInt(e.substring(E+1),10)):E=e.length;const ce=e.slice(0,E);if("localhost"===ce.toLowerCase())t="localhost";else if(ce.split(".").length<=2)t=ce;else{const De=e.indexOf(".");n=e.substring(0,De).toLowerCase(),t=e.substring(De+1),l=n}"ns"in G&&(l=G.ns)}return{host:e,port:p,domain:t,subdomain:n,secure:u,scheme:h,pathString:s,namespace:l}},rB="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Sj=function(){let r=0;const e=[];return function(t){const n=t===r;let s;r=t;const l=new Array(8);for(s=7;s>=0;s--)l[s]=rB.charAt(t%64),t=Math.floor(t/64);ue(0===t,"Cannot push at time == 0");let u=l.join("");if(n){for(s=11;s>=0&&63===e[s];s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(64*Math.random());for(s=0;s<12;s++)u+=rB.charAt(e[s]);return ue(20===u.length,"nextPushId: Length should be 20."),u}}();class iB{constructor(e,t,n,s){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=s}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Kt(this.snapshot.exportVal())}}class oB{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class JL{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return ue(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class sB{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new Pt;return mj(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Dc("OnDisconnect.remove",this._path);const e=new Pt;return JU(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Dc("OnDisconnect.set",this._path),Dd("OnDisconnect.set",e,this._path,!1);const t=new Pt;return JU(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Dc("OnDisconnect.setWithPriority",this._path),Dd("OnDisconnect.setWithPriority",e,this._path,!1),zL("OnDisconnect.setWithPriority",t,!1);const n=new Pt;return function _j(r,e,t,n,s){const l=Co(t,n);r.server_.onDisconnectPut(e.toString(),l.val(!0),(u,h)=>{"ok"===u&&cv(r.onDisconnect_,e,l),Eg(0,s,u,h)})}(this._repo,this._path,e,t,n.wrapCallback(()=>{})),n.promise}update(e){Dc("OnDisconnect.update",this._path),zU("OnDisconnect.update",e,this._path,!1);const t=new Pt;return function vj(r,e,t,n){if(Zn(t))return _s("onDisconnect().update() called with empty data.  Don't do anything."),void Eg(0,n,"ok",void 0);r.server_.onDisconnectMerge(e.toString(),t,(s,l)=>{"ok"===s&&vs(t,(u,h)=>{const p=Co(h);cv(r.onDisconnect_,wo(e,u),p)}),Eg(0,n,s,l)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class ul{constructor(e,t,n,s){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=s}get key(){return Cr(this._path)?null:kA(this._path)}get ref(){return new Rc(this._repo,this._path)}get _queryIdentifier(){const e=_g(this._queryParams),t=HE(e);return"{}"===t?"default":t}get _queryObject(){return _g(this._queryParams)}isEqual(e){if(!((e=Xt(e))instanceof ul))return!1;const t=this._repo===e._repo,n=fg(this._path,e._path);return t&&n&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Ex(r){let e="";for(let t=r.pieceNum_;t<r.pieces_.length;t++)""!==r.pieces_[t]&&(e+="/"+encodeURIComponent(String(r.pieces_[t])));return e||"/"}(this._path)}}function cM(r,e){if(!0===r._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ig(r){let e=null,t=null;if(r.hasStart()&&(e=r.getIndexStartValue()),r.hasEnd()&&(t=r.getIndexEndValue()),r.getIndex()===hu){const n="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(r.hasStart()){if(r.getIndexStartName()!==bd)throw new Error(n);if("string"!=typeof e)throw new Error(s)}if(r.hasEnd()){if(r.getIndexEndName()!==bc)throw new Error(n);if("string"!=typeof t)throw new Error(s)}}else if(r.getIndex()===ai){if(null!=e&&!fT(e)||null!=t&&!fT(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(ue(r.getIndex()instanceof WA||r.getIndex()===qA,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function uM(r){if(r.hasStart()&&r.hasEnd()&&r.hasLimit()&&!r.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Rc extends ul{constructor(e,t){super(e,t,new av,!1)}get parent(){const e=OA(this._path);return null===e?null:new Rc(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class mv{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Ii(e),n=_v(this.ref,e);return new mv(this._node.getChild(t),n,ai)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(n,s)=>e(new mv(s,_v(this.ref,n),ai)))}hasChild(e){const t=new Ii(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function aB(r,e){return(r=Xt(r))._checkNotDeleted("ref"),void 0!==e?_v(r._root,e):r._root}function lB(r,e){(r=Xt(r))._checkNotDeleted("refFromURL");const t=YL(e,r._repo.repoInfo_.nodeAdmin);GU("refFromURL",t);const n=t.repoInfo;return!r._repo.repoInfo_.isCustomHost()&&n.host!==r._repo.repoInfo_.host&&Ol("refFromURL: Host name does not match the current database: (found "+n.host+" but expected "+r._repo.repoInfo_.host+")"),aB(r,t.path.toString())}function _v(r,e){return null===kr((r=Xt(r))._path)?sj("child","path",e,!1):mT("child","path",e,!1),new Rc(r._repo,wo(r._path,e))}function ZL(r,e){r=Xt(r),Dc("set",r._path),Dd("set",e,r._path,!1);const t=new Pt;return WL(r._repo,r._path,e,null,t.wrapCallback(()=>{})),t.promise}function Mj(r,e){zU("update",e,r._path,!1);const t=new Pt;return function pj(r,e,t,n){_I(r,"update",{path:e.toString(),value:t});let s=!0;const l=_T(r),u={};if(vs(t,(h,p)=>{s=!1,u[h]=BU(wo(e,h),Co(p),r.serverSyncTree_,l)}),s)_s("update() called with empty data.  Don't do anything."),Eg(0,n,"ok",void 0);else{const h=sM(r),p=function UU(r,e,t,n){!function SU(r,e,t,n){ue(n>r.lastWriteId,"Stacking an older merge on top of newer ones"),r.allWrites.push({path:e,children:t,writeId:n,visible:!0}),r.visibleWrites=nT(r.visibleWrites,e,t),r.lastWriteId=n}(r.pendingWriteTree_,e,t,n);const s=io.fromObject(t);return q(r,new Tc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,s))}(r.serverSyncTree_,e,u,h);oM(r.eventQueue_,p),r.server_.merge(e.toString(),t,(E,w)=>{const x="ok"===E;x||Qs("update at "+e+" failed: "+E);const G=i(r.serverSyncTree_,h,!x),ce=G.length>0?vI(r,e):e;$l(r.eventQueue_,ce,G),Eg(0,n,E,w)}),vs(t,E=>{const w=XL(r,wo(e,E));vI(r,w)}),$l(r.eventQueue_,e,[])}}(r._repo,r._path,e,t.wrapCallback(()=>{})),t.promise}function Nj(r){r=Xt(r);const e=new JL(()=>{}),t=new vT(e);return function fj(r,e,t){const n=function $(r,e){const t=e._path;let n=null;r.syncPointTree_.foreachOnPath(t,(E,w)=>{const x=Ta(E,t);n=n||lf(w,x)});let s=r.syncPointTree_.get(t);s?n=n||lf(s,Zr()):(s=new ML,r.syncPointTree_=r.syncPointTree_.set(t,s));const l=null!=n,u=l?new Ul(n,!0,!1):null;return function DL(r){return dv(r.viewCache_)}(Qx(s,e,lI(r.pendingWriteTree_,e._path),l?u.getNode():Tr.EMPTY_NODE,l))}(r.serverSyncTree_,e);return null!=n?Promise.resolve(n):r.server_.get(e).then(s=>{const l=Co(s).withIndex(e._queryParams.getIndex());let u;if(A(r.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())u=o(r.serverSyncTree_,e._path,l);else{const h=vt(r.serverSyncTree_,e);u=m(r.serverSyncTree_,e._path,l,h)}return $l(r.eventQueue_,e._path,u),f(r.serverSyncTree_,e,t,null,!0),l},s=>(_I(r,"get for query "+Kt(e)+" failed: "+s),Promise.reject(new Error(s))))}(r._repo,r,t).then(n=>new mv(n,new Rc(r._repo,r._path),r._queryParams.getIndex()))}class vT{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new iB("value",this,new mv(e.snapshotNode,new Rc(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new oB(this,e,t):null}matches(e){return e instanceof vT&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class dM{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new oB(this,e,t):null}createEvent(e,t){ue(null!=e.childName,"Child events should have a childName.");const n=_v(new Rc(t._repo,t._path),e.childName),s=t._queryParams.getIndex();return new iB(e.type,this,new mv(e.snapshotNode,n,s),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof dM&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function yT(r,e,t,n,s){let l;if("object"==typeof n&&(l=void 0,s=n),"function"==typeof n&&(l=n),s&&s.onlyOnce){const p=t,E=(w,x)=>{qL(r._repo,r,h),p(w,x)};E.userCallback=t.userCallback,E.context=t.context,t=E}const u=new JL(t,l||void 0),h="value"===e?new vT(u):new dM(e,u);return function yj(r,e,t){let n;n=".info"===kr(e._path)?A(r.infoSyncTree_,e,t):A(r.serverSyncTree_,e,t),WU(r.eventQueue_,e._path,n)}(r._repo,r,h),()=>qL(r._repo,r,h)}function eV(r,e,t,n){return yT(r,"value",e,t,n)}function cB(r,e,t,n){return yT(r,"child_added",e,t,n)}function uB(r,e,t,n){return yT(r,"child_changed",e,t,n)}function dB(r,e,t,n){return yT(r,"child_moved",e,t,n)}function hB(r,e,t,n){return yT(r,"child_removed",e,t,n)}function fB(r,e,t){let n=null;const s=t?new JL(t):null;"value"===e?n=new vT(s):e&&(n=new dM(e,s)),qL(r._repo,r,n)}class pu{}class pB extends pu{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){Dd("endAt",this._value,e._path,!0);const t=QA(e._queryParams,this._value,this._key);if(uM(t),Ig(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ul(e._repo,e._path,t,e._orderByCalled)}}class Oj extends pu{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){Dd("endBefore",this._value,e._path,!1);const t=function hL(r,e,t){let n;return n=QA(r,e,r.index_===hu||t?t:bd),n.endBeforeSet_=!0,n}(e._queryParams,this._value,this._key);if(uM(t),Ig(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ul(e._repo,e._path,t,e._orderByCalled)}}class gB extends pu{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){Dd("startAt",this._value,e._path,!0);const t=Tx(e._queryParams,this._value,this._key);if(uM(t),Ig(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ul(e._repo,e._path,t,e._orderByCalled)}}class Vj extends pu{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){Dd("startAfter",this._value,e._path,!1);const t=function wU(r,e,t){let n;return n=Tx(r,e,r.index_===hu||t?t:bc),n.startAfterSet_=!0,n}(e._queryParams,this._value,this._key);if(uM(t),Ig(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ul(e._repo,e._path,t,e._orderByCalled)}}class Bj extends pu{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ul(e._repo,e._path,function uL(r,e){const t=r.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class jj extends pu{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ul(e._repo,e._path,function dL(r,e){const t=r.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class zj extends pu{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){cM(e,"orderByChild");const t=new Ii(this._path);if(Cr(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new WA(t),s=YA(e._queryParams,n);return Ig(s),new ul(e._repo,e._path,s,!0)}}class Wj extends pu{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){cM(e,"orderByKey");const t=YA(e._queryParams,hu);return Ig(t),new ul(e._repo,e._path,t,!0)}}class Kj extends pu{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){cM(e,"orderByPriority");const t=YA(e._queryParams,ai);return Ig(t),new ul(e._repo,e._path,t,!0)}}class Qj extends pu{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){cM(e,"orderByValue");const t=YA(e._queryParams,qA);return Ig(t),new ul(e._repo,e._path,t,!0)}}class Jj extends pu{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(Dd("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new pB(this._value,this._key)._apply(new gB(this._value,this._key)._apply(e))}}function gu(r,...e){let t=Xt(r);for(const n of e)t=n._apply(t);return t}(function kU(r){ue(!dT,"__referenceConstructor has already been defined"),dT=r})(Rc),function kL(r){ue(!mI,"__referenceConstructor has already been defined"),mI=r}(Rc);const tV={};function nV(r,e,t,n,s){let l=n||r.options.databaseURL;void 0===l&&(r.options.projectId||Ol("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_s("Using default host for project ",r.options.projectId),l=`${r.options.projectId}-default-rtdb.firebaseio.com`);let p,E,u=YL(l,s),h=u.repoInfo;typeof process<"u"&&process.env&&(E=process.env.FIREBASE_DATABASE_EMULATOR_HOST),E?(p=!0,l=`http://${E}?ns=${h.namespace}`,u=YL(l,s),h=u.repoInfo):p=!u.repoInfo.secure;const w=s&&p?new GE(GE.OWNER):new gU(r.name,r.options,e);GU("Invalid Firebase Database URL",u),Cr(u.path)||Ol("Database URL must point to the root of a Firebase Database (not including a child path).");const x=function r4(r,e,t,n){let s=tV[e.name];s||(s={},tV[e.name]=s);let l=s[r.toURLString()];return l&&Ol("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new uj(r,false,t,n),s[r.toURLString()]=l,l}(h,r,w,new Y1(r.name,t));return new o4(x,r)}class o4{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function dj(r,e,t){if(r.stats_=AA(r.repoInfo_),r.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)r.server_=new rf(r.repoInfo_,(n,s,l,u)=>{QU(r,n,s,l,u)},r.authTokenProvider_,r.appCheckProvider_),setTimeout(()=>YU(r,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Kt(t)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}r.persistentConnection_=new ef(r.repoInfo_,e,(n,s,l,u)=>{QU(r,n,s,l,u)},n=>{YU(r,n)},n=>{!function hj(r,e){vs(e,(t,n)=>{GL(r,t,n)})}(r,n)},r.authTokenProvider_,r.appCheckProvider_,t),r.server_=r.persistentConnection_}r.authTokenProvider_.addTokenChangeListener(n=>{r.server_.refreshAuthToken(n)}),r.appCheckProvider_.addTokenChangeListener(n=>{r.server_.refreshAppCheckToken(n.token)}),r.statsReporter_=function VF(r,e){const t=r.toString();return CA[t]||(CA[t]=e()),CA[t]}(r.repoInfo_,()=>new xx(r.stats_,r.server_)),r.infoData_=new eI,r.infoSyncTree_=new Zx({startListening:(n,s,l,u)=>{let h=[];const p=r.infoData_.getNode(n._path);return p.isEmpty()||(h=o(r.infoSyncTree_,n._path,p),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),GL(r,"connected",!1),r.serverSyncTree_=new Zx({startListening:(n,s,l,u)=>(r.server_.listen(n,l,s,(h,p)=>{const E=u(h,p);$l(r.eventQueue_,n._path,E)}),[]),stopListening:(n,s)=>{r.server_.unlisten(n,s)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Rc(this._repo,Zr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function n4(r,e){const t=tV[e];(!t||t[r.key]!==r)&&Ol(`Database ${e}(${r.repoInfo_}) has already been deleted.`),ZU(r),delete t[r.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ol("Cannot call "+e+" on a deleted database.")}}function _B(){KE.IS_TRANSPORT_INITIALIZED&&Qs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function s4(){_B(),du.forceDisallow()}function a4(){_B(),Yh.forceDisallow(),du.forceAllow()}function u4(r,e){W1(r,e)}const h4={".sv":"timestamp"};class g4{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}ef.prototype.simpleListen=function(r,e){this.sendRequest("q",{p:r},e)},ef.prototype.echo=function(r,e){this.sendRequest("echo",{d:r},e)},function d4(r){vA(en),Nt(new er("database",(e,{instanceIdentifier:t})=>nV(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),Hr(z1,"1.0.7",r),Hr(z1,"1.0.7","esm2017")}();const y4=new gi("@firebase/database-compat"),yB=function(r){y4.warn("FIREBASE WARNING: "+r)};class b4{constructor(e){this._delegate=e}cancel(e){Dn("OnDisconnect.cancel",0,1,arguments.length),Fr("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),n=>e(n)),t}remove(e){Dn("OnDisconnect.remove",0,1,arguments.length),Fr("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),n=>e(n)),t}set(e,t){Dn("OnDisconnect.set",1,2,arguments.length),Fr("OnDisconnect.set","onComplete",t,!0);const n=this._delegate.set(e);return t&&n.then(()=>t(null),s=>t(s)),n}setWithPriority(e,t,n){Dn("OnDisconnect.setWithPriority",2,3,arguments.length),Fr("OnDisconnect.setWithPriority","onComplete",n,!0);const s=this._delegate.setWithPriority(e,t);return n&&s.then(()=>n(null),l=>n(l)),s}update(e,t){if(Dn("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const s={};for(let l=0;l<e.length;++l)s[""+l]=e[l];e=s,yB("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Fr("OnDisconnect.update","onComplete",t,!0);const n=this._delegate.update(e);return t&&n.then(()=>t(null),s=>t(s)),n}}class w4{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return Dn("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class bg{constructor(e,t){this._database=e,this._delegate=t}val(){return Dn("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return Dn("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return Dn("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return Dn("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return Dn("DataSnapshot.child",0,1,arguments.length),e=String(e),mT("DataSnapshot.child","path",e,!1),new bg(this._database,this._delegate.child(e))}hasChild(e){return Dn("DataSnapshot.hasChild",1,1,arguments.length),mT("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return Dn("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return Dn("DataSnapshot.forEach",1,1,arguments.length),Fr("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new bg(this._database,t)))}hasChildren(){return Dn("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return Dn("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return Dn("DataSnapshot.ref",0,0,arguments.length),new jl(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ua{constructor(e,t){this.database=e,this._delegate=t}on(e,t,n,s){var l;Dn("Query.on",2,4,arguments.length),Fr("Query.on","callback",t,!1);const u=ua.getCancelAndContextArgs_("Query.on",n,s),h=(E,w)=>{t.call(u.context,new bg(this.database,E),w)};h.userCallback=t,h.context=u.context;const p=null===(l=u.cancel)||void 0===l?void 0:l.bind(u.context);switch(e){case"value":return eV(this._delegate,h,p),t;case"child_added":return cB(this._delegate,h,p),t;case"child_removed":return hB(this._delegate,h,p),t;case"child_changed":return uB(this._delegate,h,p),t;case"child_moved":return dB(this._delegate,h,p),t;default:throw new Error(Kr("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,n){if(Dn("Query.off",0,3,arguments.length),function(r,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Kr("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),Fr("Query.off","callback",t,!0),wi("Query.off","context",n,!0),t){const s=()=>{};s.userCallback=t,s.context=n,fB(this._delegate,e,s)}else fB(this._delegate,e)}get(){return Nj(this._delegate).then(e=>new bg(this.database,e))}once(e,t,n,s){Dn("Query.once",1,4,arguments.length),Fr("Query.once","callback",t,!0);const l=ua.getCancelAndContextArgs_("Query.once",n,s),u=new Pt,h=(E,w)=>{const x=new bg(this.database,E);t&&t.call(l.context,x,w),u.resolve(x)};h.userCallback=t,h.context=l.context;const p=E=>{l.cancel&&l.cancel.call(l.context,E),u.reject(E)};switch(e){case"value":eV(this._delegate,h,p,{onlyOnce:!0});break;case"child_added":cB(this._delegate,h,p,{onlyOnce:!0});break;case"child_removed":hB(this._delegate,h,p,{onlyOnce:!0});break;case"child_changed":uB(this._delegate,h,p,{onlyOnce:!0});break;case"child_moved":dB(this._delegate,h,p,{onlyOnce:!0});break;default:throw new Error(Kr("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return Dn("Query.limitToFirst",1,1,arguments.length),new ua(this.database,gu(this._delegate,function $j(r){if("number"!=typeof r||Math.floor(r)!==r||r<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Bj(r)}(e)))}limitToLast(e){return Dn("Query.limitToLast",1,1,arguments.length),new ua(this.database,gu(this._delegate,function Hj(r){if("number"!=typeof r||Math.floor(r)!==r||r<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new jj(r)}(e)))}orderByChild(e){return Dn("Query.orderByChild",1,1,arguments.length),new ua(this.database,gu(this._delegate,function Gj(r){if("$key"===r)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===r)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===r)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return mT("orderByChild","path",r,!1),new zj(r)}(e)))}orderByKey(){return Dn("Query.orderByKey",0,0,arguments.length),new ua(this.database,gu(this._delegate,function qj(){return new Wj}()))}orderByPriority(){return Dn("Query.orderByPriority",0,0,arguments.length),new ua(this.database,gu(this._delegate,function Xj(){return new Kj}()))}orderByValue(){return Dn("Query.orderByValue",0,0,arguments.length),new ua(this.database,gu(this._delegate,function Yj(){return new Qj}()))}startAt(e=null,t){return Dn("Query.startAt",0,2,arguments.length),new ua(this.database,gu(this._delegate,function Lj(r=null,e){return gT("startAt","key",e,!0),new gB(r,e)}(e,t)))}startAfter(e=null,t){return Dn("Query.startAfter",0,2,arguments.length),new ua(this.database,gu(this._delegate,function Uj(r,e){return gT("startAfter","key",e,!0),new Vj(r,e)}(e,t)))}endAt(e=null,t){return Dn("Query.endAt",0,2,arguments.length),new ua(this.database,gu(this._delegate,function kj(r,e){return gT("endAt","key",e,!0),new pB(r,e)}(e,t)))}endBefore(e=null,t){return Dn("Query.endBefore",0,2,arguments.length),new ua(this.database,gu(this._delegate,function Fj(r,e){return gT("endBefore","key",e,!0),new Oj(r,e)}(e,t)))}equalTo(e,t){return Dn("Query.equalTo",1,2,arguments.length),new ua(this.database,gu(this._delegate,function Zj(r,e){return gT("equalTo","key",e,!0),new Jj(r,e)}(e,t)))}toString(){return Dn("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return Dn("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(Dn("Query.isEqual",1,1,arguments.length),!(e instanceof ua))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,n){const s={cancel:void 0,context:void 0};if(t&&n)s.cancel=t,Fr(e,"cancel",s.cancel,!0),s.context=n,wi(e,"context",s.context,!0);else if(t)if("object"==typeof t&&null!==t)s.context=t;else{if("function"!=typeof t)throw new Error(Kr(e,"cancelOrContext")+" must either be a cancel callback or a context object.");s.cancel=t}return s}get ref(){return new jl(this.database,new Rc(this._delegate._repo,this._delegate._path))}}class jl extends ua{constructor(e,t){super(e,new ul(t._repo,t._path,new av,!1)),this.database=e,this._delegate=t}getKey(){return Dn("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return Dn("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new jl(this.database,_v(this._delegate,e))}getParent(){Dn("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new jl(this.database,e):null}getRoot(){return Dn("Reference.root",0,0,arguments.length),new jl(this.database,this._delegate.root)}set(e,t){Dn("Reference.set",1,2,arguments.length),Fr("Reference.set","onComplete",t,!0);const n=ZL(this._delegate,e);return t&&n.then(()=>t(null),s=>t(s)),n}update(e,t){if(Dn("Reference.update",1,2,arguments.length),Array.isArray(e)){const s={};for(let l=0;l<e.length;++l)s[""+l]=e[l];e=s,yB("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Dc("Reference.update",this._delegate._path),Fr("Reference.update","onComplete",t,!0);const n=Mj(this._delegate,e);return t&&n.then(()=>t(null),s=>t(s)),n}setWithPriority(e,t,n){Dn("Reference.setWithPriority",2,3,arguments.length),Fr("Reference.setWithPriority","onComplete",n,!0);const s=function xj(r,e,t){if(Dc("setWithPriority",r._path),Dd("setWithPriority",e,r._path,!1),zL("setWithPriority",t,!1),".length"===r.key||".keys"===r.key)throw"setWithPriority failed: "+r.key+" is a read-only object.";const n=new Pt;return WL(r._repo,r._path,e,t,n.wrapCallback(()=>{})),n.promise}(this._delegate,e,t);return n&&s.then(()=>n(null),l=>n(l)),s}remove(e){Dn("Reference.remove",0,1,arguments.length),Fr("Reference.remove","onComplete",e,!0);const t=function Rj(r){return Dc("remove",r._path),ZL(r,null)}(this._delegate);return e&&t.then(()=>e(null),n=>e(n)),t}transaction(e,t,n){Dn("Reference.transaction",1,3,arguments.length),Fr("Reference.transaction","transactionUpdate",e,!1),Fr("Reference.transaction","onComplete",t,!0),function(r,e,t,n){if(void 0!==t&&"boolean"!=typeof t)throw new Error(Kr("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,n);const s=function m4(r,e,t){var n;if(r=Xt(r),Dc("Reference.transaction",r._path),".length"===r.key||".keys"===r.key)throw"Reference.transaction failed: "+r.key+" is a read-only object.";const s=null===(n=null==t?void 0:t.applyLocally)||void 0===n||n,l=new Pt,h=eV(r,()=>{});return function Ij(r,e,t,n,s,l){_I(r,"transaction on "+e);const u={path:e,update:t,onComplete:n,status:null,order:Xh(),applyLocally:l,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=KL(r,e,void 0);u.currentInputSnapshot=h;const p=u.update(h.val());if(void 0===p)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{pT("transaction failed: Data returned ",p,u.path),u.status=0;const E=nM(r.transactionQueueTree_,e),w=gv(E)||[];let x;w.push(u),$L(E,w),"object"==typeof p&&null!==p&&pn(p,".priority")?(x=yr(p,".priority"),ue(fT(x),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):x=(O(r.serverSyncTree_,e)||Tr.EMPTY_NODE).getPriority().val();const G=_T(r),ce=Co(p,x),De=VL(ce,h,G);u.currentOutputSnapshotRaw=ce,u.currentOutputSnapshotResolved=De,u.currentWriteId=sM(r);const dt=eM(r.serverSyncTree_,e,De,u.currentWriteId,u.applyLocally);$l(r.eventQueue_,e,dt),aM(r,r.transactionQueueTree_)}}(r._repo,r._path,e,(p,E,w)=>{let x=null;p?l.reject(p):(x=new mv(w,new Rc(r._repo,r._path),ai),l.resolve(new g4(E,x)))},h,s),l.promise}(this._delegate,e,{applyLocally:n}).then(l=>new w4(l.committed,new bg(this.database,l.snapshot)));return t&&s.then(l=>t(null,l.committed,l.snapshot),l=>t(l,!1,null)),s}setPriority(e,t){Dn("Reference.setPriority",1,2,arguments.length),Fr("Reference.setPriority","onComplete",t,!0);const n=function Pj(r,e){r=Xt(r),Dc("setPriority",r._path),zL("setPriority",e,!1);const t=new Pt;return WL(r._repo,wo(r._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&n.then(()=>t(null),s=>t(s)),n}push(e,t){Dn("Reference.push",0,2,arguments.length),Fr("Reference.push","onComplete",t,!0);const n=function Dj(r,e){r=Xt(r),Dc("push",r._path),Dd("push",e,r._path,!0);const t=XU(r._repo),n=Sj(t),s=_v(r,n),l=_v(r,n);let u;return u=null!=e?ZL(l,e).then(()=>l):Promise.resolve(l),s.then=u.then.bind(u),s.catch=u.then.bind(u,void 0),s}(this._delegate,e),s=n.then(u=>new jl(this.database,u));t&&s.then(()=>t(null),u=>t(u));const l=new jl(this.database,n);return l.then=s.then.bind(s),l.catch=s.catch.bind(s,void 0),l}onDisconnect(){return Dc("Reference.onDisconnect",this._delegate._path),new b4(new sB(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class ET{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:s4,forceLongPolling:a4}}useEmulator(e,t,n={}){!function vB(r,e,t,n={}){(r=Xt(r))._checkNotDeleted("useEmulator"),r._instanceStarted&&Ol("Cannot call useEmulator() after instance has already been initialized.");const s=r._repoInternal;let l;if(s.repoInfo_.nodeAdmin)n.mockUserToken&&Ol('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new GE(GE.OWNER);else if(n.mockUserToken){const u="string"==typeof n.mockUserToken?n.mockUserToken:Ut(n.mockUserToken,r.app.options.projectId);l=new GE(u)}!function t4(r,e,t,n){r.repoInfo_=new WE(`${e}:${t}`,!1,r.repoInfo_.namespace,r.repoInfo_.webSocketOnly,r.repoInfo_.nodeAdmin,r.repoInfo_.persistenceKey,r.repoInfo_.includeNamespaceInQueryParams,!0),n&&(r.authTokenProvider_=n)}(s,e,t,l)}(this._delegate,e,t,n)}ref(e){if(Dn("database.ref",0,1,arguments.length),e instanceof jl){const t=lB(this._delegate,e.toString());return new jl(this,t)}{const t=aB(this._delegate,e);return new jl(this,t)}}refFromURL(e){Dn("database.refFromURL",1,1,arguments.length);const n=lB(this._delegate,e);return new jl(this,n)}goOffline(){return Dn("database.goOffline",0,0,arguments.length),function l4(r){(r=Xt(r))._checkNotDeleted("goOffline"),ZU(r._repo)}(this._delegate)}goOnline(){return Dn("database.goOnline",0,0,arguments.length),function c4(r){(r=Xt(r))._checkNotDeleted("goOnline"),function Ej(r){r.persistentConnection_&&r.persistentConnection_.resume(KU)}(r._repo)}(this._delegate)}}ET.ServerValue={TIMESTAMP:function f4(){return h4}(),increment:r=>function p4(r){return{".sv":{increment:r}}}(r)};var A4=Object.freeze({__proto__:null,initStandalone:function C4({app:r,url:e,version:t,customAuthImpl:n,customAppCheckImpl:s,namespace:l,nodeAdmin:u=!1}){vA(t);const h=new fo("database-standalone"),p=new pi("auth-internal",h);let E;return p.setComponent(new er("auth-internal",()=>n,"PRIVATE")),s&&(E=new pi("app-check-internal",h),E.setComponent(new er("app-check-internal",()=>s,"PRIVATE"))),{instance:new ET(nV(r,p,E,e,u),r),namespace:l}}});const T4=ET.ServerValue;!function S4(r){r.INTERNAL.registerComponent(new er("database-compat",(e,{instanceIdentifier:t})=>{const n=e.getProvider("app-compat").getImmediate(),s=e.getProvider("database").getImmediate({identifier:t});return new ET(s,n)},"PUBLIC").setServiceProps({Reference:jl,Query:ua,Database:ET,DataSnapshot:bg,enableLogging:u4,INTERNAL:A4,ServerValue:T4}).setMultipleInstances(!0)),r.registerVersion("@firebase/database-compat","1.0.7")}(B);class rV extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class R4 extends rV{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class P4 extends rV{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class x4 extends rV{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var EB=function(r){return r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2",r}(EB||{});class N4{constructor(e,{headers:t={},customFetch:n,region:s=EB.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=(r=>{let e;return e=r||(typeof fetch>"u"?(...t)=>Promise.resolve().then(W.bind(W,5286)).then(({default:n})=>n(...t)):fetch),(...t)=>e(...t)})(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return function(r,e,t,n){return new(t||(t=Promise))(function(l,u){function h(w){try{E(n.next(w))}catch(x){u(x)}}function p(w){try{E(n.throw(w))}catch(x){u(x)}}function E(w){w.done?l(w.value):function s(l){return l instanceof t?l:new t(function(u){u(l)})}(w.value).then(h,p)}E((n=n.apply(r,e||[])).next())})}(this,void 0,void 0,function*(){try{const{headers:s,method:l,body:u}=t;let E,h={},{region:p}=t;p||(p=this.region),p&&"any"!==p&&(h["x-region"]=p),u&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",E=u):"string"==typeof u?(h["Content-Type"]="text/plain",E=u):typeof FormData<"u"&&u instanceof FormData?E=u:(h["Content-Type"]="application/json",E=JSON.stringify(u)));const w=yield this.fetch(`${this.url}/${e}`,{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),s),body:E}).catch(De=>{throw new R4(De)}),x=w.headers.get("x-relay-error");if(x&&"true"===x)throw new P4(w);if(!w.ok)throw new x4(w);let ce,G=(null!==(n=w.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return ce="application/json"===G?yield w.json():"application/octet-stream"===G?yield w.blob():"text/event-stream"===G?w:"multipart/form-data"===G?yield w.formData():yield w.text(),{data:ce,error:null}}catch(s){return{data:null,error:s}}})}}var k4=W(4060);const{PostgrestClient:IB}=k4,U4={"X-Client-Info":"realtime-js/2.10.2"};var IT=function(r){return r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed",r}(IT||{}),Pc=function(r){return r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving",r}(Pc||{}),Rd=function(r){return r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token",r}(Rd||{}),wB=function(r){return r.websocket="websocket",r}(wB||{}),yI=function(r){return r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed",r}(yI||{});class j4{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const s=t.getUint8(1),l=t.getUint8(2);let u=this.HEADER_LENGTH+2;const h=n.decode(e.slice(u,u+s));u+=s;const p=n.decode(e.slice(u,u+l));return u+=l,{ref:null,topic:h,event:p,payload:JSON.parse(n.decode(e.slice(u,e.byteLength)))}}}class CB{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ao=function(r){return r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange",r}(Ao||{});const AB=(r,e,t={})=>{var n;const s=null!==(n=t.skipTypes)&&void 0!==n?n:[];return Object.keys(e).reduce((l,u)=>(l[u]=H4(u,r,e,s),l),{})},H4=(r,e,t,n)=>{const s=e.find(h=>h.name===r),l=null==s?void 0:s.type,u=t[r];return l&&!n.includes(l)?TB(l,u):iV(u)},TB=(r,e)=>{if("_"===r.charAt(0)){const t=r.slice(1,r.length);return q4(e,t)}switch(r){case Ao.bool:return z4(e);case Ao.float4:case Ao.float8:case Ao.int2:case Ao.int4:case Ao.int8:case Ao.numeric:case Ao.oid:return G4(e);case Ao.json:case Ao.jsonb:return W4(e);case Ao.timestamp:return K4(e);default:return iV(e)}},iV=r=>r,z4=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},G4=r=>{if("string"==typeof r){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},W4=r=>{if("string"==typeof r)try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},q4=(r,e)=>{if("string"!=typeof r)return r;const t=r.length-1;if("{"===r[0]&&"}"===r[t]){let l;const u=r.slice(1,t);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(h=>TB(e,h))}return r},K4=r=>"string"==typeof r?r.replace(" ","T"):r,SB=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class oV{constructor(e,t,n={},s=1e4){this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}class bT{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:l,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bT.syncState(this.state,s,l,u),this.pendingDiffs.forEach(p=>{this.state=bT.syncDiff(this.state,p,l,u)}),this.pendingDiffs=[],h()}),this.channel._on(n.diff,{},s=>{const{onJoin:l,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=bT.syncDiff(this.state,s,l,u),h())}),this.onJoin((s,l,u)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:l,newPresences:u})}),this.onLeave((s,l,u)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,s){const l=this.cloneDeep(e),u=this.transformState(t),h={},p={};return this.map(l,(E,w)=>{u[E]||(p[E]=w)}),this.map(u,(E,w)=>{const x=l[E];if(x){const G=w.map(lt=>lt.presence_ref),ce=x.map(lt=>lt.presence_ref),De=w.filter(lt=>ce.indexOf(lt.presence_ref)<0),dt=x.filter(lt=>G.indexOf(lt.presence_ref)<0);De.length>0&&(h[E]=De),dt.length>0&&(p[E]=dt)}else h[E]=w}),this.syncDiff(l,{joins:h,leaves:p},n,s)}static syncDiff(e,t,n,s){const{joins:l,leaves:u}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(l,(h,p)=>{var E;const w=null!==(E=e[h])&&void 0!==E?E:[];if(e[h]=this.cloneDeep(p),w.length>0){const x=e[h].map(ce=>ce.presence_ref),G=w.filter(ce=>x.indexOf(ce.presence_ref)<0);e[h].unshift(...G)}n(h,w,p)}),this.map(u,(h,p)=>{let E=e[h];if(!E)return;const w=p.map(x=>x.presence_ref);E=E.filter(x=>w.indexOf(x.presence_ref)<0),e[h]=E,s(h,E,p),0===E.length&&delete e[h]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const s=e[n];return t[n]="metas"in s?s.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}class sV{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Pc.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new oV(this,Rd.join,this.params,this.timeout),this.rejoinTimer=new CB(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Pc.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Pc.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Pc.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Pc.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Rd.reply,{},(s,l)=>{this._trigger(this._replyEventName(l),s)}),this.presence=new bT(this),this.broadcastEndpointURL=SB(this.socket.endPoint)+"/api/broadcast"}subscribe(e,t=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:l,presence:u,private:h}}=this.params;this._onError(w=>e&&e("CHANNEL_ERROR",w)),this._onClose(()=>e&&e("CLOSED"));const p={},E={broadcast:l,presence:u,postgres_changes:null!==(s=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(w=>w.filter))&&void 0!==s?s:[],private:h};this.socket.accessToken&&(p.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:E},p)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:w})=>{var x;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),void 0!==w){const G=this.bindings.postgres_changes,ce=null!==(x=null==G?void 0:G.length)&&void 0!==x?x:0,De=[];for(let dt=0;dt<ce;dt++){const lt=G[dt],{filter:{event:ln,schema:vn,table:cn,filter:An}}=lt,Yn=w&&w[dt];if(!Yn||Yn.event!==ln||Yn.schema!==vn||Yn.table!==cn||Yn.filter!==An)return this.unsubscribe(),void(e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes")));De.push(Object.assign(Object.assign({},lt),{id:Yn.id}))}return this.bindings.postgres_changes=De,void(e&&e("SUBSCRIBED"))}e&&e("SUBSCRIBED")}).receive("error",w=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}track(e,t={}){var n=this;return(0,C.A)(function*(){return yield n.send({type:"presence",event:"track",payload:e},t.timeout||n.timeout)})()}untrack(e={}){var t=this;return(0,C.A)(function*(){return yield t.send({type:"presence",event:"untrack"},e)})()}on(e,t,n){return this._on(e,t,n)}send(e,t={}){var n=this;return(0,C.A)(function*(){var s,l;if(n._canPush()||"broadcast"!==e.type)return new Promise(u=>{var h,p,E;const w=n._push(e.type,e,t.timeout||n.timeout);"broadcast"===e.type&&!(null!==(E=null===(p=null===(h=n.params)||void 0===h?void 0:h.config)||void 0===p?void 0:p.broadcast)&&void 0!==E&&E.ack)&&u("ok"),w.receive("ok",()=>u("ok")),w.receive("error",()=>u("error")),w.receive("timeout",()=>u("timed out"))});{const{event:u,payload:h}=e,p={method:"POST",headers:{Authorization:n.socket.accessToken?`Bearer ${n.socket.accessToken}`:"",apikey:n.socket.apiKey?n.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:n.subTopic,event:u,payload:h}]})};try{const E=yield n._fetchWithTimeout(n.broadcastEndpointURL,p,null!==(s=t.timeout)&&void 0!==s?s:n.timeout);return yield null===(l=E.body)||void 0===l?void 0:l.cancel(),E.ok?"ok":"error"}catch(E){return"AbortError"===E.name?"timed out":"error"}}})()}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Pc.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Rd.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const s=new oV(this,Rd.leave,{},e);s.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}_fetchWithTimeout(e,t,n){var s=this;return(0,C.A)(function*(){const l=new AbortController,u=setTimeout(()=>l.abort(),n),h=yield s.socket.fetch(e,Object.assign(Object.assign({},t),{signal:l.signal}));return clearTimeout(u),h})()}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new oV(this,e,t,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var s,l;const u=e.toLocaleLowerCase(),{close:h,error:p,leave:E,join:w}=Rd;if(n&&[h,p,E,w].indexOf(u)>=0&&n!==this._joinRef())return;let G=this._onMessage(u,t,n);if(t&&!G)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?null===(s=this.bindings.postgres_changes)||void 0===s||s.filter(ce=>{var De,dt,lt;return"*"===(null===(De=ce.filter)||void 0===De?void 0:De.event)||(null===(lt=null===(dt=ce.filter)||void 0===dt?void 0:dt.event)||void 0===lt?void 0:lt.toLocaleLowerCase())===u}).map(ce=>ce.callback(G,n)):null===(l=this.bindings[u])||void 0===l||l.filter(ce=>{var De,dt,lt,ln,vn,cn;if(["broadcast","presence","postgres_changes"].includes(u)){if("id"in ce){const An=ce.id,Yn=null===(De=ce.filter)||void 0===De?void 0:De.event;return An&&(null===(dt=t.ids)||void 0===dt?void 0:dt.includes(An))&&("*"===Yn||(null==Yn?void 0:Yn.toLocaleLowerCase())===(null===(lt=t.data)||void 0===lt?void 0:lt.type.toLocaleLowerCase()))}{const An=null===(vn=null===(ln=null==ce?void 0:ce.filter)||void 0===ln?void 0:ln.event)||void 0===vn?void 0:vn.toLocaleLowerCase();return"*"===An||An===(null===(cn=null==t?void 0:t.event)||void 0===cn?void 0:cn.toLocaleLowerCase())}}return ce.type.toLocaleLowerCase()===u}).map(ce=>{if("object"==typeof G&&"ids"in G){const De=G.data,{schema:dt,table:lt,commit_timestamp:ln,type:vn,errors:cn}=De;G=Object.assign(Object.assign({},{schema:dt,table:lt,commit_timestamp:ln,eventType:vn,new:{},old:{},errors:cn}),this._getPayloadRecords(De))}ce.callback(G,n)})}_isClosed(){return this.state===Pc.closed}_isJoined(){return this.state===Pc.joined}_isJoining(){return this.state===Pc.joining}_isLeaving(){return this.state===Pc.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const s=e.toLocaleLowerCase(),l={type:s,filter:t,callback:n};return this.bindings[s]?this.bindings[s].push(l):this.bindings[s]=[l],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var l;return!((null===(l=s.type)||void 0===l?void 0:l.toLocaleLowerCase())===n&&sV.isEqual(s.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Rd.close,{},e)}_onError(e){this._on(Rd.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Pc.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return("INSERT"===e.type||"UPDATE"===e.type)&&(t.new=AB(e.columns,e.record)),("UPDATE"===e.type||"DELETE"===e.type)&&(t.old=AB(e.columns,e.old_record)),t}}const Z4=()=>{},e3=typeof WebSocket<"u";class t3{constructor(e,t){var s,n=this;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=U4,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Z4,this.conn=null,this.sendBuffer=[],this.serializer=new j4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=u=>{let h;return h=u||(typeof fetch>"u"?(...p)=>Promise.resolve().then(W.bind(W,5286)).then(({default:E})=>E(...p)):fetch),(...p)=>h(...p)},this.endPoint=`${e}/${wB.websocket}`,this.httpEndpoint=SB(e),this.transport=null!=t&&t.transport?t.transport:null,null!=t&&t.params&&(this.params=t.params),null!=t&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),null!=t&&t.timeout&&(this.timeout=t.timeout),null!=t&&t.logger&&(this.logger=t.logger),null!=t&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const l=null===(s=null==t?void 0:t.params)||void 0===s?void 0:s.apikey;l&&(this.accessToken=l,this.apiKey=l),this.reconnectAfterMs=null!=t&&t.reconnectAfterMs?t.reconnectAfterMs:u=>[1e3,2e3,5e3,1e4][u-1]||1e4,this.encode=null!=t&&t.encode?t.encode:(u,h)=>h(JSON.stringify(u)),this.decode=null!=t&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new CB((0,C.A)(function*(){n.disconnect(),n.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!this.conn){if(this.transport)return void(this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers}));if(e3)return this.conn=new WebSocket(this._endPointURL()),void this.setupConnection();this.conn=new n3(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),W.e(3806).then(W.t.bind(W,3806,23)).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(e){var t=this;return(0,C.A)(function*(){const n=yield e.unsubscribe();return 0===t.channels.length&&t.disconnect(),n})()}removeAllChannels(){var e=this;return(0,C.A)(function*(){const t=yield Promise.all(e.channels.map(n=>n.unsubscribe()));return e.disconnect(),t})()}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case IT.connecting:return yI.Connecting;case IT.open:return yI.Open;case IT.closing:return yI.Closing;default:return yI.Closed}}isConnected(){return this.connectionState()===yI.Open}channel(e,t={config:{}}){const n=new sV(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:s,ref:l}=e,u=()=>{this.encode(e,h=>{var p;null===(p=this.conn)||void 0===p||p.send(h)})};this.log("push",`${t} ${n} (${l})`,s),this.isConnected()?u():this.sendBuffer.push(u)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(Rd.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return this.ref=e===this.ref?0:e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:s,payload:l,ref:u}=t;(u&&u===this.pendingHeartbeatRef||s===(null==l?void 0:l.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${l.status||""} ${n} ${s} ${u&&"("+u+")"||""}`,l),this.channels.filter(h=>h._isMember(n)).forEach(h=>h._trigger(s,l,u)),this.stateChangeCallbacks.message.forEach(h=>h(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Rd.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class n3{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=IT.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class aV extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Js(r){return"object"==typeof r&&null!==r&&"__isStorageError"in r}class r3 extends aV{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class lV extends aV{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const DB=r=>{let e;return e=r||(typeof fetch>"u"?(...t)=>Promise.resolve().then(W.bind(W,5286)).then(({default:n})=>n(...t)):fetch),(...t)=>e(...t)},cV=r=>{if(Array.isArray(r))return r.map(t=>cV(t));if("function"==typeof r||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,n])=>{const s=t.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[s]=cV(n)}),e};var vv=function(r,e,t,n){return new(t||(t=Promise))(function(l,u){function h(w){try{E(n.next(w))}catch(x){u(x)}}function p(w){try{E(n.throw(w))}catch(x){u(x)}}function E(w){w.done?l(w.value):function s(l){return l instanceof t?l:new t(function(u){u(l)})}(w.value).then(h,p)}E((n=n.apply(r,e||[])).next())})};const uV=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),s3=(r,e,t)=>vv(void 0,void 0,void 0,function*(){const n=yield function(r,e,t,n){return new(t||(t=Promise))(function(l,u){function h(w){try{E(n.next(w))}catch(x){u(x)}}function p(w){try{E(n.throw(w))}catch(x){u(x)}}function E(w){w.done?l(w.value):function s(l){return l instanceof t?l:new t(function(u){u(l)})}(w.value).then(h,p)}E((n=n.apply(r,e||[])).next())})}(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(W.bind(W,5286))).Response:Response});r instanceof n&&(null==t||!t.noResolveJson)?r.json().then(s=>{e(new r3(uV(s),r.status||500))}).catch(s=>{e(new lV(uV(s),s))}):e(new lV(uV(r),r))}),a3=(r,e,t,n)=>{const s={method:r,headers:(null==e?void 0:e.headers)||{}};return"GET"===r?s:(s.headers=Object.assign({"Content-Type":"application/json"},null==e?void 0:e.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),t))};function wT(r,e,t,n,s,l){return vv(this,void 0,void 0,function*(){return new Promise((u,h)=>{r(t,a3(e,n,s,l)).then(p=>{if(!p.ok)throw p;return null!=n&&n.noResolveJson?p:p.json()}).then(p=>u(p)).catch(p=>s3(p,h,n))})})}function hM(r,e,t,n){return vv(this,void 0,void 0,function*(){return wT(r,"GET",e,t,n)})}function wg(r,e,t,n,s){return vv(this,void 0,void 0,function*(){return wT(r,"POST",e,n,s,t)})}function l3(r,e,t,n,s){return vv(this,void 0,void 0,function*(){return wT(r,"PUT",e,n,s,t)})}function RB(r,e,t,n,s){return vv(this,void 0,void 0,function*(){return wT(r,"DELETE",e,n,s,t)})}var dl=function(r,e,t,n){return new(t||(t=Promise))(function(l,u){function h(w){try{E(n.next(w))}catch(x){u(x)}}function p(w){try{E(n.throw(w))}catch(x){u(x)}}function E(w){w.done?l(w.value):function s(l){return l instanceof t?l:new t(function(u){u(l)})}(w.value).then(h,p)}E((n=n.apply(r,e||[])).next())})};const u3={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},PB={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class d3{constructor(e,t={},n,s){this.url=e,this.headers=t,this.bucketId=n,this.fetch=DB(s)}uploadOrUpdate(e,t,n,s){return dl(this,void 0,void 0,function*(){try{let l;const u=Object.assign(Object.assign({},PB),s);let h=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(u.upsert)});const p=u.metadata;typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n),p&&l.append("metadata",this.encodeMetadata(p))):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl),p&&l.append("metadata",this.encodeMetadata(p))):(l=n,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,p&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(p)))),null!=s&&s.headers&&(h=Object.assign(Object.assign({},h),s.headers));const E=this._removeEmptyFolders(t),w=this._getFinalPath(E),x=yield this.fetch(`${this.url}/object/${w}`,Object.assign({method:e,body:l,headers:h},null!=u&&u.duplex?{duplex:u.duplex}:{})),G=yield x.json();return x.ok?{data:{path:E,id:G.Id,fullPath:G.Key},error:null}:{data:null,error:G}}catch(l){if(Js(l))return{data:null,error:l};throw l}})}upload(e,t,n){return dl(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,s){return dl(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),u=this._getFinalPath(l),h=new URL(this.url+`/object/upload/sign/${u}`);h.searchParams.set("token",t);try{let p;const E=Object.assign({upsert:PB.upsert},s),w=Object.assign(Object.assign({},this.headers),{"x-upsert":String(E.upsert)});typeof Blob<"u"&&n instanceof Blob?(p=new FormData,p.append("cacheControl",E.cacheControl),p.append("",n)):typeof FormData<"u"&&n instanceof FormData?(p=n,p.append("cacheControl",E.cacheControl)):(p=n,w["cache-control"]=`max-age=${E.cacheControl}`,w["content-type"]=E.contentType);const x=yield this.fetch(h.toString(),{method:"PUT",body:p,headers:w}),G=yield x.json();return x.ok?{data:{path:l,fullPath:G.Key},error:null}:{data:null,error:G}}catch(p){if(Js(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(e,t){return dl(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);null!=t&&t.upsert&&(s["x-upsert"]="true");const l=yield wg(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),u=new URL(this.url+l.url),h=u.searchParams.get("token");if(!h)throw new aV("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:h},error:null}}catch(n){if(Js(n))return{data:null,error:n};throw n}})}update(e,t,n){return dl(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return dl(this,void 0,void 0,function*(){try{return{data:yield wg(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Js(s))return{data:null,error:s};throw s}})}copy(e,t,n){return dl(this,void 0,void 0,function*(){try{return{data:{path:(yield wg(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Js(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,n){return dl(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),l=yield wg(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},null!=n&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const u=null!=n&&n.download?`&download=${!0===n.download?"":n.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(s){if(Js(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,n){return dl(this,void 0,void 0,function*(){try{const s=yield wg(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),l=null!=n&&n.download?`&download=${!0===n.download?"":n.download}`:"";return{data:s.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${l}`):null})),error:null}}catch(s){if(Js(s))return{data:null,error:s};throw s}})}download(e,t){return dl(this,void 0,void 0,function*(){const s=typeof(null==t?void 0:t.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),u=l?`?${l}`:"";try{const h=this._getFinalPath(e);return{data:yield(yield hM(this.fetch,`${this.url}/${s}/${h}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(h){if(Js(h))return{data:null,error:h};throw h}})}info(e){return dl(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield hM(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:cV(n),error:null}}catch(n){if(Js(n))return{data:null,error:n};throw n}})}exists(e){return dl(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function c3(r,e,t,n){return vv(this,void 0,void 0,function*(){return wT(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Js(n)&&n instanceof lV){const s=n.originalError;if([400,404].includes(null==s?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],l=null!=t&&t.download?`download=${!0===t.download?"":t.download}`:"";""!==l&&s.push(l);const h=typeof(null==t?void 0:t.transform)<"u"?"render/image":"object",p=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==p&&s.push(p);let E=s.join("&");return""!==E&&(E=`?${E}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${n}${E}`)}}}remove(e){return dl(this,void 0,void 0,function*(){try{return{data:yield RB(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Js(t))return{data:null,error:t};throw t}})}list(e,t,n){return dl(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},u3),t),{prefix:e||""});return{data:yield wg(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(Js(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const h3={"X-Client-Info":"storage-js/2.7.0"};var EI=function(r,e,t,n){return new(t||(t=Promise))(function(l,u){function h(w){try{E(n.next(w))}catch(x){u(x)}}function p(w){try{E(n.throw(w))}catch(x){u(x)}}function E(w){w.done?l(w.value):function s(l){return l instanceof t?l:new t(function(u){u(l)})}(w.value).then(h,p)}E((n=n.apply(r,e||[])).next())})};class f3{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},h3),t),this.fetch=DB(n)}listBuckets(){return EI(this,void 0,void 0,function*(){try{return{data:yield hM(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Js(e))return{data:null,error:e};throw e}})}getBucket(e){return EI(this,void 0,void 0,function*(){try{return{data:yield hM(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Js(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return EI(this,void 0,void 0,function*(){try{return{data:yield wg(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Js(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return EI(this,void 0,void 0,function*(){try{return{data:yield l3(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Js(n))return{data:null,error:n};throw n}})}emptyBucket(e){return EI(this,void 0,void 0,function*(){try{return{data:yield wg(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Js(t))return{data:null,error:t};throw t}})}deleteBucket(e){return EI(this,void 0,void 0,function*(){try{return{data:yield RB(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Js(t))return{data:null,error:t};throw t}})}}class p3 extends f3{constructor(e,t={},n){super(e,t,n)}from(e){return new d3(this.url,this.headers,e,this.fetch)}}let CT="";CT=typeof Deno<"u"?"deno":typeof document<"u"?"web":typeof navigator<"u"&&"ReactNative"===navigator.product?"react-native":"node";const m3={headers:{"X-Client-Info":`supabase-js-${CT}/2.45.4`}},_3={schema:"public"},v3={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},y3={};var xB=W(5286);const w3=(r,e,t)=>{const n=(r=>{let e;return e=r||(typeof fetch>"u"?xB.default:fetch),(...t)=>e(...t)})(t),s=typeof Headers>"u"?xB.Headers:Headers;return(l,u)=>function(r,e,t,n){return new(t||(t=Promise))(function(l,u){function h(w){try{E(n.next(w))}catch(x){u(x)}}function p(w){try{E(n.throw(w))}catch(x){u(x)}}function E(w){w.done?l(w.value):function s(l){return l instanceof t?l:new t(function(u){u(l)})}(w.value).then(h,p)}E((n=n.apply(r,e||[])).next())})}(void 0,void 0,void 0,function*(){var h;const p=null!==(h=yield e())&&void 0!==h?h:r;let E=new s(null==u?void 0:u.headers);return E.has("apikey")||E.set("apikey",r),E.has("Authorization")||E.set("Authorization",`Bearer ${p}`),n(l,Object.assign(Object.assign({},u),{headers:E}))})};const dV="X-Supabase-Api-Version",kB={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},mu=()=>typeof document<"u",yv={tested:!1,writable:!1},AT=()=>{if(!mu())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch{return!1}if(yv.tested)return yv.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),yv.tested=!0,yv.writable=!0}catch{yv.tested=!0,yv.writable=!1}return yv.writable};function hV(r){const e={},t=new URL(r);if(t.hash&&"#"===t.hash[0])try{new URLSearchParams(t.hash.substring(1)).forEach((s,l)=>{e[l]=s})}catch{}return t.searchParams.forEach((n,s)=>{e[s]=n}),e}const OB=r=>{let e;return e=r||(typeof fetch>"u"?(...t)=>Promise.resolve().then(W.bind(W,5286)).then(({default:n})=>n(...t)):fetch),(...t)=>e(...t)},M3=r=>"object"==typeof r&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"==typeof r.json,FB=function(){var r=(0,C.A)(function*(e,t,n){yield e.setItem(t,JSON.stringify(n))});return function(t,n,s){return r.apply(this,arguments)}}(),fM=function(){var r=(0,C.A)(function*(e,t){const n=yield e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}});return function(t,n){return r.apply(this,arguments)}}(),pM=function(){var r=(0,C.A)(function*(e,t){yield e.removeItem(t)});return function(t,n){return r.apply(this,arguments)}}();class gM{constructor(){this.promise=new gM.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function LB(r){const t=r.split(".");if(3!==t.length)throw new Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");return JSON.parse(function N3(r){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n,s,l,u,h,p,E,t="",w=0;for(r=r.replace("-","+").replace("_","/");w<r.length;)u=e.indexOf(r.charAt(w++)),h=e.indexOf(r.charAt(w++)),p=e.indexOf(r.charAt(w++)),E=e.indexOf(r.charAt(w++)),n=u<<2|h>>4,s=(15&h)<<4|p>>2,l=(3&p)<<6|E,t+=String.fromCharCode(n),64!=p&&0!=s&&(t+=String.fromCharCode(s)),64!=E&&0!=l&&(t+=String.fromCharCode(l));return t}(t[1]))}function fV(){return fV=(0,C.A)(function*(r){return yield new Promise(e=>{setTimeout(()=>e(null),r)})}),fV.apply(this,arguments)}function F3(r){return("0"+r.toString(16)).substr(-2)}function pV(){return pV=(0,C.A)(function*(r){const t=(new TextEncoder).encode(r),n=yield crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map(l=>String.fromCharCode(l)).join("")}),pV.apply(this,arguments)}function gV(){return gV=(0,C.A)(function*(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=yield function V3(r){return pV.apply(this,arguments)}(r);return function U3(r){return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}(t)}),gV.apply(this,arguments)}function II(r,e){return mV.apply(this,arguments)}function mV(){return mV=(0,C.A)(function*(r,e,t=!1){const n=function L3(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let s="";for(let l=0;l<56;l++)s+=t.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,F3).join("")}();let s=n;t&&(s+="/PASSWORD_RECOVERY"),yield FB(r,`${e}-code-verifier`,s);const l=yield function B3(r){return gV.apply(this,arguments)}(n);return[l,n===l?"plain":"s256"]}),mV.apply(this,arguments)}gM.promiseConstructor=Promise;const $3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;class _V extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function Vr(r){return"object"==typeof r&&null!==r&&"__isAuthError"in r}class H3 extends _V{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class VB extends _V{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ev extends _V{constructor(e,t,n,s){super(e,n,s),this.name=t,this.status=n}}class Cg extends Ev{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class vV extends Ev{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class mM extends Ev{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class _M extends Ev{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class UB extends Ev{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class yV extends Ev{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function EV(r){return Vr(r)&&"AuthRetryableFetchError"===r.name}class BB extends Ev{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}const Iv=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),q3=[502,503,504];function $B(r){return IV.apply(this,arguments)}function IV(){return IV=(0,C.A)(function*(r){var e;if(!M3(r))throw new yV(Iv(r),0);if(q3.includes(r.status))throw new yV(Iv(r),r.status);let t,n;try{t=yield r.json()}catch(l){throw new VB(Iv(l),l)}const s=function j3(r){const e=r.headers.get(dV);if(!e||!e.match($3))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}(r);if(s&&s.getTime()>=kB["2024-01-01"].timestamp&&"object"==typeof t&&t&&"string"==typeof t.code?n=t.code:"object"==typeof t&&t&&"string"==typeof t.error_code&&(n=t.error_code),n){if("weak_password"===n)throw new BB(Iv(t),r.status,(null===(e=t.weak_password)||void 0===e?void 0:e.reasons)||[]);if("session_not_found"===n)throw new Cg}else if("object"==typeof t&&t&&"object"==typeof t.weak_password&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((l,u)=>l&&"string"==typeof u,!0))throw new BB(Iv(t),r.status,t.weak_password.reasons);throw new H3(Iv(t),r.status||500,n)}),IV.apply(this,arguments)}const K3=(r,e,t,n)=>{const s={method:r,headers:(null==e?void 0:e.headers)||{}};return"GET"===r?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==e?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),t))};function ii(r,e,t,n){return bV.apply(this,arguments)}function bV(){return bV=(0,C.A)(function*(r,e,t,n){var s;const l=Object.assign({},null==n?void 0:n.headers);l[dV]||(l[dV]=kB["2024-01-01"].name),null!=n&&n.jwt&&(l.Authorization=`Bearer ${n.jwt}`);const u=null!==(s=null==n?void 0:n.query)&&void 0!==s?s:{};null!=n&&n.redirectTo&&(u.redirect_to=n.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",p=yield function X3(r,e,t,n,s,l){return wV.apply(this,arguments)}(r,e,t+h,{headers:l,noResolveJson:null==n?void 0:n.noResolveJson},{},null==n?void 0:n.body);return null!=n&&n.xform?null==n?void 0:n.xform(p):{data:Object.assign({},p),error:null}}),bV.apply(this,arguments)}function wV(){return wV=(0,C.A)(function*(r,e,t,n,s,l){const u=K3(e,n,s,l);let h;try{h=yield r(t,Object.assign({},u))}catch(p){throw console.error(p),new yV(Iv(p),0)}if(h.ok||(yield $B(h)),null!=n&&n.noResolveJson)return h;try{return yield h.json()}catch(p){yield $B(p)}}),wV.apply(this,arguments)}function Ag(r){var e;let t=null;return function Z3(r){return r.access_token&&r.refresh_token&&r.expires_in}(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=function P3(r){return Math.round(Date.now()/1e3)+r}(r.expires_in))),{data:{session:t,user:null!==(e=r.user)&&void 0!==e?e:r},error:null}}function jB(r){const e=Ag(r);return!e.error&&r.weak_password&&"object"==typeof r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&"string"==typeof r.weak_password.message&&r.weak_password.reasons.reduce((t,n)=>t&&"string"==typeof n,!0)&&(e.data.weak_password=r.weak_password),e}function Tg(r){var e;return{data:{user:null!==(e=r.user)&&void 0!==e?e:r},error:null}}function Q3(r){return{data:r,error:null}}function Y3(r){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:l}=r,u=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]])}return t}(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:l},user:Object.assign({},u)},error:null}}function J3(r){return r}class tH{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=OB(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(e,t="global"){var n=this;return(0,C.A)(function*(){try{return yield ii(n.fetch,"POST",`${n.url}/logout?scope=${t}`,{headers:n.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Vr(s))return{data:null,error:s};throw s}})()}inviteUserByEmail(e,t={}){var n=this;return(0,C.A)(function*(){try{return yield ii(n.fetch,"POST",`${n.url}/invite`,{body:{email:e,data:t.data},headers:n.headers,redirectTo:t.redirectTo,xform:Tg})}catch(s){if(Vr(s))return{data:{user:null},error:s};throw s}})()}generateLink(e){var t=this;return(0,C.A)(function*(){try{const{options:n}=e,s=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]])}return t}(e,["options"]),l=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(l.new_email=null==s?void 0:s.newEmail,delete l.newEmail),yield ii(t.fetch,"POST",`${t.url}/admin/generate_link`,{body:l,headers:t.headers,xform:Y3,redirectTo:null==n?void 0:n.redirectTo})}catch(n){if(Vr(n))return{data:{properties:null,user:null},error:n};throw n}})()}createUser(e){var t=this;return(0,C.A)(function*(){try{return yield ii(t.fetch,"POST",`${t.url}/admin/users`,{body:e,headers:t.headers,xform:Tg})}catch(n){if(Vr(n))return{data:{user:null},error:n};throw n}})()}listUsers(e){var t=this;return(0,C.A)(function*(){var n,s,l,u,h,p,E;try{const w={nextPage:null,lastPage:0,total:0},x=yield ii(t.fetch,"GET",`${t.url}/admin/users`,{headers:t.headers,noResolveJson:!0,query:{page:null!==(s=null===(n=null==e?void 0:e.page)||void 0===n?void 0:n.toString())&&void 0!==s?s:"",per_page:null!==(u=null===(l=null==e?void 0:e.perPage)||void 0===l?void 0:l.toString())&&void 0!==u?u:""},xform:J3});if(x.error)throw x.error;const G=yield x.json(),ce=null!==(h=x.headers.get("x-total-count"))&&void 0!==h?h:0,De=null!==(E=null===(p=x.headers.get("link"))||void 0===p?void 0:p.split(","))&&void 0!==E?E:[];return De.length>0&&(De.forEach(dt=>{const lt=parseInt(dt.split(";")[0].split("=")[1].substring(0,1)),ln=JSON.parse(dt.split(";")[1].split("=")[1]);w[`${ln}Page`]=lt}),w.total=parseInt(ce)),{data:Object.assign(Object.assign({},G),w),error:null}}catch(w){if(Vr(w))return{data:{users:[]},error:w};throw w}})()}getUserById(e){var t=this;return(0,C.A)(function*(){try{return yield ii(t.fetch,"GET",`${t.url}/admin/users/${e}`,{headers:t.headers,xform:Tg})}catch(n){if(Vr(n))return{data:{user:null},error:n};throw n}})()}updateUserById(e,t){var n=this;return(0,C.A)(function*(){try{return yield ii(n.fetch,"PUT",`${n.url}/admin/users/${e}`,{body:t,headers:n.headers,xform:Tg})}catch(s){if(Vr(s))return{data:{user:null},error:s};throw s}})()}deleteUser(e,t=!1){var n=this;return(0,C.A)(function*(){try{return yield ii(n.fetch,"DELETE",`${n.url}/admin/users/${e}`,{headers:n.headers,body:{should_soft_delete:t},xform:Tg})}catch(s){if(Vr(s))return{data:{user:null},error:s};throw s}})()}_listFactors(e){var t=this;return(0,C.A)(function*(){try{const{data:n,error:s}=yield ii(t.fetch,"GET",`${t.url}/admin/users/${e.userId}/factors`,{headers:t.headers,xform:l=>({data:{factors:l},error:null})});return{data:n,error:s}}catch(n){if(Vr(n))return{data:null,error:n};throw n}})()}_deleteFactor(e){var t=this;return(0,C.A)(function*(){try{return{data:yield ii(t.fetch,"DELETE",`${t.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:t.headers}),error:null}}catch(n){if(Vr(n))return{data:null,error:n};throw n}})()}}const nH={getItem:r=>AT()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{AT()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{AT()&&globalThis.localStorage.removeItem(r)}};function HB(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}const bI={debug:!!(globalThis&&AT()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class zB extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class iH extends zB{}function oH(r,e,t){return CV.apply(this,arguments)}function CV(){return CV=(0,C.A)(function*(r,e,t){bI.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),bI.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),yield globalThis.navigator.locks.request(r,0===e?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},function(){var s=(0,C.A)(function*(l){if(!l){if(0===e)throw bI.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new iH(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(bI.debug)try{const u=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield t()}bI.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,l.name);try{return yield t()}finally{bI.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,l.name)}});return function(l){return s.apply(this,arguments)}}())}),CV.apply(this,arguments)}!function rH(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}();const sH={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:{"X-Client-Info":"gotrue-js/2.65.0"},flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},TT=3e4;function WB(r,e,t){return AV.apply(this,arguments)}function AV(){return(AV=(0,C.A)(function*(r,e,t){return yield t()})).apply(this,arguments)}let aH=(()=>{class r{constructor(t){var s,l,n=this;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=r.nextInstanceID,r.nextInstanceID+=1,this.instanceID>0&&mu()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const u=Object.assign(Object.assign({},sH),t);if(this.logDebugMessages=!!u.debug,"function"==typeof u.debug&&(this.logger=u.debug),this.persistSession=u.persistSession,this.storageKey=u.storageKey,this.autoRefreshToken=u.autoRefreshToken,this.admin=new tH({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=OB(u.fetch),this.lock=u.lock||WB,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.lock=u.lock?u.lock:mu()&&null!==(s=null==globalThis?void 0:globalThis.navigator)&&void 0!==s&&s.locks?oH:WB,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?u.storage?this.storage=u.storage:AT()?this.storage=nH:(this.memoryStorage={},this.storage=HB(this.memoryStorage)):(this.memoryStorage={},this.storage=HB(this.memoryStorage)),mu()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}null===(l=this.broadcastChannel)||void 0===l||l.addEventListener("message",function(){var h=(0,C.A)(function*(p){n._debug("received broadcast notification from other tab or client",p),yield n._notifyAllSubscribers(p.data.event,p.data.session,!1)});return function(p){return h.apply(this,arguments)}}())}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (2.65.0) ${(new Date).toISOString()}`,...t),this}initialize(){var t=this;return(0,C.A)(function*(){return t.initializePromise||(t.initializePromise=(0,C.A)(function*(){return yield t._acquireLock(-1,(0,C.A)(function*(){return yield t._initialize()}))})()),yield t.initializePromise})()}_initialize(){var t=this;return(0,C.A)(function*(){try{const n=!!mu()&&(yield t._isPKCEFlow());if(t._debug("#_initialize()","begin","is PKCE flow",n),n||t.detectSessionInUrl&&t._isImplicitGrantFlow()){const{data:s,error:l}=yield t._getSessionFromURL(n);if(l)return t._debug("#_initialize()","error detecting session from URL",l),"Identity is already linked"===(null==l?void 0:l.message)||"Identity is already linked to another user"===(null==l?void 0:l.message)||(yield t._removeSession()),{error:l};const{session:u,redirectType:h}=s;return t._debug("#_initialize()","detected session in URL",u,"redirect type",h),yield t._saveSession(u),setTimeout((0,C.A)(function*(){"recovery"===h?yield t._notifyAllSubscribers("PASSWORD_RECOVERY",u):yield t._notifyAllSubscribers("SIGNED_IN",u)}),0),{error:null}}return yield t._recoverAndRefresh(),{error:null}}catch(n){return Vr(n)?{error:n}:{error:new VB("Unexpected error during initialization",n)}}finally{yield t._handleVisibilityChange(),t._debug("#_initialize()","end")}})()}signInAnonymously(t){var n=this;return(0,C.A)(function*(){var s,l,u;try{const h=yield ii(n.fetch,"POST",`${n.url}/signup`,{headers:n.headers,body:{data:null!==(l=null===(s=null==t?void 0:t.options)||void 0===s?void 0:s.data)&&void 0!==l?l:{},gotrue_meta_security:{captcha_token:null===(u=null==t?void 0:t.options)||void 0===u?void 0:u.captchaToken}},xform:Ag}),{data:p,error:E}=h;if(E||!p)return{data:{user:null,session:null},error:E};const w=p.session,x=p.user;return p.session&&(yield n._saveSession(p.session),yield n._notifyAllSubscribers("SIGNED_IN",w)),{data:{user:x,session:w},error:null}}catch(h){if(Vr(h))return{data:{user:null,session:null},error:h};throw h}})()}signUp(t){var n=this;return(0,C.A)(function*(){var s,l,u;try{let h;if("email"in t){const{email:G,password:ce,options:De}=t;let dt=null,lt=null;"pkce"===n.flowType&&([dt,lt]=yield II(n.storage,n.storageKey)),h=yield ii(n.fetch,"POST",`${n.url}/signup`,{headers:n.headers,redirectTo:null==De?void 0:De.emailRedirectTo,body:{email:G,password:ce,data:null!==(s=null==De?void 0:De.data)&&void 0!==s?s:{},gotrue_meta_security:{captcha_token:null==De?void 0:De.captchaToken},code_challenge:dt,code_challenge_method:lt},xform:Ag})}else{if(!("phone"in t))throw new mM("You must provide either an email or phone number and a password");{const{phone:G,password:ce,options:De}=t;h=yield ii(n.fetch,"POST",`${n.url}/signup`,{headers:n.headers,body:{phone:G,password:ce,data:null!==(l=null==De?void 0:De.data)&&void 0!==l?l:{},channel:null!==(u=null==De?void 0:De.channel)&&void 0!==u?u:"sms",gotrue_meta_security:{captcha_token:null==De?void 0:De.captchaToken}},xform:Ag})}}const{data:p,error:E}=h;if(E||!p)return{data:{user:null,session:null},error:E};const w=p.session,x=p.user;return p.session&&(yield n._saveSession(p.session),yield n._notifyAllSubscribers("SIGNED_IN",w)),{data:{user:x,session:w},error:null}}catch(h){if(Vr(h))return{data:{user:null,session:null},error:h};throw h}})()}signInWithPassword(t){var n=this;return(0,C.A)(function*(){try{let s;if("email"in t){const{email:h,password:p,options:E}=t;s=yield ii(n.fetch,"POST",`${n.url}/token?grant_type=password`,{headers:n.headers,body:{email:h,password:p,gotrue_meta_security:{captcha_token:null==E?void 0:E.captchaToken}},xform:jB})}else{if(!("phone"in t))throw new mM("You must provide either an email or phone number and a password");{const{phone:h,password:p,options:E}=t;s=yield ii(n.fetch,"POST",`${n.url}/token?grant_type=password`,{headers:n.headers,body:{phone:h,password:p,gotrue_meta_security:{captcha_token:null==E?void 0:E.captchaToken}},xform:jB})}}const{data:l,error:u}=s;return u?{data:{user:null,session:null},error:u}:l&&l.session&&l.user?(l.session&&(yield n._saveSession(l.session),yield n._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:u}):{data:{user:null,session:null},error:new vV}}catch(s){if(Vr(s))return{data:{user:null,session:null},error:s};throw s}})()}signInWithOAuth(t){var n=this;return(0,C.A)(function*(){var s,l,u,h;return yield n._handleProviderSignIn(t.provider,{redirectTo:null===(s=t.options)||void 0===s?void 0:s.redirectTo,scopes:null===(l=t.options)||void 0===l?void 0:l.scopes,queryParams:null===(u=t.options)||void 0===u?void 0:u.queryParams,skipBrowserRedirect:null===(h=t.options)||void 0===h?void 0:h.skipBrowserRedirect})})()}exchangeCodeForSession(t){var n=this;return(0,C.A)(function*(){return yield n.initializePromise,n._acquireLock(-1,(0,C.A)(function*(){return n._exchangeCodeForSession(t)}))})()}_exchangeCodeForSession(t){var n=this;return(0,C.A)(function*(){const s=yield fM(n.storage,`${n.storageKey}-code-verifier`),[l,u]=(null!=s?s:"").split("/");try{const{data:h,error:p}=yield ii(n.fetch,"POST",`${n.url}/token?grant_type=pkce`,{headers:n.headers,body:{auth_code:t,code_verifier:l},xform:Ag});if(yield pM(n.storage,`${n.storageKey}-code-verifier`),p)throw p;return h&&h.session&&h.user?(h.session&&(yield n._saveSession(h.session),yield n._notifyAllSubscribers("SIGNED_IN",h.session)),{data:Object.assign(Object.assign({},h),{redirectType:null!=u?u:null}),error:p}):{data:{user:null,session:null,redirectType:null},error:new vV}}catch(h){if(Vr(h))return{data:{user:null,session:null,redirectType:null},error:h};throw h}})()}signInWithIdToken(t){var n=this;return(0,C.A)(function*(){try{const{options:s,provider:l,token:u,access_token:h,nonce:p}=t,E=yield ii(n.fetch,"POST",`${n.url}/token?grant_type=id_token`,{headers:n.headers,body:{provider:l,id_token:u,access_token:h,nonce:p,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:Ag}),{data:w,error:x}=E;return x?{data:{user:null,session:null},error:x}:w&&w.session&&w.user?(w.session&&(yield n._saveSession(w.session),yield n._notifyAllSubscribers("SIGNED_IN",w.session)),{data:w,error:x}):{data:{user:null,session:null},error:new vV}}catch(s){if(Vr(s))return{data:{user:null,session:null},error:s};throw s}})()}signInWithOtp(t){var n=this;return(0,C.A)(function*(){var s,l,u,h,p;try{if("email"in t){const{email:E,options:w}=t;let x=null,G=null;"pkce"===n.flowType&&([x,G]=yield II(n.storage,n.storageKey));const{error:ce}=yield ii(n.fetch,"POST",`${n.url}/otp`,{headers:n.headers,body:{email:E,data:null!==(s=null==w?void 0:w.data)&&void 0!==s?s:{},create_user:null===(l=null==w?void 0:w.shouldCreateUser)||void 0===l||l,gotrue_meta_security:{captcha_token:null==w?void 0:w.captchaToken},code_challenge:x,code_challenge_method:G},redirectTo:null==w?void 0:w.emailRedirectTo});return{data:{user:null,session:null},error:ce}}if("phone"in t){const{phone:E,options:w}=t,{data:x,error:G}=yield ii(n.fetch,"POST",`${n.url}/otp`,{headers:n.headers,body:{phone:E,data:null!==(u=null==w?void 0:w.data)&&void 0!==u?u:{},create_user:null===(h=null==w?void 0:w.shouldCreateUser)||void 0===h||h,gotrue_meta_security:{captcha_token:null==w?void 0:w.captchaToken},channel:null!==(p=null==w?void 0:w.channel)&&void 0!==p?p:"sms"}});return{data:{user:null,session:null,messageId:null==x?void 0:x.message_id},error:G}}throw new mM("You must provide either an email or phone number.")}catch(E){if(Vr(E))return{data:{user:null,session:null},error:E};throw E}})()}verifyOtp(t){var n=this;return(0,C.A)(function*(){var s,l;try{let u,h;"options"in t&&(u=null===(s=t.options)||void 0===s?void 0:s.redirectTo,h=null===(l=t.options)||void 0===l?void 0:l.captchaToken);const{data:p,error:E}=yield ii(n.fetch,"POST",`${n.url}/verify`,{headers:n.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:h}}),redirectTo:u,xform:Ag});if(E)throw E;if(!p)throw new Error("An error occurred on token verification.");const w=p.session,x=p.user;return null!=w&&w.access_token&&(yield n._saveSession(w),yield n._notifyAllSubscribers("recovery"==t.type?"PASSWORD_RECOVERY":"SIGNED_IN",w)),{data:{user:x,session:w},error:null}}catch(u){if(Vr(u))return{data:{user:null,session:null},error:u};throw u}})()}signInWithSSO(t){var n=this;return(0,C.A)(function*(){var s,l,u;try{let h=null,p=null;return"pkce"===n.flowType&&([h,p]=yield II(n.storage,n.storageKey)),yield ii(n.fetch,"POST",`${n.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:null!==(l=null===(s=t.options)||void 0===s?void 0:s.redirectTo)&&void 0!==l?l:void 0}),null!==(u=null==t?void 0:t.options)&&void 0!==u&&u.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:h,code_challenge_method:p}),headers:n.headers,xform:Q3})}catch(h){if(Vr(h))return{data:null,error:h};throw h}})()}reauthenticate(){var t=this;return(0,C.A)(function*(){return yield t.initializePromise,yield t._acquireLock(-1,(0,C.A)(function*(){return yield t._reauthenticate()}))})()}_reauthenticate(){var t=this;return(0,C.A)(function*(){try{return yield t._useSession(function(){var n=(0,C.A)(function*(s){const{data:{session:l},error:u}=s;if(u)throw u;if(!l)throw new Cg;const{error:h}=yield ii(t.fetch,"GET",`${t.url}/reauthenticate`,{headers:t.headers,jwt:l.access_token});return{data:{user:null,session:null},error:h}});return function(s){return n.apply(this,arguments)}}())}catch(n){if(Vr(n))return{data:{user:null,session:null},error:n};throw n}})()}resend(t){var n=this;return(0,C.A)(function*(){try{const s=`${n.url}/resend`;if("email"in t){const{email:l,type:u,options:h}=t,{error:p}=yield ii(n.fetch,"POST",s,{headers:n.headers,body:{email:l,type:u,gotrue_meta_security:{captcha_token:null==h?void 0:h.captchaToken}},redirectTo:null==h?void 0:h.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){const{phone:l,type:u,options:h}=t,{data:p,error:E}=yield ii(n.fetch,"POST",s,{headers:n.headers,body:{phone:l,type:u,gotrue_meta_security:{captcha_token:null==h?void 0:h.captchaToken}}});return{data:{user:null,session:null,messageId:null==p?void 0:p.message_id},error:E}}throw new mM("You must provide either an email or phone number and a type")}catch(s){if(Vr(s))return{data:{user:null,session:null},error:s};throw s}})()}getSession(){var t=this;return(0,C.A)(function*(){return yield t.initializePromise,yield t._acquireLock(-1,(0,C.A)(function*(){return t._useSession(function(){var s=(0,C.A)(function*(l){return l});return function(l){return s.apply(this,arguments)}}())}))})()}_acquireLock(t,n){var s=this;return(0,C.A)(function*(){s._debug("#_acquireLock","begin",t);try{if(s.lockAcquired){const l=s.pendingInLock.length?s.pendingInLock[s.pendingInLock.length-1]:Promise.resolve(),u=(0,C.A)(function*(){return yield l,yield n()})();return s.pendingInLock.push((0,C.A)(function*(){try{yield u}catch{}})()),u}return yield s.lock(`lock:${s.storageKey}`,t,(0,C.A)(function*(){s._debug("#_acquireLock","lock acquired for storage key",s.storageKey);try{s.lockAcquired=!0;const l=n();for(s.pendingInLock.push((0,C.A)(function*(){try{yield l}catch{}})()),yield l;s.pendingInLock.length;){const u=[...s.pendingInLock];yield Promise.all(u),s.pendingInLock.splice(0,u.length)}return yield l}finally{s._debug("#_acquireLock","lock released for storage key",s.storageKey),s.lockAcquired=!1}}))}finally{s._debug("#_acquireLock","end")}})()}_useSession(t){var n=this;return(0,C.A)(function*(){n._debug("#_useSession","begin");try{const s=yield n.__loadSession();return yield t(s)}finally{n._debug("#_useSession","end")}})()}__loadSession(){var t=this;return(0,C.A)(function*(){t._debug("#__loadSession()","begin"),t.lockAcquired||t._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let n=null;const s=yield fM(t.storage,t.storageKey);if(t._debug("#getSession()","session from storage",s),null!==s&&(t._isValidSession(s)?n=s:(t._debug("#getSession()","session from storage is not valid"),yield t._removeSession())),!n)return{data:{session:null},error:null};const l=!!n.expires_at&&n.expires_at<=Date.now()/1e3;if(t._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",n.expires_at),!l){if(t.storage.isServer){let p=t.suppressGetSessionWarning;n=new Proxy(n,{get:(w,x,G)=>(!p&&"user"===x&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),p=!0,t.suppressGetSessionWarning=!0),Reflect.get(w,x,G))})}return{data:{session:n},error:null}}const{session:u,error:h}=yield t._callRefreshToken(n.refresh_token);return h?{data:{session:null},error:h}:{data:{session:u},error:null}}finally{t._debug("#__loadSession()","end")}})()}getUser(t){var n=this;return(0,C.A)(function*(){return t?yield n._getUser(t):(yield n.initializePromise,yield n._acquireLock(-1,(0,C.A)(function*(){return yield n._getUser()})))})()}_getUser(t){var n=this;return(0,C.A)(function*(){try{return t?yield ii(n.fetch,"GET",`${n.url}/user`,{headers:n.headers,jwt:t,xform:Tg}):yield n._useSession(function(){var s=(0,C.A)(function*(l){var u,h,p;const{data:E,error:w}=l;if(w)throw w;return null!==(u=E.session)&&void 0!==u&&u.access_token||n.hasCustomAuthorizationHeader?yield ii(n.fetch,"GET",`${n.url}/user`,{headers:n.headers,jwt:null!==(p=null===(h=E.session)||void 0===h?void 0:h.access_token)&&void 0!==p?p:void 0,xform:Tg}):{data:{user:null},error:new Cg}});return function(l){return s.apply(this,arguments)}}())}catch(s){if(Vr(s))return function G3(r){return Vr(r)&&"AuthSessionMissingError"===r.name}(s)&&(yield n._removeSession(),yield pM(n.storage,`${n.storageKey}-code-verifier`),yield n._notifyAllSubscribers("SIGNED_OUT",null)),{data:{user:null},error:s};throw s}})()}updateUser(t,n={}){var s=this;return(0,C.A)(function*(){return yield s.initializePromise,yield s._acquireLock(-1,(0,C.A)(function*(){return yield s._updateUser(t,n)}))})()}_updateUser(t,n={}){var s=this;return(0,C.A)(function*(){try{return yield s._useSession(function(){var l=(0,C.A)(function*(u){const{data:h,error:p}=u;if(p)throw p;if(!h.session)throw new Cg;const E=h.session;let w=null,x=null;"pkce"===s.flowType&&null!=t.email&&([w,x]=yield II(s.storage,s.storageKey));const{data:G,error:ce}=yield ii(s.fetch,"PUT",`${s.url}/user`,{headers:s.headers,redirectTo:null==n?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:w,code_challenge_method:x}),jwt:E.access_token,xform:Tg});if(ce)throw ce;return E.user=G.user,yield s._saveSession(E),yield s._notifyAllSubscribers("USER_UPDATED",E),{data:{user:E.user},error:null}});return function(u){return l.apply(this,arguments)}}())}catch(l){if(Vr(l))return{data:{user:null},error:l};throw l}})()}_decodeJWT(t){return LB(t)}setSession(t){var n=this;return(0,C.A)(function*(){return yield n.initializePromise,yield n._acquireLock(-1,(0,C.A)(function*(){return yield n._setSession(t)}))})()}_setSession(t){var n=this;return(0,C.A)(function*(){try{if(!t.access_token||!t.refresh_token)throw new Cg;const s=Date.now()/1e3;let l=s,u=!0,h=null;const p=LB(t.access_token);if(p.exp&&(l=p.exp,u=l<=s),u){const{session:E,error:w}=yield n._callRefreshToken(t.refresh_token);if(w)return{data:{user:null,session:null},error:w};if(!E)return{data:{user:null,session:null},error:null};h=E}else{const{data:E,error:w}=yield n._getUser(t.access_token);if(w)throw w;h={access_token:t.access_token,refresh_token:t.refresh_token,user:E.user,token_type:"bearer",expires_in:l-s,expires_at:l},yield n._saveSession(h),yield n._notifyAllSubscribers("SIGNED_IN",h)}return{data:{user:h.user,session:h},error:null}}catch(s){if(Vr(s))return{data:{session:null,user:null},error:s};throw s}})()}refreshSession(t){var n=this;return(0,C.A)(function*(){return yield n.initializePromise,yield n._acquireLock(-1,(0,C.A)(function*(){return yield n._refreshSession(t)}))})()}_refreshSession(t){var n=this;return(0,C.A)(function*(){try{return yield n._useSession(function(){var s=(0,C.A)(function*(l){var u;if(!t){const{data:E,error:w}=l;if(w)throw w;t=null!==(u=E.session)&&void 0!==u?u:void 0}if(null==t||!t.refresh_token)throw new Cg;const{session:h,error:p}=yield n._callRefreshToken(t.refresh_token);return p?{data:{user:null,session:null},error:p}:h?{data:{user:h.user,session:h},error:null}:{data:{user:null,session:null},error:null}});return function(l){return s.apply(this,arguments)}}())}catch(s){if(Vr(s))return{data:{user:null,session:null},error:s};throw s}})()}_getSessionFromURL(t){var n=this;return(0,C.A)(function*(){try{if(!mu())throw new _M("No browser detected.");if("implicit"===n.flowType&&!n._isImplicitGrantFlow())throw new _M("Not a valid implicit grant flow url.");if("pkce"==n.flowType&&!t)throw new UB("Not a valid PKCE flow url.");const s=hV(window.location.href);if(t){if(!s.code)throw new UB("No code detected.");const{data:An,error:Yn}=yield n._exchangeCodeForSession(s.code);if(Yn)throw Yn;const ar=new URL(window.location.href);return ar.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ar.toString()),{data:{session:An.session,redirectType:null},error:null}}if(s.error||s.error_description||s.error_code)throw new _M(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});const{provider_token:l,provider_refresh_token:u,access_token:h,refresh_token:p,expires_in:E,expires_at:w,token_type:x}=s;if(!(h&&E&&p&&x))throw new _M("No session defined in URL");const G=Math.round(Date.now()/1e3),ce=parseInt(E);let De=G+ce;w&&(De=parseInt(w));const dt=De-G;1e3*dt<=TT&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${dt}s, should have been closer to ${ce}s`);const lt=De-ce;G-lt>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",lt,De,G):G-lt<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",lt,De,G);const{data:ln,error:vn}=yield n._getUser(h);if(vn)throw vn;const cn={provider_token:l,provider_refresh_token:u,access_token:h,expires_in:ce,expires_at:De,refresh_token:p,token_type:x,user:ln.user};return window.location.hash="",n._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:cn,redirectType:s.type},error:null}}catch(s){if(Vr(s))return{data:{session:null,redirectType:null},error:s};throw s}})()}_isImplicitGrantFlow(){const t=hV(window.location.href);return!(!mu()||!t.access_token&&!t.error_description)}_isPKCEFlow(){var t=this;return(0,C.A)(function*(){const n=hV(window.location.href),s=yield fM(t.storage,`${t.storageKey}-code-verifier`);return!(!n.code||!s)})()}signOut(t={scope:"global"}){var n=this;return(0,C.A)(function*(){return yield n.initializePromise,yield n._acquireLock(-1,(0,C.A)(function*(){return yield n._signOut(t)}))})()}_signOut({scope:t}={scope:"global"}){var n=this;return(0,C.A)(function*(){return yield n._useSession(function(){var s=(0,C.A)(function*(l){var u;const{data:h,error:p}=l;if(p)return{error:p};const E=null===(u=h.session)||void 0===u?void 0:u.access_token;if(E){const{error:w}=yield n.admin.signOut(E,t);if(w&&(!function z3(r){return Vr(r)&&"AuthApiError"===r.name}(w)||404!==w.status&&401!==w.status&&403!==w.status))return{error:w}}return"others"!==t&&(yield n._removeSession(),yield pM(n.storage,`${n.storageKey}-code-verifier`),yield n._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}});return function(l){return s.apply(this,arguments)}}())})()}onAuthStateChange(t){var n=this;const s=function x3(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=16*Math.random()|0;return("x"==r?e:3&e|8).toString(16)})}(),l={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,l),(0,C.A)(function*(){yield n.initializePromise,yield n._acquireLock(-1,(0,C.A)(function*(){n._emitInitialSession(s)}))})(),{data:{subscription:l}}}_emitInitialSession(t){var n=this;return(0,C.A)(function*(){return yield n._useSession(function(){var s=(0,C.A)(function*(l){var u,h;try{const{data:{session:p},error:E}=l;if(E)throw E;yield null===(u=n.stateChangeEmitters.get(t))||void 0===u?void 0:u.callback("INITIAL_SESSION",p),n._debug("INITIAL_SESSION","callback id",t,"session",p)}catch(p){yield null===(h=n.stateChangeEmitters.get(t))||void 0===h?void 0:h.callback("INITIAL_SESSION",null),n._debug("INITIAL_SESSION","callback id",t,"error",p),console.error(p)}});return function(l){return s.apply(this,arguments)}}())})()}resetPasswordForEmail(t,n={}){var s=this;return(0,C.A)(function*(){let l=null,u=null;"pkce"===s.flowType&&([l,u]=yield II(s.storage,s.storageKey,!0));try{return yield ii(s.fetch,"POST",`${s.url}/recover`,{body:{email:t,code_challenge:l,code_challenge_method:u,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:s.headers,redirectTo:n.redirectTo})}catch(h){if(Vr(h))return{data:null,error:h};throw h}})()}getUserIdentities(){var t=this;return(0,C.A)(function*(){var n;try{const{data:s,error:l}=yield t.getUser();if(l)throw l;return{data:{identities:null!==(n=s.user.identities)&&void 0!==n?n:[]},error:null}}catch(s){if(Vr(s))return{data:null,error:s};throw s}})()}linkIdentity(t){var n=this;return(0,C.A)(function*(){var s;try{const{data:l,error:u}=yield n._useSession(function(){var h=(0,C.A)(function*(p){var E,w,x,G,ce;const{data:De,error:dt}=p;if(dt)throw dt;const lt=yield n._getUrlForProvider(`${n.url}/user/identities/authorize`,t.provider,{redirectTo:null===(E=t.options)||void 0===E?void 0:E.redirectTo,scopes:null===(w=t.options)||void 0===w?void 0:w.scopes,queryParams:null===(x=t.options)||void 0===x?void 0:x.queryParams,skipBrowserRedirect:!0});return yield ii(n.fetch,"GET",lt,{headers:n.headers,jwt:null!==(ce=null===(G=De.session)||void 0===G?void 0:G.access_token)&&void 0!==ce?ce:void 0})});return function(p){return h.apply(this,arguments)}}());if(u)throw u;return mu()&&!(null!==(s=t.options)&&void 0!==s&&s.skipBrowserRedirect)&&window.location.assign(null==l?void 0:l.url),{data:{provider:t.provider,url:null==l?void 0:l.url},error:null}}catch(l){if(Vr(l))return{data:{provider:t.provider,url:null},error:l};throw l}})()}unlinkIdentity(t){var n=this;return(0,C.A)(function*(){try{return yield n._useSession(function(){var s=(0,C.A)(function*(l){var u,h;const{data:p,error:E}=l;if(E)throw E;return yield ii(n.fetch,"DELETE",`${n.url}/user/identities/${t.identity_id}`,{headers:n.headers,jwt:null!==(h=null===(u=p.session)||void 0===u?void 0:u.access_token)&&void 0!==h?h:void 0})});return function(l){return s.apply(this,arguments)}}())}catch(s){if(Vr(s))return{data:null,error:s};throw s}})()}_refreshAccessToken(t){var n=this;return(0,C.A)(function*(){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;n._debug(s,"begin");try{const l=Date.now();return yield function O3(r,e){return new Promise((n,s)=>{(0,C.A)(function*(){for(let l=0;l<1/0;l++)try{const u=yield r(l);if(!e(l,null,u))return void n(u)}catch(u){if(!e(l,u))return void s(u)}})()})}(function(){var u=(0,C.A)(function*(h){return h>0&&(yield function k3(r){return fV.apply(this,arguments)}(200*Math.pow(2,h-1))),n._debug(s,"refreshing attempt",h),yield ii(n.fetch,"POST",`${n.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:n.headers,xform:Ag})});return function(h){return u.apply(this,arguments)}}(),(u,h)=>{const p=200*Math.pow(2,u);return h&&EV(h)&&Date.now()+p-l<TT})}catch(l){if(n._debug(s,"error",l),Vr(l))return{data:{session:null,user:null},error:l};throw l}finally{n._debug(s,"end")}})()}_isValidSession(t){return"object"==typeof t&&null!==t&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}_handleProviderSignIn(t,n){var s=this;return(0,C.A)(function*(){const l=yield s._getUrlForProvider(`${s.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return s._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",l),mu()&&!n.skipBrowserRedirect&&window.location.assign(l),{data:{provider:t,url:l},error:null}})()}_recoverAndRefresh(){var t=this;return(0,C.A)(function*(){var n;const s="#_recoverAndRefresh()";t._debug(s,"begin");try{const l=yield fM(t.storage,t.storageKey);if(t._debug(s,"session from storage",l),!t._isValidSession(l))return t._debug(s,"session is not valid"),void(null!==l&&(yield t._removeSession()));const u=Math.round(Date.now()/1e3),h=(null!==(n=l.expires_at)&&void 0!==n?n:1/0)<u+10;if(t._debug(s,`session has${h?"":" not"} expired with margin of 10s`),h){if(t.autoRefreshToken&&l.refresh_token){const{error:p}=yield t._callRefreshToken(l.refresh_token);p&&(console.error(p),EV(p)||(t._debug(s,"refresh failed with a non-retryable error, removing the session",p),yield t._removeSession()))}}else yield t._notifyAllSubscribers("SIGNED_IN",l)}catch(l){return t._debug(s,"error",l),void console.error(l)}finally{t._debug(s,"end")}})()}_callRefreshToken(t){var n=this;return(0,C.A)(function*(){var s,l;if(!t)throw new Cg;if(n.refreshingDeferred)return n.refreshingDeferred.promise;const u=`#_callRefreshToken(${t.substring(0,5)}...)`;n._debug(u,"begin");try{n.refreshingDeferred=new gM;const{data:h,error:p}=yield n._refreshAccessToken(t);if(p)throw p;if(!h.session)throw new Cg;yield n._saveSession(h.session),yield n._notifyAllSubscribers("TOKEN_REFRESHED",h.session);const E={session:h.session,error:null};return n.refreshingDeferred.resolve(E),E}catch(h){if(n._debug(u,"error",h),Vr(h)){const p={session:null,error:h};return EV(h)||(yield n._removeSession(),yield n._notifyAllSubscribers("SIGNED_OUT",null)),null===(s=n.refreshingDeferred)||void 0===s||s.resolve(p),p}throw null===(l=n.refreshingDeferred)||void 0===l||l.reject(h),h}finally{n.refreshingDeferred=null,n._debug(u,"end")}})()}_notifyAllSubscribers(t,n,s=!0){var l=this;return(0,C.A)(function*(){const u=`#_notifyAllSubscribers(${t})`;l._debug(u,"begin",n,`broadcast = ${s}`);try{l.broadcastChannel&&s&&l.broadcastChannel.postMessage({event:t,session:n});const h=[],p=Array.from(l.stateChangeEmitters.values()).map(function(){var E=(0,C.A)(function*(w){try{yield w.callback(t,n)}catch(x){h.push(x)}});return function(w){return E.apply(this,arguments)}}());if(yield Promise.all(p),h.length>0){for(let E=0;E<h.length;E+=1)console.error(h[E]);throw h[0]}}finally{l._debug(u,"end")}})()}_saveSession(t){var n=this;return(0,C.A)(function*(){n._debug("#_saveSession()",t),n.suppressGetSessionWarning=!0,yield FB(n.storage,n.storageKey,t)})()}_removeSession(){var t=this;return(0,C.A)(function*(){t._debug("#_removeSession()"),yield pM(t.storage,t.storageKey)})()}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&mu()&&null!=window&&window.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}_startAutoRefresh(){var t=this;return(0,C.A)(function*(){yield t._stopAutoRefresh(),t._debug("#_startAutoRefresh()");const n=setInterval(()=>t._autoRefreshTokenTick(),TT);t.autoRefreshTicker=n,n&&"object"==typeof n&&"function"==typeof n.unref?n.unref():typeof Deno<"u"&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(n),setTimeout((0,C.A)(function*(){yield t.initializePromise,yield t._autoRefreshTokenTick()}),0)})()}_stopAutoRefresh(){var t=this;return(0,C.A)(function*(){t._debug("#_stopAutoRefresh()");const n=t.autoRefreshTicker;t.autoRefreshTicker=null,n&&clearInterval(n)})()}startAutoRefresh(){var t=this;return(0,C.A)(function*(){t._removeVisibilityChangedCallback(),yield t._startAutoRefresh()})()}stopAutoRefresh(){var t=this;return(0,C.A)(function*(){t._removeVisibilityChangedCallback(),yield t._stopAutoRefresh()})()}_autoRefreshTokenTick(){var t=this;return(0,C.A)(function*(){t._debug("#_autoRefreshTokenTick()","begin");try{yield t._acquireLock(0,(0,C.A)(function*(){try{const n=Date.now();try{return yield t._useSession(function(){var s=(0,C.A)(function*(l){const{data:{session:u}}=l;if(!u||!u.refresh_token||!u.expires_at)return void t._debug("#_autoRefreshTokenTick()","no session");const h=Math.floor((1e3*u.expires_at-n)/TT);t._debug("#_autoRefreshTokenTick()",`access token expires in ${h} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),h<=3&&(yield t._callRefreshToken(u.refresh_token))});return function(l){return s.apply(this,arguments)}}())}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{t._debug("#_autoRefreshTokenTick()","end")}}))}catch(n){if(!(n.isAcquireTimeout||n instanceof zB))throw n;t._debug("auto refresh token tick lock not available")}})()}_handleVisibilityChange(){var t=this;return(0,C.A)(function*(){if(t._debug("#_handleVisibilityChange()"),!mu()||null==window||!window.addEventListener)return t.autoRefreshToken&&t.startAutoRefresh(),!1;try{t.visibilityChangedCallback=(0,C.A)(function*(){return yield t._onVisibilityChanged(!1)}),null==window||window.addEventListener("visibilitychange",t.visibilityChangedCallback),yield t._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}})()}_onVisibilityChanged(t){var n=this;return(0,C.A)(function*(){const s=`#_onVisibilityChanged(${t})`;n._debug(s,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(n.autoRefreshToken&&n._startAutoRefresh(),t||(yield n.initializePromise,yield n._acquireLock(-1,(0,C.A)(function*(){"visible"===document.visibilityState?yield n._recoverAndRefresh():n._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&n.autoRefreshToken&&n._stopAutoRefresh()})()}_getUrlForProvider(t,n,s){var l=this;return(0,C.A)(function*(){const u=[`provider=${encodeURIComponent(n)}`];if(null!=s&&s.redirectTo&&u.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),null!=s&&s.scopes&&u.push(`scopes=${encodeURIComponent(s.scopes)}`),"pkce"===l.flowType){const[h,p]=yield II(l.storage,l.storageKey),E=new URLSearchParams({code_challenge:`${encodeURIComponent(h)}`,code_challenge_method:`${encodeURIComponent(p)}`});u.push(E.toString())}if(null!=s&&s.queryParams){const h=new URLSearchParams(s.queryParams);u.push(h.toString())}return null!=s&&s.skipBrowserRedirect&&u.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${u.join("&")}`})()}_unenroll(t){var n=this;return(0,C.A)(function*(){try{return yield n._useSession(function(){var s=(0,C.A)(function*(l){var u;const{data:h,error:p}=l;return p?{data:null,error:p}:yield ii(n.fetch,"DELETE",`${n.url}/factors/${t.factorId}`,{headers:n.headers,jwt:null===(u=null==h?void 0:h.session)||void 0===u?void 0:u.access_token})});return function(l){return s.apply(this,arguments)}}())}catch(s){if(Vr(s))return{data:null,error:s};throw s}})()}_enroll(t){var n=this;return(0,C.A)(function*(){try{return yield n._useSession(function(){var s=(0,C.A)(function*(l){var u,h;const{data:p,error:E}=l;if(E)return{data:null,error:E};const w=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},"phone"===t.factorType?{phone:t.phone}:{issuer:t.issuer}),{data:x,error:G}=yield ii(n.fetch,"POST",`${n.url}/factors`,{body:w,headers:n.headers,jwt:null===(u=null==p?void 0:p.session)||void 0===u?void 0:u.access_token});return G?{data:null,error:G}:("phone"===t.factorType&&delete x.totp,"totp"===t.factorType&&!(null===(h=null==x?void 0:x.totp)||void 0===h)&&h.qr_code&&(x.totp.qr_code=`data:image/svg+xml;utf-8,${x.totp.qr_code}`),{data:x,error:null})});return function(l){return s.apply(this,arguments)}}())}catch(s){if(Vr(s))return{data:null,error:s};throw s}})()}_verify(t){var n=this;return(0,C.A)(function*(){return n._acquireLock(-1,(0,C.A)(function*(){try{return yield n._useSession(function(){var s=(0,C.A)(function*(l){var u;const{data:h,error:p}=l;if(p)return{data:null,error:p};const{data:E,error:w}=yield ii(n.fetch,"POST",`${n.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:n.headers,jwt:null===(u=null==h?void 0:h.session)||void 0===u?void 0:u.access_token});return w?{data:null,error:w}:(yield n._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+E.expires_in},E)),yield n._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",E),{data:E,error:w})});return function(l){return s.apply(this,arguments)}}())}catch(s){if(Vr(s))return{data:null,error:s};throw s}}))})()}_challenge(t){var n=this;return(0,C.A)(function*(){return n._acquireLock(-1,(0,C.A)(function*(){try{return yield n._useSession(function(){var s=(0,C.A)(function*(l){var u;const{data:h,error:p}=l;return p?{data:null,error:p}:yield ii(n.fetch,"POST",`${n.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:n.headers,jwt:null===(u=null==h?void 0:h.session)||void 0===u?void 0:u.access_token})});return function(l){return s.apply(this,arguments)}}())}catch(s){if(Vr(s))return{data:null,error:s};throw s}}))})()}_challengeAndVerify(t){var n=this;return(0,C.A)(function*(){const{data:s,error:l}=yield n._challenge({factorId:t.factorId});return l?{data:null,error:l}:yield n._verify({factorId:t.factorId,challengeId:s.id,code:t.code})})()}_listFactors(){var t=this;return(0,C.A)(function*(){const{data:{user:n},error:s}=yield t.getUser();if(s)return{data:null,error:s};const l=(null==n?void 0:n.factors)||[],u=l.filter(p=>"totp"===p.factor_type&&"verified"===p.status),h=l.filter(p=>"phone"===p.factor_type&&"verified"===p.status);return{data:{all:l,totp:u,phone:h},error:null}})()}_getAuthenticatorAssuranceLevel(){var t=this;return(0,C.A)(function*(){return t._acquireLock(-1,(0,C.A)(function*(){return yield t._useSession(function(){var n=(0,C.A)(function*(s){var l,u;const{data:{session:h},error:p}=s;if(p)return{data:null,error:p};if(!h)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const E=t._decodeJWT(h.access_token);let w=null;E.aal&&(w=E.aal);let x=w;return(null!==(u=null===(l=h.user.factors)||void 0===l?void 0:l.filter(De=>"verified"===De.status))&&void 0!==u?u:[]).length>0&&(x="aal2"),{data:{currentLevel:w,nextLevel:x,currentAuthenticationMethods:E.amr||[]},error:null}});return function(s){return n.apply(this,arguments)}}())}))})()}}return r.nextInstanceID=0,r})();const lH=aH;class cH extends lH{constructor(e){super(e)}}class dH{constructor(e,t,n){var s,l,u;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const h=function A3(r){return r.replace(/\/$/,"")}(e);this.realtimeUrl=`${h}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${h}/auth/v1`,this.storageUrl=`${h}/storage/v1`,this.functionsUrl=`${h}/functions/v1`;const p=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,w=function T3(r,e){const{db:t,auth:n,realtime:s,global:l}=r,{db:u,auth:h,realtime:p,global:E}=e,w={db:Object.assign(Object.assign({},u),t),auth:Object.assign(Object.assign({},h),n),realtime:Object.assign(Object.assign({},p),s),global:Object.assign(Object.assign({},E),l),accessToken:()=>function(r,e,t,n){return new(t||(t=Promise))(function(l,u){function h(w){try{E(n.next(w))}catch(x){u(x)}}function p(w){try{E(n.throw(w))}catch(x){u(x)}}function E(w){w.done?l(w.value):function s(l){return l instanceof t?l:new t(function(u){u(l)})}(w.value).then(h,p)}E((n=n.apply(r,e||[])).next())})}(this,void 0,void 0,function*(){return""})};return r.accessToken?w.accessToken=r.accessToken:delete w.accessToken,w}(null!=n?n:{},{db:_3,realtime:y3,auth:Object.assign(Object.assign({},v3),{storageKey:p}),global:m3});this.storageKey=null!==(s=w.auth.storageKey)&&void 0!==s?s:"",this.headers=null!==(l=w.global.headers)&&void 0!==l?l:{},w.accessToken?(this.accessToken=w.accessToken,this.auth=new Proxy({},{get:(x,G)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(G)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(u=w.auth)&&void 0!==u?u:{},this.headers,w.global.fetch),this.fetch=w3(t,this._getAccessToken.bind(this),w.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},w.realtime)),this.rest=new IB(`${h}/rest/v1`,{headers:this.headers,schema:w.db.schema,fetch:this.fetch}),w.accessToken||this._listenForAuthEvents()}get functions(){return new N4(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new p3(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return function(r,e,t,n){return new(t||(t=Promise))(function(l,u){function h(w){try{E(n.next(w))}catch(x){u(x)}}function p(w){try{E(n.throw(w))}catch(x){u(x)}}function E(w){w.done?l(w.value):function s(l){return l instanceof t?l:new t(function(u){u(l)})}(w.value).then(h,p)}E((n=n.apply(r,e||[])).next())})}(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,storageKey:l,flowType:u,lock:h,debug:p},E,w){var x;return new cH({url:this.authUrl,headers:Object.assign(Object.assign({},{Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`}),E),storageKey:l,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,flowType:u,lock:h,debug:p,fetch:w,hasCustomAuthorizationHeader:null!==(x="Authorization"in this.headers)&&void 0!==x&&x})}_initRealtimeClient(e){return new t3(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",null==n?void 0:n.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(this.supabaseKey),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.realtime.setAuth(null!=n?n:null),this.changedAccessToken=n)}}var y=W(3953),_u=W(9588),Pd=W(867);let fH=(()=>{var r;class e{constructor(n,s,l){this.generalService=n,this.supabaseService=s,this.router=l}ngOnInit(){}signOut(){var n=this;return(0,C.A)(function*(){if(confirm("Sei sicuro di voler effettuare la disconnessione?")){const{error:s}=yield n.supabaseService.supabase.auth.signOut();s?n.generalService.presentToast("Errore durante la disconnessione: "+s.message):(n.router.navigate(["/log"]),n.generalService.presentToast("Disconnessione effettuata con successo"))}})()}}return(r=e).\u0275fac=function(n){return new(n||r)(y.rXU(_u.O),y.rXU(Pd.w),y.rXU(ae.Ix))},r.\u0275cmp=y.VBU({type:r,selectors:[["app-sidebar"]],decls:51,vars:0,consts:[[2,"width","100%","height","100%","display","flex","flex-direction","column","padding-top","1rem","padding-bottom","1rem","overflow-x","hidden","overflow-y","auto"],[2,"width","100%","display","flex","align-items","center","justify-content","center","margin-bottom","0.8rem","margin-top","1rem"],["src","assets\\imgs\\logo.png",2,"width","80%"],[2,"display","flex","flex-direction","column","padding-left","1.5rem"],["id","sidebar-name-surname-display",2,"margin-bottom","0rem"],["id","sidebar-email-display",2,"margin-top","0.5rem"],[2,"display","flex","flex-direction","column","align-items","center","width","100%","flex","1"],["routerLink","/home",1,"sidebar-button"],[1,"material-symbols-outlined","notranslate",2,"font-size","1.8rem","color","#333"],["routerLink","/anagrafiche",1,"sidebar-button"],["routerLink","/immobili",1,"sidebar-button"],[1,"sidebar-button"],[1,"details",2,"width","90%"],[1,"summary"],[2,"padding-left","1.5rem","width","100%"],["routerLink","/add-anagrafica",1,"sidebar-button",2,"width","90%"],[1,"material-symbols-outlined","notranslate",2,"font-size","1.7rem","color","#333","padding-right","1rem","padding-left","0.2rem"],["onclick","document.getElementById('add-immobile-popup').style.display = 'flex'; ",1,"sidebar-button",2,"width","90%"],[1,"sidebar-button",2,"width","90%"],[2,"flex","1"],[1,"sidebar-button",3,"click"]],template:function(n,s){1&n&&(y.j41(0,"div",0)(1,"div",1),y.nrm(2,"img",2),y.k0s(),y.j41(3,"div",3),y.nrm(4,"h3",4)(5,"p",5),y.k0s(),y.j41(6,"div",6)(7,"button",7)(8,"span",8),y.EFF(9,"home"),y.k0s(),y.EFF(10,"Home"),y.k0s(),y.j41(11,"button",9)(12,"span",8),y.EFF(13,"people"),y.k0s(),y.EFF(14,"Anagrafiche"),y.k0s(),y.j41(15,"button",10)(16,"span",8),y.EFF(17,"apartment"),y.k0s(),y.EFF(18,"Immobili"),y.k0s(),y.j41(19,"button",11)(20,"span",8),y.EFF(21,"description"),y.k0s(),y.EFF(22,"Richieste"),y.k0s(),y.j41(23,"button",11)(24,"span",8),y.EFF(25,"check"),y.k0s(),y.EFF(26,"Pratiche Concluse"),y.k0s(),y.j41(27,"details",12)(28,"summary",13),y.EFF(29,"Aggiungi"),y.k0s(),y.j41(30,"div",14)(31,"button",15)(32,"span",16),y.EFF(33,"person_add"),y.k0s(),y.j41(34,"ion-label"),y.EFF(35,"Anagrafica"),y.k0s()(),y.j41(36,"button",17)(37,"span",16),y.EFF(38,"domain_add"),y.k0s(),y.j41(39,"ion-label"),y.EFF(40,"Immobile"),y.k0s()(),y.j41(41,"button",18)(42,"span",16),y.EFF(43,"note_add"),y.k0s(),y.j41(44,"ion-label"),y.EFF(45,"Richiesta"),y.k0s()()()(),y.nrm(46,"div",19),y.j41(47,"button",20),y.bIt("click",function(){return s.signOut()}),y.j41(48,"span",8),y.EFF(49,"logout"),y.k0s(),y.EFF(50,"Disconnetti"),y.k0s()()())},dependencies:[X.he,X.N7,ae.Wk]}),e})();var bv=W(177);function pH(r,e){if(1&r){const t=y.RV6();y.j41(0,"tr")(1,"td"),y.EFF(2),y.k0s(),y.j41(3,"td"),y.EFF(4),y.k0s(),y.j41(5,"td"),y.EFF(6),y.k0s(),y.nrm(7,"td"),y.j41(8,"td")(9,"span",21),y.bIt("click",function(){const s=y.eBV(t).$implicit,l=y.XpG();return y.Njj(l.deselectOwner(s))}),y.EFF(10,"remove"),y.k0s()()()}if(2&r){const t=e.$implicit;y.R7$(2),y.JRh(t.id),y.R7$(2),y.JRh(t.name),y.R7$(2),y.JRh(t.surname)}}function gH(r,e){if(1&r){const t=y.RV6();y.j41(0,"tr")(1,"td"),y.EFF(2),y.k0s(),y.j41(3,"td"),y.EFF(4),y.k0s(),y.j41(5,"td"),y.EFF(6),y.k0s(),y.nrm(7,"td"),y.j41(8,"td")(9,"span",21),y.bIt("click",function(){const s=y.eBV(t).$implicit,l=y.XpG();return y.Njj(l.selectOwner(s))}),y.EFF(10,"add"),y.k0s()()()}if(2&r){const t=e.$implicit;y.R7$(2),y.JRh(t.id),y.R7$(2),y.JRh(t.name),y.R7$(2),y.JRh(t.surname)}}let mH=(()=>{var r;class e{constructor(n,s,l){this.generalService=n,this.supabaseService=s,this.router=l,this.items=[],this.searchResults=[],this.owners={},this.selectedUsers=[]}ngOnInit(){}setAddressOnMap(){var n=document.getElementById("add-immobile-address-input").value;document.getElementById("map-iframe1").src="https://www.google.com/maps/embed/v1/place?key=AIzaSyDzEJIOGu3yyQOORQp9vNKinxtqHsEcKS0&q="+n}addImmobile(){var n=this;return(0,C.A)(function*(){const s=document.getElementById("add-immobile-name-input"),l=document.getElementById("add-immobile-address-input"),{error:p}=(document.getElementById("add-immobile-address-input"),yield n.supabaseService.supabase.from("anagrafiche_immobili").insert([{name:s.value,address:l.value,owners:n.selectedUsers}]));p?(console.error("Errore durante l'inserimento:",p),n.generalService.presentToast("Errore durante il salvataggio dell'immobile")):(document.getElementById("add-immobile-popup").style.display="none",n.router.navigate(["/immobili"]),n.generalService.presentToast("Anagrafica immobile aggiunta con successo"))})()}searchNamesInTable(){var n=this;return(0,C.A)(function*(){const s=document.getElementById("searchText").value;if(""!==s){const{data:l,error:u}=yield n.supabaseService.supabase.from("anagrafiche_clienti").select("id, name, surname").or(`name.ilike.%${s}%,surname.ilike.%${s}%`);if(u)return void console.error("Errore nella ricerca:",u.message);n.searchResults=l}else n.generalService.presentToast("Inserisci un termine di ricerca per il proprietario, nome e/o cognome")})()}selectOwner(n){this.selectedUsers.push(n)}deselectOwner(n){this.selectedUsers=this.selectedUsers.filter(s=>s!==n)}}return(r=e).\u0275fac=function(n){return new(n||r)(y.rXU(_u.O),y.rXU(Pd.w),y.rXU(ae.Ix))},r.\u0275cmp=y.VBU({type:r,selectors:[["app-popups"]],decls:62,vars:2,consts:[["id","add-immobile-popup",2,"display","none","flex-direction","column","align-items","center","width","100%","height","100%","background","rgba(0, 0, 0, 0.202)","position","absolute","z-index","999","overflow-x","hidden","overflow-y","auto"],[2,"background","white","border-radius","1rem","padding","1rem","display","flex","flex-direction","row","align-items","center","flex-wrap","wrap","max-width","60rem"],[2,"margin-bottom","1rem"],["id","map-iframe1","frameborder","0","referrerpolicy","no-referrer-when-downgrade","src",y.wXG`https://www.google.com/maps/embed/v1/place?key=AIzaSyDzEJIOGu3yyQOORQp9vNKinxtqHsEcKS0&q=Via+Ginnastica+21`,"allowfullscreen","",2,"width","100%","height","20rem","border-radius","1rem"],[2,"width","100%","display","flex","flex-direction","row","flex-wrap","wrap","gap","1rem"],[1,"inputGroup",2,"flex","1","min-width","15rem"],["id","add-immobile-name-input","type","text",1,"input-field3"],["for","add-immobile-name-input"],["id","add-immobile-address-input","type","text",1,"input-field3",3,"change"],["for","add-immobile-address-input"],[2,"display","flex","flex-direction","column","flex","1 1 0","min-width","200px"],[2,"width","100%","display","flex","flex-direction","row","align-items","center","gap","1rem"],["id","searchText","placeholder","Cerca per nome e cognome","type","text",1,"input-field3",3,"keydown.enter"],["for","searchText"],[1,"material-symbols-outlined","notranslate",2,"color","#131313","font-size","1.7rem","cursor","pointer","border","2px solid #131313","border-radius","50%","height","3rem","width","3rem","display","flex","align-items","center","justify-content","center",3,"click"],[2,"margin-bottom","0rem"],[4,"ngFor","ngForOf"],[2,"height","3rem","width","100%"],[2,"display","flex","flex-direction","row","align-items","center","gap","1rem"],["onclick","document.getElementById('add-immobile-popup').style.display = 'none'; ",1,"button",2,"flex","1"],[1,"button",2,"flex","1",3,"click"],[1,"material-symbols-outlined","notranslate","table-button",3,"click"]],template:function(n,s){1&n&&(y.j41(0,"div",0)(1,"div",1)(2,"h3",2),y.EFF(3,"Aggiungi Immobile"),y.k0s(),y.nrm(4,"iframe",3),y.j41(5,"div",4)(6,"div",5),y.nrm(7,"input",6),y.j41(8,"label",7),y.EFF(9,"Nome"),y.k0s()(),y.j41(10,"div",5)(11,"input",8),y.bIt("change",function(){return s.setAddressOnMap()}),y.k0s(),y.j41(12,"label",9),y.EFF(13,"Indirizzo"),y.k0s()()(),y.j41(14,"div",10)(15,"div",11)(16,"div",5)(17,"input",12),y.bIt("keydown.enter",function(){return s.searchNamesInTable()}),y.k0s(),y.j41(18,"label",13),y.EFF(19,"Proprietario"),y.k0s()(),y.j41(20,"span",14),y.bIt("click",function(){return s.searchNamesInTable()}),y.EFF(21,"search"),y.k0s()(),y.j41(22,"h2",15),y.EFF(23,"Lista dei proprietari"),y.k0s(),y.j41(24,"table")(25,"thead")(26,"tr")(27,"th"),y.EFF(28,"ID"),y.k0s(),y.j41(29,"th"),y.EFF(30,"Nome"),y.k0s(),y.j41(31,"th"),y.EFF(32,"Cognome"),y.k0s(),y.j41(33,"th"),y.EFF(34,"Et\xe0"),y.k0s(),y.j41(35,"th"),y.EFF(36,"Azioni"),y.k0s()()(),y.j41(37,"tbody"),y.DNE(38,pH,11,3,"tr",16),y.k0s()(),y.j41(39,"h2",15),y.EFF(40,"Risultati di ricerca"),y.k0s(),y.j41(41,"table")(42,"thead")(43,"tr")(44,"th"),y.EFF(45,"ID"),y.k0s(),y.j41(46,"th"),y.EFF(47,"Nome"),y.k0s(),y.j41(48,"th"),y.EFF(49,"Cognome"),y.k0s(),y.j41(50,"th"),y.EFF(51,"Et\xe0"),y.k0s(),y.j41(52,"th"),y.EFF(53,"Azioni"),y.k0s()()(),y.j41(54,"tbody"),y.DNE(55,gH,11,3,"tr",16),y.k0s()(),y.nrm(56,"div",17),y.j41(57,"div",18)(58,"button",19),y.EFF(59,"Annulla"),y.k0s(),y.j41(60,"button",20),y.bIt("click",function(){return s.addImmobile()}),y.EFF(61,"Aggiungi"),y.k0s()()()()()),2&n&&(y.R7$(38),y.Y8G("ngForOf",s.selectedUsers),y.R7$(17),y.Y8G("ngForOf",s.searchResults))},dependencies:[bv.Sq]}),e})(),_H=(()=>{var r;class e{constructor(){}ngOnInit(){}openCloseSidebar(){const n=document.getElementById("sidebar");n.style.display="flex"==n.style.display?"none":"flex"}}return(r=e).\u0275fac=function(n){return new(n||r)},r.\u0275cmp=y.VBU({type:r,selectors:[["app-header"]],decls:3,vars:0,consts:[[2,"height","3.8rem","padding-left","1rem","padding-right","1rem","border-bottom","1px solid rgba(0, 0, 0, 0.148)","display","flex","flex-direction","row","align-items","center"],[1,"material-symbols-outlined","notranslate",2,"font-size","2.2rem","color","#313131","cursor","pointer",3,"click"]],template:function(n,s){1&n&&(y.j41(0,"div",0)(1,"span",1),y.bIt("click",function(){return s.openCloseSidebar()}),y.EFF(2,"menu"),y.k0s()())}}),e})(),vH=(()=>{var r;class e{constructor(n,s,l){this.generalService=n,this.supabaseService=s,this.router=l}ngOnInit(){this.initSupabase(),this.verifySession(),this.getUserData()}verifySession(){var n=this;return(0,C.A)(function*(){const{data:s}=yield n.supabaseService.supabase.auth.getUser();s.user?(document.getElementById("header").style.display="flex",document.getElementById("sidebar").style.display="flex"):(document.getElementById("header").style.display="none",document.getElementById("sidebar").style.display="none",n.router.navigate(["/log"]))})()}initSupabase(){this.supabaseService.supabase=new dH("https://oybwcipapiltvefjfuqi.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im95YndjaXBhcGlsdHZlZmpmdXFpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjYxMjU0ODIsImV4cCI6MjA0MTcwMTQ4Mn0.-ZceQfMoh60YqqRebyKdAmpwbrqJ3l2VFXKXleK2w-Q",void 0)}getUserData(){var n=this;return(0,C.A)(function*(){const{data:s,error:l}=yield n.supabaseService.supabase.auth.getUser();if(l)console.error("Errore durante il recupero dell'utente:",l.message);else{const u=s.user;document.getElementById("sidebar-name-surname-display").innerText=u.user_metadata.name+" "+u.user_metadata.surname,document.getElementById("sidebar-email-display").innerText=u.email}})()}}return(r=e).\u0275fac=function(n){return new(n||r)(y.rXU(_u.O),y.rXU(Pd.w),y.rXU(ae.Ix))},r.\u0275cmp=y.VBU({type:r,selectors:[["app-root"]],decls:8,vars:0,consts:[[2,"height","100%","width","100%","display","flex","flex-direction","column"],["id","header"],[2,"height","calc(100% - 3.8rem)","width","100%","display","flex","flex-direction","row"],["id","sidebar"],["id","router-outlet-container",2,"height","100%","flex","1","position","relative"],[2,"width","100%","height","100%"]],template:function(n,s){1&n&&(y.j41(0,"ion-app"),y.nrm(1,"app-popups"),y.j41(2,"div",0),y.nrm(3,"app-header",1),y.j41(4,"div",2),y.nrm(5,"app-sidebar",3),y.j41(6,"div",4),y.nrm(7,"ion-router-outlet",5),y.k0s()()()())},dependencies:[X.U1,X.Rg,fH,mH,_H]}),e})(),yH=(()=>{var r;class e{constructor(n){this.generalService=n}ngOnInit(){this.generalService.initLogScreen()}}return(r=e).\u0275fac=function(n){return new(n||r)(y.rXU(_u.O))},r.\u0275cmp=y.VBU({type:r,selectors:[["app-log"]],decls:9,vars:0,consts:[[1,"log-master-container",2,"width","100%","height","100%","display","flex","flex-direction","row","align-items","center","justify-content","center","gap","4rem","flex-wrap","wrap","overflow-y","auto","overflow-x","hidden"],[2,"display","flex","flex-direction","column","gap","1rem","width","18rem"],["routerLink","/login",1,"button",2,"width","100%"],["routerLink","/register",1,"button",2,"width","100%"],["id","resp-img0","src","assets\\svgs\\undraw_small_town_re_7mcn.svg",2,"width","18rem"]],template:function(n,s){1&n&&(y.j41(0,"div",0)(1,"div",1)(2,"h1"),y.EFF(3,"Benvenuto, esegui l'accesso per continuare"),y.k0s(),y.j41(4,"button",2),y.EFF(5,"Accedi"),y.k0s(),y.j41(6,"button",3),y.EFF(7,"Registrati"),y.k0s()(),y.nrm(8,"img",4),y.k0s())},dependencies:[X.N7,ae.Wk]}),e})(),EH=(()=>{var r;class e{constructor(n,s,l){this.generalService=n,this.supabaseService=s,this.router=l}ngOnInit(){this.generalService.initLogScreen()}login(){var n=this;return(0,C.A)(function*(){const s=document.getElementById("login-email-input"),l=document.getElementById("login-password-input"),{error:h}=yield n.supabaseService.supabase.auth.signInWithPassword({email:s.value,password:l.value});h?n.generalService.presentToast("Login fallito: "+h.message):(document.getElementById("header").style.display="flex",document.getElementById("sidebar").style.display="flex",n.router.navigate(["/home"]),n.generalService.presentToast("Login effettuato con successo"))})()}}return(r=e).\u0275fac=function(n){return new(n||r)(y.rXU(_u.O),y.rXU(Pd.w),y.rXU(ae.Ix))},r.\u0275cmp=y.VBU({type:r,selectors:[["app-login"]],decls:15,vars:0,consts:[[1,"log-master-container",2,"width","100%","height","100%","display","flex","flex-direction","row","align-items","center","justify-content","center","gap","4rem","overflow-y","auto","overflow-x","hidden"],[2,"max-width","20rem","display","flex","flex-direction","column","gap","1rem"],[1,"input-group"],[1,"material-symbols-outlined","notranslate"],["id","login-email-input","type","text","placeholder","Email",1,"input"],["id","login-password-input","type","text","placeholder","Password",1,"input"],[1,"button",2,"width","100%",3,"click"],["src","assets\\svgs\\undraw_visual_data_re_mxxo.svg",1,"resp-img0",2,"flex-grow","1","max-width","18rem"]],template:function(n,s){1&n&&(y.j41(0,"div",0)(1,"div",1)(2,"h1"),y.EFF(3,"Bentornato, accedi"),y.k0s(),y.j41(4,"div",2)(5,"span",3),y.EFF(6,"mail"),y.k0s(),y.nrm(7,"input",4),y.k0s(),y.j41(8,"div",2)(9,"span",3),y.EFF(10,"key"),y.k0s(),y.nrm(11,"input",5),y.k0s(),y.j41(12,"button",6),y.bIt("click",function(){return s.login()}),y.EFF(13,"Accedi"),y.k0s()(),y.nrm(14,"img",7),y.k0s())}}),e})(),IH=(()=>{var r;class e{constructor(n,s,l){this.generalService=n,this.supabaseService=s,this.router=l}ngOnInit(){this.generalService.initLogScreen()}register(){var n=this;return(0,C.A)(function*(){const s=document.getElementById("register-name-input"),l=document.getElementById("register-surname-input"),u=document.getElementById("register-email-input"),h=document.getElementById("register-password-input"),{error:E}=yield n.supabaseService.supabase.auth.signUp({email:u.value,password:h.value,options:{data:{name:s.value,surname:l.value}}});E?n.generalService.presentToast("Errore durante la registrazione: "+E.message):(document.getElementById("header").style.display="flex",document.getElementById("sidebar").style.display="flex",n.router.navigate(["/home"]),n.generalService.presentToast("Registrazione effettuata con successo"))})()}}return(r=e).\u0275fac=function(n){return new(n||r)(y.rXU(_u.O),y.rXU(Pd.w),y.rXU(ae.Ix))},r.\u0275cmp=y.VBU({type:r,selectors:[["app-register"]],decls:24,vars:0,consts:[[1,"log-master-container",2,"width","100%","height","100%","display","flex","flex-direction","row","align-items","center","justify-content","center","gap","4rem","overflow-y","auto","overflow-x","hidden"],[2,"max-width","20rem","display","flex","flex-direction","column","gap","1rem"],[2,"width","100%","display","flex","flex-direction","row","gap","1rem","align-items","center","flex-wrap","wrap"],[1,"input-group",2,"flex","1"],[1,"material-symbols-outlined","notranslate"],["id","register-name-input","type","text","placeholder","Nome",1,"input"],["id","register-surname-input","type","text","placeholder","Cognome",1,"input"],[1,"input-group"],["id","register-email-input","type","text","placeholder","Email",1,"input"],["id","register-password-input","type","text","placeholder","Password",1,"input"],[1,"button",2,"width","100%",3,"click"],["src","assets\\svgs\\undraw_visual_data_re_mxxo.svg",1,"resp-img0",2,"flex-grow","1","max-width","18rem"]],template:function(n,s){1&n&&(y.j41(0,"div",0)(1,"div",1)(2,"h1"),y.EFF(3,"Benvenuto, registrati"),y.k0s(),y.j41(4,"div",2)(5,"div",3)(6,"span",4),y.EFF(7,"person"),y.k0s(),y.nrm(8,"input",5),y.k0s(),y.j41(9,"div",3)(10,"span",4),y.EFF(11,"person"),y.k0s(),y.nrm(12,"input",6),y.k0s()(),y.j41(13,"div",7)(14,"span",4),y.EFF(15,"mail"),y.k0s(),y.nrm(16,"input",8),y.k0s(),y.j41(17,"div",7)(18,"span",4),y.EFF(19,"key"),y.k0s(),y.nrm(20,"input",9),y.k0s(),y.j41(21,"button",10),y.bIt("click",function(){return s.register()}),y.EFF(22,"Registrati"),y.k0s()(),y.nrm(23,"img",11),y.k0s())}}),e})(),bH=(()=>{var r;class e{constructor(n,s,l){this.generalService=n,this.supabaseService=s,this.router=l}ngOnInit(){}addNewRegistry(){var n=this;return(0,C.A)(function*(){const s=document.getElementById("add-anagrafica-nome-input"),l=document.getElementById("add-anagrafica-cognome-input"),u=document.getElementById("add-anagrafica-telefono-input"),h=document.getElementById("add-anagrafica-email-input"),p=document.getElementById("add-anagrafica-residenza-input"),E=document.getElementById("add-anagrafica-lavoro-input"),{error:x}=yield n.supabaseService.supabase.from("anagrafiche_clienti").insert([{name:s.value,surname:l.value,phone_number:u.value,email:h.value,residenza:p.value,job:E.value}]);x?(console.error("Errore durante l'inserimento:",x),n.generalService.presentToast("Errore durante il salvataggio dei dati")):(n.router.navigate(["/anagrafiche"]),n.generalService.presentToast("Anagrafica cliente aggiunta con successo"))})()}}return(r=e).\u0275fac=function(n){return new(n||r)(y.rXU(_u.O),y.rXU(Pd.w),y.rXU(ae.Ix))},r.\u0275cmp=y.VBU({type:r,selectors:[["app-add-anagrafica"]],decls:35,vars:0,consts:[[2,"width","100%","height","100%","padding-left","1rem","padding-right","1rem","overflow-y","auto","overflow-x","hidden"],[2,"width","100%","display","flex","flex-direction","row","gap","1rem","align-items","center","flex-wrap","wrap"],[1,"inputGroup",2,"flex","1","min-width","15rem"],["id","add-anagrafica-nome-input","type","text",1,"input-field3"],["for","add-anagrafica-nome-input"],["id","add-anagrafica-cognome-input","type","text",1,"input-field3"],["for","add-anagrafica-cognome-input"],["id","add-anagrafica-telefono-input","type","text",1,"input-field3"],["for","add-anagrafica-telefono-input"],["id","add-anagrafica-email-input","type","text",1,"input-field3"],["for","add-anagrafica-email-input"],[1,"inputGroup",2,"flex","1"],["id","add-anagrafica-residenza-input","type","text",1,"input-field3"],["for","add-anagrafica-residenza-input"],["id","add-anagrafica-lavoro-input","type","text",1,"input-field3"],["for","add-anagrafica-lavoro-input"],[2,"flex","1"],[2,"width","100%","display","flex","flex-direction","row","align-items","center","gap","1rem","flex-wrap","wrap"],[1,"button",2,"flex","1"],[1,"button",2,"flex","1",3,"click"]],template:function(n,s){1&n&&(y.j41(0,"div",0)(1,"h2"),y.EFF(2,"Aggiungi Anagrafica"),y.k0s(),y.j41(3,"div",1)(4,"div",2),y.nrm(5,"input",3),y.j41(6,"label",4),y.EFF(7,"Nome"),y.k0s()(),y.j41(8,"div",2),y.nrm(9,"input",5),y.j41(10,"label",6),y.EFF(11,"Cognome"),y.k0s()()(),y.j41(12,"div",1)(13,"div",2),y.nrm(14,"input",7),y.j41(15,"label",8),y.EFF(16,"Numero Di Telefono"),y.k0s()(),y.j41(17,"div",2),y.nrm(18,"input",9),y.j41(19,"label",10),y.EFF(20,"Email"),y.k0s()()(),y.j41(21,"div",11),y.nrm(22,"input",12),y.j41(23,"label",13),y.EFF(24,"Residenza"),y.k0s()(),y.j41(25,"div",11),y.nrm(26,"input",14),y.j41(27,"label",15),y.EFF(28,"Lavoro"),y.k0s()(),y.nrm(29,"div",16),y.j41(30,"div",17)(31,"button",18),y.EFF(32,"Annulla"),y.k0s(),y.j41(33,"button",19),y.bIt("click",function(){return s.addNewRegistry()}),y.EFF(34,"Salva"),y.k0s()()())}}),e})(),wH=(()=>{var r;class e{constructor(){}ngOnInit(){}}return(r=e).\u0275fac=function(n){return new(n||r)},r.\u0275cmp=y.VBU({type:r,selectors:[["app-add"]],decls:3,vars:0,consts:[[2,"width","100%","height","100%","overflow-y","auto","overflow-x","hidden"],["routerLink","/add-anagrafica",1,"selection-button"]],template:function(n,s){1&n&&(y.j41(0,"div",0)(1,"button",1),y.EFF(2,"Aggiungi Anagrafica"),y.k0s()())},dependencies:[X.N7,ae.Wk]}),e})();var qB=W(4412);function TH(r,e){if(1&r){const t=y.RV6();y.j41(0,"tbody",3),y.bIt("click",function(){const s=y.eBV(t).$implicit,l=y.XpG();return y.Njj(l.goToRegistry(s))}),y.j41(1,"tr")(2,"td",4),y.EFF(3),y.k0s(),y.j41(4,"td",4),y.EFF(5),y.k0s(),y.j41(6,"td"),y.EFF(7),y.k0s(),y.nrm(8,"td"),y.k0s()()}if(2&r){const t=e.$implicit;y.R7$(3),y.JRh(t.id),y.R7$(2),y.Lme("",t.name," ",t.surname,""),y.R7$(2),y.JRh(t.phone_number)}}B.registerVersion("firebase","10.13.1","app-compat");let SH=(()=>{var r;class e{constructor(n,s,l){this.generalService=n,this.supabaseService=s,this.router=l,this.documents=new qB.t([]),this.nextPageAvailable=!0}ngOnInit(){this.fetchCustomers()}fetchCustomers(){this.supabaseService.supabase.from("anagrafiche_clienti").select("*").order("created_at",{ascending:!0}).then(({data:n,error:s})=>{s?this.generalService.presentToast("Errore nel recuperare le anagrafiche: "+s.message):this.documents.next(n)})}goToRegistry(n){this.generalService.currentAnagrafica=n,this.router.navigate(["/anagrafica"])}deleteCustomer(n){confirm("Sei sicuro di voler eliminare questa anagrafica cliente?")&&B.firestore().collection("anagrafiche").doc(n.id).delete().then(()=>{this.generalService.presentToast("Cliente eliminato con successo")}).catch(s=>{this.generalService.presentToast("Errore nell'eliminare l'anagrafica: "+s)})}}return(r=e).\u0275fac=function(n){return new(n||r)(y.rXU(_u.O),y.rXU(Pd.w),y.rXU(ae.Ix))},r.\u0275cmp=y.VBU({type:r,selectors:[["app-anagrafiche-clienti"]],decls:16,vars:3,consts:[[2,"height","100%","overflow-y","auto","overflow-x","hidden","padding-left","1rem","padding-right","1rem"],[1,"table"],["style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],[2,"cursor","pointer",3,"click"],[2,"cursor","pointer"]],template:function(n,s){1&n&&(y.j41(0,"div",0)(1,"h2"),y.EFF(2,"Anagrafiche"),y.k0s(),y.j41(3,"table",1)(4,"thead")(5,"tr")(6,"th"),y.EFF(7,"Id"),y.k0s(),y.j41(8,"th"),y.EFF(9,"Nome e Cognome"),y.k0s(),y.j41(10,"th"),y.EFF(11,"Numero di telefono"),y.k0s(),y.j41(12,"th"),y.EFF(13,"Ultimo Esito"),y.k0s()()(),y.DNE(14,TH,9,4,"tbody",2),y.nI1(15,"async"),y.k0s()()),2&n&&(y.R7$(14),y.Y8G("ngForOf",y.bMT(15,1,s.documents)))},dependencies:[bv.Sq,bv.Jj]}),e})();function DH(r,e){1&r&&(y.j41(0,"span"),y.EFF(1,", "),y.k0s())}function RH(r,e){if(1&r&&(y.j41(0,"span"),y.EFF(1),y.DNE(2,DH,2,0,"span",25),y.k0s()),2&r){const t=e.$implicit,n=e.last;y.R7$(),y.Lme(" ",t.name," ",t.surname,""),y.R7$(),y.Y8G("ngIf",!n)}}function PH(r,e){if(1&r&&(y.j41(0,"tr")(1,"td"),y.EFF(2),y.k0s(),y.j41(3,"td"),y.EFF(4),y.k0s(),y.j41(5,"td"),y.EFF(6),y.k0s(),y.j41(7,"td"),y.DNE(8,RH,3,3,"span",21),y.k0s()()),2&r){const t=e.$implicit;y.R7$(2),y.JRh(t.id),y.R7$(2),y.JRh(t.name),y.R7$(2),y.JRh(t.address),y.R7$(2),y.Y8G("ngForOf",t.owners)}}let xH=(()=>{var r;class e{constructor(n,s){this.generalService=n,this.supabaseService=s,this.immobiliSpecificiAnagrafica=[]}ngOnInit(){const n=document.getElementById("change-anagrafica-nome-input"),s=document.getElementById("change-anagrafica-cognome-input"),l=document.getElementById("change-anagrafica-telefono-input"),u=document.getElementById("change-anagrafica-email-input"),h=document.getElementById("change-anagrafica-residenza-input"),p=document.getElementById("change-anagrafica-lavoro-input");n.value=this.generalService.currentAnagrafica.name,s.value=this.generalService.currentAnagrafica.surname,l.value=this.generalService.currentAnagrafica.phone_number,u.value=this.generalService.currentAnagrafica.email,h.value=this.generalService.currentAnagrafica.residenza,p.value=this.generalService.currentAnagrafica.job,this.fetchSpecificImmobili()}fetchSpecificImmobili(){var n=this;return(0,C.A)(function*(){const{data:s}=yield n.supabaseService.supabase.from("anagrafiche_immobili").select("*").contains("owners",'[{"id": '+n.generalService.currentAnagrafica.id+"}]");n.immobiliSpecificiAnagrafica=s})()}changeRegistry(){const n=document.getElementById("change-anagrafica-nome-input"),s=document.getElementById("change-anagrafica-cognome-input"),l=document.getElementById("change-anagrafica-telefono-input"),u=document.getElementById("change-anagrafica-email-input"),h=document.getElementById("change-anagrafica-residenza-input"),p=document.getElementById("change-anagrafica-lavoro-input");B.firestore().collection("anagrafiche").doc().set({name:n.value,surname:s.value,phone_number:l.value,email:u.value,residenza:h.value,job:p.value,creation_date:B.firestore.FieldValue.serverTimestamp()}).then(()=>{this.generalService.presentToast("Anagrafica aggiunta con successo")}).catch(E=>{this.generalService.presentToast("Errore durante l'aggiunta dell'anagrafica: "+E.message)})}showAddImmobile(){document.getElementById("add-immobile-popup").style.display="flex"}}return(r=e).\u0275fac=function(n){return new(n||r)(y.rXU(_u.O),y.rXU(Pd.w))},r.\u0275cmp=y.VBU({type:r,selectors:[["app-anagrafica"]],decls:54,vars:1,consts:[[2,"width","100%","height","100%","padding-left","1rem","padding-right","1rem","overflow-y","auto","overflow-x","hidden"],["routerLink","/anagrafiche",1,"material-symbols-outlined","notranslate",2,"font-size","1.4rem","color","black","cursor","pointer"],[2,"width","100%","display","flex","flex-direction","row","gap","1rem","align-items","center","flex-wrap","wrap"],[1,"inputGroup",2,"flex","1","min-width","15rem"],["id","change-anagrafica-nome-input","type","text",1,"input-field3"],["for","change-anagrafica-nome-input"],["id","change-anagrafica-cognome-input","type","text",1,"input-field3"],["for","change-anagrafica-cognome-input"],["id","change-anagrafica-telefono-input","type","text",1,"input-field3"],["for","change-anagrafica-telefono-input"],["id","change-anagrafica-email-input","type","text",1,"input-field3"],["for","change-anagrafica-email-input"],[1,"inputGroup",2,"flex","1"],["id","change-anagrafica-residenza-input","type","text",1,"input-field3"],["for","change-anagrafica-residenza-input"],["id","change-anagrafica-lavoro-input","type","text",1,"input-field3"],["for","change-anagrafica-lavoro-input"],[2,"width","100%","display","flex","flex-direction","row","align-items","center","gap","1rem"],[2,"margin-top","0rem","margin-bottom","0rem"],[1,"button",3,"click"],[1,"table"],[4,"ngFor","ngForOf"],[2,"width","100%","display","flex","flex-direction","row","align-items","center","gap","1rem","flex-wrap","wrap","margin-bottom","1rem"],[1,"button",2,"flex","1"],[1,"button",2,"flex","1",3,"click"],[4,"ngIf"]],template:function(n,s){1&n&&(y.j41(0,"div",0)(1,"h2")(2,"span",1),y.EFF(3,"arrow_back_ios"),y.k0s(),y.EFF(4,"Anagrafica Cliente"),y.k0s(),y.j41(5,"div",2)(6,"div",3),y.nrm(7,"input",4),y.j41(8,"label",5),y.EFF(9,"Nome"),y.k0s()(),y.j41(10,"div",3),y.nrm(11,"input",6),y.j41(12,"label",7),y.EFF(13,"Cognome"),y.k0s()()(),y.j41(14,"div",2)(15,"div",3),y.nrm(16,"input",8),y.j41(17,"label",9),y.EFF(18,"Numero Di Telefono"),y.k0s()(),y.j41(19,"div",3),y.nrm(20,"input",10),y.j41(21,"label",11),y.EFF(22,"Email"),y.k0s()()(),y.j41(23,"div",12),y.nrm(24,"input",13),y.j41(25,"label",14),y.EFF(26,"Residenza"),y.k0s()(),y.j41(27,"div",12),y.nrm(28,"input",15),y.j41(29,"label",16),y.EFF(30,"Lavoro"),y.k0s()(),y.j41(31,"div",17)(32,"h2",18),y.EFF(33,"Immobili"),y.k0s(),y.j41(34,"button",19),y.bIt("click",function(){return s.showAddImmobile()}),y.EFF(35,"Aggiungi Immobile"),y.k0s()(),y.j41(36,"table",20)(37,"thead")(38,"tr")(39,"th"),y.EFF(40,"Id"),y.k0s(),y.j41(41,"th"),y.EFF(42,"Nome"),y.k0s(),y.j41(43,"th"),y.EFF(44,"Indirizzo"),y.k0s(),y.j41(45,"th"),y.EFF(46,"Proprietario/i"),y.k0s()()(),y.j41(47,"tbody"),y.DNE(48,PH,9,4,"tr",21),y.k0s()(),y.j41(49,"div",22)(50,"button",23),y.EFF(51,"Annulla"),y.k0s(),y.j41(52,"button",24),y.bIt("click",function(){return s.changeRegistry()}),y.EFF(53,"Salva"),y.k0s()()()),2&n&&(y.R7$(48),y.Y8G("ngForOf",s.immobiliSpecificiAnagrafica))},dependencies:[bv.Sq,bv.bT,X.N7,ae.Wk]}),e})();function MH(r,e){if(1&r){const t=y.RV6();y.j41(0,"tbody",3),y.bIt("click",function(){const s=y.eBV(t).$implicit,l=y.XpG();return y.Njj(l.goToImmobile(s))}),y.j41(1,"tr")(2,"td",4),y.EFF(3),y.k0s(),y.j41(4,"td",4),y.EFF(5),y.k0s(),y.nrm(6,"td"),y.j41(7,"td"),y.EFF(8),y.k0s(),y.j41(9,"td"),y.EFF(10),y.k0s(),y.nrm(11,"td"),y.k0s()()}if(2&r){const t=e.$implicit,n=y.XpG();y.R7$(3),y.JRh(t.id),y.R7$(2),y.JRh(t.name),y.R7$(3),y.JRh(t.address),y.R7$(2),y.JRh(n.generalService.formatTimestamp(t.created_at))}}let NH=(()=>{var r;class e{constructor(n,s,l){this.generalService=n,this.supabaseService=s,this.router=l,this.documents=new qB.t([]),this.nextPageAvailable=!0}ngOnInit(){this.fetchImmobili()}fetchImmobili(){this.supabaseService.supabase.from("anagrafiche_immobili").select("*").order("created_at",{ascending:!0}).then(({data:n,error:s})=>{s?this.generalService.presentToast("Errore nel recuperare le anagrafiche: "+s.message):this.documents.next(n)})}goToImmobile(n){this.router.navigate(["/anagrafica-immobile"],{queryParams:{anagrafica_immobile:JSON.stringify(n)}})}deleteCustomer(n){confirm("Sei sicuro di voler eliminare questo immobile?")&&B.firestore().collection("immobili").doc(n.id).delete().then(()=>{this.generalService.presentToast("Immobile eliminato con successo")}).catch(s=>{this.generalService.presentToast("Errore nell'eliminare gli immobili: "+s)})}}return(r=e).\u0275fac=function(n){return new(n||r)(y.rXU(_u.O),y.rXU(Pd.w),y.rXU(ae.Ix))},r.\u0275cmp=y.VBU({type:r,selectors:[["app-immobili"]],decls:20,vars:3,consts:[[2,"height","100%","overflow-y","auto","overflow-x","hidden","padding-left","1rem","padding-right","1rem"],[1,"table"],["style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],[2,"cursor","pointer",3,"click"],[2,"cursor","pointer"]],template:function(n,s){1&n&&(y.j41(0,"div",0)(1,"h2"),y.EFF(2,"Immobili"),y.k0s(),y.j41(3,"table",1)(4,"thead")(5,"tr")(6,"th"),y.EFF(7,"Id"),y.k0s(),y.j41(8,"th"),y.EFF(9,"Nome"),y.k0s(),y.j41(10,"th"),y.EFF(11,"Proprietario"),y.k0s(),y.j41(12,"th"),y.EFF(13,"Indirizzo"),y.k0s(),y.j41(14,"th"),y.EFF(15,"Data e ora creazione"),y.k0s(),y.j41(16,"th"),y.EFF(17,"Azioni"),y.k0s()()(),y.DNE(18,MH,12,4,"tbody",2),y.nI1(19,"async"),y.k0s()()),2&n&&(y.R7$(18),y.Y8G("ngForOf",y.bMT(19,1,s.documents)))},dependencies:[bv.Sq,bv.Jj]}),e})();function kH(r,e){if(1&r&&(y.j41(0,"tr")(1,"td"),y.EFF(2),y.k0s(),y.j41(3,"td"),y.EFF(4),y.k0s(),y.j41(5,"td"),y.EFF(6),y.k0s()()),2&r){const t=e.$implicit;y.R7$(2),y.JRh(t.id),y.R7$(2),y.JRh(t.name),y.R7$(2),y.JRh(t.other_data_field)}}const OH=[{path:"home",loadChildren:()=>W.e(5075).then(W.bind(W,5075)).then(r=>r.HomePageModule)},{path:"",redirectTo:"home",pathMatch:"full"},{path:"log",component:yH},{path:"login",component:EH},{path:"register",component:IH},{path:"add",component:wH},{path:"add-anagrafica",component:bH},{path:"anagrafiche",component:SH},{path:"anagrafica",component:xH},{path:"anagrafica-immobile",component:(()=>{var r;class e{constructor(n,s,l){this.generalService=n,this.supabaseService=s,this.route=l,this.ownerData=[]}ngOnInit(){this.route.queryParams.subscribe(n=>{const s=n.anagrafica_immobile;s&&(this.immobile=JSON.parse(s),this.getOwners(),document.getElementById("change-anagrafica-immobile-nome-input").value=this.immobile.name)})}getOwners(){const n=this.immobile.owners.map(s=>s.id);this.supabaseService.supabase.from("owners").select("*").in("id",n).then(s=>{s.data&&s.data.length>0?(this.ownerData=s.data,console.log("Dati dei proprietari recuperati:",this.ownerData)):console.log("Nessun proprietario trovato.")}).catch(s=>{console.error("Errore nel recupero dei dati:",s)})}changeRegistry(){const n=document.getElementById("change-anagrafica-immobile-nome-input"),s=document.getElementById("change-anagrafica-immobile-piano-input"),l=document.getElementById("change-anagrafica-immobile-telefono-input"),u=document.getElementById("change-anagrafica-immobile-email-input"),h=document.getElementById("change-anagrafica-immobile-residenza-input"),p=document.getElementById("change-anagrafica-immobile-lavoro-input");B.firestore().collection("anagrafiche").doc().set({name:n.value,surname:s.value,phone_number:l.value,email:u.value,residenza:h.value,job:p.value,creation_date:B.firestore.FieldValue.serverTimestamp()}).then(()=>{this.generalService.presentToast("Anagrafica aggiunta con successo")}).catch(E=>{this.generalService.presentToast("Errore durante l'aggiunta dell'anagrafica: "+E.message)})}showAddImmobile(){document.getElementById("add-immobile-popup").style.display="flex"}}return(r=e).\u0275fac=function(n){return new(n||r)(y.rXU(_u.O),y.rXU(Pd.w),y.rXU(ae.nX))},r.\u0275cmp=y.VBU({type:r,selectors:[["app-anagrafica-immobile"]],decls:449,vars:1,consts:[[2,"width","100%","height","100%","padding-left","1rem","padding-right","1rem","overflow-y","auto","overflow-x","hidden"],[2,"width","100%","display","flex","flex-direction","row","align-items","center","gap","1rem","height","2rem"],["routerLink","/anagrafiche",1,"material-symbols-outlined","notranslate",2,"font-size","1.4rem","color","black","cursor","pointer"],[1,"inputGroup"],[2,"margin-bottom","-1.5rem","z-index","2","background","white","margin-left","1.5rem","font-size","14px","color","rgb(100, 100, 100)","text-align","center"],["id","",1,"selector1",2,"width","100%","font-size","1rem"],["value","Immobile"],["value","Notizia"],["value","Incarico"],[2,"width","100%","display","flex","flex-direction","row","gap","1rem","align-items","center","flex-wrap","wrap"],[1,"inputGroup",2,"flex","1","min-width","15rem"],["id","change-anagrafica-immobile-nome-input","type","text",1,"input-field3"],["for","change-anagrafica-immobile-nome-input"],[1,"inputGroup",2,"flex","1"],["id","change-anagrafica-immobile-indirizzo-input","type","text",1,"input-field3"],["for","change-anagrafica-immobile-indirizzo-input"],[1,"inputGroup",2,"width","8rem"],["id","change-anagrafica-immobile-piano-input","type","text",1,"input-field3"],["for","change-anagrafica-immobile-piano-input"],["id","",1,"selector1",2,"width","100%"],["value","Appartamento"],["value","Attico"],["value","Villa"],["value","Villino Indipendente"],["value","Villino a Schiera"],["value","Porzione bifamiliare"],["value","Fabbricato Rurale"],["value","Garage"],["value","Attivit\xe0 Commerciale"],["value","Terreni Agricoli"],["value","Terreni Edificabili"],["value","Condominio"],[1,"details",2,"width","100%"],[1,"summary"],[1,"card-anagrafica2",2,"width","100%","background","rgb(231, 231, 231)","padding","1rem","border-radius","1rem","margin-bottom","2rem"],["id","change-anagrafica-immobile-indirizzo-input","type","number",1,"input-field3"],["id","change-anagrafica-immobile-piano-input","type","number",1,"input-field3"],[2,"margin-bottom","-1.5rem","z-index","2","background","white","margin-left","1.5rem","font-size","14px","color","rgb(100, 100, 100)","width","8rem","text-align","center"],["value","GRUPPO A"],["value","A/1 - Abitazione di tipo signorile"],["value","A/2 -\tAbitazione di tipo civile"],["value","A/3 -\tAbitazioni di tipo economico"],["value","A/4 - Abitazioni di tipo popolari"],["value","A/5 - Abitazioni di tipo ultrapopolare"],["value","A/6 - Abitazione di tipo rurale"],["value","A/7 - Abitazione in villini"],["value","A/8 - Abitazione in villa"],["value","A/9 - Castelli, palazzi di eminenti pregi artistici o storici"],["value","A/10 -\tUffici e studi privati"],["value","A/11 - Abitazioni o alloggi tipici dei luoghi"],["value","GRUPPO B"],["value","B/1 - Collegi e convitti, educandati, ricoveri, orfanotrofi, ospizi, conventi, seminari, caserme"],["value","B/2 - Case di cura e ospedali senza fine di lucro"],["value","B/3 - Prigioni e riformatori"],["value","B/4 - Uffici Pubblici"],["value","B/5 - Scuole e laboratori scientifici"],["value","B/6 - Biblioteche, pinacoteche, musei, gallerie, accademie che non hanno sede in edifici della categoria A/9. Circoli ricreativi e culturali, ed attivit\xe0 similari se non hanno fine di lucro"],["value","B/7 - Cappelle ed oratori non destinati all'esercizio pubblico del culto"],["value","B/8 - Magazzini sotterranei per depositi di derrate"],["value","GRUPPO C"],["value","C/1 - Negozi e Botteghe"],["value","C/2 - Magazzini e locali di Deposito"],["value","C/3 - Laboratori per arti e mestieri"],["value","C/4 - Fabbricati e locali per esercizi sportivi (senza fine di lucro)"],["value","C/5 - Stabilimenti balneari e di acque curative (senza fine di lucro)"],["value","C/6 - Stalle, scuderie, rimesse, autorimesse"],["value","C/7 - Tettoie chiuse od aperte"],["value","D/1 - Opifici"],["value","D/2 - Alberghi e pensioni (con fine di lucro)"],["value","D/3 - Teatri, cinematografi, sale per concerti e spettacoli e simili (con fine di lucro)"],["value","D/4 - Case di cura ed ospedali (con fine di lucro)"],["value","D/5 - Istituto di credito, cambio e assicurazione (con fine di lucro)"],["value","D/6 - Fabbricati e locali per esercizi sportivi (con fine di lucro)"],["value","D/7 - Fabbricati costruiti o adattati per le speciali esigenze di un'attivit\xe0 industriale e non suscettibili di destinazione diversa senza radicali trasformazioni"],["value","D/9 - Edifici galleggianti o sospesi assicurati a punti fissi del suolo, ponti privati soggetti a pedaggio"],["value","D/10\t- Fabbricati per funzioni produttive connesse alle attivit\xe0 agricole"],["id","change-anagrafica-immobile-tipologia-input","type","number",1,"input-field3"],["for","change-anagrafica-immobile-tipologia-input"],[1,"inputGroup",2,"width","16rem"],[2,"margin-bottom","-1.5rem","z-index","2","background","white","margin-left","1.5rem","font-size","14px","color","rgb(100, 100, 100)","width","15rem","text-align","center"],["value","A4"],["value","A3"],["value","A2"],["value","A1"],["value","B"],["value","C"],["value","E"],["value","F"],["value","G"],[2,"display","flex","flex-direction","column"],[2,"margin-top","-1rem","margin-bottom","0rem","font-size","0.8rem","text-align","center","width","100%"],["value","No"],["value","Si"],["value","Autonomo"],["value","Centralizzato"],[1,"card-anagrafica1",2,"width","100%","background","rgb(224, 237, 255)","padding","1rem","border-radius","1rem"],[2,"width","100%","display","flex","flex-direction","row","flex-wrap","wrap","gap","1rem"],["value","Da rifare"],["value","Medio"],["value","Buono"],["value","Ottimo"],["value","Nuovo"],[1,"inputGroup",2,"width","10rem"],["value","Nuova costruzione"],["value","Nuovo ingresso"],["value","Da ristrutturare"],["value","Rudere"],["value","Privato"],["value","Comune"],["id","change-anagrafica-immobile-email-input","type","text",1,"input-field3"],["for","change-anagrafica-immobile-email-input"],[2,"width","100%","display","flex","flex-direction","row","gap","1rem","flex-wrap","wrap"],[2,"flex","1"],["id","change-anagrafica-immobile-email-input","type","number",1,"input-field3"],["value","Cucinino"],["value","Cucina abitabile"],["value","Ampia cucina"],["id","change-anagrafica-immobile-lavoro-input","type","text",1,"input-field3"],["for","change-anagrafica-immobile-lavoro-input"],[2,"width","100%","display","flex","flex-direction","row","align-items","center","gap","1rem"],[2,"margin-top","0rem","margin-bottom","0rem"],[1,"button",3,"click"],[1,"table"],[4,"ngFor","ngForOf"],[2,"width","100%","display","flex","flex-direction","row","align-items","center","gap","1rem","flex-wrap","wrap"],[1,"button",2,"flex","1"],[1,"button",2,"flex","1",3,"click"]],template:function(n,s){1&n&&(y.j41(0,"div",0)(1,"h2",1)(2,"span",2),y.EFF(3,"arrow_back_ios"),y.k0s(),y.EFF(4," Anagrafica immobile "),y.j41(5,"div",3)(6,"label",4),y.EFF(7,"Stato"),y.k0s(),y.j41(8,"select",5)(9,"option",6),y.EFF(10,"Immobile"),y.k0s(),y.j41(11,"option",7),y.EFF(12,"Notizia"),y.k0s(),y.j41(13,"option",8),y.EFF(14,"Incarico"),y.k0s()()()(),y.j41(15,"div",9)(16,"div",10),y.nrm(17,"input",11),y.j41(18,"label",12),y.EFF(19,"Nome"),y.k0s()()(),y.j41(20,"div",9)(21,"div",13),y.nrm(22,"input",14),y.j41(23,"label",15),y.EFF(24,"Indirizzo"),y.k0s()(),y.j41(25,"div",16),y.nrm(26,"input",17),y.j41(27,"label",18),y.EFF(28,"Piano"),y.k0s()()(),y.j41(29,"div",9)(30,"div",3)(31,"label",4),y.EFF(32,"Tipologia"),y.k0s(),y.j41(33,"select",19)(34,"option",20),y.EFF(35,"Appartamento"),y.k0s(),y.j41(36,"option",21),y.EFF(37,"Attico"),y.k0s(),y.j41(38,"option",22),y.EFF(39,"Villa"),y.k0s(),y.j41(40,"option",23),y.EFF(41,"Villino Indipendente"),y.k0s(),y.j41(42,"option",24),y.EFF(43,"Villino a Schiera"),y.k0s(),y.j41(44,"option",25),y.EFF(45,"Porzione bifamiliare"),y.k0s(),y.j41(46,"option",26),y.EFF(47,"Fabbricato Rurale"),y.k0s(),y.j41(48,"option",27),y.EFF(49,"Garage"),y.k0s(),y.j41(50,"option",28),y.EFF(51,"Attivit\xe0 Commerciale"),y.k0s(),y.j41(52,"option",29),y.EFF(53,"Terreni Agricoli"),y.k0s(),y.j41(54,"option",30),y.EFF(55,"Terreni Edificabili"),y.k0s(),y.j41(56,"option",31),y.EFF(57,"Condominio"),y.k0s()()()(),y.j41(58,"details",32)(59,"summary",33)(60,"h5"),y.EFF(61,"Dati tecnici"),y.k0s()(),y.j41(62,"div",34)(63,"div",9)(64,"div",13),y.nrm(65,"input",35),y.j41(66,"label",15),y.EFF(67,"Anno di abitabilit\xe0"),y.k0s()(),y.j41(68,"div",13),y.nrm(69,"input",36),y.j41(70,"label",18),y.EFF(71,"Anno di costruzione"),y.k0s()()(),y.j41(72,"div",3)(73,"label",37),y.EFF(74,"Cat. Catastale"),y.k0s(),y.j41(75,"select",19)(76,"option",38),y.EFF(77,"GRUPPO A"),y.k0s(),y.j41(78,"option",39),y.EFF(79,"A/1 - Abitazione di tipo signorile"),y.k0s(),y.j41(80,"option",40),y.EFF(81,"A/2 - Abitazione di tipo civile"),y.k0s(),y.j41(82,"option",41),y.EFF(83,"A/3 - Abitazioni di tipo economico"),y.k0s(),y.j41(84,"option",42),y.EFF(85,"A/4 - Abitazioni di tipo popolari"),y.k0s(),y.j41(86,"option",43),y.EFF(87,"A/5 - Abitazioni di tipo ultrapopolare"),y.k0s(),y.j41(88,"option",44),y.EFF(89,"A/6 - Abitazione di tipo rurale"),y.k0s(),y.j41(90,"option",45),y.EFF(91,"A/7 - Abitazione in villini"),y.k0s(),y.j41(92,"option",46),y.EFF(93,"A/8 - Abitazione in villa"),y.k0s(),y.j41(94,"option",47),y.EFF(95,"A/9 - Castelli, palazzi di eminenti pregi artistici o storici"),y.k0s(),y.j41(96,"option",48),y.EFF(97,"A/10 - Uffici e studi privati"),y.k0s(),y.j41(98,"option",49),y.EFF(99,"A/11 - Abitazioni o alloggi tipici dei luoghi "),y.k0s(),y.j41(100,"option",50),y.EFF(101,"GRUPPO B"),y.k0s(),y.j41(102,"option",51),y.EFF(103," B/1 - Collegi e convitti, educandati, ricoveri, orfanotrofi, ospizi, conventi, seminari, caserme"),y.k0s(),y.j41(104,"option",52),y.EFF(105,"B/2 - Case di cura e ospedali senza fine di lucro"),y.k0s(),y.j41(106,"option",53),y.EFF(107,"B/3 - Prigioni e riformatori"),y.k0s(),y.j41(108,"option",54),y.EFF(109,"B/4 - Uffici Pubblici"),y.k0s(),y.j41(110,"option",55),y.EFF(111,"B/5 - Scuole e laboratori scientifici"),y.k0s(),y.j41(112,"option",56),y.EFF(113," B/6 - Biblioteche, pinacoteche, musei, gallerie, accademie che non hanno sede in edifici della categoria A/9. Circoli ricreativi e culturali, ed attivit\xe0 similari se non hanno fine di lucro"),y.k0s(),y.j41(114,"option",57),y.EFF(115,"B/7 - Cappelle ed oratori non destinati all'esercizio pubblico del culto"),y.k0s(),y.j41(116,"option",58),y.EFF(117,"B/8 - Magazzini sotterranei per depositi di derrate"),y.k0s(),y.j41(118,"option",59),y.EFF(119,"GRUPPO C"),y.k0s(),y.j41(120,"option",60),y.EFF(121,"C/1 - Negozi e Botteghe"),y.k0s(),y.j41(122,"option",61),y.EFF(123,"C/2 - Magazzini e locali di Deposito"),y.k0s(),y.j41(124,"option",62),y.EFF(125,"C/3 - Laboratori per arti e mestieri"),y.k0s(),y.j41(126,"option",63),y.EFF(127,"C/4 - Fabbricati e locali per esercizi sportivi (senza fine di lucro)"),y.k0s(),y.j41(128,"option",64),y.EFF(129,"C/5 - Stabilimenti balneari e di acque curative (senza fine di lucro)"),y.k0s(),y.j41(130,"option",65),y.EFF(131,"C/6 - Stalle, scuderie, rimesse, autorimesse "),y.k0s(),y.j41(132,"option",66),y.EFF(133,"C/7 - Tettoie chiuse od aperte"),y.k0s(),y.j41(134,"option",59),y.EFF(135,"GRUPPO D"),y.k0s(),y.j41(136,"option",67),y.EFF(137,"D/1 - Opifici"),y.k0s(),y.j41(138,"option",68),y.EFF(139,"D/2 - Alberghi e pensioni (con fine di lucro) "),y.k0s(),y.j41(140,"option",69),y.EFF(141,"D/3 - Teatri, cinematografi, sale per concerti e spettacoli e simili (con fine di lucro)"),y.k0s(),y.j41(142,"option",70),y.EFF(143,"D/4 - Case di cura ed ospedali (con fine di lucro)"),y.k0s(),y.j41(144,"option",71),y.EFF(145,"D/5 - Istituto di credito, cambio e assicurazione (con fine di lucro)"),y.k0s(),y.j41(146,"option",72),y.EFF(147,"D/6 - Fabbricati e locali per esercizi sportivi (con fine di lucro)"),y.k0s(),y.j41(148,"option",73),y.EFF(149," D/7 - Fabbricati costruiti o adattati per le speciali esigenze di un'attivit\xe0 industriale e non suscettibili di destinazione diversa senza radicali trasformazioni"),y.k0s(),y.j41(150,"option",74),y.EFF(151," D/9 - Edifici galleggianti o sospesi assicurati a punti fissi del suolo, ponti privati soggetti a pedaggio "),y.k0s(),y.j41(152,"option",75),y.EFF(153,"D/10 - Fabbricati per funzioni produttive connesse alle attivit\xe0 agricole"),y.k0s()()(),y.j41(154,"div",9)(155,"div",16),y.nrm(156,"input",76),y.j41(157,"label",77),y.EFF(158,"Anno di costruzione"),y.k0s()(),y.j41(159,"div",78)(160,"label",79),y.EFF(161,"Certificazion energetica APE"),y.k0s(),y.j41(162,"select",19)(163,"option",80),y.EFF(164,"A4"),y.k0s(),y.j41(165,"option",81),y.EFF(166,"A3"),y.k0s(),y.j41(167,"option",82),y.EFF(168,"A2"),y.k0s(),y.j41(169,"option",83),y.EFF(170,"A1"),y.k0s(),y.j41(171,"option",84),y.EFF(172,"B"),y.k0s(),y.j41(173,"option",85),y.EFF(174,"C"),y.k0s(),y.j41(175,"option",86),y.EFF(176,"E"),y.k0s(),y.j41(177,"option",87),y.EFF(178,"F"),y.k0s(),y.j41(179,"option",88),y.EFF(180,"G"),y.k0s()()(),y.j41(181,"div",89)(182,"div",16),y.nrm(183,"input",76),y.j41(184,"label",77),y.EFF(185,"EP gl, nren"),y.k0s()(),y.j41(186,"p",90),y.EFF(187,"KWh/m3 anno "),y.k0s()(),y.j41(188,"div",13)(189,"label",79),y.EFF(190,"Climatizzazione estiva"),y.k0s(),y.j41(191,"select",19)(192,"option",91),y.EFF(193,"No"),y.k0s(),y.j41(194,"option",92),y.EFF(195,"Si"),y.k0s()()()(),y.j41(196,"div",9)(197,"div",13)(198,"label",79),y.EFF(199,"Tipologia riscaldamento"),y.k0s(),y.j41(200,"select",19)(201,"option",93),y.EFF(202,"Autonomo"),y.k0s(),y.j41(203,"option",94),y.EFF(204,"Centralizzato"),y.k0s()()(),y.j41(205,"div",13),y.nrm(206,"input",76),y.j41(207,"label",77),y.EFF(208,"Anno impianto risc."),y.k0s()(),y.j41(209,"div",13)(210,"label",79),y.EFF(211,"Impianto elettrico certificato"),y.k0s(),y.j41(212,"select",19)(213,"option",91),y.EFF(214,"No"),y.k0s(),y.j41(215,"option",92),y.EFF(216,"Si"),y.k0s()()(),y.j41(217,"div",13),y.nrm(218,"input",76),y.j41(219,"label",77),y.EFF(220,"Anno dell'impianto elett."),y.k0s()()()()(),y.j41(221,"details",32)(222,"summary",33)(223,"h5"),y.EFF(224,"Dati valutazione"),y.k0s()(),y.j41(225,"div",95)(226,"div",96)(227,"div",13)(228,"label",4),y.EFF(229,"Tetto"),y.k0s(),y.j41(230,"select",19)(231,"option",97),y.EFF(232,"Da rifare"),y.k0s(),y.j41(233,"option",98),y.EFF(234,"Medio"),y.k0s(),y.j41(235,"option",99),y.EFF(236,"Buono"),y.k0s(),y.j41(237,"option",100),y.EFF(238,"Ottimo"),y.k0s(),y.j41(239,"option",101),y.EFF(240,"Nuovo"),y.k0s()()(),y.j41(241,"div",13)(242,"label",4),y.EFF(243,"Facciate"),y.k0s(),y.j41(244,"select",19)(245,"option",97),y.EFF(246,"Da rifare"),y.k0s(),y.j41(247,"option",98),y.EFF(248,"Medio"),y.k0s(),y.j41(249,"option",99),y.EFF(250,"Buono"),y.k0s(),y.j41(251,"option",100),y.EFF(252,"Ottimo"),y.k0s(),y.j41(253,"option",101),y.EFF(254,"Nuovo"),y.k0s()()()(),y.j41(255,"div",96)(256,"div",16),y.nrm(257,"input",76),y.j41(258,"label",77),y.EFF(259,"Locali"),y.k0s()(),y.j41(260,"div",102),y.nrm(261,"input",76),y.j41(262,"label",77),y.EFF(263,"Superficie (Mq)"),y.k0s()(),y.j41(264,"div",102),y.nrm(265,"input",76),y.j41(266,"label",77),y.EFF(267,"N. Bagni"),y.k0s()(),y.j41(268,"div",3)(269,"label",37),y.EFF(270,"Stato immobile"),y.k0s(),y.j41(271,"select",19)(272,"option",103),y.EFF(273,"Nuova costruzione"),y.k0s(),y.j41(274,"option",104),y.EFF(275,"Nuovo ingresso"),y.k0s(),y.j41(276,"option",100),y.EFF(277,"Ottimo"),y.k0s(),y.j41(278,"option",99),y.EFF(279,"Buono"),y.k0s(),y.j41(280,"option",105),y.EFF(281,"Da ristrutturare"),y.k0s(),y.j41(282,"option",106),y.EFF(283,"Rudere"),y.k0s()()(),y.j41(284,"div",3)(285,"label",4),y.EFF(286,"Giardino"),y.k0s(),y.j41(287,"select",19)(288,"option",91),y.EFF(289,"No"),y.k0s(),y.j41(290,"option",107),y.EFF(291,"Privato"),y.k0s(),y.j41(292,"option",108),y.EFF(293,"Comune"),y.k0s()()(),y.j41(294,"div",10),y.nrm(295,"input",109),y.j41(296,"label",110),y.EFF(297,"Giardino Mq"),y.k0s()()(),y.j41(298,"div",111)(299,"div",112)(300,"div",13)(301,"label",4),y.EFF(302,"Terrazzo"),y.k0s(),y.j41(303,"select",19)(304,"option",91),y.EFF(305,"No"),y.k0s(),y.j41(306,"option",92),y.EFF(307,"Si"),y.k0s()()(),y.j41(308,"div",10),y.nrm(309,"input",113),y.j41(310,"label",110),y.EFF(311,"Numero"),y.k0s()()(),y.j41(312,"div",112)(313,"div",13)(314,"label",4),y.EFF(315,"Balcone"),y.k0s(),y.j41(316,"select",19)(317,"option",91),y.EFF(318,"No"),y.k0s(),y.j41(319,"option",92),y.EFF(320,"Si"),y.k0s()()(),y.j41(321,"div",10),y.nrm(322,"input",113),y.j41(323,"label",110),y.EFF(324,"Numero"),y.k0s()()(),y.j41(325,"div",112)(326,"div",13)(327,"label",4),y.EFF(328,"Ascensore"),y.k0s(),y.j41(329,"select",19)(330,"option",91),y.EFF(331,"No"),y.k0s(),y.j41(332,"option",92),y.EFF(333,"Si"),y.k0s()()(),y.j41(334,"div",13),y.nrm(335,"input",113),y.j41(336,"label",110),y.EFF(337,"Numero"),y.k0s()()(),y.j41(338,"div",112)(339,"div",13)(340,"label",4),y.EFF(341,"Cantina"),y.k0s(),y.j41(342,"select",19)(343,"option",91),y.EFF(344,"No"),y.k0s(),y.j41(345,"option",92),y.EFF(346,"Si"),y.k0s()()(),y.j41(347,"div",13),y.nrm(348,"input",113),y.j41(349,"label",110),y.EFF(350,"Numero"),y.k0s()()(),y.j41(351,"div",112)(352,"div",13)(353,"label",4),y.EFF(354,"Camino"),y.k0s(),y.j41(355,"select",19)(356,"option",91),y.EFF(357,"No"),y.k0s(),y.j41(358,"option",92),y.EFF(359,"Si"),y.k0s()()(),y.j41(360,"div",13),y.nrm(361,"input",113),y.j41(362,"label",110),y.EFF(363,"Numero"),y.k0s()()(),y.j41(364,"div",112)(365,"div",13)(366,"label",4),y.EFF(367,"Taverna"),y.k0s(),y.j41(368,"select",19)(369,"option",91),y.EFF(370,"No"),y.k0s(),y.j41(371,"option",92),y.EFF(372,"Si"),y.k0s()()(),y.j41(373,"div",13),y.nrm(374,"input",113),y.j41(375,"label",110),y.EFF(376,"Numero"),y.k0s()()()(),y.j41(377,"div",111)(378,"div",13)(379,"label",4),y.EFF(380,"Cucina"),y.k0s(),y.j41(381,"select",19)(382,"option",114),y.EFF(383,"Cucinino"),y.k0s(),y.j41(384,"option",115),y.EFF(385,"Cucina abitabile"),y.k0s(),y.j41(386,"option",116),y.EFF(387,"Ampia cucina"),y.k0s()()(),y.j41(388,"div",13),y.nrm(389,"input",113),y.j41(390,"label",110),y.EFF(391,"Numero soggiorni"),y.k0s()(),y.j41(392,"div",13),y.nrm(393,"input",113),y.j41(394,"label",110),y.EFF(395,"Numero camere da letto"),y.k0s()(),y.j41(396,"div",13),y.nrm(397,"input",113),y.j41(398,"label",110),y.EFF(399,"Anno ristrutturazione"),y.k0s()()()()(),y.j41(400,"div",13),y.nrm(401,"input",117),y.j41(402,"label",118),y.EFF(403,"Id immobile associato"),y.k0s()(),y.j41(404,"div",119)(405,"h2",120),y.EFF(406,"Immobili associati"),y.k0s(),y.j41(407,"button",121),y.bIt("click",function(){return s.showAddImmobile()}),y.EFF(408,"Aggiungi immobile"),y.k0s()(),y.j41(409,"table",122)(410,"thead")(411,"tr")(412,"th"),y.EFF(413,"Nome e Cognome"),y.k0s(),y.j41(414,"th"),y.EFF(415,"Numero di telefono"),y.k0s(),y.j41(416,"th"),y.EFF(417,"Ultimo Esito"),y.k0s(),y.j41(418,"th"),y.EFF(419,"Azioni"),y.k0s()()(),y.j41(420,"tbody")(421,"tr"),y.nrm(422,"td")(423,"td")(424,"td")(425,"td"),y.k0s()()(),y.j41(426,"div",119)(427,"h2",120),y.EFF(428,"Proprietari/o"),y.k0s(),y.j41(429,"button",121),y.bIt("click",function(){return s.showAddImmobile()}),y.EFF(430,"Aggiungi Proprietario"),y.k0s()(),y.j41(431,"table",122)(432,"thead")(433,"tr")(434,"th"),y.EFF(435,"Nome e Cognome"),y.k0s(),y.j41(436,"th"),y.EFF(437,"Numero di telefono"),y.k0s(),y.j41(438,"th"),y.EFF(439,"Ultimo Esito"),y.k0s(),y.j41(440,"th"),y.EFF(441,"Azioni"),y.k0s()()(),y.j41(442,"tbody"),y.DNE(443,kH,7,3,"tr",123),y.k0s()(),y.j41(444,"div",124)(445,"button",125),y.EFF(446,"Annulla"),y.k0s(),y.j41(447,"button",126),y.bIt("click",function(){return s.changeRegistry()}),y.EFF(448,"Salva"),y.k0s()()()),2&n&&(y.R7$(443),y.Y8G("ngForOf",s.ownerData))}}),e})()},{path:"immobili",component:NH}];let FH=(()=>{var r;class e{}return(r=e).\u0275fac=function(n){return new(n||r)},r.\u0275mod=y.$C({type:r}),r.\u0275inj=y.G2t({imports:[ae.iI.forRoot(OH,{preloadingStrategy:ae.Kp}),ae.iI]}),e})(),LH=(()=>{var r;class e{}return(r=e).\u0275fac=function(n){return new(n||r)},r.\u0275mod=y.$C({type:r,bootstrap:[vH]}),r.\u0275inj=y.G2t({providers:[{provide:ae.b,useClass:xe.jM}],imports:[g.Bb,X.bv.forRoot(),FH]}),e})();g.sG().bootstrapModule(LH).catch(r=>console.log(r))},5286:(hn,rt,W)=>{"use strict";W.r(rt),W.d(rt,{Headers:()=>X,Request:()=>C,Response:()=>pe,default:()=>xe,fetch:()=>ae});var g=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}();const ae=g.fetch,xe=g.fetch.bind(g),X=g.Headers,C=g.Request,pe=g.Response},5958:function(hn,rt,W){"use strict";var _=W(9293).default,g=this&&this.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(rt,"__esModule",{value:!0});const ae=g(W(5286)),xe=g(W(4659));rt.default=class X{constructor(pe){this.shouldThrowOnError=!1,this.method=pe.method,this.url=pe.url,this.headers=pe.headers,this.schema=pe.schema,this.body=pe.body,this.shouldThrowOnError=pe.shouldThrowOnError,this.signal=pe.signal,this.isMaybeSingle=pe.isMaybeSingle,this.fetch=pe.fetch?pe.fetch:typeof fetch>"u"?ae.default:fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(pe,ue){return this.headers=Object.assign({},this.headers),this.headers[pe]=ue,this}then(pe,ue){var Ke=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let ye=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(function(){var Ve=_(function*(Oe){var Le,Ze,ot;let tt=null,nt=null,At=null,ct=Oe.status,ut=Oe.statusText;if(Oe.ok){if("HEAD"!==Ke.method){const at=yield Oe.text();""===at||(nt="text/csv"===Ke.headers.Accept||Ke.headers.Accept&&Ke.headers.Accept.includes("application/vnd.pgrst.plan+text")?at:JSON.parse(at))}const Xe=null===(Le=Ke.headers.Prefer)||void 0===Le?void 0:Le.match(/count=(exact|planned|estimated)/),_t=null===(Ze=Oe.headers.get("content-range"))||void 0===Ze?void 0:Ze.split("/");Xe&&_t&&_t.length>1&&(At=parseInt(_t[1])),Ke.isMaybeSingle&&"GET"===Ke.method&&Array.isArray(nt)&&(nt.length>1?(tt={code:"PGRST116",details:`Results contain ${nt.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},nt=null,At=null,ct=406,ut="Not Acceptable"):nt=1===nt.length?nt[0]:null)}else{const Xe=yield Oe.text();try{tt=JSON.parse(Xe),Array.isArray(tt)&&404===Oe.status&&(nt=[],tt=null,ct=200,ut="OK")}catch{404===Oe.status&&""===Xe?(ct=204,ut="No Content"):tt={message:Xe}}if(tt&&Ke.isMaybeSingle&&!(null===(ot=null==tt?void 0:tt.details)||void 0===ot)&&ot.includes("0 rows")&&(tt=null,ct=200,ut="OK"),tt&&Ke.shouldThrowOnError)throw new xe.default(tt)}return{error:tt,data:nt,count:At,status:ct,statusText:ut}});return function(Oe){return Ve.apply(this,arguments)}}());return this.shouldThrowOnError||(ye=ye.catch(Ve=>{var Oe,Le,Ze;return{error:{message:`${null!==(Oe=null==Ve?void 0:Ve.name)&&void 0!==Oe?Oe:"FetchError"}: ${null==Ve?void 0:Ve.message}`,details:`${null!==(Le=null==Ve?void 0:Ve.stack)&&void 0!==Le?Le:""}`,hint:"",code:`${null!==(Ze=null==Ve?void 0:Ve.code)&&void 0!==Ze?Ze:""}`},data:null,count:null,status:0,statusText:""}})),ye.then(pe,ue)}}},3242:function(hn,rt,W){"use strict";var _=this&&this.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(rt,"__esModule",{value:!0});const g=_(W(8666)),ae=_(W(3608)),xe=W(3057);class X{constructor(pe,{headers:ue={},schema:Ke,fetch:Qe}={}){this.url=pe,this.headers=Object.assign(Object.assign({},xe.DEFAULT_HEADERS),ue),this.schemaName=Ke,this.fetch=Qe}from(pe){const ue=new URL(`${this.url}/${pe}`);return new g.default(ue,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(pe){return new X(this.url,{headers:this.headers,schema:pe,fetch:this.fetch})}rpc(pe,ue={},{head:Ke=!1,get:Qe=!1,count:ye}={}){let Ve;const Oe=new URL(`${this.url}/rpc/${pe}`);let Le;Ke||Qe?(Ve=Ke?"HEAD":"GET",Object.entries(ue).filter(([ot,tt])=>void 0!==tt).map(([ot,tt])=>[ot,Array.isArray(tt)?`{${tt.join(",")}}`:`${tt}`]).forEach(([ot,tt])=>{Oe.searchParams.append(ot,tt)})):(Ve="POST",Le=ue);const Ze=Object.assign({},this.headers);return ye&&(Ze.Prefer=`count=${ye}`),new ae.default({method:Ve,url:Oe,headers:Ze,schema:this.schemaName,body:Le,fetch:this.fetch,allowEmpty:!1})}}rt.default=X},4659:(hn,rt)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});class W extends Error{constructor(g){super(g.message),this.name="PostgrestError",this.details=g.details,this.hint=g.hint,this.code=g.code}}rt.default=W},3608:function(hn,rt,W){"use strict";var _=this&&this.__importDefault||function(xe){return xe&&xe.__esModule?xe:{default:xe}};Object.defineProperty(rt,"__esModule",{value:!0});const g=_(W(3342));rt.default=class ae extends g.default{eq(X,C){return this.url.searchParams.append(X,`eq.${C}`),this}neq(X,C){return this.url.searchParams.append(X,`neq.${C}`),this}gt(X,C){return this.url.searchParams.append(X,`gt.${C}`),this}gte(X,C){return this.url.searchParams.append(X,`gte.${C}`),this}lt(X,C){return this.url.searchParams.append(X,`lt.${C}`),this}lte(X,C){return this.url.searchParams.append(X,`lte.${C}`),this}like(X,C){return this.url.searchParams.append(X,`like.${C}`),this}likeAllOf(X,C){return this.url.searchParams.append(X,`like(all).{${C.join(",")}}`),this}likeAnyOf(X,C){return this.url.searchParams.append(X,`like(any).{${C.join(",")}}`),this}ilike(X,C){return this.url.searchParams.append(X,`ilike.${C}`),this}ilikeAllOf(X,C){return this.url.searchParams.append(X,`ilike(all).{${C.join(",")}}`),this}ilikeAnyOf(X,C){return this.url.searchParams.append(X,`ilike(any).{${C.join(",")}}`),this}is(X,C){return this.url.searchParams.append(X,`is.${C}`),this}in(X,C){const pe=Array.from(new Set(C)).map(ue=>"string"==typeof ue&&new RegExp("[,()]").test(ue)?`"${ue}"`:`${ue}`).join(",");return this.url.searchParams.append(X,`in.(${pe})`),this}contains(X,C){return"string"==typeof C?this.url.searchParams.append(X,`cs.${C}`):Array.isArray(C)?this.url.searchParams.append(X,`cs.{${C.join(",")}}`):this.url.searchParams.append(X,`cs.${JSON.stringify(C)}`),this}containedBy(X,C){return"string"==typeof C?this.url.searchParams.append(X,`cd.${C}`):Array.isArray(C)?this.url.searchParams.append(X,`cd.{${C.join(",")}}`):this.url.searchParams.append(X,`cd.${JSON.stringify(C)}`),this}rangeGt(X,C){return this.url.searchParams.append(X,`sr.${C}`),this}rangeGte(X,C){return this.url.searchParams.append(X,`nxl.${C}`),this}rangeLt(X,C){return this.url.searchParams.append(X,`sl.${C}`),this}rangeLte(X,C){return this.url.searchParams.append(X,`nxr.${C}`),this}rangeAdjacent(X,C){return this.url.searchParams.append(X,`adj.${C}`),this}overlaps(X,C){return this.url.searchParams.append(X,"string"==typeof C?`ov.${C}`:`ov.{${C.join(",")}}`),this}textSearch(X,C,{config:pe,type:ue}={}){let Ke="";return"plain"===ue?Ke="pl":"phrase"===ue?Ke="ph":"websearch"===ue&&(Ke="w"),this.url.searchParams.append(X,`${Ke}fts${void 0===pe?"":`(${pe})`}.${C}`),this}match(X){return Object.entries(X).forEach(([C,pe])=>{this.url.searchParams.append(C,`eq.${pe}`)}),this}not(X,C,pe){return this.url.searchParams.append(X,`not.${C}.${pe}`),this}or(X,{foreignTable:C,referencedTable:pe=C}={}){return this.url.searchParams.append(pe?`${pe}.or`:"or",`(${X})`),this}filter(X,C,pe){return this.url.searchParams.append(X,`${C}.${pe}`),this}}},8666:function(hn,rt,W){"use strict";var _=this&&this.__importDefault||function(xe){return xe&&xe.__esModule?xe:{default:xe}};Object.defineProperty(rt,"__esModule",{value:!0});const g=_(W(3608));rt.default=class ae{constructor(X,{headers:C={},schema:pe,fetch:ue}){this.url=X,this.headers=C,this.schema=pe,this.fetch=ue}select(X,{head:C=!1,count:pe}={}){const ue=C?"HEAD":"GET";let Ke=!1;const Qe=(null!=X?X:"*").split("").map(ye=>/\s/.test(ye)&&!Ke?"":('"'===ye&&(Ke=!Ke),ye)).join("");return this.url.searchParams.set("select",Qe),pe&&(this.headers.Prefer=`count=${pe}`),new g.default({method:ue,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(X,{count:C,defaultToNull:pe=!0}={}){const Ke=[];if(this.headers.Prefer&&Ke.push(this.headers.Prefer),C&&Ke.push(`count=${C}`),pe||Ke.push("missing=default"),this.headers.Prefer=Ke.join(","),Array.isArray(X)){const Qe=X.reduce((ye,Ve)=>ye.concat(Object.keys(Ve)),[]);if(Qe.length>0){const ye=[...new Set(Qe)].map(Ve=>`"${Ve}"`);this.url.searchParams.set("columns",ye.join(","))}}return new g.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:X,fetch:this.fetch,allowEmpty:!1})}upsert(X,{onConflict:C,ignoreDuplicates:pe=!1,count:ue,defaultToNull:Ke=!0}={}){const ye=[`resolution=${pe?"ignore":"merge"}-duplicates`];if(void 0!==C&&this.url.searchParams.set("on_conflict",C),this.headers.Prefer&&ye.push(this.headers.Prefer),ue&&ye.push(`count=${ue}`),Ke||ye.push("missing=default"),this.headers.Prefer=ye.join(","),Array.isArray(X)){const Ve=X.reduce((Oe,Le)=>Oe.concat(Object.keys(Le)),[]);if(Ve.length>0){const Oe=[...new Set(Ve)].map(Le=>`"${Le}"`);this.url.searchParams.set("columns",Oe.join(","))}}return new g.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:X,fetch:this.fetch,allowEmpty:!1})}update(X,{count:C}={}){const ue=[];return this.headers.Prefer&&ue.push(this.headers.Prefer),C&&ue.push(`count=${C}`),this.headers.Prefer=ue.join(","),new g.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:X,fetch:this.fetch,allowEmpty:!1})}delete({count:X}={}){const pe=[];return X&&pe.push(`count=${X}`),this.headers.Prefer&&pe.unshift(this.headers.Prefer),this.headers.Prefer=pe.join(","),new g.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}},3342:function(hn,rt,W){"use strict";var _=this&&this.__importDefault||function(xe){return xe&&xe.__esModule?xe:{default:xe}};Object.defineProperty(rt,"__esModule",{value:!0});const g=_(W(5958));rt.default=class ae extends g.default{select(X){let C=!1;const pe=(null!=X?X:"*").split("").map(ue=>/\s/.test(ue)&&!C?"":('"'===ue&&(C=!C),ue)).join("");return this.url.searchParams.set("select",pe),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(X,{ascending:C=!0,nullsFirst:pe,foreignTable:ue,referencedTable:Ke=ue}={}){const Qe=Ke?`${Ke}.order`:"order",ye=this.url.searchParams.get(Qe);return this.url.searchParams.set(Qe,`${ye?`${ye},`:""}${X}.${C?"asc":"desc"}${void 0===pe?"":pe?".nullsfirst":".nullslast"}`),this}limit(X,{foreignTable:C,referencedTable:pe=C}={}){return this.url.searchParams.set(typeof pe>"u"?"limit":`${pe}.limit`,`${X}`),this}range(X,C,{foreignTable:pe,referencedTable:ue=pe}={}){const Qe=typeof ue>"u"?"limit":`${ue}.limit`;return this.url.searchParams.set(typeof ue>"u"?"offset":`${ue}.offset`,`${X}`),this.url.searchParams.set(Qe,""+(C-X+1)),this}abortSignal(X){return this.signal=X,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.headers.Accept="GET"===this.method?"application/json":"application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:X=!1,verbose:C=!1,settings:pe=!1,buffers:ue=!1,wal:Ke=!1,format:Qe="text"}={}){var ye;const Ve=[X?"analyze":null,C?"verbose":null,pe?"settings":null,ue?"buffers":null,Ke?"wal":null].filter(Boolean).join("|"),Oe=null!==(ye=this.headers.Accept)&&void 0!==ye?ye:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${Qe}; for="${Oe}"; options=${Ve};`,this}rollback(){var X;return(null!==(X=this.headers.Prefer)&&void 0!==X?X:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}},3057:(hn,rt,W)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0}),rt.DEFAULT_HEADERS=void 0;const _=W(3056);rt.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${_.version}`}},4060:function(hn,rt,W){"use strict";var _=this&&this.__importDefault||function(pe){return pe&&pe.__esModule?pe:{default:pe}};Object.defineProperty(rt,"__esModule",{value:!0}),rt.PostgrestBuilder=rt.PostgrestTransformBuilder=rt.PostgrestFilterBuilder=rt.PostgrestQueryBuilder=rt.PostgrestClient=void 0;const g=_(W(3242));rt.PostgrestClient=g.default;const ae=_(W(8666));rt.PostgrestQueryBuilder=ae.default;const xe=_(W(3608));rt.PostgrestFilterBuilder=xe.default;const X=_(W(3342));rt.PostgrestTransformBuilder=X.default;const C=_(W(5958));rt.PostgrestBuilder=C.default,rt.default={PostgrestClient:g.default,PostgrestQueryBuilder:ae.default,PostgrestFilterBuilder:xe.default,PostgrestTransformBuilder:X.default,PostgrestBuilder:C.default}},3056:(hn,rt)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0}),rt.version=void 0,rt.version="0.0.0-automated"},4412:(hn,rt,W)=>{"use strict";W.d(rt,{t:()=>g});var _=W(1413);class g extends _.B{constructor(xe){super(),this._value=xe}get value(){return this.getValue()}_subscribe(xe){const X=super._subscribe(xe);return!X.closed&&xe.next(this._value),X}getValue(){const{hasError:xe,thrownError:X,_value:C}=this;if(xe)throw X;return this._throwIfClosed(),C}next(xe){super.next(this._value=xe)}}},1985:(hn,rt,W)=>{"use strict";W.d(rt,{c:()=>ue});var _=W(7707),g=W(8359),ae=W(3494),xe=W(1203),X=W(1026),C=W(8071),pe=W(9786);let ue=(()=>{class Ve{constructor(Le){Le&&(this._subscribe=Le)}lift(Le){const Ze=new Ve;return Ze.source=this,Ze.operator=Le,Ze}subscribe(Le,Ze,ot){const tt=function ye(Ve){return Ve&&Ve instanceof _.vU||function Qe(Ve){return Ve&&(0,C.T)(Ve.next)&&(0,C.T)(Ve.error)&&(0,C.T)(Ve.complete)}(Ve)&&(0,g.Uv)(Ve)}(Le)?Le:new _.Ms(Le,Ze,ot);return(0,pe.Y)(()=>{const{operator:nt,source:At}=this;tt.add(nt?nt.call(tt,At):At?this._subscribe(tt):this._trySubscribe(tt))}),tt}_trySubscribe(Le){try{return this._subscribe(Le)}catch(Ze){Le.error(Ze)}}forEach(Le,Ze){return new(Ze=Ke(Ze))((ot,tt)=>{const nt=new _.Ms({next:At=>{try{Le(At)}catch(ct){tt(ct),nt.unsubscribe()}},error:tt,complete:ot});this.subscribe(nt)})}_subscribe(Le){var Ze;return null===(Ze=this.source)||void 0===Ze?void 0:Ze.subscribe(Le)}[ae.s](){return this}pipe(...Le){return(0,xe.m)(Le)(this)}toPromise(Le){return new(Le=Ke(Le))((Ze,ot)=>{let tt;this.subscribe(nt=>tt=nt,nt=>ot(nt),()=>Ze(tt))})}}return Ve.create=Oe=>new Ve(Oe),Ve})();function Ke(Ve){var Oe;return null!==(Oe=null!=Ve?Ve:X.$.Promise)&&void 0!==Oe?Oe:Promise}},1413:(hn,rt,W)=>{"use strict";W.d(rt,{B:()=>pe});var _=W(1985),g=W(8359);const xe=(0,W(1853).L)(Ke=>function(){Ke(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var X=W(7908),C=W(9786);let pe=(()=>{class Ke extends _.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ye){const Ve=new ue(this,this);return Ve.operator=ye,Ve}_throwIfClosed(){if(this.closed)throw new xe}next(ye){(0,C.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ve of this.currentObservers)Ve.next(ye)}})}error(ye){(0,C.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ye;const{observers:Ve}=this;for(;Ve.length;)Ve.shift().error(ye)}})}complete(){(0,C.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ye}=this;for(;ye.length;)ye.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ye;return(null===(ye=this.observers)||void 0===ye?void 0:ye.length)>0}_trySubscribe(ye){return this._throwIfClosed(),super._trySubscribe(ye)}_subscribe(ye){return this._throwIfClosed(),this._checkFinalizedStatuses(ye),this._innerSubscribe(ye)}_innerSubscribe(ye){const{hasError:Ve,isStopped:Oe,observers:Le}=this;return Ve||Oe?g.Kn:(this.currentObservers=null,Le.push(ye),new g.yU(()=>{this.currentObservers=null,(0,X.o)(Le,ye)}))}_checkFinalizedStatuses(ye){const{hasError:Ve,thrownError:Oe,isStopped:Le}=this;Ve?ye.error(Oe):Le&&ye.complete()}asObservable(){const ye=new _.c;return ye.source=this,ye}}return Ke.create=(Qe,ye)=>new ue(Qe,ye),Ke})();class ue extends pe{constructor(Qe,ye){super(),this.destination=Qe,this.source=ye}next(Qe){var ye,Ve;null===(Ve=null===(ye=this.destination)||void 0===ye?void 0:ye.next)||void 0===Ve||Ve.call(ye,Qe)}error(Qe){var ye,Ve;null===(Ve=null===(ye=this.destination)||void 0===ye?void 0:ye.error)||void 0===Ve||Ve.call(ye,Qe)}complete(){var Qe,ye;null===(ye=null===(Qe=this.destination)||void 0===Qe?void 0:Qe.complete)||void 0===ye||ye.call(Qe)}_subscribe(Qe){var ye,Ve;return null!==(Ve=null===(ye=this.source)||void 0===ye?void 0:ye.subscribe(Qe))&&void 0!==Ve?Ve:g.Kn}}},7707:(hn,rt,W)=>{"use strict";W.d(rt,{Ms:()=>ot,vU:()=>Ve});var _=W(8071),g=W(8359),ae=W(1026),xe=W(5334),X=W(5343);const C=Ke("C",void 0,void 0);function Ke(ut,Re,Xe){return{kind:ut,value:Re,error:Xe}}var Qe=W(9270),ye=W(9786);class Ve extends g.yU{constructor(Re){super(),this.isStopped=!1,Re?(this.destination=Re,(0,g.Uv)(Re)&&Re.add(this)):this.destination=ct}static create(Re,Xe,_t){return new ot(Re,Xe,_t)}next(Re){this.isStopped?At(function ue(ut){return Ke("N",ut,void 0)}(Re),this):this._next(Re)}error(Re){this.isStopped?At(function pe(ut){return Ke("E",void 0,ut)}(Re),this):(this.isStopped=!0,this._error(Re))}complete(){this.isStopped?At(C,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Re){this.destination.next(Re)}_error(Re){try{this.destination.error(Re)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Oe=Function.prototype.bind;function Le(ut,Re){return Oe.call(ut,Re)}class Ze{constructor(Re){this.partialObserver=Re}next(Re){const{partialObserver:Xe}=this;if(Xe.next)try{Xe.next(Re)}catch(_t){tt(_t)}}error(Re){const{partialObserver:Xe}=this;if(Xe.error)try{Xe.error(Re)}catch(_t){tt(_t)}else tt(Re)}complete(){const{partialObserver:Re}=this;if(Re.complete)try{Re.complete()}catch(Xe){tt(Xe)}}}class ot extends Ve{constructor(Re,Xe,_t){let at;if(super(),(0,_.T)(Re)||!Re)at={next:null!=Re?Re:void 0,error:null!=Xe?Xe:void 0,complete:null!=_t?_t:void 0};else{let It;this&&ae.$.useDeprecatedNextContext?(It=Object.create(Re),It.unsubscribe=()=>this.unsubscribe(),at={next:Re.next&&Le(Re.next,It),error:Re.error&&Le(Re.error,It),complete:Re.complete&&Le(Re.complete,It)}):at=Re}this.destination=new Ze(at)}}function tt(ut){ae.$.useDeprecatedSynchronousErrorHandling?(0,ye.l)(ut):(0,xe.m)(ut)}function At(ut,Re){const{onStoppedNotification:Xe}=ae.$;Xe&&Qe.f.setTimeout(()=>Xe(ut,Re))}const ct={closed:!0,next:X.l,error:function nt(ut){throw ut},complete:X.l}},8359:(hn,rt,W)=>{"use strict";W.d(rt,{Kn:()=>C,yU:()=>X,Uv:()=>pe});var _=W(8071);const ae=(0,W(1853).L)(Ke=>function(ye){Ke(this),this.message=ye?`${ye.length} errors occurred during unsubscription:\n${ye.map((Ve,Oe)=>`${Oe+1}) ${Ve.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ye});var xe=W(7908);class X{constructor(Qe){this.initialTeardown=Qe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Qe;if(!this.closed){this.closed=!0;const{_parentage:ye}=this;if(ye)if(this._parentage=null,Array.isArray(ye))for(const Le of ye)Le.remove(this);else ye.remove(this);const{initialTeardown:Ve}=this;if((0,_.T)(Ve))try{Ve()}catch(Le){Qe=Le instanceof ae?Le.errors:[Le]}const{_finalizers:Oe}=this;if(Oe){this._finalizers=null;for(const Le of Oe)try{ue(Le)}catch(Ze){Qe=null!=Qe?Qe:[],Ze instanceof ae?Qe=[...Qe,...Ze.errors]:Qe.push(Ze)}}if(Qe)throw new ae(Qe)}}add(Qe){var ye;if(Qe&&Qe!==this)if(this.closed)ue(Qe);else{if(Qe instanceof X){if(Qe.closed||Qe._hasParent(this))return;Qe._addParent(this)}(this._finalizers=null!==(ye=this._finalizers)&&void 0!==ye?ye:[]).push(Qe)}}_hasParent(Qe){const{_parentage:ye}=this;return ye===Qe||Array.isArray(ye)&&ye.includes(Qe)}_addParent(Qe){const{_parentage:ye}=this;this._parentage=Array.isArray(ye)?(ye.push(Qe),ye):ye?[ye,Qe]:Qe}_removeParent(Qe){const{_parentage:ye}=this;ye===Qe?this._parentage=null:Array.isArray(ye)&&(0,xe.o)(ye,Qe)}remove(Qe){const{_finalizers:ye}=this;ye&&(0,xe.o)(ye,Qe),Qe instanceof X&&Qe._removeParent(this)}}X.EMPTY=(()=>{const Ke=new X;return Ke.closed=!0,Ke})();const C=X.EMPTY;function pe(Ke){return Ke instanceof X||Ke&&"closed"in Ke&&(0,_.T)(Ke.remove)&&(0,_.T)(Ke.add)&&(0,_.T)(Ke.unsubscribe)}function ue(Ke){(0,_.T)(Ke)?Ke():Ke.unsubscribe()}},1026:(hn,rt,W)=>{"use strict";W.d(rt,{$:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4572:(hn,rt,W)=>{"use strict";W.d(rt,{z:()=>Qe});var _=W(1985),g=W(3073),ae=W(6648),xe=W(3669),X=W(6450),C=W(3794),pe=W(8496),ue=W(4360),Ke=W(5225);function Qe(...Oe){const Le=(0,C.lI)(Oe),Ze=(0,C.ms)(Oe),{args:ot,keys:tt}=(0,g.D)(Oe);if(0===ot.length)return(0,ae.H)([],Le);const nt=new _.c(function ye(Oe,Le,Ze=xe.D){return ot=>{Ve(Le,()=>{const{length:tt}=Oe,nt=new Array(tt);let At=tt,ct=tt;for(let ut=0;ut<tt;ut++)Ve(Le,()=>{const Re=(0,ae.H)(Oe[ut],Le);let Xe=!1;Re.subscribe((0,ue._)(ot,_t=>{nt[ut]=_t,Xe||(Xe=!0,ct--),ct||ot.next(Ze(nt.slice()))},()=>{--At||ot.complete()}))},ot)},ot)}}(ot,Le,tt?At=>(0,pe.e)(tt,At):xe.D));return Ze?nt.pipe((0,X.I)(Ze)):nt}function Ve(Oe,Le,Ze){Oe?(0,Ke.N)(Ze,Oe,Le):Le()}},6648:(hn,rt,W)=>{"use strict";W.d(rt,{H:()=>_t});var _=W(8750),g=W(5225),ae=W(9974),xe=W(4360);function X(at,It=0){return(0,ae.N)((Ne,ft)=>{Ne.subscribe((0,xe._)(ft,Pt=>(0,g.N)(ft,at,()=>ft.next(Pt),It),()=>(0,g.N)(ft,at,()=>ft.complete(),It),Pt=>(0,g.N)(ft,at,()=>ft.error(Pt),It)))})}function C(at,It=0){return(0,ae.N)((Ne,ft)=>{ft.add(at.schedule(()=>Ne.subscribe(ft),It))})}var Ke=W(1985),ye=W(4761),Ve=W(8071);function Le(at,It){if(!at)throw new Error("Iterable cannot be null");return new Ke.c(Ne=>{(0,g.N)(Ne,It,()=>{const ft=at[Symbol.asyncIterator]();(0,g.N)(Ne,It,()=>{ft.next().then(Pt=>{Pt.done?Ne.complete():Ne.next(Pt.value)})},0,!0)})})}var Ze=W(5055),ot=W(9858),tt=W(7441),nt=W(5397),At=W(7953),ct=W(591),ut=W(5196);function _t(at,It){return It?function Xe(at,It){if(null!=at){if((0,Ze.l)(at))return function pe(at,It){return(0,_.Tg)(at).pipe(C(It),X(It))}(at,It);if((0,tt.X)(at))return function Qe(at,It){return new Ke.c(Ne=>{let ft=0;return It.schedule(function(){ft===at.length?Ne.complete():(Ne.next(at[ft++]),Ne.closed||this.schedule())})})}(at,It);if((0,ot.y)(at))return function ue(at,It){return(0,_.Tg)(at).pipe(C(It),X(It))}(at,It);if((0,At.T)(at))return Le(at,It);if((0,nt.x)(at))return function Oe(at,It){return new Ke.c(Ne=>{let ft;return(0,g.N)(Ne,It,()=>{ft=at[ye.l](),(0,g.N)(Ne,It,()=>{let Pt,Ut;try{({value:Pt,done:Ut}=ft.next())}catch(Gt){return void Ne.error(Gt)}Ut?Ne.complete():Ne.next(Pt)},0,!0)}),()=>(0,Ve.T)(null==ft?void 0:ft.return)&&ft.return()})}(at,It);if((0,ut.U)(at))return function Re(at,It){return Le((0,ut.C)(at),It)}(at,It)}throw(0,ct.L)(at)}(at,It):(0,_.Tg)(at)}},3726:(hn,rt,W)=>{"use strict";W.d(rt,{R:()=>Qe});var _=W(8750),g=W(1985),ae=W(1397),xe=W(7441),X=W(8071),C=W(6450);const pe=["addListener","removeListener"],ue=["addEventListener","removeEventListener"],Ke=["on","off"];function Qe(Ze,ot,tt,nt){if((0,X.T)(tt)&&(nt=tt,tt=void 0),nt)return Qe(Ze,ot,tt).pipe((0,C.I)(nt));const[At,ct]=function Le(Ze){return(0,X.T)(Ze.addEventListener)&&(0,X.T)(Ze.removeEventListener)}(Ze)?ue.map(ut=>Re=>Ze[ut](ot,Re,tt)):function Ve(Ze){return(0,X.T)(Ze.addListener)&&(0,X.T)(Ze.removeListener)}(Ze)?pe.map(ye(Ze,ot)):function Oe(Ze){return(0,X.T)(Ze.on)&&(0,X.T)(Ze.off)}(Ze)?Ke.map(ye(Ze,ot)):[];if(!At&&(0,xe.X)(Ze))return(0,ae.Z)(ut=>Qe(ut,ot,tt))((0,_.Tg)(Ze));if(!At)throw new TypeError("Invalid event target");return new g.c(ut=>{const Re=(...Xe)=>ut.next(1<Xe.length?Xe:Xe[0]);return At(Re),()=>ct(Re)})}function ye(Ze,ot){return tt=>nt=>Ze[tt](ot,nt)}},8750:(hn,rt,W)=>{"use strict";W.d(rt,{Tg:()=>Oe});var _=W(1635),g=W(7441),ae=W(9858),xe=W(1985),X=W(5055),C=W(7953),pe=W(591),ue=W(5397),Ke=W(5196),Qe=W(8071),ye=W(5334),Ve=W(3494);function Oe(ut){if(ut instanceof xe.c)return ut;if(null!=ut){if((0,X.l)(ut))return function Le(ut){return new xe.c(Re=>{const Xe=ut[Ve.s]();if((0,Qe.T)(Xe.subscribe))return Xe.subscribe(Re);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ut);if((0,g.X)(ut))return function Ze(ut){return new xe.c(Re=>{for(let Xe=0;Xe<ut.length&&!Re.closed;Xe++)Re.next(ut[Xe]);Re.complete()})}(ut);if((0,ae.y)(ut))return function ot(ut){return new xe.c(Re=>{ut.then(Xe=>{Re.closed||(Re.next(Xe),Re.complete())},Xe=>Re.error(Xe)).then(null,ye.m)})}(ut);if((0,C.T)(ut))return nt(ut);if((0,ue.x)(ut))return function tt(ut){return new xe.c(Re=>{for(const Xe of ut)if(Re.next(Xe),Re.closed)return;Re.complete()})}(ut);if((0,Ke.U)(ut))return function At(ut){return nt((0,Ke.C)(ut))}(ut)}throw(0,pe.L)(ut)}function nt(ut){return new xe.c(Re=>{(function ct(ut,Re){var Xe,_t,at,It;return(0,_.sH)(this,void 0,void 0,function*(){try{for(Xe=(0,_.xN)(ut);!(_t=yield Xe.next()).done;)if(Re.next(_t.value),Re.closed)return}catch(Ne){at={error:Ne}}finally{try{_t&&!_t.done&&(It=Xe.return)&&(yield It.call(Xe))}finally{if(at)throw at.error}}Re.complete()})})(ut,Re).catch(Xe=>Re.error(Xe))})}},7673:(hn,rt,W)=>{"use strict";W.d(rt,{of:()=>ae});var _=W(3794),g=W(6648);function ae(...xe){const X=(0,_.lI)(xe);return(0,g.H)(xe,X)}},4360:(hn,rt,W)=>{"use strict";W.d(rt,{_:()=>g});var _=W(7707);function g(xe,X,C,pe,ue){return new ae(xe,X,C,pe,ue)}class ae extends _.vU{constructor(X,C,pe,ue,Ke,Qe){super(X),this.onFinalize=Ke,this.shouldUnsubscribe=Qe,this._next=C?function(ye){try{C(ye)}catch(Ve){X.error(Ve)}}:super._next,this._error=ue?function(ye){try{ue(ye)}catch(Ve){X.error(Ve)}finally{this.unsubscribe()}}:super._error,this._complete=pe?function(){try{pe()}catch(ye){X.error(ye)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var X;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:C}=this;super.unsubscribe(),!C&&(null===(X=this.onFinalize)||void 0===X||X.call(this))}}}},5964:(hn,rt,W)=>{"use strict";W.d(rt,{p:()=>ae});var _=W(9974),g=W(4360);function ae(xe,X){return(0,_.N)((C,pe)=>{let ue=0;C.subscribe((0,g._)(pe,Ke=>xe.call(X,Ke,ue++)&&pe.next(Ke)))})}},6354:(hn,rt,W)=>{"use strict";W.d(rt,{T:()=>ae});var _=W(9974),g=W(4360);function ae(xe,X){return(0,_.N)((C,pe)=>{let ue=0;C.subscribe((0,g._)(pe,Ke=>{pe.next(xe.call(X,Ke,ue++))}))})}},1397:(hn,rt,W)=>{"use strict";W.d(rt,{Z:()=>ue});var _=W(6354),g=W(8750),ae=W(9974),xe=W(5225),X=W(4360),pe=W(8071);function ue(Ke,Qe,ye=1/0){return(0,pe.T)(Qe)?ue((Ve,Oe)=>(0,_.T)((Le,Ze)=>Qe(Ve,Le,Oe,Ze))((0,g.Tg)(Ke(Ve,Oe))),ye):("number"==typeof Qe&&(ye=Qe),(0,ae.N)((Ve,Oe)=>function C(Ke,Qe,ye,Ve,Oe,Le,Ze,ot){const tt=[];let nt=0,At=0,ct=!1;const ut=()=>{ct&&!tt.length&&!nt&&Qe.complete()},Re=_t=>nt<Ve?Xe(_t):tt.push(_t),Xe=_t=>{Le&&Qe.next(_t),nt++;let at=!1;(0,g.Tg)(ye(_t,At++)).subscribe((0,X._)(Qe,It=>{null==Oe||Oe(It),Le?Re(It):Qe.next(It)},()=>{at=!0},void 0,()=>{if(at)try{for(nt--;tt.length&&nt<Ve;){const It=tt.shift();Ze?(0,xe.N)(Qe,Ze,()=>Xe(It)):Xe(It)}ut()}catch(It){Qe.error(It)}}))};return Ke.subscribe((0,X._)(Qe,Re,()=>{ct=!0,ut()})),()=>{null==ot||ot()}}(Ve,Oe,Ke,ye)))}},5558:(hn,rt,W)=>{"use strict";W.d(rt,{n:()=>xe});var _=W(8750),g=W(9974),ae=W(4360);function xe(X,C){return(0,g.N)((pe,ue)=>{let Ke=null,Qe=0,ye=!1;const Ve=()=>ye&&!Ke&&ue.complete();pe.subscribe((0,ae._)(ue,Oe=>{null==Ke||Ke.unsubscribe();let Le=0;const Ze=Qe++;(0,_.Tg)(X(Oe,Ze)).subscribe(Ke=(0,ae._)(ue,ot=>ue.next(C?C(Oe,ot,Ze,Le++):ot),()=>{Ke=null,Ve()}))},()=>{ye=!0,Ve()}))})}},9270:(hn,rt,W)=>{"use strict";W.d(rt,{f:()=>_});const _={setTimeout(g,ae,...xe){const{delegate:X}=_;return null!=X&&X.setTimeout?X.setTimeout(g,ae,...xe):setTimeout(g,ae,...xe)},clearTimeout(g){const{delegate:ae}=_;return((null==ae?void 0:ae.clearTimeout)||clearTimeout)(g)},delegate:void 0}},4761:(hn,rt,W)=>{"use strict";W.d(rt,{l:()=>g});const g=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(hn,rt,W)=>{"use strict";W.d(rt,{s:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},3794:(hn,rt,W)=>{"use strict";W.d(rt,{ms:()=>xe,lI:()=>X});var _=W(8071);function ae(pe){return pe[pe.length-1]}function xe(pe){return(0,_.T)(ae(pe))?pe.pop():void 0}function X(pe){return function g(pe){return pe&&(0,_.T)(pe.schedule)}(ae(pe))?pe.pop():void 0}},3073:(hn,rt,W)=>{"use strict";W.d(rt,{D:()=>X});const{isArray:_}=Array,{getPrototypeOf:g,prototype:ae,keys:xe}=Object;function X(pe){if(1===pe.length){const ue=pe[0];if(_(ue))return{args:ue,keys:null};if(function C(pe){return pe&&"object"==typeof pe&&g(pe)===ae}(ue)){const Ke=xe(ue);return{args:Ke.map(Qe=>ue[Qe]),keys:Ke}}}return{args:pe,keys:null}}},7908:(hn,rt,W)=>{"use strict";function _(g,ae){if(g){const xe=g.indexOf(ae);0<=xe&&g.splice(xe,1)}}W.d(rt,{o:()=>_})},1853:(hn,rt,W)=>{"use strict";function _(g){const xe=g(X=>{Error.call(X),X.stack=(new Error).stack});return xe.prototype=Object.create(Error.prototype),xe.prototype.constructor=xe,xe}W.d(rt,{L:()=>_})},8496:(hn,rt,W)=>{"use strict";function _(g,ae){return g.reduce((xe,X,C)=>(xe[X]=ae[C],xe),{})}W.d(rt,{e:()=>_})},9786:(hn,rt,W)=>{"use strict";W.d(rt,{Y:()=>ae,l:()=>xe});var _=W(1026);let g=null;function ae(X){if(_.$.useDeprecatedSynchronousErrorHandling){const C=!g;if(C&&(g={errorThrown:!1,error:null}),X(),C){const{errorThrown:pe,error:ue}=g;if(g=null,pe)throw ue}}else X()}function xe(X){_.$.useDeprecatedSynchronousErrorHandling&&g&&(g.errorThrown=!0,g.error=X)}},5225:(hn,rt,W)=>{"use strict";function _(g,ae,xe,X=0,C=!1){const pe=ae.schedule(function(){xe(),C?g.add(this.schedule(null,X)):this.unsubscribe()},X);if(g.add(pe),!C)return pe}W.d(rt,{N:()=>_})},3669:(hn,rt,W)=>{"use strict";function _(g){return g}W.d(rt,{D:()=>_})},7441:(hn,rt,W)=>{"use strict";W.d(rt,{X:()=>_});const _=g=>g&&"number"==typeof g.length&&"function"!=typeof g},7953:(hn,rt,W)=>{"use strict";W.d(rt,{T:()=>g});var _=W(8071);function g(ae){return Symbol.asyncIterator&&(0,_.T)(null==ae?void 0:ae[Symbol.asyncIterator])}},8071:(hn,rt,W)=>{"use strict";function _(g){return"function"==typeof g}W.d(rt,{T:()=>_})},5055:(hn,rt,W)=>{"use strict";W.d(rt,{l:()=>ae});var _=W(3494),g=W(8071);function ae(xe){return(0,g.T)(xe[_.s])}},5397:(hn,rt,W)=>{"use strict";W.d(rt,{x:()=>ae});var _=W(4761),g=W(8071);function ae(xe){return(0,g.T)(null==xe?void 0:xe[_.l])}},9858:(hn,rt,W)=>{"use strict";W.d(rt,{y:()=>g});var _=W(8071);function g(ae){return(0,_.T)(null==ae?void 0:ae.then)}},5196:(hn,rt,W)=>{"use strict";W.d(rt,{C:()=>ae,U:()=>xe});var _=W(1635),g=W(8071);function ae(X){return(0,_.AQ)(this,arguments,function*(){const pe=X.getReader();try{for(;;){const{value:ue,done:Ke}=yield(0,_.N3)(pe.read());if(Ke)return yield(0,_.N3)(void 0);yield yield(0,_.N3)(ue)}}finally{pe.releaseLock()}})}function xe(X){return(0,g.T)(null==X?void 0:X.getReader)}},9974:(hn,rt,W)=>{"use strict";W.d(rt,{N:()=>ae,S:()=>g});var _=W(8071);function g(xe){return(0,_.T)(null==xe?void 0:xe.lift)}function ae(xe){return X=>{if(g(X))return X.lift(function(C){try{return xe(C,this)}catch(pe){this.error(pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(hn,rt,W)=>{"use strict";W.d(rt,{I:()=>xe});var _=W(6354);const{isArray:g}=Array;function xe(X){return(0,_.T)(C=>function ae(X,C){return g(C)?X(...C):X(C)}(X,C))}},5343:(hn,rt,W)=>{"use strict";function _(){}W.d(rt,{l:()=>_})},1203:(hn,rt,W)=>{"use strict";W.d(rt,{F:()=>g,m:()=>ae});var _=W(3669);function g(...xe){return ae(xe)}function ae(xe){return 0===xe.length?_.D:1===xe.length?xe[0]:function(C){return xe.reduce((pe,ue)=>ue(pe),C)}}},5334:(hn,rt,W)=>{"use strict";W.d(rt,{m:()=>ae});var _=W(1026),g=W(9270);function ae(xe){g.f.setTimeout(()=>{const{onUnhandledError:X}=_.$;if(!X)throw xe;X(xe)})}},591:(hn,rt,W)=>{"use strict";function _(g){return new TypeError(`You provided ${null!==g&&"object"==typeof g?"an invalid object":`'${g}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}W.d(rt,{L:()=>_})},8996:(hn,rt,W)=>{var _={"./ion-accordion_2.entry.js":[2375,2076,2375],"./ion-action-sheet.entry.js":[8814,2076,8814],"./ion-alert.entry.js":[5222,2076,5222],"./ion-app_8.entry.js":[7720,2076,7720],"./ion-avatar_3.entry.js":[1049,1049],"./ion-back-button.entry.js":[3162,2076,3162],"./ion-backdrop.entry.js":[7240,7240],"./ion-breadcrumb_2.entry.js":[8314,2076,8314],"./ion-button_2.entry.js":[4591,4591],"./ion-card_5.entry.js":[8584,8584],"./ion-checkbox.entry.js":[3511,3511],"./ion-chip.entry.js":[6024,6024],"./ion-col_3.entry.js":[5100,5100],"./ion-datetime-button.entry.js":[7428,1293,7428],"./ion-datetime_3.entry.js":[2885,1293,2076,2885],"./ion-fab_3.entry.js":[4463,2076,4463],"./ion-img.entry.js":[4183,4183],"./ion-infinite-scroll_2.entry.js":[4171,2076,4171],"./ion-input-password-toggle.entry.js":[6521,2076,6521],"./ion-input.entry.js":[9344,2076,9344],"./ion-item-option_3.entry.js":[5949,2076,5949],"./ion-item_8.entry.js":[3506,2076,3506],"./ion-loading.entry.js":[7372,2076,7372],"./ion-menu_3.entry.js":[2075,2076,2075],"./ion-modal.entry.js":[441,2076,441],"./ion-nav_2.entry.js":[5712,2076,5712],"./ion-picker-column-option.entry.js":[9013,9013],"./ion-picker-column.entry.js":[1459,2076,1459],"./ion-picker.entry.js":[6840,6840],"./ion-popover.entry.js":[6433,2076,6433],"./ion-progress-bar.entry.js":[9977,9977],"./ion-radio_2.entry.js":[8066,2076,8066],"./ion-range.entry.js":[8477,2076,8477],"./ion-refresher_2.entry.js":[5197,2076,5197],"./ion-reorder_2.entry.js":[7030,2076,7030],"./ion-ripple-effect.entry.js":[964,964],"./ion-route_4.entry.js":[8970,8970],"./ion-searchbar.entry.js":[8193,2076,8193],"./ion-segment_2.entry.js":[2560,2076,2560],"./ion-select_3.entry.js":[7076,2076,7076],"./ion-spinner.entry.js":[8805,2076,8805],"./ion-split-pane.entry.js":[5887,5887],"./ion-tab-bar_2.entry.js":[4406,2076,4406],"./ion-tab_2.entry.js":[1102,1102],"./ion-text.entry.js":[1577,1577],"./ion-textarea.entry.js":[2348,2076,2348],"./ion-toast.entry.js":[2415,2076,2415],"./ion-toggle.entry.js":[3814,2076,3814]};function g(ae){if(!W.o(_,ae))return Promise.resolve().then(()=>{var C=new Error("Cannot find module '"+ae+"'");throw C.code="MODULE_NOT_FOUND",C});var xe=_[ae],X=xe[0];return Promise.all(xe.slice(1).map(W.e)).then(()=>W(X))}g.keys=()=>Object.keys(_),g.id=8996,hn.exports=g},9293:hn=>{function rt(_,g,ae,xe,X,C,pe){try{var ue=_[C](pe),Ke=ue.value}catch(Qe){return void ae(Qe)}ue.done?g(Ke):Promise.resolve(Ke).then(xe,X)}hn.exports=function W(_){return function(){var g=this,ae=arguments;return new Promise(function(xe,X){var C=_.apply(g,ae);function pe(Ke){rt(C,xe,X,pe,ue,"next",Ke)}function ue(Ke){rt(C,xe,X,pe,ue,"throw",Ke)}pe(void 0)})}},hn.exports.__esModule=!0,hn.exports.default=hn.exports},177:(hn,rt,W)=>{"use strict";W.d(rt,{AJ:()=>Fe,Jj:()=>ui,MD:()=>qe,N0:()=>Ar,QT:()=>ae,Sm:()=>ot,Sq:()=>rn,T3:()=>ze,VF:()=>X,Vy:()=>Bt,Xr:()=>dn,ZD:()=>xe,_b:()=>Q,aZ:()=>nt,bT:()=>xr,fw:()=>tt,hb:()=>Le,hj:()=>Ke,qQ:()=>pe});var _=W(3953);let g=null;function ae(){return g}function xe(D){var U;null!==(U=g)&&void 0!==U||(g=D)}class X{}const pe=new _.nKC("");let ue=(()=>{var D;class U{historyGo(V){throw new Error("")}}return(D=U).\u0275fac=function(V){return new(V||D)},D.\u0275prov=_.jDH({token:D,factory:()=>(0,_.WQX)(Qe),providedIn:"platform"}),U})();const Ke=new _.nKC("");let Qe=(()=>{var D;class U extends ue{constructor(){super(),this._doc=(0,_.WQX)(pe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ae().getBaseHref(this._doc)}onPopState(V){const ie=ae().getGlobalEventTarget(this._doc,"window");return ie.addEventListener("popstate",V,!1),()=>ie.removeEventListener("popstate",V)}onHashChange(V){const ie=ae().getGlobalEventTarget(this._doc,"window");return ie.addEventListener("hashchange",V,!1),()=>ie.removeEventListener("hashchange",V)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(V){this._location.pathname=V}pushState(V,ie,be){this._history.pushState(V,ie,be)}replaceState(V,ie,be){this._history.replaceState(V,ie,be)}forward(){this._history.forward()}back(){this._history.back()}historyGo(V=0){this._history.go(V)}getState(){return this._history.state}}return(D=U).\u0275fac=function(V){return new(V||D)},D.\u0275prov=_.jDH({token:D,factory:()=>new D,providedIn:"platform"}),U})();function ye(D,U){if(0==D.length)return U;if(0==U.length)return D;let fe=0;return D.endsWith("/")&&fe++,U.startsWith("/")&&fe++,2==fe?D+U.substring(1):1==fe?D+U:D+"/"+U}function Ve(D){const U=D.match(/#|\?|$/),fe=U&&U.index||D.length;return D.slice(0,fe-("/"===D[fe-1]?1:0))+D.slice(fe)}function Oe(D){return D&&"?"!==D[0]?"?"+D:D}let Le=(()=>{var D;class U{historyGo(V){throw new Error("")}}return(D=U).\u0275fac=function(V){return new(V||D)},D.\u0275prov=_.jDH({token:D,factory:()=>(0,_.WQX)(ot),providedIn:"root"}),U})();const Ze=new _.nKC("");let ot=(()=>{var D;class U extends Le{constructor(V,ie){var be,xt,Qt;super(),this._platformLocation=V,this._removeListenerFns=[],this._baseHref=null!==(be=null!==(xt=null!=ie?ie:this._platformLocation.getBaseHrefFromDOM())&&void 0!==xt?xt:null===(Qt=(0,_.WQX)(pe).location)||void 0===Qt?void 0:Qt.origin)&&void 0!==be?be:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}prepareExternalUrl(V){return ye(this._baseHref,V)}path(V=!1){const ie=this._platformLocation.pathname+Oe(this._platformLocation.search),be=this._platformLocation.hash;return be&&V?`${ie}${be}`:ie}pushState(V,ie,be,xt){const Qt=this.prepareExternalUrl(be+Oe(xt));this._platformLocation.pushState(V,ie,Qt)}replaceState(V,ie,be,xt){const Qt=this.prepareExternalUrl(be+Oe(xt));this._platformLocation.replaceState(V,ie,Qt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(V=0){var ie,be;null===(ie=(be=this._platformLocation).historyGo)||void 0===ie||ie.call(be,V)}}return(D=U).\u0275fac=function(V){return new(V||D)(_.KVO(ue),_.KVO(Ze,8))},D.\u0275prov=_.jDH({token:D,factory:D.\u0275fac,providedIn:"root"}),U})(),tt=(()=>{var D;class U extends Le{constructor(V,ie){super(),this._platformLocation=V,this._baseHref="",this._removeListenerFns=[],null!=ie&&(this._baseHref=ie)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}path(V=!1){var ie;const be=null!==(ie=this._platformLocation.hash)&&void 0!==ie?ie:"#";return be.length>0?be.substring(1):be}prepareExternalUrl(V){const ie=ye(this._baseHref,V);return ie.length>0?"#"+ie:ie}pushState(V,ie,be,xt){let Qt=this.prepareExternalUrl(be+Oe(xt));0==Qt.length&&(Qt=this._platformLocation.pathname),this._platformLocation.pushState(V,ie,Qt)}replaceState(V,ie,be,xt){let Qt=this.prepareExternalUrl(be+Oe(xt));0==Qt.length&&(Qt=this._platformLocation.pathname),this._platformLocation.replaceState(V,ie,Qt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(V=0){var ie,be;null===(ie=(be=this._platformLocation).historyGo)||void 0===ie||ie.call(be,V)}}return(D=U).\u0275fac=function(V){return new(V||D)(_.KVO(ue),_.KVO(Ze,8))},D.\u0275prov=_.jDH({token:D,factory:D.\u0275fac}),U})(),nt=(()=>{var D;class U{constructor(V){this._subject=new _.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=V;const ie=this._locationStrategy.getBaseHref();this._basePath=function Re(D){if(new RegExp("^(https?:)?//").test(D)){const[,fe]=D.split(/\/\/[^\/]+/);return fe}return D}(Ve(ut(ie))),this._locationStrategy.onPopState(be=>{this._subject.emit({url:this.path(!0),pop:!0,state:be.state,type:be.type})})}ngOnDestroy(){var V;null===(V=this._urlChangeSubscription)||void 0===V||V.unsubscribe(),this._urlChangeListeners=[]}path(V=!1){return this.normalize(this._locationStrategy.path(V))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(V,ie=""){return this.path()==this.normalize(V+Oe(ie))}normalize(V){return U.stripTrailingSlash(function ct(D,U){if(!D||!U.startsWith(D))return U;const fe=U.substring(D.length);return""===fe||["/",";","?","#"].includes(fe[0])?fe:U}(this._basePath,ut(V)))}prepareExternalUrl(V){return V&&"/"!==V[0]&&(V="/"+V),this._locationStrategy.prepareExternalUrl(V)}go(V,ie="",be=null){this._locationStrategy.pushState(be,"",V,ie),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+Oe(ie)),be)}replaceState(V,ie="",be=null){this._locationStrategy.replaceState(be,"",V,ie),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+Oe(ie)),be)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(V=0){var ie,be;null===(ie=(be=this._locationStrategy).historyGo)||void 0===ie||ie.call(be,V)}onUrlChange(V){var ie;return this._urlChangeListeners.push(V),null!==(ie=this._urlChangeSubscription)&&void 0!==ie||(this._urlChangeSubscription=this.subscribe(be=>{this._notifyUrlChangeListeners(be.url,be.state)})),()=>{const be=this._urlChangeListeners.indexOf(V);var xt;this._urlChangeListeners.splice(be,1),0===this._urlChangeListeners.length&&(null===(xt=this._urlChangeSubscription)||void 0===xt||xt.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(V="",ie){this._urlChangeListeners.forEach(be=>be(V,ie))}subscribe(V,ie,be){return this._subject.subscribe({next:V,error:ie,complete:be})}}return(D=U).normalizeQueryParams=Oe,D.joinWithSlash=ye,D.stripTrailingSlash=Ve,D.\u0275fac=function(V){return new(V||D)(_.KVO(Le))},D.\u0275prov=_.jDH({token:D,factory:()=>function At(){return new nt((0,_.KVO)(Le))}(),providedIn:"root"}),U})();function ut(D){return D.replace(/\/index.html$/,"")}function Q(D,U){U=encodeURIComponent(U);for(const fe of D.split(";")){const V=fe.indexOf("="),[ie,be]=-1==V?[fe,""]:[fe.slice(0,V),fe.slice(V+1)];if(ie.trim()===U)return decodeURIComponent(be)}return null}class Vt{constructor(U,fe,V,ie){this.$implicit=U,this.ngForOf=fe,this.index=V,this.count=ie}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let rn=(()=>{var D;class U{set ngForOf(V){this._ngForOf=V,this._ngForOfDirty=!0}set ngForTrackBy(V){this._trackByFn=V}get ngForTrackBy(){return this._trackByFn}constructor(V,ie,be){this._viewContainer=V,this._template=ie,this._differs=be,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(V){V&&(this._template=V)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const V=this._ngForOf;!this._differ&&V&&(this._differ=this._differs.find(V).create(this.ngForTrackBy))}if(this._differ){const V=this._differ.diff(this._ngForOf);V&&this._applyChanges(V)}}_applyChanges(V){const ie=this._viewContainer;V.forEachOperation((be,xt,Qt)=>{if(null==be.previousIndex)ie.createEmbeddedView(this._template,new Vt(be.item,this._ngForOf,-1,-1),null===Qt?void 0:Qt);else if(null==Qt)ie.remove(null===xt?void 0:xt);else if(null!==xt){const ir=ie.get(xt);ie.move(ir,Qt),Tn(ir,be)}});for(let be=0,xt=ie.length;be<xt;be++){const ir=ie.get(be).context;ir.index=be,ir.count=xt,ir.ngForOf=this._ngForOf}V.forEachIdentityChange(be=>{Tn(ie.get(be.currentIndex),be)})}static ngTemplateContextGuard(V,ie){return!0}}return(D=U).\u0275fac=function(V){return new(V||D)(_.rXU(_.c1b),_.rXU(_.C4Q),_.rXU(_._q3))},D.\u0275dir=_.FsC({type:D,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),U})();function Tn(D,U){D.context.$implicit=U.item}let xr=(()=>{var D;class U{constructor(V,ie){this._viewContainer=V,this._context=new ni,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ie}set ngIf(V){this._context.$implicit=this._context.ngIf=V,this._updateView()}set ngIfThen(V){Ai("ngIfThen",V),this._thenTemplateRef=V,this._thenViewRef=null,this._updateView()}set ngIfElse(V){Ai("ngIfElse",V),this._elseTemplateRef=V,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(V,ie){return!0}}return(D=U).\u0275fac=function(V){return new(V||D)(_.rXU(_.c1b),_.rXU(_.C4Q))},D.\u0275dir=_.FsC({type:D,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),U})();class ni{constructor(){this.$implicit=null,this.ngIf=null}}function Ai(D,U){if(U&&!U.createEmbeddedView)throw new Error(`${D} must be a TemplateRef, but received '${(0,_.Tbb)(U)}'.`)}let ze=(()=>{var D;class U{constructor(V){this._viewContainerRef=V,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(V){if(this._shouldRecreateView(V)){var ie;const be=this._viewContainerRef;if(this._viewRef&&be.remove(be.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const xt=this._createContextForwardProxy();this._viewRef=be.createEmbeddedView(this.ngTemplateOutlet,xt,{injector:null!==(ie=this.ngTemplateOutletInjector)&&void 0!==ie?ie:void 0})}}_shouldRecreateView(V){return!!V.ngTemplateOutlet||!!V.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(V,ie,be)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,ie,be),get:(V,ie,be)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,ie,be)}})}}return(D=U).\u0275fac=function(V){return new(V||D)(_.rXU(_.c1b))},D.\u0275dir=_.FsC({type:D,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[_.OA$]}),U})();class $n{createSubscription(U,fe){return(0,_.O8t)(()=>U.subscribe({next:fe,error:V=>{throw V}}))}dispose(U){(0,_.O8t)(()=>U.unsubscribe())}}class rr{createSubscription(U,fe){return U.then(fe,V=>{throw V})}dispose(U){}}const _i=new rr,ri=new $n;let ui=(()=>{var D;class U{constructor(V){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=V}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(V){if(!this._obj){if(V)try{this.markForCheckOnValueUpdate=!1,this._subscribe(V)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return V!==this._obj?(this._dispose(),this.transform(V)):this._latestValue}_subscribe(V){this._obj=V,this._strategy=this._selectStrategy(V),this._subscription=this._strategy.createSubscription(V,ie=>this._updateLatestValue(V,ie))}_selectStrategy(V){if((0,_.jNT)(V))return _i;if((0,_.zjR)(V))return ri;throw function wn(D,U){return new _.wOt(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(V,ie){var be;V===this._obj&&(this._latestValue=ie,this.markForCheckOnValueUpdate)&&(null===(be=this._ref)||void 0===be||be.markForCheck())}}return(D=U).\u0275fac=function(V){return new(V||D)(_.rXU(_.gRc,16))},D.\u0275pipe=_.EJ8({name:"async",type:D,pure:!1,standalone:!0}),U})(),qe=(()=>{var D;class U{}return(D=U).\u0275fac=function(V){return new(V||D)},D.\u0275mod=_.$C({type:D}),D.\u0275inj=_.G2t({}),U})();const Fe="browser",Ft="server";function Bt(D){return D===Ft}let dn=(()=>{var D;class U{}return(D=U).\u0275prov=(0,_.jDH)({token:D,providedIn:"root",factory:()=>function Lt(D){return D===Fe}((0,_.WQX)(_.Agw))?new In((0,_.WQX)(pe),window):new yn}),U})();class In{constructor(U,fe){this.document=U,this.window=fe,this.offset=()=>[0,0]}setOffset(U){this.offset=Array.isArray(U)?()=>U:U}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(U){this.window.scrollTo(U[0],U[1])}scrollToAnchor(U){const fe=function xn(D,U){const fe=D.getElementById(U)||D.getElementsByName(U)[0];if(fe)return fe;if("function"==typeof D.createTreeWalker&&D.body&&"function"==typeof D.body.attachShadow){const V=D.createTreeWalker(D.body,NodeFilter.SHOW_ELEMENT);let ie=V.currentNode;for(;ie;){const be=ie.shadowRoot;if(be){const xt=be.getElementById(U)||be.querySelector(`[name="${U}"]`);if(xt)return xt}ie=V.nextNode()}}return null}(this.document,U);fe&&(this.scrollToElement(fe),fe.focus())}setHistoryScrollRestoration(U){this.window.history.scrollRestoration=U}scrollToElement(U){const fe=U.getBoundingClientRect(),V=fe.left+this.window.pageXOffset,ie=fe.top+this.window.pageYOffset,be=this.offset();this.window.scrollTo(V-be[0],ie-be[1])}}class yn{setOffset(U){}getScrollPosition(){return[0,0]}scrollToPosition(U){}scrollToAnchor(U){}setHistoryScrollRestoration(U){}}class Ar{}},3953:(hn,rt,W)=>{"use strict";function _(i,o){return Object.is(i,o)}W.d(rt,{iLQ:()=>XE,sZ2:()=>Cy,hnV:()=>Yh,Hbi:()=>hL,o8S:()=>Fl,BIS:()=>zu,gRc:()=>bx,Ql9:()=>_x,Ocv:()=>cl,Z63:()=>cs,aKT:()=>Uf,uvJ:()=>va,zcH:()=>Al,bkB:()=>ic,$GK:()=>Dr,nKC:()=>tr,zZn:()=>gs,_q3:()=>nf,MKu:()=>XA,xe9:()=>fg,Co$:()=>YR,Vns:()=>nu,SKi:()=>no,Xx1:()=>_a,Agw:()=>Sb,PLl:()=>Ay,sFG:()=>Rk,_9s:()=>g0,czy:()=>Dl,kdw:()=>Du,C4Q:()=>pp,NYb:()=>qF,giA:()=>du,RxE:()=>Y1,c1b:()=>Ap,gXe:()=>Jl,mal:()=>b0,L39:()=>Kx,EWP:()=>Yx,a0P:()=>FL,Ol2:()=>dC,w6W:()=>uC,oH4:()=>FA,Rfq:()=>wu,WQX:()=>sn,QuC:()=>Je,fpN:()=>QA,HJs:()=>Zx,N4e:()=>Uv,vPA:()=>k0,O8t:()=>Jx,H3F:()=>ev,zAP:()=>$x,H8p:()=>Wg,KH2:()=>H_,TgB:()=>Hu,wOt:()=>en,WHO:()=>ux,e01:()=>dx,H5H:()=>IE,mq5:()=>kO,JZv:()=>Di,LfX:()=>Nc,plB:()=>pc,jNT:()=>PA,zjR:()=>nv,TL$:()=>mm,Tbb:()=>Yi,Vt3:()=>$0,GFd:()=>QR,OA$:()=>zI,Jv_:()=>M1,aNF:()=>hA,R7$:()=>Fm,BMQ:()=>aE,AVh:()=>yc,wni:()=>p1,VBU:()=>zg,FsC:()=>k,jDH:()=>br,G2t:()=>Ka,$C:()=>P,EJ8:()=>ee,rXU:()=>ch,nrm:()=>kP,eu8:()=>EE,bVm:()=>yE,qex:()=>$C,k0s:()=>BC,j41:()=>UC,RV6:()=>OP,xGo:()=>py,KVO:()=>Mn,kS0:()=>Vf,QTQ:()=>Jb,bIt:()=>yd,lsd:()=>g1,XpG:()=>a1,nI1:()=>L1,bMT:()=>V1,SdG:()=>c1,NAR:()=>l1,Y8G:()=>gE,mGM:()=>xE,Njj:()=>pS,eBV:()=>Qv,n$t:()=>_D,DNE:()=>gC,EFF:()=>rA,JRh:()=>iA,Lme:()=>sA,wXG:()=>mD,GBs:()=>Ml});let g=null,ae=!1,xe=1;const X=Symbol("SIGNAL");function C(i){const o=g;return g=i,o}const Qe={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ye(i){if(ae)throw new Error("");if(null===g)return;g.consumerOnSignalRead(i);const o=g.nextProducerIndex++;_t(g),o<g.producerNode.length&&g.producerNode[o]!==i&&Xe(g)&&Re(g.producerNode[o],g.producerIndexOfThis[o]),g.producerNode[o]!==i&&(g.producerNode[o]=i,g.producerIndexOfThis[o]=Xe(g)?ut(i,g,o):0),g.producerLastReadVersion[o]=i.version}function Oe(i){if((!Xe(i)||i.dirty)&&(i.dirty||i.lastCleanEpoch!==xe)){if(!i.producerMustRecompute(i)&&!At(i))return i.dirty=!1,void(i.lastCleanEpoch=xe);i.producerRecomputeValue(i),i.dirty=!1,i.lastCleanEpoch=xe}}function Le(i){if(void 0===i.liveConsumerNode)return;const o=ae;ae=!0;try{for(const a of i.liveConsumerNode)a.dirty||ot(a)}finally{ae=o}}function Ze(){var i;return!1!==(null===(i=g)||void 0===i?void 0:i.consumerAllowSignalWrites)}function ot(i){var o;i.dirty=!0,Le(i),null===(o=i.consumerMarkedDirty)||void 0===o||o.call(i,i)}function tt(i){return i&&(i.nextProducerIndex=0),C(i)}function nt(i,o){if(C(o),i&&void 0!==i.producerNode&&void 0!==i.producerIndexOfThis&&void 0!==i.producerLastReadVersion){if(Xe(i))for(let a=i.nextProducerIndex;a<i.producerNode.length;a++)Re(i.producerNode[a],i.producerIndexOfThis[a]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}function At(i){_t(i);for(let o=0;o<i.producerNode.length;o++){const a=i.producerNode[o],c=i.producerLastReadVersion[o];if(c!==a.version||(Oe(a),c!==a.version))return!0}return!1}function ct(i){if(_t(i),Xe(i))for(let o=0;o<i.producerNode.length;o++)Re(i.producerNode[o],i.producerIndexOfThis[o]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}function ut(i,o,a){if(at(i),0===i.liveConsumerNode.length&&It(i))for(let c=0;c<i.producerNode.length;c++)i.producerIndexOfThis[c]=ut(i.producerNode[c],i,c);return i.liveConsumerIndexOfThis.push(a),i.liveConsumerNode.push(o)-1}function Re(i,o){if(at(i),1===i.liveConsumerNode.length&&It(i))for(let c=0;c<i.producerNode.length;c++)Re(i.producerNode[c],i.producerIndexOfThis[c]);const a=i.liveConsumerNode.length-1;if(i.liveConsumerNode[o]=i.liveConsumerNode[a],i.liveConsumerIndexOfThis[o]=i.liveConsumerIndexOfThis[a],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,o<i.liveConsumerNode.length){const c=i.liveConsumerIndexOfThis[o],d=i.liveConsumerNode[o];_t(d),d.producerIndexOfThis[c]=o}}function Xe(i){var o,a;return i.consumerIsAlwaysLive||(null!==(o=null==i||null===(a=i.liveConsumerNode)||void 0===a?void 0:a.length)&&void 0!==o?o:0)>0}function _t(i){var o,a,c;null!==(o=i.producerNode)&&void 0!==o||(i.producerNode=[]),null!==(a=i.producerIndexOfThis)&&void 0!==a||(i.producerIndexOfThis=[]),null!==(c=i.producerLastReadVersion)&&void 0!==c||(i.producerLastReadVersion=[])}function at(i){var o,a;null!==(o=i.liveConsumerNode)&&void 0!==o||(i.liveConsumerNode=[]),null!==(a=i.liveConsumerIndexOfThis)&&void 0!==a||(i.liveConsumerIndexOfThis=[])}function It(i){return void 0!==i.producerNode}const ft=Symbol("UNSET"),Pt=Symbol("COMPUTING"),Ut=Symbol("ERRORED"),Gt={...Qe,value:ft,dirty:!0,error:null,equal:_,producerMustRecompute:i=>i.value===ft||i.value===Pt,producerRecomputeValue(i){if(i.value===Pt)throw new Error("Detected cycle in computations.");const o=i.value;i.value=Pt;const a=tt(i);let c;try{c=i.computation()}catch(d){c=Ut,i.error=d}finally{nt(i,a)}o!==ft&&o!==Ut&&c!==Ut&&i.equal(o,c)?i.value=o:(i.value=c,i.version++)}};let Sn=function Wt(){throw new Error};function Dt(){Sn()}let Z=null;function We(i,o){Ze()||Dt(),i.equal(i.value,o)||(i.value=o,function On(i){var o;i.version++,function Ve(){xe++}(),Le(i),null===(o=Z)||void 0===o||o()}(i))}const qt={...Qe,equal:_,value:void 0};var Xr,Hn=W(4412),Gn=W(1413),Jn=W(8359),Kt=W(6354);typeof navigator<"u"&&navigator,typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||navigator),typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&navigator;const Vi="https://g.co/ng/security#xss";class en extends Error{constructor(o,a){super(function Oo(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}(o,a)),this.code=o}}function Hr(i){return{toString:i}.toString()}const ss="__parameters__";function ga(i,o,a){return Hr(()=>{const c=function Zs(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(o);function d(...f){if(this instanceof d)return c.apply(this,f),this;const m=new d(...f);return I.annotation=m,I;function I(A,O,$){const q=A.hasOwnProperty(ss)?A[ss]:Object.defineProperty(A,ss,{value:[]})[ss];for(;q.length<=$;)q.push(null);return(q[$]=q[$]||[]).push(m),A}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}const Di=globalThis;function Qr(i){for(let o in i)if(i[o]===Qr)return o;throw Error("Could not find renamed property on target object.")}function Iu(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function Yi(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(Yi).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function fl(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const bu=Qr({__forward_ref__:Qr});function wu(i){return i.__forward_ref__=wu,i.toString=function(){return Yi(this())},i}function Wn(i){return ma(i)?i():i}function ma(i){return"function"==typeof i&&i.hasOwnProperty(bu)&&i.__forward_ref__===wu}function br(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Ka(i){return{providers:i.providers||[],imports:i.imports||[]}}function gl(i){return xd(i,Bi)||xd(i,lo)}function Nc(i){return null!==gl(i)}function xd(i,o){return i.hasOwnProperty(o)?i[o]:null}function Ri(i){return i&&(i.hasOwnProperty(Kl)||i.hasOwnProperty(Xl))?i[Kl]:null}const Bi=Qr({\u0275prov:Qr}),Kl=Qr({\u0275inj:Qr}),lo=Qr({ngInjectableDef:Qr}),Xl=Qr({ngInjectorDef:Qr});class tr{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=br({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Cu(i){return i&&!!i.\u0275providers}const kc=Qr({\u0275cmp:Qr}),gf=Qr({\u0275dir:Qr}),di=Qr({\u0275pipe:Qr}),Pi=Qr({\u0275mod:Qr}),ta=Qr({\u0275fac:Qr}),Yl=Qr({__NG_ELEMENT_ID__:Qr}),Au=Qr({__NG_ENV_ID__:Qr});function Xn(i){return"string"==typeof i?i:null==i?"":String(i)}function Nd(i,o){throw new en(-201,!1)}var Dr=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(Dr||{});let Su;function _l(){return Su}function as(i){const o=Su;return Su=i,o}function Fs(i,o,a){const c=gl(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Dr.Optional?null:void 0!==o?o:void Nd()}const D={},U="__NG_DI_FLAG__",fe="ngTempTokenPath",ie=/\n/gm,xt="__source";let Qt;function or(i){const o=Qt;return Qt=i,o}function Br(i,o=Dr.Default){if(void 0===Qt)throw new en(-203,!1);return null===Qt?Fs(i,void 0,o):Qt.get(i,o&Dr.Optional?null:void 0,o)}function Mn(i,o=Dr.Default){return(_l()||Br)(Wn(i),o)}function sn(i,o=Dr.Default){return Mn(i,Hi(o))}function Hi(i){return typeof i>"u"||"number"==typeof i?i:(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Ls(i){const o=[];for(let a=0;a<i.length;a++){const c=Wn(i[a]);if(Array.isArray(c)){if(0===c.length)throw new en(900,!1);let d,f=Dr.Default;for(let m=0;m<c.length;m++){const I=c[m],A=xa(I);"number"==typeof A?-1===A?d=I.token:f|=A:d=I}o.push(Mn(d,f))}else o.push(Mn(c))}return o}function xo(i,o){return i[U]=o,i.prototype[U]=o,i}function xa(i){return i[U]}const _a=xo(ga("Optional"),8),Du=xo(ga("SkipSelf"),4);function vl(i,o){return i.hasOwnProperty(ta)?i[ta]:null}function Vs(i,o){i.forEach(a=>Array.isArray(a)?Vs(a,o):o(a))}function Lg(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function ts(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function na(i,o,a){let c=ls(i,o);return c>=0?i[1|c]=a:(c=~c,function yl(i,o,a,c){let d=i.length;if(d==o)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=c}}(i,c,o,a)),c}function Fd(i,o){const a=ls(i,o);if(a>=0)return i[1|a]}function ls(i,o){return function Ld(i,o,a){let c=0,d=i.length>>a;for(;d!==c;){const f=c+(d-c>>1),m=i[f<<a];if(o===m)return f<<a;m>o?d=f:c=f+1}return~(d<<a)}(i,o,1)}const Qa={},Yr=[],cs=new tr(""),Ug=new tr("",-1),Vd=new tr("");class mf{get(o,a=D){if(a===D){const c=new Error(`NullInjectorError: No provider for ${Yi(o)}!`);throw c.name="NullInjectorError",c}return a}}var Ud=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(Ud||{}),Jl=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(Jl||{}),El=function(i){return i[i.None=0]="None",i[i.SignalBased=1]="SignalBased",i[i.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",i}(El||{});function PI(i,o,a){let c=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=o.length;if(d+f===c||i.charCodeAt(d+f)<=32)return d}a=d+1}}function _f(i,o,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const f=a[c++],m=a[c++],I=a[c++];i.setAttribute(o,m,I,f)}else{const f=d,m=a[++c];MI(f)?i.setProperty(o,f,m):i.setAttribute(o,f,m),c++}}return c}function xI(i){return 3===i||4===i||6===i}function MI(i){return 64===i.charCodeAt(0)}function Bd(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?a=d:0===a||ki(i,a,d,null,-1===a||2===a?o[++c]:null)}}return i}function ki(i,o,a,c,d){let f=0,m=i.length;if(-1===o)m=-1;else for(;f<i.length;){const I=i[f++];if("number"==typeof I){if(I===o){m=-1;break}if(I>o){m=f-1;break}}}for(;f<i.length;){const I=i[f];if("number"==typeof I)break;if(I===a){if(null===c)return void(null!==d&&(i[f+1]=d));if(c===i[f+1])return void(i[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==m&&(i.splice(m,0,o),f=m+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==d&&i.splice(f++,0,d)}const Nv="ng-template";function xu(i,o,a,c){let d=0;if(c){for(;d<o.length&&"string"==typeof o[d];d+=2)if("class"===o[d]&&-1!==PI(o[d+1].toLowerCase(),a,0))return!0}else if(Bg(i))return!1;if(d=o.indexOf(1,d),d>-1){let f;for(;++d<o.length&&"string"==typeof(f=o[d]);)if(f.toLowerCase()===a)return!0}return!1}function Bg(i){return 4===i.type&&i.value!==Nv}function $g(i,o,a){return o===(4!==i.type||a?i.value:Nv)}function NI(i,o,a){let c=4;const d=i.attrs,f=null!==d?function kv(i){for(let o=0;o<i.length;o++)if(xI(i[o]))return o;return i.length}(d):0;let m=!1;for(let I=0;I<o.length;I++){const A=o[I];if("number"!=typeof A){if(!m)if(4&c){if(c=2|1&c,""!==A&&!$g(i,A,a)||""===A&&1===o.length){if(ka(c))return!1;m=!0}}else if(8&c){if(null===d||!xu(i,d,A,a)){if(ka(c))return!1;m=!0}}else{const O=o[++I],$=kI(A,d,Bg(i),a);if(-1===$){if(ka(c))return!1;m=!0;continue}if(""!==O){let q;if(q=$>f?"":d[$+1].toLowerCase(),2&c&&O!==q){if(ka(c))return!1;m=!0}}}}else{if(!m&&!ka(c)&&!ka(A))return!1;if(m&&ka(A))continue;m=!1,c=A|1&c}}return ka(c)||m}function ka(i){return!(1&i)}function kI(i,o,a,c){if(null===o)return-1;let d=0;if(c||!a){let f=!1;for(;d<o.length;){const m=o[d];if(m===i)return d;if(3===m||6===m)f=!0;else{if(1===m||2===m){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===m)break;if(0===m){d+=4;continue}}d+=f?1:2}return-1}return function Ov(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,i)}function jg(i,o,a=!1){for(let c=0;c<o.length;c++)if(NI(i,o[c],a))return!0;return!1}function FI(i,o){e:for(let a=0;a<o.length;a++){const c=o[a];if(i.length===c.length){for(let d=0;d<i.length;d++)if(i[d]!==c[d])continue e;return!0}}return!1}function Hg(i,o){return i?":not("+o.trim()+")":o}function vf(i){let o=i[0],a=1,c=2,d="",f=!1;for(;a<i.length;){let m=i[a];if("string"==typeof m)if(2&c){const I=i[++a];d+="["+m+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?d+="."+m:4&c&&(d+=" "+m);else""!==d&&!ka(m)&&(o+=Hg(f,d),d=""),c=m,f=f||!ka(c);a++}return""!==d&&(o+=Hg(f,d)),o}function zg(i){return Hr(()=>{var o;const a=Kn(i),c={...a,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===Ud.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:null!==(o=i.signals)&&void 0!==o&&o,data:i.data||{},encapsulation:i.encapsulation||Jl.Emulated,styles:i.styles||Yr,_:null,schemas:i.schemas||null,tView:null,id:""};zr(c);const d=i.dependencies;return c.directiveDefs=sr(d,!1),c.pipeDefs=sr(d,!0),c.id=function us(i){let o=0;const a=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const d of a)o=Math.imul(31,o)+d.charCodeAt(0)|0;return o+=2147483648,"c"+o}(c),c})}function b(i){return te(i)||Ue(i)}function S(i){return null!==i}function P(i){return Hr(()=>({type:i.type,bootstrap:i.bootstrap||Yr,declarations:i.declarations||Yr,imports:i.imports||Yr,exports:i.exports||Yr,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function T(i,o){if(null==i)return Qa;const a={};for(const d in i)if(i.hasOwnProperty(d)){const f=i[d];let m,I,A=El.None;var c;Array.isArray(f)?(A=f[0],m=f[1],I=null!==(c=f[2])&&void 0!==c?c:m):(m=f,I=f),o?(a[m]=A!==El.None?[d,A]:d,o[m]=I):a[m]=d}return a}function k(i){return Hr(()=>{const o=Kn(i);return zr(o),o})}function ee(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function te(i){return i[kc]||null}function Ue(i){return i[gf]||null}function Et(i){return i[di]||null}function Je(i){const o=te(i)||Ue(i)||Et(i);return null!==o&&o.standalone}function on(i,o){const a=i[Pi]||null;if(!a&&!0===o)throw new Error(`Type ${Yi(i)} does not have '\u0275mod' property.`);return a}function Kn(i){const o={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:i.inputs||Qa,exportAs:i.exportAs||null,standalone:!0===i.standalone,signals:!0===i.signals,selectors:i.selectors||Yr,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:T(i.inputs,o),outputs:T(i.outputs),debugInfo:null}}function zr(i){var o;null===(o=i.features)||void 0===o||o.forEach(a=>a(i))}function sr(i,o){if(!i)return null;const a=o?Et:b;return()=>("function"==typeof i?i():i).map(c=>a(c)).filter(S)}function Fc(...i){return{\u0275providers:ns(0,i),\u0275fromNgModule:!0}}function ns(i,...o){const a=[],c=new Set;let d;const f=m=>{a.push(m)};return Vs(o,m=>{const I=m;Mu(I,f,[],c)&&(d||(d=[]),d.push(I))}),void 0!==d&&Lc(d,f),a}function Lc(i,o){for(let a=0;a<i.length;a++){const{ngModule:c,providers:d}=i[a];Gg(d,f=>{o(f,c)})}}function Mu(i,o,a,c){if(!(i=Wn(i)))return!1;let d=null,f=Ri(i);const m=!f&&te(i);if(f||m){if(m&&!m.standalone)return!1;d=i}else{const A=i.ngModule;if(f=Ri(A),!f)return!1;d=A}const I=c.has(d);if(m){if(I)return!1;if(c.add(d),m.dependencies){const A="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const O of A)Mu(O,o,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!I){let O;c.add(d);try{Vs(f.imports,$=>{Mu($,o,a,c)&&(O||(O=[]),O.push($))})}finally{}void 0!==O&&Lc(O,o)}if(!I){const O=vl(d)||(()=>new d);o({provide:d,useFactory:O,deps:Yr},d),o({provide:Vd,useValue:d,multi:!0},d),o({provide:cs,useValue:()=>Mn(d),multi:!0},d)}const A=f.providers;if(null!=A&&!I){const O=i;Gg(A,$=>{o($,O)})}}}return d!==i&&void 0!==i.providers}function Gg(i,o){for(let a of i)Cu(a)&&(a=a.\u0275providers),Array.isArray(a)?Gg(a,o):o(a)}const Nu=Qr({provide:String,useValue:Qr});function LI(i){return null!==i&&"object"==typeof i&&Nu in i}function Vc(i){return"function"==typeof i}const Wg=new tr(""),Vv={},VI={};let $d;function Ya(){return void 0===$d&&($d=new mf),$d}class va{}class Ef extends va{get destroyed(){return this._destroyed}constructor(o,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,$I(o,m=>this.processProvider(m)),this.records.set(Ug,ku(void 0,this)),d.has("environment")&&this.records.set(va,ku(void 0,this));const f=this.records.get(Wg);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(Vd,Yr,Dr.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const o=C(null);try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();const a=this._onDestroyHooks;this._onDestroyHooks=[];for(const c of a)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),C(o)}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const a=or(this),c=as(void 0);try{return o()}finally{or(a),as(c)}}get(o,a=D,c=Dr.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(Au))return o[Au](this);c=Hi(c);const f=or(this),m=as(void 0);try{if(!(c&Dr.SkipSelf)){let A=this.records.get(o);if(void 0===A){const O=function VM(i){return"function"==typeof i||"object"==typeof i&&i instanceof tr}(o)&&gl(o);A=O&&this.injectableDefInScope(O)?ku(Ja(o),Vv):null,this.records.set(o,A)}if(null!=A)return this.hydrate(o,A)}return(c&Dr.Self?Ya():this.parent).get(o,a=c&Dr.Optional&&a===D?null:a)}catch(I){if("NullInjectorError"===I.name){if((I[fe]=I[fe]||[]).unshift(Yi(o)),f)throw I;return function Xa(i,o,a,c){const d=i[fe];throw o[xt]&&d.unshift(o[xt]),i.message=function bs(i,o,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=Yi(o);if(Array.isArray(o))d=o.map(Yi).join(" -> ");else if("object"==typeof o){let f=[];for(let m in o)if(o.hasOwnProperty(m)){let I=o[m];f.push(m+":"+("string"==typeof I?JSON.stringify(I):Yi(I)))}d=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(ie,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[fe]=null,i}(I,o,"R3InjectorError",this.source)}throw I}finally{as(m),or(f)}}resolveInjectorInitializers(){const o=C(null),a=or(this),c=as(void 0);try{const f=this.get(cs,Yr,Dr.Self);for(const m of f)m()}finally{or(a),as(c),C(o)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(Yi(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new en(205,!1)}processProvider(o){let a=Vc(o=Wn(o))?o:Wn(o&&o.provide);const c=function UI(i){return LI(i)?ku(void 0,i.useValue):ku(KT(i),Vv)}(o);if(!Vc(o)&&!0===o.multi){let d=this.records.get(a);d||(d=ku(void 0,Vv,!0),d.factory=()=>Ls(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,c)}hydrate(o,a){const c=C(null);try{return a.value===Vv&&(a.value=VI,a.value=a.factory()),"object"==typeof a.value&&a.value&&function BI(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}finally{C(c)}}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Wn(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(o){const a=this._onDestroyHooks.indexOf(o);-1!==a&&this._onDestroyHooks.splice(a,1)}}function Ja(i){const o=gl(i),a=null!==o?o.factory:vl(i);if(null!==a)return a;if(i instanceof tr)throw new en(204,!1);if(i instanceof Function)return function FM(i){if(i.length>0)throw new en(204,!1);const a=function ql(i){return i&&(i[Bi]||i[lo])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new en(204,!1)}function KT(i,o,a){let c;if(Vc(i)){const d=Wn(i);return vl(d)||Ja(d)}if(LI(i))c=()=>Wn(i.useValue);else if(function qT(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Ls(i.deps||[]));else if(function Lv(i){return!(!i||!i.useExisting)}(i))c=()=>Mn(Wn(i.useExisting));else{const d=Wn(i&&(i.useClass||i.provide));if(!function LM(i){return!!i.deps}(i))return vl(d)||Ja(d);c=()=>new d(...Ls(i.deps))}return c}function ku(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function $I(i,o){for(const a of i)Array.isArray(a)?$I(a,o):a&&Cu(a)?$I(a.\u0275providers,o):o(a)}function Uv(i,o){i instanceof Ef&&i.assertNotDestroyed();const c=or(i),d=as(void 0);try{return o()}finally{or(c),as(d)}}function Ou(){return void 0!==_l()||null!=function ir(){return Qt}()}const Ji=0,an=1,kn=2,Lo=3,Il=4,rs=5,hs=6,Fu=7,$i=8,Wo=9,Za=10,ur=11,jd=12,Xg=13,Lu=14,Zi=15,Uc=16,Hd=17,el=18,Bc=19,$v=20,$c=21,zd=22,Oa=23,jn=25,jI=1,tc=7,nc=9,mo=10;var Tf=function(i){return i[i.None=0]="None",i[i.HasTransplantedViews=2]="HasTransplantedViews",i}(Tf||{});function Vo(i){return Array.isArray(i)&&"object"==typeof i[jI]}function fs(i){return Array.isArray(i)&&!0===i[jI]}function Qg(i){return!!(4&i.flags)}function Wd(i){return i.componentOffset>-1}function Sf(i){return!(1&~i.flags)}function bl(i){return!!i.template}function qd(i){return!!(512&i[kn])}class HM{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Gv(i,o,a,c){null!==o?o.applyValueToInputSignal(o,c):i[a]=c}function zI(){return sS}function sS(i){return i.type.prototype.ngOnChanges&&(i.setInput=GI),aS}function aS(){const i=Kd(this),o=null==i?void 0:i.current;if(o){const a=i.previous;if(a===Qa)i.previous=o;else for(let c in o)a[c]=o[c];i.current=null,this.ngOnChanges(o)}}function GI(i,o,a,c,d){const f=this.declaredInputs[c],m=Kd(i)||function cS(i,o){return i[lS]=o}(i,{previous:Qa,current:null}),I=m.current||(m.current={}),A=m.previous,O=A[f];I[f]=new HM(O&&O.currentValue,a,A===Qa),Gv(i,o,d,a)}zI.ngInherit=!0;const lS="__ngSimpleChanges__";function Kd(i){return i[lS]||null}const rc=function(i,o,a){};function oi(i){for(;Array.isArray(i);)i=i[Ji];return i}function Wv(i,o){return oi(o[i])}function ws(i,o){return oi(o[i.index])}function Jg(i,o){return i.data[o]}function tl(i,o){const a=o[i];return Vo(a)?a:a[Ji]}function fS(i){return!(128&~i[kn])}function wl(i,o){return null==o?null:i[o]}function qv(i){i[Hd]=0}function Vu(i){1024&i[kn]||(i[kn]|=1024,fS(i)&&Xv(i))}function Zg(i){var o;return!!(9216&i[kn]||null!==(o=i[Oa])&&void 0!==o&&o.dirty)}function qI(i){var o;null===(o=i[Za].changeDetectionScheduler)||void 0===o||o.notify(7),64&i[kn]&&(i[kn]|=1024),Zg(i)&&Xv(i)}function Xv(i){var o;null===(o=i[Za].changeDetectionScheduler)||void 0===o||o.notify(0);let a=jc(i);for(;null!==a&&!(8192&a[kn])&&(a[kn]|=8192,fS(a));)a=jc(a)}function KI(i,o){if(!(256&~i[kn]))throw new en(911,!1);null===i[$c]&&(i[$c]=[]),i[$c].push(o)}function jc(i){const o=i[Lo];return fs(o)?o[Lo]:o}const dr={lFrame:ny(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let em=!1;function tm(){return dr.bindingsEnabled}function Pf(){return null!==dr.skipHydrationRootTNode}function Ct(){return dr.lFrame.lView}function Pr(){return dr.lFrame.tView}function Qv(i){return dr.lFrame.contextLView=i,i[$i]}function pS(i){return dr.lFrame.contextLView=null,i}function hi(){let i=gS();for(;null!==i&&64===i.type;)i=i.parent;return i}function gS(){return dr.lFrame.currentTNode}function nl(i,o){const a=dr.lFrame;a.currentTNode=i,a.isParent=o}function YI(){return dr.lFrame.isParent}function xf(){dr.lFrame.isParent=!1}function Jv(){return em}function eb(i){em=i}function rl(){return dr.lFrame.bindingIndex++}function zc(i){const o=dr.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}function Mf(i,o){const a=dr.lFrame;a.bindingIndex=a.bindingRootIndex=i,tb(o)}function tb(i){dr.lFrame.currentDirectiveIndex=i}function rb(){return dr.lFrame.currentQueryIndex}function ey(i){dr.lFrame.currentQueryIndex=i}function ty(i){const o=i[an];return 2===o.type?o.declTNode:1===o.type?i[rs]:null}function _S(i,o,a){if(a&Dr.SkipSelf){let d=o,f=i;for(;!(d=d.parent,null!==d||a&Dr.Host||(d=ty(f),null===d||(f=f[Lu],10&d.type))););if(null===d)return!1;o=d,i=f}const c=dr.lFrame=vS();return c.currentTNode=o,c.lView=i,!0}function ib(i){const o=vS(),a=i[an];dr.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function vS(){const i=dr.lFrame,o=null===i?null:i.child;return null===o?ny(i):o}function ny(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function yS(){const i=dr.lFrame;return dr.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const ES=yS;function ob(){const i=yS();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function ps(){return dr.lFrame.selectedIndex}function Xd(i){dr.lFrame.selectedIndex=i}function Gi(){const i=dr.lFrame;return Jg(i.tView,i.selectedIndex)}let ry=!0;function im(){return ry}function il(i){ry=i}function Nf(i,o){for(let O=o.directiveStart,$=o.directiveEnd;O<$;O++){const ge=i.data[O].type.prototype,{ngAfterContentInit:Ae,ngAfterContentChecked:Ce,ngAfterViewInit:vt,ngAfterViewChecked:jt,ngOnDestroy:Zt}=ge;var a,c,d,f,m,I,A;Ae&&(null!==(a=i.contentHooks)&&void 0!==a?a:i.contentHooks=[]).push(-O,Ae),Ce&&((null!==(c=i.contentHooks)&&void 0!==c?c:i.contentHooks=[]).push(O,Ce),(null!==(d=i.contentCheckHooks)&&void 0!==d?d:i.contentCheckHooks=[]).push(O,Ce)),vt&&(null!==(f=i.viewHooks)&&void 0!==f?f:i.viewHooks=[]).push(-O,vt),jt&&((null!==(m=i.viewHooks)&&void 0!==m?m:i.viewHooks=[]).push(O,jt),(null!==(I=i.viewCheckHooks)&&void 0!==I?I:i.viewCheckHooks=[]).push(O,jt)),null!=Zt&&(null!==(A=i.destroyHooks)&&void 0!==A?A:i.destroyHooks=[]).push(O,Zt)}}function oy(i,o,a){Bu(i,o,3,a)}function kf(i,o,a,c){(3&i[kn])===a&&Bu(i,o,a,c)}function Qd(i,o){let a=i[kn];(3&a)===o&&(a&=16383,a+=1,i[kn]=a)}function Bu(i,o,a,c){const f=null!=c?c:-1,m=o.length-1;let I=0;for(let A=void 0!==c?65535&i[Hd]:0;A<m;A++)if("number"==typeof o[A+1]){if(I=o[A],null!=c&&I>=c)break}else o[A]<0&&(i[Hd]+=65536),(I<f||-1==f)&&(iN(i,a,o,A),i[Hd]=(4294901760&i[Hd])+A+2),A++}function sy(i,o){rc(4,i,o);const a=C(null);try{o.call(i)}finally{C(a),rc(5,i,o)}}function iN(i,o,a,c){const d=a[c]<0,f=a[c+1],I=i[d?-a[c]:a[c]];d?i[kn]>>14<i[Hd]>>16&&(3&i[kn])===o&&(i[kn]+=16384,sy(I,f)):sy(I,f)}const Of=-1;class om{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}const ub={};class Gc{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){c=Hi(c);const d=this.injector.get(o,ub,c);return d!==ub||a===ub?d:this.parentInjector.get(o,a,c)}}function sm(i){return i!==Of}function am(i){return 32767&i}function cm(i,o){let a=function lm(i){return i>>16}(i),c=o;for(;a>0;)c=c[Lu],a--;return c}let um=!0;function Ff(i){const o=um;return um=i,o}const AS=255,ly=5;let TS=0;const Cl={};function cy(i,o){const a=SS(i,o);if(-1!==a)return a;const c=o[an];c.firstCreatePass&&(i.injectorIndex=o.length,dm(c.data,i),dm(o,null),dm(c.blueprint,null));const d=uy(i,o),f=i.injectorIndex;if(sm(d)){const m=am(d),I=cm(d,o),A=I[an].data;for(let O=0;O<8;O++)o[f+O]=I[m+O]|A[m+O]}return o[f+8]=d,f}function dm(i,o){i.push(0,0,0,0,0,0,0,0,o)}function SS(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function uy(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=o;for(;null!==d;){if(c=MS(d),null===c)return Of;if(a++,d=d[Lu],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return Of}function hm(i,o,a){!function aN(i,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Yl)&&(c=a[Yl]),null==c&&(c=a[Yl]=TS++);const d=c&AS;o.data[i+(d>>ly)]|=1<<d}(i,o,a)}function DS(i,o,a){if(a&Dr.Optional||void 0!==i)return i;Nd()}function dy(i,o,a,c){if(a&Dr.Optional&&void 0===c&&(c=null),!(a&(Dr.Self|Dr.Host))){const d=i[Wo],f=as(void 0);try{return d?d.get(o,c,a&Dr.Optional):Fs(o,c,a&Dr.Optional)}finally{as(f)}}return DS(c,0,a)}function RS(i,o,a,c=Dr.Default,d){if(null!==i){if(2048&o[kn]&&!(c&Dr.Self)){const m=function cN(i,o,a,c,d){let f=i,m=o;for(;null!==f&&null!==m&&2048&m[kn]&&!(512&m[kn]);){const I=hy(f,m,a,c|Dr.Self,Cl);if(I!==Cl)return I;let A=f.parent;if(!A){const O=m[$v];if(O){const $=O.get(a,Cl,c);if($!==Cl)return $}A=MS(m),m=m[Lu]}f=A}return d}(i,o,a,c,Cl);if(m!==Cl)return m}const f=hy(i,o,a,c,Cl);if(f!==Cl)return f}return dy(o,a,c,d)}function hy(i,o,a,c,d){const f=function db(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(Yl)?i[Yl]:void 0;return"number"==typeof o?o>=0?o&AS:xS:o}(a);if("function"==typeof f){if(!_S(o,i,c))return c&Dr.Host?DS(d,0,c):dy(o,a,c,d);try{let m;if(m=f(c),null!=m||c&Dr.Optional)return m;Nd()}finally{ES()}}else if("number"==typeof f){let m=null,I=SS(i,o),A=Of,O=c&Dr.Host?o[Zi][rs]:null;for((-1===I||c&Dr.SkipSelf)&&(A=-1===I?uy(i,o):o[I+8],A!==Of&&hb(c,!1)?(m=o[an],I=am(A),o=cm(A,o)):I=-1);-1!==I;){const $=o[an];if(PS(f,I,$.data)){const q=fy(I,o,a,m,c,O);if(q!==Cl)return q}A=o[I+8],A!==Of&&hb(c,o[an].data[I+8]===O)&&PS(f,I,o)?(m=$,I=am(A),o=cm(A,o)):I=-1}}return d}function fy(i,o,a,c,d,f){const m=o[an],I=m.data[i+8],$=Lf(I,m,a,null==c?Wd(I)&&um:c!=m&&!!(3&I.type),d&Dr.Host&&f===I);return null!==$?$u(o,m,$,I):Cl}function Lf(i,o,a,c,d){const f=i.providerIndexes,m=o.data,I=1048575&f,A=i.directiveStart,$=f>>20,ge=d?I+$:i.directiveEnd;for(let Ae=c?I:I+$;Ae<ge;Ae++){const Ce=m[Ae];if(Ae<A&&a===Ce||Ae>=A&&Ce.type===a)return Ae}if(d){const Ae=m[A];if(Ae&&bl(Ae)&&Ae.type===a)return A}return null}function $u(i,o,a,c){let d=i[a];const f=o.data;if(function lb(i){return i instanceof om}(d)){const m=d;m.resolving&&function Pv(i,o){throw o&&o.join(" > "),new en(-200,i)}(function Ur(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Xn(i)}(f[a]));const I=Ff(m.canSeeViewProviders);m.resolving=!0;const O=m.injectImpl?as(m.injectImpl):null;_S(i,c,Dr.Default);try{d=i[a]=m.factory(void 0,f,i,c),o.firstCreatePass&&a>=c.directiveStart&&function iy(i,o,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(c){var m,I;const q=sS(o);(null!==(m=a.preOrderHooks)&&void 0!==m?m:a.preOrderHooks=[]).push(i,q),(null!==(I=a.preOrderCheckHooks)&&void 0!==I?I:a.preOrderCheckHooks=[]).push(i,q)}var A,O,$;d&&(null!==(A=a.preOrderHooks)&&void 0!==A?A:a.preOrderHooks=[]).push(0-i,d),f&&((null!==(O=a.preOrderHooks)&&void 0!==O?O:a.preOrderHooks=[]).push(i,f),(null!==($=a.preOrderCheckHooks)&&void 0!==$?$:a.preOrderCheckHooks=[]).push(i,f))}(a,f[a],o)}finally{null!==O&&as(O),Ff(I),m.resolving=!1,ES()}}return d}function PS(i,o,a){return!!(a[o+(i>>ly)]&1<<i)}function hb(i,o){return!(i&Dr.Self||i&Dr.Host&&o)}class is{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return RS(this._tNode,this._lView,o,Hi(c),a)}}function xS(){return new is(hi(),Ct())}function py(i){return Hr(()=>{const o=i.prototype.constructor,a=o[ta]||fb(o),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const f=d[ta]||fb(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function fb(i){return ma(i)?()=>{const o=fb(Wn(i));return o&&o()}:vl(i)}function MS(i){const o=i[an],a=o.type;return 2===a?o.declTNode:1===a?i[rs]:null}function Vf(i){return function lN(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const f=a[d];if(xI(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(f===o)return a[d+1];d+=2}}}return null}(hi(),i)}function LS(i,o=null,a=null,c){const d=VS(i,o,a,c);return d.resolveInjectorInitializers(),d}function VS(i,o=null,a=null,c,d=new Set){const f=[a||Yr,Fc(i)];return c=c||("object"==typeof i?void 0:Yi(i)),new Ef(f,o||Ya(),c||null,d)}class gs{static create(o,a){if(Array.isArray(o))return LS({name:""},a,o,"");{var c;const d=null!==(c=o.name)&&void 0!==c?c:"";return LS({name:d},o.parent,o.providers,d)}}}(Xr=gs).THROW_IF_NOT_FOUND=D,Xr.NULL=new mf,Xr.\u0275prov=br({token:Xr,providedIn:"any",factory:()=>Mn(Ug)}),Xr.__NG_ELEMENT_ID__=-1,new tr("").__NG_ELEMENT_ID__=i=>{const o=hi();if(null===o)throw new en(204,!1);if(2&o.type)return o.value;if(i&Dr.Optional)return null;throw new en(204,!1)};function pb(i){return i.ngOriginalError}class Al{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&pb(o);for(;a&&pb(a);)a=pb(a);return a||null}}const BS=new tr("",{providedIn:"root",factory:()=>sn(Al).handleError.bind(void 0)});let Zd=(()=>{var i;class o{}return(i=o).__NG_ELEMENT_ID__=yN,i.__NG_ENV_ID__=a=>a,o})();class gb extends Zd{constructor(o){super(),this._lView=o}onDestroy(o){return KI(this._lView,o),()=>function XI(i,o){if(null===i[$c])return;const a=i[$c].indexOf(o);-1!==a&&i[$c].splice(a,1)}(this._lView,o)}}function yN(){return new gb(Ct())}function g2(){return ju(hi(),Ct())}function ju(i,o){return new Uf(ws(i,o))}let Uf=(()=>{class o{constructor(c){this.nativeElement=c}}return o.__NG_ELEMENT_ID__=g2,o})();function pm(i){return i instanceof Uf?i.nativeElement:i}let Hu=(()=>{var i;class o{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Hn.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const c=this.taskId++;return this.pendingTasks.add(c),c}remove(c){this.pendingTasks.delete(c),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}}return(i=o).\u0275prov=br({token:i,providedIn:"root",factory:()=>new i}),o})();const ic=class wN extends Gn.B{constructor(o=!1){var a,c;super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=o,Ou()&&(this.destroyRef=null!==(a=sn(Zd,{optional:!0}))&&void 0!==a?a:void 0,this.pendingTasks=null!==(c=sn(Hu,{optional:!0}))&&void 0!==c?c:void 0)}emit(o){const a=C(null);try{super.next(o)}finally{C(a)}}subscribe(o,a,c){let d=o,f=a||(()=>null),m=c;if(o&&"object"==typeof o){var I,A,O;const q=o;d=null===(I=q.next)||void 0===I?void 0:I.bind(q),f=null===(A=q.error)||void 0===A?void 0:A.bind(q),m=null===(O=q.complete)||void 0===O?void 0:O.bind(q)}this.__isAsync&&(f=this.wrapInTimeout(f),d&&(d=this.wrapInTimeout(d)),m&&(m=this.wrapInTimeout(m)));const $=super.subscribe({next:d,error:f,complete:m});return o instanceof Jn.yU&&o.add($),$}wrapInTimeout(o){return a=>{var c;const d=null===(c=this.pendingTasks)||void 0===c?void 0:c.add();setTimeout(()=>{var f;o(a),void 0!==d&&(null===(f=this.pendingTasks)||void 0===f||f.remove(d))})}}};function CN(){return this._results[Symbol.iterator]()}class mb{get changes(){var o;return null!==(o=this._changes)&&void 0!==o?o:this._changes=new ic}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const a=mb.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=CN)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){this.dirty=!1;const c=function zi(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Ru(i,o,a){if(i.length!==o.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],f=o[c];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(this._results,c,a))&&(this._results=c,this.length=c.length,this.last=c[this.length-1],this.first=c[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(o){this._onDirty=o}setDirty(){var o;this.dirty=!0,null===(o=this._onDirty)||void 0===o||o.call(this)}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function vy(i){return!(128&~i.flags)}const _b=new Map;let TN=0;const Bf="__ngContext__";function Bs(i,o){Vo(o)?(i[Bf]=o[Bc],function SN(i){_b.set(i[Bc],i)}(o)):i[Bf]=o}function KS(i){return XS(i[jd])}function wb(i){return XS(i[Il])}function XS(i){for(;null!==i&&!fs(i);)i=i[Il];return i}let ra;function mm(i){ra=i}const Cy=new tr("",{providedIn:"root",factory:()=>Tb}),Tb="ng",Ay=new tr(""),Sb=new tr("",{providedIn:"platform",factory:()=>"unknown"}),zu=new tr("",{providedIn:"root",factory:()=>{var i;return(null===(i=function Wc(){if(void 0!==ra)return ra;if(typeof document<"u")return document;throw new en(210,!1)}().body)||void 0===i||null===(i=i.querySelector("[ngCspNonce]"))||void 0===i?void 0:i.getAttribute("ngCspNonce"))||null}});let Db=()=>null;function Ry(i,o,a=!1){return Db(i,o,a)}const Rt=new tr("",{providedIn:"root",factory:()=>!1});let Oy,xb;function nh(i){var o;return(null===(o=function Mb(){if(void 0===xb&&(xb=null,Di.trustedTypes))try{xb=Di.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return xb}())||void 0===o?void 0:o.createScriptURL(i))||i}class kb{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Vi})`}}function si(i){return i instanceof kb?i.changingThisBreaksApplicationSecurity:i}function _n(i,o){const a=function Qf(i){return i instanceof kb&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${Vi})`)}return a===o}const Ob=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var np=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(np||{});function pD(i){const o=Tm();return o?o.sanitize(np.URL,i)||"":_n(i,"URL")?si(i):function Fy(i){return(i=String(i)).match(Ob)?i:"unsafe:"+i}(Xn(i))}function gD(i){const o=Tm();if(o)return nh(o.sanitize(np.RESOURCE_URL,i)||"");if(_n(i,"ResourceURL"))return nh(si(i));throw new en(904,!1)}function mD(i){return function lD(i){var o;return(null===(o=function Pb(){if(void 0===Oy&&(Oy=null,Di.trustedTypes))try{Oy=Di.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Oy}())||void 0===o?void 0:o.createScriptURL(i))||i}(i[0])}function _D(i,o,a){return function JN(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?gD:pD}(o,a)(i)}function Tm(){const i=Ct();return i&&i[Za].sanitizer}const ZN=/^>|^->|<!--|-->|--!>|<!-$/g,ek=/(<|>)/g,vD="\u200b$1\u200b";function zs(i){return i instanceof Function?i():i}var Dl=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(Dl||{});let By;function $y(i,o){return By(i,o)}function Xu(i,o,a,c,d){if(null!=c){let f,m=!1;fs(c)?f=c:Vo(c)&&(m=!0,c=c[Ji]);const I=oi(c);0===i&&null!==a?null==d?Wb(o,a,I):Ia(o,a,I,d||null,!0):1===i&&null!==a?Ia(o,a,I,d||null,!0):2===i?function km(i,o,a){const c=Mm(i,o);c&&function xm(i,o,a,c){i.removeChild(o,a,c)}(i,c,o,a)}(o,I,m):3===i&&o.destroyNode(I),null!=f&&function ak(i,o,a,c,d){const f=a[tc];f!==oi(a)&&Xu(o,i,c,f,d);for(let I=mo;I<a.length;I++){const A=a[I];Om(A[an],A,i,o,c,f)}}(o,i,f,a,d)}}function Sm(i,o){return i.createComment(function yD(i){return i.replace(ZN,o=>o.replace(ek,vD))}(o))}function Yu(i,o,a){return i.createElement(o,a)}function Dm(i,o){var a;null===(a=o[Za].changeDetectionScheduler)||void 0===a||a.notify(8),Om(i,o,o[ur],2,null,null)}function Gb(i,o){const a=i[nc],c=o[Lo];(Vo(c)||o[Zi]!==c[Lo][Zi])&&(i[kn]|=Tf.HasTransplantedViews),null===a?i[nc]=[o]:a.push(o)}function Hy(i,o){const a=i[nc],c=a.indexOf(o);a.splice(c,1)}function Pm(i,o){if(i.length<=mo)return;const a=mo+o,c=i[a];if(c){const d=c[Uc];null!==d&&d!==i&&Hy(d,c),o>0&&(i[a-1][Il]=c[Il]);const f=ts(i,mo+o);!function CD(i,o){Dm(i,o),o[Ji]=null,o[rs]=null}(c[an],c);const m=f[el];null!==m&&m.detachView(f[an]),c[Lo]=null,c[Il]=null,c[kn]&=-129}return c}function zy(i,o){if(!(256&o[kn])){const a=o[ur];a.destroyNode&&Om(i,o,a,3,null,null),function jy(i){let o=i[jd];if(!o)return Gy(i[an],i);for(;o;){let a=null;if(Vo(o))a=o[jd];else{const c=o[mo];c&&(a=c)}if(!a){for(;o&&!o[Il]&&o!==i;)Vo(o)&&Gy(o[an],o),o=o[Lo];null===o&&(o=i),Vo(o)&&Gy(o[an],o),a=o&&o[Il]}o=a}}(o)}}function Gy(i,o){if(256&o[kn])return;const a=C(null);try{o[kn]&=-129,o[kn]|=256,o[Oa]&&ct(o[Oa]),function Ss(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=o[a[c]];if(!(d instanceof om)){const f=a[c+1];if(Array.isArray(f))for(let m=0;m<f.length;m+=2){const I=d[f[m]],A=f[m+1];rc(4,I,A);try{A.call(I)}finally{rc(5,I,A)}}else{rc(4,d,f);try{f.call(d)}finally{rc(5,d,f)}}}}}(i,o),function TD(i,o){const a=i.cleanup,c=o[Fu];if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const m=a[f+3];m>=0?c[m]():c[-m].unsubscribe(),f+=2}else a[f].call(c[a[f+1]]);null!==c&&(o[Fu]=null);const d=o[$c];if(null!==d){o[$c]=null;for(let f=0;f<d.length;f++)(0,d[f])()}}(i,o),1===o[an].type&&o[ur].destroy();const c=o[Uc];if(null!==c&&fs(o[Lo])){c!==o[Lo]&&Hy(c,o);const d=o[el];null!==d&&d.detachView(i)}!function DN(i){_b.delete(i[Bc])}(o)}finally{C(a)}}function Wy(i,o,a){return function Wi(i,o,a){let c=o;for(;null!==c&&168&c.type;)c=(o=c).parent;if(null===c)return a[Ji];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:f}=i.data[c.directiveStart+d];if(f===Jl.None||f===Jl.Emulated)return null}return ws(c,a)}}(i,o.parent,a)}function Ia(i,o,a,c,d){i.insertBefore(o,a,c,d)}function Wb(i,o,a){i.appendChild(o,a)}function qb(i,o,a,c,d){null!==c?Ia(i,o,a,c,d):Wb(i,o,a)}function Mm(i,o){return i.parentNode(o)}function yi(i,o,a){return qy(i,o,a)}let Nm,qy=function ah(i,o,a){return 40&i.type?ws(i,a):null};function sp(i,o,a,c){const d=Wy(i,c,o),f=o[ur],I=yi(c.parent||o[rs],c,o);if(null!=d)if(Array.isArray(a))for(let A=0;A<a.length;A++)qb(f,d,a[A],I,!1);else qb(f,d,a,I,!1);void 0!==Nm&&Nm(f,c,o,a,d)}function lh(i,o){if(null!==o){const a=o.type;if(3&a)return ws(o,i);if(4&a)return Ky(-1,i[o.index]);if(8&a){const c=o.child;if(null!==c)return lh(i,c);{const d=i[o.index];return fs(d)?Ky(-1,d):oi(d)}}if(32&a)return $y(o,i)()||oi(i[o.index]);{const c=Xb(i,o);return null!==c?Array.isArray(c)?c[0]:lh(jc(i[Zi]),c):lh(i,o.next)}}return null}function Xb(i,o){return null!==o?i[Zi][rs].projection[o.projection]:null}function Ky(i,o){const a=mo+i+1;if(a<o.length){const c=o[a],d=c[an].firstChild;if(null!==d)return lh(c,d)}return o[tc]}function Qb(i,o,a,c,d,f,m){for(;null!=a;){if(128===a.type){a=a.next;continue}const I=c[a.index],A=a.type;if(m&&0===o&&(I&&Bs(oi(I),c),a.flags|=2),32&~a.flags)if(8&A)Qb(i,o,a.child,c,d,f,!1),Xu(o,i,d,I,f);else if(32&A){const O=$y(a,c);let $;for(;$=O();)Xu(o,i,d,$,f);Xu(o,i,d,I,f)}else 16&A?Yb(i,o,c,a,d,f):Xu(o,i,d,I,f);a=m?a.projectionNext:a.next}}function Om(i,o,a,c,d,f){Qb(a,c,i.firstChild,o,d,f,!1)}function Yb(i,o,a,c,d,f){const m=a[Zi],A=m[rs].projection[c.projection];if(Array.isArray(A))for(let O=0;O<A.length;O++)Xu(o,i,d,A[O],f);else{let O=A;const $=m[Lo];vy(c)&&(O.flags|=128),Qb(i,o,O,$,d,f,!0)}}function Xy(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function Ju(i,o,a){const{mergedAttrs:c,classes:d,styles:f}=a;null!==c&&_f(i,o,c),null!==d&&Xy(i,o,d),null!==f&&function ck(i,o,a){i.setAttribute(o,"style",a)}(i,o,f)}const pr={};function Fm(i=1){Lm(Pr(),Ct(),ps()+i,!1)}function Lm(i,o,a,c){if(!c)if(3&~o[kn]){const f=i.preOrderHooks;null!==f&&kf(o,f,0,a)}else{const f=i.preOrderCheckHooks;null!==f&&oy(o,f,a)}Xd(a)}function ch(i,o=Dr.Default){const a=Ct();return null===a?Mn(i,o):RS(hi(),a,Wn(i),o)}function Jb(){throw new Error("invalid")}function lc(i,o,a,c,d,f){const m=C(null);try{let I=null;d&El.SignalBased&&(I=o[c][X]),null!==I&&void 0!==I.transformFn&&(f=I.transformFn(f)),d&El.HasDecoratorInputTransform&&(f=i.inputTransforms[c].call(o,f)),null!==i.setInput?i.setInput(o,I,f,a,c):Gv(o,I,c,f)}finally{C(m)}}function Jc(i,o,a,c,d,f,m,I,A,O,$){const q=o.blueprint.slice();return q[Ji]=d,q[kn]=204|c,(null!==O||i&&2048&i[kn])&&(q[kn]|=2048),qv(q),q[Lo]=q[Lu]=i,q[$i]=a,q[Za]=m||i&&i[Za],q[ur]=I||i&&i[ur],q[Wo]=A||i&&i[Wo]||null,q[rs]=f,q[Bc]=function vb(){return TN++}(),q[hs]=$,q[$v]=O,q[Zi]=2==o.type?i[Zi]:q,q}function Zu(i,o,a,c,d){let f=i.data[o];if(null===f)f=function Vm(i,o,a,c,d){const f=gS(),m=YI(),A=i.data[o]=function dk(i,o,a,c,d,f){let m=o?o.injectorIndex:-1,I=0;return Pf()&&(I|=128),{type:a,index:c,insertBeforeIndex:null,injectorIndex:m,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:I,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?f:f&&f.parent,a,o,c,d);return null===i.firstChild&&(i.firstChild=A),null!==f&&(m?null==f.child&&null!==A.parent&&(f.child=A):null===f.next&&(f.next=A,A.prev=f)),A}(i,o,a,c,d),function JM(){return dr.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=a,f.value=c,f.attrs=d;const m=function rm(){const i=dr.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();f.injectorIndex=null===m?-1:m.injectorIndex}return nl(f,!0),f}function cc(i,o,a,c){if(0===a)return-1;const d=o.length;for(let f=0;f<a;f++)o.push(c),i.blueprint.push(c),i.data.push(null);return d}function Ds(i,o,a,c,d){const f=ps(),m=2&c;try{Xd(-1),m&&o.length>jn&&Lm(i,o,jn,!1),rc(m?2:0,d),a(c,d)}finally{Xd(f),rc(m?3:1,d)}}function Qy(i,o,a){if(Qg(o)){const c=C(null);try{const f=o.directiveEnd;for(let m=o.directiveStart;m<f;m++){const I=i.data[m];I.contentQueries&&I.contentQueries(1,a[m],m)}}finally{C(c)}}}function Yy(i,o,a){tm()&&(function rw(i,o,a,c){const d=a.directiveStart,f=a.directiveEnd;Wd(a)&&function OD(i,o,a){const c=ws(o,i),d=Bm(a);let m=16;a.signals?m=4096:a.onPush&&(m=64);const I=e0(i,Jc(i,d,null,m,c,o,null,i[Za].rendererFactory.createRenderer(c,a),null,null,null));i[o.index]=I}(o,a,i.data[d+a.componentOffset]),i.firstCreatePass||cy(a,o),Bs(c,o);const m=a.initialInputs;for(let I=d;I<f;I++){const A=i.data[I],O=$u(o,i,I,a);Bs(O,o),null!==m&&cp(0,I-d,O,A,0,m),bl(A)&&(tl(a.index,o)[$i]=$u(o,i,I,a))}}(i,o,a,ws(a,o)),!(64&~a.flags)&&iw(i,o,a))}function Um(i,o,a=ws){const c=o.localNames;if(null!==c){let d=o.index+1;for(let f=0;f<c.length;f+=2){const m=c[f+1],I=-1===m?a(o,i):i[m];i[d++]=I}}}function Bm(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=uh(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):o}function uh(i,o,a,c,d,f,m,I,A,O,$){const q=jn+c,ge=q+d,Ae=function RD(i,o){const a=[];for(let c=0;c<o;c++)a.push(c<i?null:pr);return a}(q,ge),Ce="function"==typeof O?O():O;return Ae[an]={type:i,blueprint:Ae,template:a,queries:null,viewQuery:I,declTNode:o,data:Ae.slice().fill(null,q),bindingStartIndex:q,expandoStartIndex:ge,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:A,consts:Ce,incompleteFirstPass:!1,ssrId:$}}let Zb=()=>null;function ia(i,o,a,c,d){for(let m in o){var f;if(!o.hasOwnProperty(m))continue;const I=o[m];if(void 0===I)continue;null!==(f=c)&&void 0!==f||(c={});let A,O=El.None;Array.isArray(I)?(A=I[0],O=I[1]):A=I;let $=m;if(null!==d){if(!d.hasOwnProperty(m))continue;$=d[m]}0===i?ew(c,a,$,A,O):ew(c,a,$,A)}return c}function ew(i,o,a,c,d){let f;i.hasOwnProperty(a)?(f=i[a]).push(o,c):f=i[a]=[o,c],void 0!==d&&f.push(d)}function tw(i,o,a,c){if(tm()){const d=null===c?null:{"":-1},f=function Jy(i,o){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let m=0;m<a.length;m++){const I=a[m];if(jg(o,I.selectors,!1))if(c||(c=[]),bl(I))if(null!==I.findHostDirectiveDefs){const A=[];d=d||new Map,I.findHostDirectiveDefs(I,A,d),c.unshift(...A,I),ow(i,o,A.length)}else c.unshift(I),ow(i,o,0);else{var f;d=d||new Map,null===(f=I.findHostDirectiveDefs)||void 0===f||f.call(I,I,c,d),c.push(I)}}return null===c?null:[c,d]}(i,a);let m,I;null===f?m=I=null:[m,I]=f,null!==m&&wr(i,o,a,m,d,I),d&&function fk(i,o,a){if(o){const c=i.localNames=[];for(let d=0;d<o.length;d+=2){const f=a[o[d+1]];if(null==f)throw new en(-301,!1);c.push(o[d],f)}}}(a,c,d)}a.mergedAttrs=Bd(a.mergedAttrs,a.attrs)}function wr(i,o,a,c,d,f){for(let q=0;q<c.length;q++)hm(cy(a,o),i,c[q].type);!function lp(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}(a,i.data.length,c.length);for(let q=0;q<c.length;q++){const ge=c[q];ge.providersResolver&&ge.providersResolver(ge)}let m=!1,I=!1,A=cc(i,o,c.length,null);for(let q=0;q<c.length;q++){const ge=c[q];a.mergedAttrs=Bd(a.mergedAttrs,ge.hostAttrs),dh(i,a,o,A,ge),kD(A,ge,d),null!==ge.contentQueries&&(a.flags|=4),(null!==ge.hostBindings||null!==ge.hostAttrs||0!==ge.hostVars)&&(a.flags|=64);const Ae=ge.type.prototype;var O,$;!m&&(Ae.ngOnChanges||Ae.ngOnInit||Ae.ngDoCheck)&&((null!==(O=i.preOrderHooks)&&void 0!==O?O:i.preOrderHooks=[]).push(a.index),m=!0),I||!Ae.ngOnChanges&&!Ae.ngDoCheck||((null!==($=i.preOrderCheckHooks)&&void 0!==$?$:i.preOrderCheckHooks=[]).push(a.index),I=!0),A++}!function jm(i,o,a){const d=o.directiveEnd,f=i.data,m=o.attrs,I=[];let A=null,O=null;for(let $=o.directiveStart;$<d;$++){const q=f[$],ge=a?a.get(q):null,Ce=ge?ge.outputs:null;A=ia(0,q.inputs,$,A,ge?ge.inputs:null),O=ia(1,q.outputs,$,O,Ce);const vt=null===A||null===m||Bg(o)?null:FD(A,$,m);I.push(vt)}null!==A&&(A.hasOwnProperty("class")&&(o.flags|=8),A.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=I,o.inputs=A,o.outputs=O}(i,a,f)}function iw(i,o,a){const c=a.directiveStart,d=a.directiveEnd,f=a.index,m=function eN(){return dr.lFrame.currentDirectiveIndex}();try{Xd(f);for(let I=c;I<d;I++){const A=i.data[I],O=o[I];tb(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&ND(A,O)}}finally{Xd(-1),tb(m)}}function ND(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function ow(i,o,a){var c;o.componentOffset=a,(null!==(c=i.components)&&void 0!==c?c:i.components=[]).push(o.index)}function kD(i,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=i;bl(o)&&(a[""]=i)}}function dh(i,o,a,c,d){i.data[c]=d;const f=d.factory||(d.factory=vl(d.type)),m=new om(f,bl(d),ch);i.blueprint[c]=m,a[c]=m,function hk(i,o,a,c,d){const f=d.hostBindings;if(f){let m=i.hostBindingOpCodes;null===m&&(m=i.hostBindingOpCodes=[]);const I=~o.index;(function nw(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(m)!=I&&m.push(I),m.push(a,c,f)}}(i,o,c,cc(i,a,d.hostVars,pr),d)}function Gs(i,o,a,c,d,f){const m=ws(i,o);!function Zy(i,o,a,c,d,f,m){if(null==f)i.removeAttribute(o,d,a);else{const I=null==m?Xn(f):m(f,c||"",d);i.setAttribute(o,d,I,a)}}(o[ur],m,f,i.value,a,c,d)}function cp(i,o,a,c,d,f){const m=f[o];if(null!==m)for(let I=0;I<m.length;)lc(c,a,m[I++],m[I++],m[I++],m[I++])}function FD(i,o,a){let c=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;if(i.hasOwnProperty(f)){null===c&&(c=[]);const m=i[f];for(let I=0;I<m.length;I+=3)if(m[I]===o){c.push(f,m[I+1],m[I+2],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function sw(i,o,a,c){return[i,!0,0,o,null,c,null,a,null,null]}function up(i,o){const a=i.contentQueries;if(null!==a){const c=C(null);try{for(let d=0;d<a.length;d+=2){const m=a[d+1];if(-1!==m){const I=i.data[m];ey(a[d]),I.contentQueries(2,o[m],m)}}}finally{C(c)}}}function e0(i,o){return i[jd]?i[Xg][Il]=o:i[jd]=o,i[Xg]=o,o}function aw(i,o,a){ey(0);const c=C(null);try{o(i,a)}finally{C(c)}}function zm(i){var o;return null!==(o=i[Fu])&&void 0!==o?o:i[Fu]=[]}function Gm(i){var o;return null!==(o=i.cleanup)&&void 0!==o?o:i.cleanup=[]}function t0(i,o){const a=i[Wo],c=a?a.get(Al,null):null;c&&c.handleError(o)}function hh(i,o,a,c,d){for(let f=0;f<a.length;){const m=a[f++],I=a[f++],A=a[f++];lc(i.data[m],o[m],c,I,A,d)}}function eu(i,o,a){const c=Wv(o,i);!function Qu(i,o,a){i.setValue(o,a)}(i[ur],c,a)}function LD(i,o){const a=tl(o,i),c=a[an];!function dp(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])}(c,a);const d=a[Ji];null!==d&&null===a[hs]&&(a[hs]=Ry(d,a[Wo])),Rl(c,a,a[$i])}function Rl(i,o,a){ib(o);try{var c;const d=i.viewQuery;null!==d&&aw(1,d,a);const f=i.template;null!==f&&Ds(i,o,f,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),null===(c=o[el])||void 0===c||c.finishViewCreation(i),i.staticContentQueries&&up(i,o),i.staticViewQueries&&aw(2,i.viewQuery,a);const m=i.components;null!==m&&function VD(i,o){for(let a=0;a<o.length;a++)LD(i,o[a])}(o,m)}catch(d){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),d}finally{o[kn]&=-5,ob()}}function fh(i,o,a,c){const d=C(null);try{var f,m,I;const A=o.tView,q=Jc(i,A,a,4096&i[kn]?4096:16,null,o,null,null,null!==(f=null==c?void 0:c.injector)&&void 0!==f?f:null,null!==(m=null==c?void 0:c.embeddedViewInjector)&&void 0!==m?m:null,null!==(I=null==c?void 0:c.dehydratedView)&&void 0!==I?I:null);q[Uc]=i[o.index];const Ae=i[el];return null!==Ae&&(q[el]=Ae.createEmbeddedView(A)),Rl(A,q,a),q}finally{C(d)}}function sl(i,o){return!o||null===o.firstChild||vy(i)}function ed(i,o,a,c=!0){const d=o[an];if(function Rm(i,o,a,c){const d=mo+c,f=a.length;c>0&&(a[d-1][Il]=o),c<f-mo?(o[Il]=a[d],Lg(a,mo+c,o)):(a.push(o),o[Il]=null),o[Lo]=a;const m=o[Uc];null!==m&&a!==m&&Gb(m,o);const I=o[el];null!==I&&I.insertView(i),qI(o),o[kn]|=128}(d,o,i,a),c){const m=Ky(a,i),I=o[ur],A=Mm(I,i[tc]);null!==A&&function AD(i,o,a,c,d,f){c[Ji]=d,c[rs]=o,Om(i,c,a,1,d,f)}(d,i[rs],I,o,A,m)}const f=o[hs];null!==f&&null!==f.firstChild&&(f.firstChild=null)}function ph(i,o,a,c,d=!1){for(;null!==a;){if(128===a.type){a=d?a.projectionNext:a.next;continue}const f=o[a.index];null!==f&&c.push(oi(f)),fs(f)&&n0(f,c);const m=a.type;if(8&m)ph(i,o,a.child,c);else if(32&m){const I=$y(a,o);let A;for(;A=I();)c.push(A)}else if(16&m){const I=Xb(o,a);if(Array.isArray(I))c.push(...I);else{const A=jc(o[Zi]);ph(A[an],A,I,c,!0)}}a=d?a.projectionNext:a.next}return c}function n0(i,o){for(let a=mo;a<i.length;a++){const c=i[a],d=c[an].firstChild;null!==d&&ph(c[an],c,d,o)}i[tc]!==i[Ji]&&o.push(i[tc])}let uw=[];const UD={...Qe,consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{Xv(i.lView)},consumerOnSignalRead(){this.lView[Oa]=this}},r0={...Qe,consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{let o=jc(i.lView);for(;o&&!dw(o[an]);)o=jc(o);o&&Vu(o)},consumerOnSignalRead(){this.lView[Oa]=this}};function dw(i){return 2!==i.type}const gk=100;function qm(i,o=!0,a=0){const c=i[Za],d=c.rendererFactory;var m;null===(m=d.begin)||void 0===m||m.call(d);try{!function $D(i,o){const a=Jv();try{eb(!0),a0(i,o);let c=0;for(;Zg(i);){if(c===gk)throw new en(103,!1);c++,a0(i,1)}}finally{eb(a)}}(i,a)}catch(O){throw o&&t0(i,O),O}finally{var I,A;null===(I=d.end)||void 0===I||I.call(d),null===(A=c.inlineEffectRunner)||void 0===A||A.flush()}}function Km(i,o,a,c){var d;const f=o[kn];if(!(256&~f))return;null===(d=o[Za].inlineEffectRunner)||void 0===d||d.flush(),ib(o);let A=!0,O=null,$=null;dw(i)?($=function pk(i){var o;return null!==(o=i[Oa])&&void 0!==o?o:function qo(i){var o;const a=null!==(o=uw.pop())&&void 0!==o?o:Object.create(UD);return a.lView=i,a}(i)}(o),O=tt($)):null===function pe(){return g}()?(A=!1,$=function BD(i){var o;const a=null!==(o=i[Oa])&&void 0!==o?o:Object.create(r0);return a.lView=i,a}(o),O=tt($)):o[Oa]&&(ct(o[Oa]),o[Oa]=null);try{qv(o),function Zv(i){return dr.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Ds(i,o,a,2,c);const q=!(3&~f);if(q){const Ce=i.preOrderCheckHooks;null!==Ce&&oy(o,Ce,null)}else{const Ce=i.preOrderHooks;null!==Ce&&kf(o,Ce,0,null),Qd(o,0)}if(function Xm(i){for(let o=KS(i);null!==o;o=wb(o)){if(!(o[kn]&Tf.HasTransplantedViews))continue;const a=o[nc];for(let c=0;c<a.length;c++)Vu(a[c])}}(o),hp(o,0),null!==i.contentQueries&&up(i,o),q){const Ce=i.contentCheckHooks;null!==Ce&&oy(o,Ce)}else{const Ce=i.contentHooks;null!==Ce&&kf(o,Ce,1),Qd(o,1)}!function DD(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)Xd(~d);else{const f=d,m=a[++c],I=a[++c];Mf(m,f),I(2,o[f])}}}finally{Xd(-1)}}(i,o);const ge=i.components;null!==ge&&fw(o,ge,0);const Ae=i.viewQuery;if(null!==Ae&&aw(2,Ae,c),q){const Ce=i.viewCheckHooks;null!==Ce&&oy(o,Ce)}else{const Ce=i.viewHooks;null!==Ce&&kf(o,Ce,2),Qd(o,2)}if(!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[zd]){for(const Ce of o[zd])Ce();o[zd]=null}o[kn]&=-73}catch(q){throw Xv(o),q}finally{null!==$&&(nt($,O),A&&function Jr(i){i.lView[Oa]!==i&&(i.lView=null,uw.push(i))}($)),ob()}}function hp(i,o){for(let a=KS(i);null!==a;a=wb(a))for(let c=mo;c<a.length;c++)hw(a[c],o)}function s0(i,o,a){hw(tl(o,i),a)}function hw(i,o){fS(i)&&a0(i,o)}function a0(i,o){const c=i[an],d=i[kn],f=i[Oa];let m=!!(0===o&&16&d);if(m||(m=!!(64&d&&0===o)),m||(m=!!(1024&d)),m||(m=!(null==f||!f.dirty||!At(f))),m||(m=!1),f&&(f.dirty=!1),i[kn]&=-9217,m)Km(c,i,c.template,i[$i]);else if(8192&d){hp(i,1);const I=c.components;null!==I&&fw(i,I,1)}}function fw(i,o,a){for(let c=0;c<o.length;c++)s0(i,o[c],a)}function Qm(i,o){var a;const c=Jv()?64:1088;for(null===(a=i[Za].changeDetectionScheduler)||void 0===a||a.notify(o);i;){i[kn]|=c;const d=jc(i);if(qd(i)&&!d)return i;i=d}return null}class fp{get rootNodes(){const o=this._lView,a=o[an];return ph(a,o,a.firstChild,[])}constructor(o,a,c=!0){this._lView=o,this._cdRefInjectingView=a,this.notifyErrorHandler=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[$i]}set context(o){this._lView[$i]=o}get destroyed(){return!(256&~this._lView[kn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[Lo];if(fs(o)){const a=o[8],c=a?a.indexOf(this):-1;c>-1&&(Pm(o,c),ts(a,c))}this._attachedToViewContainer=!1}zy(this._lView[an],this._lView)}onDestroy(o){KI(this._lView,o)}markForCheck(){Qm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[kn]&=-129}reattach(){qI(this._lView),this._lView[kn]|=128}detectChanges(){this._lView[kn]|=1024,qm(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new en(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const o=qd(this._lView),a=this._lView[Uc];null!==a&&!o&&Hy(a,this._lView),Dm(this._lView[an],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new en(902,!1);this._appRef=o;const a=qd(this._lView),c=this._lView[Uc];null!==c&&!a&&Gb(c,this._lView),qI(this._lView)}}let pp=(()=>{class o{}return o.__NG_ELEMENT_ID__=vk,o})();const mk=pp,_k=class extends mk{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}get ssrId(){var o;return(null===(o=this._declarationTContainer.tView)||void 0===o?void 0:o.ssrId)||null}createEmbeddedView(o,a){return this.createEmbeddedViewImpl(o,a)}createEmbeddedViewImpl(o,a,c){const d=fh(this._declarationLView,this._declarationTContainer,o,{embeddedViewInjector:a,dehydratedView:c});return new fp(d)}};function vk(){return l0(hi(),Ct())}function l0(i,o){return 4&i.type?new _k(o,i,ju(i,o)):null}let Dw=()=>null;function al(i,o){return Dw(i,o)}class wh{}const ll=new tr("",{providedIn:"root",factory:()=>!1}),cR=new tr("");class uR{}class dR{}class pR{resolveComponentFactory(o){throw function hR(i){const o=Error(`No component factory found for ${Yi(i)}.`);return o.ngComponent=i,o}(o)}}class h_{}h_.NULL=new pR;class g0{}let Rk=(()=>{class o{constructor(){this.destroyNode=null}}return o.__NG_ELEMENT_ID__=()=>function gR(){const i=Ct(),a=tl(hi().index,i);return(Vo(a)?a:i)[ur]}(),o})(),Ch=(()=>{var i;class o{}return(i=o).\u0275prov=br({token:i,providedIn:"root",factory:()=>null}),o})();const Pw=new Set;function qs(i){var o,a;Pw.has(i)||(Pw.add(i),null===(o=performance)||void 0===o||null===(a=o.mark)||void 0===a||a.call(o,"mark_feature_usage",{detail:{feature:i}}))}function mR(i){let o=!0;return setTimeout(()=>{o&&(o=!1,i())}),"function"==typeof Di.requestAnimationFrame&&Di.requestAnimationFrame(()=>{o&&(o=!1,i())}),()=>{o=!1}}function xw(i){let o=!0;return queueMicrotask(()=>{o&&i()}),()=>{o=!1}}function _R(...i){}class no{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ic(!1),this.onMicrotaskEmpty=new ic(!1),this.onStable=new ic(!1),this.onError=new ic(!1),typeof Zone>"u")throw new en(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.callbackScheduled=!1,function xk(i){const o=()=>{!function Pk(i){i.isCheckStableRunning||i.callbackScheduled||(i.callbackScheduled=!0,Zone.root.run(()=>{mR(()=>{i.callbackScheduled=!1,Nw(i),i.isCheckStableRunning=!0,Ko(i),i.isCheckStableRunning=!1})}),Nw(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,f,m,I)=>{if(function v0(i){return yR(i,"__ignore_ng_zone__")}(I))return a.invokeTask(d,f,m,I);try{return vR(i),a.invokeTask(d,f,m,I)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&o(),_0(i)}},onInvoke:(a,c,d,f,m,I,A)=>{try{return vR(i),a.invoke(d,f,m,I,A)}finally{i.shouldCoalesceRunChangeDetection&&!i.callbackScheduled&&!function y0(i){return yR(i,"__scheduler_tick__")}(I)&&o(),_0(i)}},onHasTask:(a,c,d,f)=>{a.hasTask(d,f),c===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Nw(i),Ko(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!no.isInAngularZone())throw new en(909,!1)}static assertNotInAngularZone(){if(no.isInAngularZone())throw new en(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,d){const f=this._inner,m=f.scheduleEventTask("NgZoneEvent: "+d,o,Mw,_R,_R);try{return f.runTask(m,a,c)}finally{f.cancelTask(m)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const Mw={};function Ko(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Nw(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&!0===i.callbackScheduled)}function vR(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function _0(i){i._nesting--,Ko(i)}class kw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ic,this.onMicrotaskEmpty=new ic,this.onStable=new ic,this.onError=new ic}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,d){return o.apply(a,c)}}function yR(i,o){var a;return!(!Array.isArray(i)||1!==i.length)&&!0===(null===(a=i[0])||void 0===a||null===(a=a.data)||void 0===a?void 0:a[o])}var Rs=function(i){return i[i.EarlyRead=0]="EarlyRead",i[i.Write=1]="Write",i[i.MixedReadWrite=2]="MixedReadWrite",i[i.Read=3]="Read",i}(Rs||{});const E0={destroy(){}};function b0(i,o){var a,c;!o&&function Bv(i){if(!Ou())throw new en(-203,!1)}();const d=null!==(a=null==o?void 0:o.injector)&&void 0!==a?a:sn(gs);return function Ts(i){return"browser"===(null!=i?i:sn(gs)).get(Sb)}(d)?(qs("NgAfterNextRender"),function IR(i,o,a,c){var d;const f=function Ow(i,o){if(i instanceof Function)switch(o){case Rs.EarlyRead:return{earlyRead:i};case Rs.Write:return{write:i};case Rs.MixedReadWrite:return{mixedReadWrite:i};case Rs.Read:return{read:i}}return i}(i,c),m=o.get(f_),I=null!==(d=m.handler)&&void 0!==d?d:m.handler=new Mk,A=[],O=[],$=()=>{for(const Ce of O)I.unregister(Ce);q()},q=o.get(Zd).onDestroy($);let ge=0;const Ae=(Ce,vt)=>{if(!vt)return;const jt=a?(...Mt)=>(ge--,ge<1&&$(),vt(...Mt)):vt,Zt=Uv(o,()=>new bR(Ce,A,jt));I.register(Zt),O.push(Zt),ge++};return Ae(Rs.EarlyRead,f.earlyRead),Ae(Rs.Write,f.write),Ae(Rs.MixedReadWrite,f.mixedReadWrite),Ae(Rs.Read,f.read),{destroy:$}}(i,d,!0,null!==(c=null==o?void 0:o.phase)&&void 0!==c?c:Rs.MixedReadWrite)):E0}class bR{constructor(o,a,c){var d;this.phase=o,this.pipelinedArgs=a,this.callbackFn=c,this.zone=sn(no),this.errorHandler=sn(Al,{optional:!0}),null===(d=sn(wh,{optional:!0}))||void 0===d||d.notify(6)}invoke(){try{const a=this.zone.runOutsideAngular(()=>this.callbackFn.apply(null,this.pipelinedArgs));this.pipelinedArgs.splice(0,this.pipelinedArgs.length,a)}catch(a){var o;null===(o=this.errorHandler)||void 0===o||o.handleError(a)}}}class Mk{constructor(){this.executingCallbacks=!1,this.buckets={[Rs.EarlyRead]:new Set,[Rs.Write]:new Set,[Rs.MixedReadWrite]:new Set,[Rs.Read]:new Set},this.deferredCallbacks=new Set}register(o){(this.executingCallbacks?this.deferredCallbacks:this.buckets[o.phase]).add(o)}unregister(o){this.buckets[o.phase].delete(o),this.deferredCallbacks.delete(o)}execute(){this.executingCallbacks=!0;for(const o of Object.values(this.buckets))for(const a of o)a.invoke();this.executingCallbacks=!1;for(const o of this.deferredCallbacks)this.buckets[o.phase].add(o);this.deferredCallbacks.clear()}destroy(){for(const o of Object.values(this.buckets))o.clear();this.deferredCallbacks.clear()}}let f_=(()=>{var i;class o{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){var c;this.executeInternalCallbacks(),null===(c=this.handler)||void 0===c||c.execute()}executeInternalCallbacks(){const c=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const d of c)d()}ngOnDestroy(){var c;null===(c=this.handler)||void 0===c||c.destroy(),this.handler=null,this.internalCallbacks.length=0}}return(i=o).\u0275prov=br({token:i,providedIn:"root",factory:()=>new i}),o})();function pc(i){return!!on(i)}function g_(i,o,a){let c=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==o)for(let m=0;m<o.length;m++){const I=o[m];"number"==typeof I?f=I:1==f?d=fl(d,I):2==f&&(c=fl(c,I+": "+o[++m]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}class Lw extends h_{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=te(o);return new m_(a,this.ngModule)}}function CR(i,o){const a=[];for(const c in i){if(!i.hasOwnProperty(c))continue;const d=i[c];if(void 0===d)continue;const f=Array.isArray(d),m=f?d[0]:d;a.push(o?{propName:m,templateName:c,isSignal:!!((f?d[1]:El.None)&El.SignalBased)}:{propName:m,templateName:c})}return a}class m_ extends dR{get inputs(){const o=this.componentDef,a=o.inputTransforms,c=CR(o.inputs,!0);if(null!==a)for(const d of c)a.hasOwnProperty(d.propName)&&(d.transform=a[d.propName]);return c}get outputs(){return CR(this.componentDef.outputs,!1)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function Fv(i){return i.map(vf).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,c,d){const f=C(null);try{var I;let A=(d=d||this.ngModule)instanceof va?d:null===(I=d)||void 0===I?void 0:I.injector;A&&null!==this.componentDef.getStandaloneInjector&&(A=this.componentDef.getStandaloneInjector(A)||A);const O=A?new Gc(o,A):o,$=O.get(g0,null);if(null===$)throw new en(407,!1);const q=O.get(Ch,null),Ce={rendererFactory:$,sanitizer:q,inlineEffectRunner:null,afterRenderEventManager:O.get(f_,null),changeDetectionScheduler:O.get(wh,null)},vt=$.createRenderer(null,this.componentDef),jt=this.componentDef.selectors[0][0]||"div",Zt=c?function ap(i,o,a,c){const f=c.get(Rt,!1)||a===Jl.ShadowDom,m=i.selectRootElement(o,f);return function $m(i){Zb(i)}(m),m}(vt,c,this.componentDef.encapsulation,O):Yu(vt,jt,function Vw(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(jt));let Mt=512;this.componentDef.signals?Mt|=4096:this.componentDef.onPush||(Mt|=16);let Qn=null;null!==Zt&&(Qn=Ry(Zt,O,!0));const Er=uh(0,null,null,1,0,null,null,null,null,null,null),$r=Jc(null,Er,null,Mt,null,null,Ce,vt,O,null,Qn);let Ms,Ys;ib($r);try{const Bl=this.componentDef;let fu,pv=null;Bl.findHostDirectiveDefs?(fu=[],pv=new Map,Bl.findHostDirectiveDefs(Bl,fu,pv),fu.push(Bl)):fu=[Bl];const LL=function AR(i,o){const a=i[an],c=jn;return i[c]=o,Zu(a,c,2,"#host",null)}($r,Zt),tM=function TR(i,o,a,c,d,f,m){const I=d[an];!function Bw(i,o,a,c){for(const d of i)o.mergedAttrs=Bd(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(g_(o,o.mergedAttrs,!0),null!==a&&Ju(c,a,o))}(c,i,o,m);let A=null;null!==o&&(A=Ry(o,d[Wo]));const O=f.rendererFactory.createRenderer(o,a);let $=16;a.signals?$=4096:a.onPush&&($=64);const q=Jc(d,Bm(a),null,$,d[i.index],i,f,O,null,null,A);return I.firstCreatePass&&ow(I,i,c.length-1),e0(d,q),d[i.index]=q}(LL,Zt,Bl,fu,$r,Ce,vt);Ys=Jg(Er,jn),Zt&&function __(i,o,a,c){if(c)_f(i,a,["ng-version","18.1.2"]);else{const{attrs:d,classes:f}=function WT(i){const o=[],a=[];let c=1,d=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===d?""!==f&&o.push(f,i[++c]):8===d&&a.push(f);else{if(!ka(d))break;d=f}c++}return{attrs:o,classes:a}}(o.selectors[0]);d&&_f(i,a,d),f&&f.length>0&&Xy(i,a,f.join(" "))}}(vt,Bl,Zt,c),void 0!==a&&function T0(i,o,a){const c=i.projection=[];for(let d=0;d<o.length;d++){const f=a[d];c.push(null!=f?Array.from(f):null)}}(Ys,this.ngContentSelectors,a),Ms=function A0(i,o,a,c,d,f){const m=hi(),I=d[an],A=ws(m,d);wr(I,d,m,a,null,c);for(let $=0;$<a.length;$++)Bs($u(d,I,m.directiveStart+$,m),d);iw(I,d,m),A&&Bs(A,d);const O=$u(d,I,m.directiveStart+m.componentOffset,m);if(i[$i]=d[$i]=O,null!==f)for(const $ of f)$(O,o);return Qy(I,m,d),O}(tM,Bl,fu,pv,$r,[$w]),Rl(Er,$r,null)}finally{ob()}return new Uw(this.componentType,Ms,ju(Ys,$r),$r,Ys)}finally{C(f)}}}class Uw extends uR{constructor(o,a,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new fp(d,void 0,!1),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){var f;if(null!==(f=this.previousInputValues)&&void 0!==f||(this.previousInputValues=new Map),this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),a))return;const m=this._rootLView;hh(m[an],m,d,o,a),this.previousInputValues.set(o,a),Qm(tl(this._tNode.index,m),1)}}get injector(){return new is(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function $w(){const i=hi();Nf(Ct()[an],i)}let Ap=(()=>{class o{}return o.__NG_ELEMENT_ID__=jw,o})();function jw(){return S0(hi(),Ct())}const SR=Ap,DR=class extends SR{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return ju(this._hostTNode,this._hostLView)}get injector(){return new is(this._hostTNode,this._hostLView)}get parentInjector(){const o=uy(this._hostTNode,this._hostLView);if(sm(o)){const a=cm(o,this._hostLView),c=am(o);return new is(a[an].data[c+8],a)}return new is(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Hw(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-mo}createEmbeddedView(o,a,c){let d,f;"number"==typeof c?d=c:null!=c&&(d=c.index,f=c.injector);const m=al(this._lContainer,o.ssrId),I=o.createEmbeddedViewImpl(a||{},f,m);return this.insertImpl(I,d,sl(this._hostTNode,m)),I}createComponent(o,a,c,d,f){var m,I,A;const O=o&&!function ec(i){return"function"==typeof i}(o);let $;if(O)$=a;else{const Zt=a||{};$=Zt.index,c=Zt.injector,d=Zt.projectableNodes,f=Zt.environmentInjector||Zt.ngModuleRef}const q=O?o:new m_(te(o)),ge=c||this.parentInjector;if(!f&&null==q.ngModule){const Mt=(O?ge:this.parentInjector).get(va,null);Mt&&(f=Mt)}const Ae=te(null!==(m=q.componentType)&&void 0!==m?m:{}),Ce=al(this._lContainer,null!==(I=null==Ae?void 0:Ae.id)&&void 0!==I?I:null),vt=null!==(A=null==Ce?void 0:Ce.firstChild)&&void 0!==A?A:null,jt=q.create(ge,d,vt,f);return this.insertImpl(jt.hostView,$,sl(this._hostTNode,Ce)),jt}insert(o,a){return this.insertImpl(o,a,!0)}insertImpl(o,a,c){const d=o._lView;if(function l2(i){return fs(i[Lo])}(d)){const I=this.indexOf(o);if(-1!==I)this.detach(I);else{const A=d[Lo],O=new DR(A,A[rs],A[Lo]);O.detach(O.indexOf(o))}}const f=this._adjustIndex(a),m=this._lContainer;return ed(m,d,f,c),o.attachToViewContainerRef(),Lg(Tp(m),f,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Hw(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=Pm(this._lContainer,a);c&&(ts(Tp(this._lContainer),a),zy(c[an],c))}detach(o){const a=this._adjustIndex(o,-1),c=Pm(this._lContainer,a);return c&&null!=ts(Tp(this._lContainer),a)?new fp(c):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function Hw(i){return i[8]}function Tp(i){return i[8]||(i[8]=[])}function S0(i,o){let a;const c=o[i.index];return fs(c)?a=c:(a=sw(c,o,null,i),o[i.index]=a,e0(o,a)),RR(a,o,i,c),new DR(a,i,o)}let RR=function zw(i,o,a,c){if(i[tc])return;let d;d=8&a.type?oi(c):function Ok(i,o){const a=i[ur],c=a.createComment(""),d=ws(o,i);return Ia(a,Mm(a,d),c,function Wr(i,o){return i.nextSibling(o)}(a,d),!1),c}(o,a),i[tc]=d},ms=()=>!1;class R0{constructor(o){this.queryList=o,this.matches=null}clone(){return new R0(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ww{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let f=0;f<c;f++){const m=a.getByIndex(f);d.push(this.queries[m.indexInDeclarationView].clone())}return new Ww(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}finishViewCreation(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Jw(o,a).matches&&this.queries[a].setDirty()}}class xR{constructor(o,a,c=null){this.flags=a,this.read=c,this.predicate="string"==typeof o?function Yw(i){return i.split(",").map(o=>o.trim())}(o):o}}class qw{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(o,d);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new qw(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Kw{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Kw(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1&~this.metadata.flags){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(o,a,Fk(a,f)),this.matchTNodeWithReadOption(o,a,Lf(a,o,f,!1,!1))}else c===pp?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Lf(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Uf||d===Ap||d===pp&&4&a.type)this.addMatch(a.index,-2);else{const f=Lf(a,o,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function Fk(i,o){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function Xw(i,o,a,c){return-1===a?function y_(i,o){return 11&i.type?ju(i,o):4&i.type?l0(i,o):null}(o,i):-2===a?function Sp(i,o,a){return a===Uf?ju(o,i):a===pp?l0(o,i):a===Ap?S0(o,i):void 0}(i,o,c):$u(i,i[an],a,o)}function P0(i,o,a,c){const d=o[el].queries[c];if(null===d.matches){const f=i.data,m=a.matches,I=[];for(let A=0;null!==m&&A<m.length;A+=2){const O=m[A];I.push(O<0?null:Xw(o,f[O],m[A+1],a.metadata.read))}d.matches=I}return d.matches}function Dp(i,o,a,c){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const m=P0(i,o,d,a);for(let I=0;I<f.length;I+=2){const A=f[I];if(A>0)c.push(m[I/2]);else{const O=f[I+1],$=o[-A];for(let q=mo;q<$.length;q++){const ge=$[q];ge[Uc]===ge[Lo]&&Dp(ge[an],ge,O,c)}if(null!==$[nc]){const q=$[nc];for(let ge=0;ge<q.length;ge++){const Ae=q[ge];Dp(Ae[an],Ae,O,c)}}}}}return c}function x0(i,o,a){var c;const d=new mb(!(4&~a));return function Zc(i,o,a,c){const d=zm(o);d.push(a),i.firstCreatePass&&Gm(i).push(c,d.length-1)}(i,o,d,d.destroy),(null!==(c=o[el])&&void 0!==c?c:o[el]=new Ww).queries.push(new R0(d))-1}function tu(i,o,a){null===i.queries&&(i.queries=new qw),i.queries.track(new Kw(o,a))}function Jw(i,o){return i.queries.getByIndex(o)}function N0(i,o){const a=i[an],c=Jw(a,o);return c.crossesNgTemplate?Dp(a,i,o,[]):P0(a,i,c,o)}function k0(i,o){qs("NgSignals");const a=function Y(i){const o=Object.create(qt);o.value=i;const a=()=>(ye(o),o.value);return a[X]=o,a}(i),c=a[X];return null!=o&&o.equal&&(c.equal=o.equal),a.set=d=>We(c,d),a.update=d=>function Ye(i,o){Ze()||Dt(),We(i,o(i.value))}(c,d),a.asReadonly=OR.bind(a),a}function OR(){const i=this[X];if(void 0===i.readonlyFn){const o=()=>this();o[X]=i,i.readonlyFn=o}return i.readonlyFn}function $0(i){let o=function sC(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;o;){let d;if(bl(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new en(903,!1);d=o.\u0275dir}if(d){if(a){c.push(d);const m=i;m.inputs=j0(i.inputs),m.inputTransforms=j0(i.inputTransforms),m.declaredInputs=j0(i.declaredInputs),m.outputs=j0(i.outputs);const I=d.hostBindings;I&&qk(i,I);const A=d.viewQuery,O=d.contentQueries;if(A&&Gk(i,A),O&&Wk(i,O),qR(i,d),Iu(i.outputs,d.outputs),bl(d)&&d.data.animation){const $=i.data;$.animation=($.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let m=0;m<f.length;m++){const I=f[m];I&&I.ngInherit&&I(i),I===$0&&(a=!1)}}o=Object.getPrototypeOf(o)}!function KR(i){let o=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=o+=d.hostVars,d.hostAttrs=Bd(d.hostAttrs,a=Bd(a,d.hostAttrs))}}(c)}function qR(i,o){for(const c in o.inputs){if(!o.inputs.hasOwnProperty(c)||i.inputs.hasOwnProperty(c))continue;const d=o.inputs[c];if(void 0!==d&&(i.inputs[c]=d,i.declaredInputs[c]=o.declaredInputs[c],null!==o.inputTransforms)){var a;const f=Array.isArray(d)?d[0]:d;if(!o.inputTransforms.hasOwnProperty(f))continue;null!==(a=i.inputTransforms)&&void 0!==a||(i.inputTransforms={}),i.inputTransforms[f]=o.inputTransforms[f]}}}function j0(i){return i===Qa?{}:i===Yr?[]:i}function Gk(i,o){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{o(c,d),a(c,d)}:o}function Wk(i,o){const a=i.contentQueries;i.contentQueries=a?(c,d,f)=>{o(c,d,f),a(c,d,f)}:o}function qk(i,o){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{o(c,d),a(c,d)}:o}function QR(i){const o=i.inputConfig,a={};for(const c in o)if(o.hasOwnProperty(c)){const d=o[c];Array.isArray(d)&&d[3]&&(a[c]=d[3])}i.inputTransforms=a}class nu{}class YR{}function uC(i,o){return new b_(i,null!=o?o:null,[])}class b_ extends nu{constructor(o,a,c){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Lw(this);const d=on(o);this._bootstrapComponents=zs(d.bootstrap),this._r3Injector=VS(o,a,[{provide:nu,useValue:this},{provide:h_,useValue:this.componentFactoryResolver},...c],Yi(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class W0 extends YR{constructor(o){super(),this.moduleType=o}create(o){return new b_(this.moduleType,o,[])}}class q0 extends nu{constructor(o){super(),this.componentFactoryResolver=new Lw(this),this.instance=null;const a=new Ef([...o.providers,{provide:nu,useValue:this},{provide:h_,useValue:this.componentFactoryResolver}],o.parent||Ya(),o.debugName,new Set(["environment"]));this.injector=a,o.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function dC(i,o,a=null){return new q0({providers:i,parent:o,debugName:a,runEnvironmentInitializers:!0}).injector}function xp(i){return!!w_(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function w_(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Eo(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function xh(i,o,a,c,d,f,m,I,A,O){const $=a+jn,q=o.firstCreatePass?function Jk(i,o,a,c,d,f,m,I,A){const O=o.consts,$=Zu(o,i,4,m||null,I||null);tw(o,a,$,wl(O,A)),Nf(o,$);const q=$.tView=uh(2,$,c,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,O,null);return null!==o.queries&&(o.queries.template(o,$),q.queries=o.queries.embeddedTView($)),$}($,o,i,c,d,f,m,I,A):o.data[$];nl(q,!1);const ge=JR(o,i,q,a);im()&&sp(o,i,ge,q),Bs(ge,i);const Ae=sw(ge,i,ge,q);return i[$]=Ae,e0(i,Ae),function PR(i,o,a){return ms(i,o,a)}(Ae,q,i),Sf(q)&&Yy(o,i,q),null!=A&&Um(i,q,O),q}function gC(i,o,a,c,d,f,m,I){const A=Ct(),O=Pr();return xh(A,O,i,o,a,c,d,wl(O.consts,f),m,I),gC}let JR=function K0(i,o,a,c){return il(!0),o[ur].createComment("")};function aE(i,o,a,c){const d=Ct();return Eo(d,rl(),o)&&(Pr(),Gs(Gi(),d,i,o,a,c)),aE}function Fh(i,o,a,c,d,f){const I=function Ph(i,o,a,c){const d=Eo(i,o,a);return Eo(i,o+1,c)||d}(i,function Hc(){return dr.lFrame.bindingIndex}(),a,d);return zc(2),I?o+Xn(a)+c+Xn(d)+f:pr}function Lh(i,o){return i<<17|o<<2}function fd(i){return i>>17&32767}function lE(i){return 2|i}function vc(i){return(131068&i)>>2}function AC(i,o){return-131069&i|o<<2}function Kp(i){return 1|i}function uE(i,o,a,c){const d=i[a+1],f=null===o;let m=c?fd(d):vc(d),I=!1;for(;0!==m&&(!1===I||f);){const O=i[m+1];DC(i[m],o)&&(I=!0,i[m+1]=c?Kp(O):lE(O)),m=c?fd(O):vc(O)}I&&(i[a+1]=c?lE(d):Kp(d))}function DC(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&ls(i,o)>=0}function gE(i,o,a){const c=Ct();return Eo(c,rl(),o)&&function vo(i,o,a,c,d,f,m,I){const A=ws(o,a);let $,O=o.inputs;!I&&null!=O&&($=O[c])?(hh(i,a,$,c,d),Wd(o)&&function MD(i,o){const a=tl(o,i);16&a[kn]||(a[kn]|=64)}(a,o.index)):3&o.type&&(c=function xD(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=m?m(d,o.value||"",c):d,f.setProperty(A,c,d))}(Pr(),Gi(),c,i,o,c[ur],a,!1),gE}function F_(i,o,a,c,d){const m=d?"class":"style";hh(i,a,o.inputs[m],m,c)}function yc(i,o){return function Ec(i,o,a,c){const d=Ct(),f=Pr(),m=zc(2);f.firstUpdatePass&&function L_(i,o,a,c){const d=i.data;if(null===d[a+1]){const f=d[ps()],m=function CP(i,o){return o>=i.expandoStartIndex}(i,a);(function U_(i,o){return!!(i.flags&(o?8:16))})(f,c)&&null===o&&!m&&(o=!1),o=function pO(i,o,a,c){const d=function nb(i){const o=dr.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let f=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(a=pd(a=MC(null,i,o,a,c),o.attrs,c),f=null);else{const m=o.directiveStylingLast;if(-1===m||i[m]!==d)if(a=MC(d,i,o,a,c),null===f){let A=function gO(i,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==vc(c))return i[fd(c)]}(i,o,c);void 0!==A&&Array.isArray(A)&&(A=MC(null,i,o,A[1],c),A=pd(A,o.attrs,c),function mE(i,o,a,c){i[fd(a?o.classBindings:o.styleBindings)]=c}(i,o,c,A))}else f=function mO(i,o,a){let c;const d=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<d;f++)c=pd(c,i[f].hostAttrs,a);return pd(c,o.attrs,a)}(i,o,c)}return void 0!==f&&(c?o.residualClasses=f:o.residualStyles=f),a}(d,f,o,c),function TC(i,o,a,c,d,f){let m=f?o.classBindings:o.styleBindings,I=fd(m),A=vc(m);i[c]=a;let $,O=!1;if(Array.isArray(a)?($=a[1],(null===$||ls(a,$)>0)&&(O=!0)):$=a,d)if(0!==A){const ge=fd(i[I+1]);i[c+1]=Lh(ge,I),0!==ge&&(i[ge+1]=AC(i[ge+1],c)),i[I+1]=function EP(i,o){return 131071&i|o<<17}(i[I+1],c)}else i[c+1]=Lh(I,0),0!==I&&(i[I+1]=AC(i[I+1],c)),I=c;else i[c+1]=Lh(A,0),0===I?I=c:i[A+1]=AC(i[A+1],c),A=c;O&&(i[c+1]=lE(i[c+1])),uE(i,$,c,!0),uE(i,$,c,!1),function SC(i,o,a,c,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof o&&ls(f,o)>=0&&(a[c+1]=Kp(a[c+1]))}(o,$,i,c,f),m=Lh(I,A),f?o.classBindings=m:o.styleBindings=m}(d,f,o,a,m,c)}}(f,i,m,c),o!==pr&&Eo(d,m,o)&&function NC(i,o,a,c,d,f,m,I){if(!(3&o.type))return;const A=i.data,O=A[I+1],$=function Vh(i){return!(1&~i)}(O)?kC(A,o,a,d,vc(O),m):void 0;V_($)||(V_(f)||function dO(i){return!(2&~i)}(O)&&(f=kC(A,null,a,d,I,m)),function lk(i,o,a,c,d){if(o)d?i.addClass(a,c):i.removeClass(a,c);else{let f=-1===c.indexOf("-")?void 0:Dl.DashCase;null==d?i.removeStyle(a,c,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=Dl.Important),i.setStyle(a,c,d,f))}}(c,m,Wv(ps(),a),d,f))}(f,f.data[ps()],d,d[ur],i,d[m+1]=function OC(i,o){return null==i||""===i||("string"==typeof o?i+=o:"object"==typeof i&&(i=Yi(si(i)))),i}(o,a),c,m)}(i,o,null,!0),yc}function MC(i,o,a,c,d){let f=null;const m=a.directiveEnd;let I=a.directiveStylingLast;for(-1===I?I=a.directiveStart:I++;I<m&&(f=o[I],c=pd(c,f.hostAttrs,d),f!==i);)I++;return null!==i&&(a.directiveStylingLast=I),c}function pd(i,o,a){const c=a?1:2;let d=-1;if(null!==o)for(let f=0;f<o.length;f++){const m=o[f];"number"==typeof m?d=m:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),na(i,m,!!a||o[++f]))}return void 0===i?null:i}function kC(i,o,a,c,d,f){const m=null===o;let I;for(;d>0;){const A=i[d],O=Array.isArray(A),$=O?A[1]:A,q=null===$;let ge=a[d+1];ge===pr&&(ge=q?Yr:void 0);let Ae=q?Fd(ge,c):$===c?ge:void 0;if(O&&!V_(Ae)&&(Ae=Fd(A,c)),V_(Ae)&&(I=Ae,m))return I;const Ce=i[d+1];d=m?fd(Ce):vc(Ce)}if(null!==o){let A=f?o.residualClasses:o.residualStyles;null!=A&&(I=Fd(A,c))}return I}function V_(i){return void 0!==i}function UC(i,o,a,c){const d=Ct(),f=Pr(),m=jn+i,I=d[ur],A=f.firstCreatePass?function TO(i,o,a,c,d,f){const m=o.consts,A=Zu(o,i,2,c,wl(m,d));return tw(o,a,A,wl(m,f)),null!==A.attrs&&g_(A,A.attrs,!1),null!==A.mergedAttrs&&g_(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(m,f,d,o,a,c):f.data[m],O=SO(f,d,A,I,o,i);d[m]=O;const $=Sf(A);return nl(A,!0),Ju(I,O,A),!function ld(i){return!(32&~i.flags)}(A)&&im()&&sp(f,d,O,A),0===function qM(){return dr.lFrame.elementDepthCount}()&&Bs(O,d),function KM(){dr.lFrame.elementDepthCount++}(),$&&(Yy(f,d,A),Qy(f,A,d)),null!==c&&Um(d,A),UC}function BC(){let i=hi();YI()?xf():(i=i.parent,nl(i,!1));const o=i;(function Uu(i){return dr.skipHydrationRootTNode===i})(o)&&function YM(){dr.skipHydrationRootTNode=null}(),function c2(){dr.lFrame.elementDepthCount--}();const a=Pr();return a.firstCreatePass&&(Nf(a,i),Qg(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function oN(i){return!!(8&i.flags)}(o)&&F_(a,o,Ct(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function cb(i){return!!(16&i.flags)}(o)&&F_(a,o,Ct(),o.stylesWithoutHost,!1),BC}function kP(i,o,a,c){return UC(i,o,a,c),BC(),kP}let SO=(i,o,a,c,d,f)=>(il(!0),Yu(c,d,function IS(){return dr.lFrame.currentNamespace}()));function $C(i,o,a){const c=Ct(),d=Pr(),f=i+jn,m=d.firstCreatePass?function PO(i,o,a,c,d){const f=o.consts,m=wl(f,c),I=Zu(o,i,8,"ng-container",m);return null!==m&&g_(I,m,!0),tw(o,a,I,wl(f,d)),null!==o.queries&&o.queries.elementStart(o,I),I}(f,d,c,o,a):d.data[f];nl(m,!0);const I=au(d,c,m,i);return c[f]=I,im()&&sp(d,c,I,m),Bs(I,c),Sf(m)&&(Yy(d,c,m),Qy(d,m,c)),null!=a&&Um(c,m),$C}function yE(){let i=hi();const o=Pr();return YI()?xf():(i=i.parent,nl(i,!1)),o.firstCreatePass&&(Nf(o,i),Qg(i)&&o.queries.elementEnd(i)),yE}function EE(i,o,a){return $C(i,o,a),yE(),EE}let au=(i,o,a,c)=>(il(!0),Sm(o[ur],""));function OP(){return Ct()}const $h=void 0;var J2=["en",[["a","p"],["AM","PM"],$h],[["AM","PM"],$h,$h],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],$h,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],$h,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",$h,"{1} 'at' {0}",$h],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function NO(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let j_={};function IE(i){const o=function VP(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=OO(o);if(a)return a;const c=o.split("-")[0];if(a=OO(c),a)return a;if("en"===c)return J2;throw new en(701,!1)}function kO(i){return IE(i)[H_.PluralCase]}function OO(i){return i in j_||(j_[i]=Di.ng&&Di.ng.common&&Di.ng.common.locales&&Di.ng.common.locales[i]),j_[i]}var H_=function(i){return i[i.LocaleId=0]="LocaleId",i[i.DayPeriodsFormat=1]="DayPeriodsFormat",i[i.DayPeriodsStandalone=2]="DayPeriodsStandalone",i[i.DaysFormat=3]="DaysFormat",i[i.DaysStandalone=4]="DaysStandalone",i[i.MonthsFormat=5]="MonthsFormat",i[i.MonthsStandalone=6]="MonthsStandalone",i[i.Eras=7]="Eras",i[i.FirstDayOfWeek=8]="FirstDayOfWeek",i[i.WeekendRange=9]="WeekendRange",i[i.DateFormat=10]="DateFormat",i[i.TimeFormat=11]="TimeFormat",i[i.DateTimeFormat=12]="DateTimeFormat",i[i.NumberSymbols=13]="NumberSymbols",i[i.NumberFormats=14]="NumberFormats",i[i.CurrencyCode=15]="CurrencyCode",i[i.CurrencySymbol=16]="CurrencySymbol",i[i.CurrencyName=17]="CurrencyName",i[i.Currencies=18]="Currencies",i[i.Directionality=19]="Directionality",i[i.PluralCase=20]="PluralCase",i[i.ExtraData=21]="ExtraData",i}(H_||{});const z_="en-US";let BP=z_;let Ic=(i,o,a)=>{};function yd(i,o,a,c){const d=Ct(),f=Pr(),m=hi();return function ng(i,o,a,c,d,f,m){const I=Sf(c),O=i.firstCreatePass&&Gm(i),$=o[$i],q=zm(o);let ge=!0;if(3&c.type||m){const vt=ws(c,o),jt=m?m(vt):vt,Zt=q.length,Mt=m?Er=>m(oi(Er[c.index])):c.index;let Qn=null;if(!m&&I&&(Qn=function QO(i,o,a,c){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const m=d[f];if(m===a&&d[f+1]===c){const I=o[Fu],A=d[f+2];return I.length>A?I[A]:null}"string"==typeof m&&(f+=2)}return null}(i,o,d,c.index)),null!==Qn)(Qn.__ngLastListenerFn__||Qn).__ngNextListenerFn__=f,Qn.__ngLastListenerFn__=f,ge=!1;else{f=s1(c,o,$,f),Ic(vt,d,f);const Er=a.listen(jt,d,f);q.push(f,Er),O&&O.push(d,Mt,Zt,Zt+1)}}else f=s1(c,o,$,f);const Ae=c.outputs;let Ce;if(ge&&null!==Ae&&(Ce=Ae[d])){const vt=Ce.length;if(vt)for(let jt=0;jt<vt;jt+=2){const $r=o[Ce[jt]][Ce[jt+1]].subscribe(f),Ms=q.length;q.push(f,$r),O&&O.push(d,c.index,Ms,-(Ms+1))}}}(f,d,d[ur],m,i,o,c),yd}function o1(i,o,a,c){const d=C(null);try{return rc(6,o,a),!1!==a(c)}catch(f){return t0(i,f),!1}finally{rc(7,o,a),C(d)}}function s1(i,o,a,c){return function d(f){if(f===Function)return c;Qm(i.componentOffset>-1?tl(i.index,o):o,5);let I=o1(o,a,c,f),A=d.__ngNextListenerFn__;for(;A;)I=o1(o,a,A,f)&&I,A=A.__ngNextListenerFn__;return I}}function a1(i=1){return function tN(i){return(dr.lFrame.contextLView=function Kv(i,o){for(;i>0;)o=o[Lu],i--;return o}(i,dr.lFrame.contextLView))[$i]}(i)}function YO(i,o){let a=null;const c=function OI(i){const o=i.attrs;if(null!=o){const a=o.indexOf(5);if(!(1&a))return o[a+1]}return null}(i);for(let d=0;d<o.length;d++){const f=o[d];if("*"!==f){if(null===c?jg(i,f,!0):FI(c,f))return d}else a=d}return a}function l1(i){const o=Ct()[Zi][rs];if(!o.projection){const c=o.projection=function Vg(i,o){const a=[];for(let c=0;c<i;c++)a.push(o);return a}(i?i.length:1,null),d=c.slice();let f=o.child;for(;null!==f;){if(128!==f.type){const m=i?YO(f,i):0;null!==m&&(d[m]?d[m].projectionNext=f:c[m]=f,d[m]=f)}f=f.next}}}function c1(i,o=0,a,c,d,f){const m=Ct(),I=Pr(),A=c?i+1:null;null!==A&&xh(m,I,A,c,d,f,null,a);const O=Zu(I,jn+i,16,null,a||null);null===O.projection&&(O.projection=o),xf();const q=!m[hs]||Pf();null===m[Zi][rs].projection[O.projection]&&null!==A?function JO(i,o,a){const c=jn+a,d=o.data[c],f=i[c],m=al(f,d.tView.ssrId);ed(f,fh(i,d,void 0,{dehydratedView:m}),0,sl(d,m))}(m,I,A):q&&32&~O.flags&&function sk(i,o,a){Yb(o[ur],0,o,a,Wy(i,a,o),yi(a.parent||o[rs],a,o))}(I,m,O)}function p1(i,o,a,c){!function M0(i,o,a,c){const d=Pr();if(d.firstCreatePass){const f=hi();tu(d,new xR(o,a,c),f.index),function MR(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),!(2&~a)&&(d.staticContentQueries=!0)}return x0(d,Ct(),a)}(i,o,a,c)}function Ml(i,o,a){!function Qw(i,o,a){const c=Pr();return c.firstCreatePass&&(tu(c,new xR(i,o,a),-1),!(2&~o)&&(c.staticViewQueries=!0)),x0(c,Ct(),o)}(i,o,a)}function xE(i){const o=Ct(),a=Pr(),c=rb();ey(c+1);const d=Jw(a,c);if(i.dirty&&function a2(i){return!(4&~i[kn])}(o)===!(2&~d.metadata.flags)){if(null===d.matches)i.reset([]);else{const f=N0(o,c);i.reset(f,pm),i.notifyOnChanges()}return!0}return!1}function g1(){return function ad(i,o){return i[el].queries[o].queryList}(Ct(),rb())}function rA(i,o=""){const a=Ct(),c=Pr(),d=i+jn,f=c.firstCreatePass?Zu(c,d,1,o,null):c.data[d],m=C1(c,a,f,o,i);a[d]=m,im()&&sp(c,a,m,f),nl(f,!1)}let C1=(i,o,a,c,d)=>(il(!0),function op(i,o){return i.createText(o)}(o[ur],c));function iA(i){return oA("",i,""),iA}function oA(i,o,a){const c=Ct(),d=function $p(i,o,a,c){return Eo(i,rl(),a)?o+Xn(a)+c:pr}(c,i,o,a);return d!==pr&&eu(c,ps(),d),oA}function sA(i,o,a,c,d){const f=Ct(),m=Fh(f,i,o,a,c,d);return m!==pr&&eu(f,ps(),m),sA}function uA(i,o,a,c,d){if(i=Wn(i),Array.isArray(i))for(let f=0;f<i.length;f++)uA(i[f],o,a,c,d);else{const f=Pr(),m=Ct(),I=hi();let A=Vc(i)?i:Wn(i.provide);const O=KT(i),$=1048575&I.providerIndexes,q=I.directiveStart,ge=I.providerIndexes>>20;if(Vc(i)||!i.multi){const Ae=new om(O,d,ch),Ce=dA(A,o,d?$:$+ge,q);-1===Ce?(hm(cy(I,m),f,A),ja(f,i,o.length),o.push(A),I.directiveStart++,I.directiveEnd++,d&&(I.providerIndexes+=1048576),a.push(Ae),m.push(Ae)):(a[Ce]=Ae,m[Ce]=Ae)}else{const Ae=dA(A,o,$+ge,q),Ce=dA(A,o,$,$+ge),jt=Ce>=0&&a[Ce];if(d&&!jt||!d&&!(Ae>=0&&a[Ae])){hm(cy(I,m),f,A);const Zt=function qh(i,o,a,c,d){const f=new om(i,a,ch);return f.multi=[],f.index=o,f.componentProviders=0,x1(f,d,c&&!a),f}(d?cF:lF,a.length,d,c,O);!d&&jt&&(a[Ce].providerFactory=Zt),ja(f,i,o.length,0),o.push(A),I.directiveStart++,I.directiveEnd++,d&&(I.providerIndexes+=1048576),a.push(Zt),m.push(Zt)}else ja(f,i,Ae>-1?Ae:Ce,x1(a[d?Ce:Ae],O,!d&&c));!d&&c&&jt&&a[Ce].componentProviders++}}}function ja(i,o,a,c){const d=Vc(o),f=function OM(i){return!!i.useClass}(o);if(d||f){const A=(f?Wn(o.useClass):o).prototype.ngOnDestroy;if(A){const O=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const $=O.indexOf(a);-1===$?O.push(a,[c,A]):O[$+1].push(c,A)}else O.push(a,A)}}}function x1(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function dA(i,o,a,c){for(let d=a;d<c;d++)if(o[d]===i)return d;return-1}function lF(i,o,a,c){return OE(this.multi,[])}function cF(i,o,a,c){const d=this.multi;let f;if(this.providerFactory){const m=this.providerFactory.componentProviders,I=$u(a,a[an],this.providerFactory.index,c);f=I.slice(0,m),OE(d,f);for(let A=m;A<I.length;A++)f.push(I[A])}else f=[],OE(d,f);return f}function OE(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function M1(i,o=[]){return a=>{a.providersResolver=(c,d)=>function aF(i,o,a){const c=Pr();if(c.firstCreatePass){const d=bl(i);uA(a,c.data,c.blueprint,d,!0),uA(o,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,o)}}let uF=(()=>{var i;class o{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c)){const d=ns(0,c.type),f=d.length>0?dC([d],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c,f)}return this.cachedInjectors.get(c)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return(i=o).\u0275prov=br({token:i,providedIn:"environment",factory:()=>new i(Mn(va))}),o})();function hA(i){qs("NgStandalone"),i.getStandaloneInjector=o=>o.get(uF).getOrCreateStandaloneInjector(i)}function gA(i,o,a,c,d,f){const m=o+a;return Eo(i,m,d)?function oa(i,o,a){return i[o]=a}(i,m+1,f?c.call(f,d):c(d)):function sg(i,o){const a=i[o];return a===pr?void 0:a}(i,m+1)}function L1(i,o){const a=Pr();let c;const d=i+jn;var f;a.firstCreatePass?(c=function CF(i,o){if(o)for(let a=o.length-1;a>=0;a--){const c=o[a];if(i===c.name)return c}}(o,a.pipeRegistry),a.data[d]=c,c.onDestroy&&(null!==(f=a.destroyHooks)&&void 0!==f?f:a.destroyHooks=[]).push(d,c.onDestroy)):c=a.data[d];const m=c.factory||(c.factory=vl(c.type)),A=as(ch);try{const O=Ff(!1),$=m();return Ff(O),function xs(i,o,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=c}(a,Ct(),d,$),$}finally{as(A)}}function V1(i,o,a){const c=i+jn,d=Ct(),f=function Df(i,o){return i[o]}(d,c);return function LE(i,o){return i[an].data[o].pure}(d,c)?gA(d,function Cs(){const i=dr.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}(),o,f.transform,a,f):f.transform(a)}class Y1{constructor(o){this.full=o;const a=o.split(".");this.major=a[0],this.minor=a[1],this.patch=a.slice(2).join(".")}}let ev=(()=>{var i;class o{log(c){console.log(c)}warn(c){console.warn(c)}}return(i=o).\u0275fac=function(c){return new(c||i)},i.\u0275prov=br({token:i,factory:i.\u0275fac,providedIn:"platform"}),o})();const ux=new tr(""),dx=new tr("");let RA,qF=(()=>{var i;class o{constructor(c,d,f){this._ngZone=c,this.registry=d,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,RA||(function DA(i){RA=i}(f),f.addToWindow(d)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{no.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb()}});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,f){let m=-1;d&&d>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(I=>I.timeoutId!==m),c()},d)),this._callbacks.push({doneCb:c,timeoutId:m,updateCb:f})}whenStable(c,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,f),this._runCallbacksIfReady()}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,d,f){return[]}}return(i=o).\u0275fac=function(c){return new(c||i)(Mn(no),Mn(du),Mn(dx))},i.\u0275prov=br({token:i,factory:i.\u0275fac}),o})(),du=(()=>{var i;class o{constructor(){this._applications=new Map}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){var f,m;return null!==(f=null===(m=RA)||void 0===m?void 0:m.findTestabilityInTree(this,c,d))&&void 0!==f?f:null}}return(i=o).\u0275fac=function(c){return new(c||i)},i.\u0275prov=br({token:i,factory:i.\u0275fac,providedIn:"platform"}),o})();function PA(i){return!!i&&"function"==typeof i.then}function nv(i){return!!i&&"function"==typeof i.subscribe}const Yh=new tr("");let KE=(()=>{var i;class o{constructor(){var c;this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f}),this.appInits=null!==(c=sn(Yh,{optional:!0}))&&void 0!==c?c:[]}runInitializers(){if(this.initialized)return;const c=[];for(const f of this.appInits){const m=f();if(PA(m))c.push(m);else if(nv(m)){const I=new Promise((A,O)=>{m.subscribe({complete:A,error:O})});c.push(I)}}const d=()=>{this.done=!0,this.resolve()};Promise.all(c).then(()=>{d()}).catch(f=>{this.reject(f)}),0===c.length&&d(),this.initialized=!0}}return(i=o).\u0275fac=function(c){return new(c||i)},i.\u0275prov=br({token:i,factory:i.\u0275fac,providedIn:"root"}),o})();const XE=new tr("");function xA(i,o){return Array.isArray(o)?o.reduce(xA,i):{...i,...o}}let Fl=(()=>{var i;class o{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=sn(BS),this.afterRenderEffectManager=sn(f_),this.zonelessEnabled=sn(ll),this.externalTestViews=new Set,this.beforeRender=new Gn.B,this.afterTick=new Gn.B,this.componentTypes=[],this.components=[],this.isStable=sn(Hu).hasPendingTasks.pipe((0,Kt.T)(c=>!c)),this._injector=sn(va)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,d){const f=c instanceof dR;if(!this._injector.get(KE).done)throw!f&&Je(c),new en(405,!1);let I;I=f?c:this._injector.get(h_).resolveComponentFactory(c),this.componentTypes.push(I.componentType);const A=function KF(i){return i.isBoundToModule}(I)?void 0:this._injector.get(nu),$=I.create(gs.NULL,[],d||I.selector,A),q=$.location.nativeElement,ge=$.injector.get(ux,null);return null==ge||ge.registerApplication(q),$.onDestroy(()=>{this.detachView($.hostView),rv(this.components,$),null==ge||ge.unregisterApplication(q)}),this._loadComponent($),$}tick(){this._tick(!0)}_tick(c){if(this._runningTick)throw new en(101,!1);const d=C(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(c)}catch(f){this.internalErrorHandler(f)}finally{this._runningTick=!1,C(d),this.afterTick.next()}}detectChangesInAttachedViews(c){let d=null;this._injector.destroyed||(d=this._injector.get(g0,null,{optional:!0}));let f=0;const m=this.afterRenderEffectManager;for(;f<10;){const Ae=0===f;if(c||!Ae){this.beforeRender.next(Ae);for(let{_lView:Ce,notifyErrorHandler:vt}of this._views)mx(Ce,vt,Ae,this.zonelessEnabled)}else{var I,A,O,$,q,ge;null===(I=d)||void 0===I||null===(A=(O=I).begin)||void 0===A||A.call(O),null===($=d)||void 0===$||null===(q=(ge=$).end)||void 0===q||q.call(ge)}if(f++,m.executeInternalCallbacks(),!this.allViews.some(({_lView:Ce})=>Zg(Ce))&&(m.execute(),!this.allViews.some(({_lView:Ce})=>Zg(Ce))))break}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;rv(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const d=this._injector.get(XE,[]);[...this._bootstrapListeners,...d].forEach(f=>f(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>rv(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new en(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(i=o).\u0275fac=function(c){return new(c||i)},i.\u0275prov=br({token:i,factory:i.\u0275fac,providedIn:"root"}),o})();function rv(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}function mx(i,o,a,c){(a||Zg(i))&&qm(i,o,a&&!c?0:1)}class XF{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let _x=(()=>{var i;class o{compileModuleSync(c){return new W0(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const d=this.compileModuleSync(c),m=zs(on(c).declarations).reduce((I,A)=>{const O=te(A);return O&&I.push(new m_(O)),I},[]);return new XF(d,m)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return(i=o).\u0275fac=function(c){return new(c||i)},i.\u0275prov=br({token:i,factory:i.\u0275fac,providedIn:"root"}),o})(),yx=(()=>{var i;class o{constructor(){this.zone=sn(no),this.changeDetectionScheduler=sn(wh),this.applicationRef=sn(Fl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){var c;null===(c=this._onMicrotaskEmptySubscription)||void 0===c||c.unsubscribe()}}return(i=o).\u0275fac=function(c){return new(c||i)},i.\u0275prov=br({token:i,factory:i.\u0275fac,providedIn:"root"}),o})();function Zr({ngZoneFactory:i,ignoreChangesOutsideZone:o}){var a;return null!==(a=i)&&void 0!==a||(i=()=>new no(Mi())),[{provide:no,useFactory:i},{provide:cs,multi:!0,useFactory:()=>{const c=sn(yx,{optional:!0});return()=>c.initialize()}},{provide:cs,multi:!0,useFactory:()=>{const c=sn(kA);return()=>{c.initialize()}}},{provide:BS,useFactory:kr},!0===o?{provide:cR,useValue:!0}:[]]}function kr(){const i=sn(no),o=sn(Al);return a=>i.runOutsideAngular(()=>o.handleError(a))}function Mi(i){var o,a;return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:null!==(o=null==i?void 0:i.eventCoalescing)&&void 0!==o&&o,shouldCoalesceRunChangeDetection:null!==(a=null==i?void 0:i.runCoalescing)&&void 0!==a&&a}}let kA=(()=>{var i;class o{constructor(){this.subscription=new Jn.yU,this.initialized=!1,this.zone=sn(no),this.pendingTasks=sn(Hu)}initialize(){if(this.initialized)return;this.initialized=!0;let c=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(c=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{no.assertNotInAngularZone(),queueMicrotask(()=>{null!==c&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(c),c=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{var d;no.assertInAngularZone(),null!==(d=c)&&void 0!==d||(c=this.pendingTasks.add())}))}ngOnDestroy(){this.subscription.unsubscribe()}}return(i=o).\u0275fac=function(c){return new(c||i)},i.\u0275prov=br({token:i,factory:i.\u0275fac,providedIn:"root"}),o})(),Cr=(()=>{var i;class o{constructor(){var c;this.appRef=sn(Fl),this.taskService=sn(Hu),this.ngZone=sn(no),this.zonelessEnabled=sn(ll),this.disableScheduling=null!==(c=sn(cR,{optional:!0}))&&void 0!==c&&c,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Jn.yU,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||(this.disableScheduling=!this.zonelessEnabled&&(this.ngZone instanceof kw||!this.zoneIsDefined))}notify(c){if(!this.zonelessEnabled&&5===c)return;switch(c){case 3:case 2:case 0:case 4:case 5:case 1:this.shouldRefreshViews=!0}if(!this.shouldScheduleTick())return;const d=this.useMicrotaskScheduler?xw:mR;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=d(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=d(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&no.isInAngularZone())}tick(c){if(this.runningTick||this.appRef.destroyed)return;const d=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(c)},void 0,this.schedulerTickApplyArgs)}catch(f){throw this.taskService.remove(d),f}finally{this.cleanup()}this.useMicrotaskScheduler=!0,xw(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(d)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){var c;if(this.shouldRefreshViews=!1,this.runningTick=!1,null===(c=this.cancelScheduledCallback)||void 0===c||c.call(this),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const d=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(d)}}}return(i=o).\u0275fac=function(c){return new(c||i)},i.\u0275prov=br({token:i,factory:i.\u0275fac,providedIn:"root"}),o})();const fg=new tr("",{providedIn:"root",factory:()=>sn(fg,Dr.Optional|Dr.SkipSelf)||function YF(){return typeof $localize<"u"&&$localize.locale||z_}()}),cl=new tr("",{providedIn:"root",factory:()=>"USD"}),YE=new tr("");let wd=(()=>{var i;class o{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const f=function ER(i="zone.js",o){return"noop"===i?new kw:"zone.js"===i?new no(o):i}(null==d?void 0:d.ngZone,Mi({eventCoalescing:null==d?void 0:d.ngZoneEventCoalescing,runCoalescing:null==d?void 0:d.ngZoneRunCoalescing}));return f.run(()=>{const I=function Qk(i,o,a){return new b_(i,o,a)}(c.moduleType,this.injector,[...Zr({ngZoneFactory:()=>f,ignoreChangesOutsideZone:null==d?void 0:d.ignoreChangesOutsideZone}),{provide:wh,useExisting:Cr}]),A=I.injector.get(Al,null);return f.runOutsideAngular(()=>{const O=f.onError.subscribe({next:$=>{A.handleError($)}});I.onDestroy(()=>{rv(this._modules,I),O.unsubscribe()})}),function gx(i,o,a){try{const c=a();return PA(c)?c.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>i.handleError(c)),c}}(A,f,()=>{const O=I.injector.get(KE);return O.runInitializers(),O.donePromise.then(()=>(function bE(i){"string"==typeof i&&(BP=i.toLowerCase().replace(/_/g,"-"))}(I.injector.get(fg,z_)||z_),this._moduleDoBootstrap(I),I))})})}bootstrapModule(c,d=[]){const f=xA({},d);return function QE(i,o,a){const c=new W0(a);return Promise.resolve(c)}(0,0,c).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(c){const d=c.injector.get(Fl);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!c.instance.ngDoBootstrap)throw new en(-403,!1);c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new en(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const c=this._injector.get(YE,null);c&&(c.forEach(d=>d()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(i=o).\u0275fac=function(c){return new(c||i)(Mn(gs))},i.\u0275prov=br({token:i,factory:i.\u0275fac,providedIn:"platform"}),o})(),wc=null;const pg=new tr("");function FA(i,o,a=[]){const c=`Platform: ${o}`,d=new tr(c);return(f=[])=>{let m=LA();if(!m||m.injector.get(pg,!1)){const I=[...a,...f,{provide:d,useValue:!0}];i?i(I):function ZF(i){if(wc&&!wc.get(pg,!1))throw new en(400,!1);(function hx(){!function Te(i){Sn=i}(()=>{throw new en(600,!1)})})(),wc=i;const o=i.get(wd);(function Or(i){const o=i.get(Ay,null);null==o||o.forEach(a=>a())})(i)}(function Ix(i=[],o){return gs.create({name:o,providers:[{provide:Wg,useValue:"platform"},{provide:YE,useValue:new Set([()=>wc=null])},...i]})}(I,c))}return function eL(i){const o=LA();if(!o)throw new en(401,!1);return o}()}}function LA(){var i,o;return null!==(i=null===(o=wc)||void 0===o?void 0:o.get(wd))&&void 0!==i?i:null}let bx=(()=>{class o{}return o.__NG_ELEMENT_ID__=$A,o})();function $A(i){return function jA(i,o,a){if(Wd(i)&&!a){const c=tl(i.index,o);return new fp(c,c)}return 175&i.type?new fp(o[Zi],o):null}(hi(),Ct(),!(16&~i))}class Ax{constructor(){}supports(o){return xp(o)}create(o){return new WA(o)}}const Co=(i,o)=>o;class WA{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Co}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,d=0,f=null;for(;a||c;){const m=!c||a&&a.currentIndex<tf(c,d,f)?a:c,I=tf(m,d,f),A=m.currentIndex;if(m===c)d--,c=c._nextRemoved;else if(a=a._next,null==m.previousIndex)d++;else{f||(f=[]);const O=I-d,$=A-d;if(O!=$){for(let ge=0;ge<O;ge++){const Ae=ge<f.length?f[ge]:f[ge]=0,Ce=Ae+ge;$<=Ce&&Ce<O&&(f[ge]=Ae+1)}f[m.previousIndex]=$-O}}I!==A&&o(m,I,A)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!xp(o))throw new en(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,m,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)f=o[I],m=this._trackByFn(I,f),null!==a&&Object.is(a.trackById,m)?(c&&(a=this._verifyReinsertion(a,f,m,I)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,m,I),c=!0),a=a._next}else d=0,function fC(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,I=>{m=this._trackByFn(d,I),null!==a&&Object.is(a.trackById,m)?(c&&(a=this._verifyReinsertion(a,I,m,d)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,m,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,f,d)):o=this._addAfter(new lL(a,c),f,d),o}_verifyReinsertion(o,a,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new KA),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new KA),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class lL{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class qA{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class KA{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new qA,this.map.set(a,c)),c.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function tf(i,o,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+o+d}class mg{constructor(){}supports(o){return o instanceof Map||w_(o)}create(){return new sv}}class sv{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||w_(o)))throw new en(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const f=d._prev,m=d._next;return f&&(f._next=m),m&&(m._prev=f),d._next=null,d._prev=null,d}const c=new cL(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class cL{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ZE(){return new nf([new Ax])}let nf=(()=>{var i;class o{constructor(c){this.factories=c}static create(c,d){if(null!=d){const f=d.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:d=>o.create(c,d||ZE()),deps:[[o,new Du,new _a]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(null!=d)return d;throw new en(901,!1)}}return(i=o).\u0275prov=br({token:i,providedIn:"root",factory:ZE}),o})();function av(){return new XA([new mg])}let XA=(()=>{var i;class o{constructor(c){this.factories=c}static create(c,d){if(d){const f=d.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:d=>o.create(c,d||av()),deps:[[o,new Du,new _a]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(d)return d;throw new en(901,!1)}}return(i=o).\u0275prov=br({token:i,providedIn:"root",factory:av}),o})();const QA=FA(null,"core",[]);let hL=(()=>{var i;class o{constructor(c){}}return(i=o).\u0275fac=function(c){return new(c||i)(Mn(Fl))},i.\u0275mod=P({type:i}),i.\u0275inj=Ka({}),o})();const $x=new tr("");function Kx(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function Yx(i,o){qs("NgSignals");const a=function Ne(i){const o=Object.create(Gt);o.computation=i;const a=()=>{if(Oe(o),ye(o),o.value===Ut)throw o.error;return o.value};return a[X]=o,a}(i);return null!=o&&o.equal&&(a[X].equal=o.equal),a}function Jx(i){const o=C(null);try{return i()}finally{C(o)}}function FL(i,o){const a=te(i),c=o.elementInjector||Ya();return new m_(a).create(c,o.projectableNodes,o.hostElement,o.environmentInjector)}function Zx(i){const o=te(i);if(!o)return null;const a=new m_(o);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},4341:(hn,rt,W)=>{"use strict";W.d(rt,{YN:()=>hf,zX:()=>ss,VZ:()=>Gl,cz:()=>at,kq:()=>ot,vO:()=>un});var _=W(3953),ae=(W(177),W(6648)),xe=W(1985),X=W(3073),C=W(8750),pe=W(3794),ue=W(4360),Ke=W(6450),Qe=W(8496);W(1413);var Oe=W(6354);const ot=new _.nKC("");function Xe(B){return null==B||("string"==typeof B||Array.isArray(B))&&0===B.length}const at=new _.nKC("");function Y(B){return null}function oe(B){return null!=B}function Ie(B){return(0,_.jNT)(B)?(0,ae.H)(B):B}function We(B){let M={};return B.forEach(K=>{M=null!=K?{...M,...K}:M}),0===Object.keys(M).length?null:M}function Ye(B,M){return M.map(K=>K(B))}function qt(B){return B.map(M=>function je(B){return!B.validate}(M)?M:K=>M.validate(K))}function fn(B){return null!=B?function On(B){if(!B)return null;const M=B.filter(oe);return 0==M.length?null:function(K){return We(Ye(K,M))}}(qt(B)):null}function gn(B){return null!=B?function Fn(B){if(!B)return null;const M=B.filter(oe);return 0==M.length?null:function(K){return function ye(...B){const M=(0,pe.ms)(B),{args:K,keys:F}=(0,X.D)(B),de=new xe.c(Yt=>{const{length:Vn}=K;if(!Vn)return void Yt.complete();const Ui=new Array(Vn);let Go=Vn,br=Vn;for(let qa=0;qa<Vn;qa++){let Ka=!1;(0,C.Tg)(K[qa]).subscribe((0,ue._)(Yt,gl=>{Ka||(Ka=!0,br--),Ui[qa]=gl},()=>Go--,void 0,()=>{(!Go||!Ka)&&(br||Yt.next(F?(0,Qe.e)(F,Ui):Ui),Yt.complete())}))}});return M?de.pipe((0,Ke.I)(M)):de}(Ye(K,M).map(Ie)).pipe((0,Oe.T)(We))}}(qt(B)):null}class Tt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(M){this._rawValidators=M||[],this._composedValidatorFn=fn(this._rawValidators)}_setAsyncValidators(M){this._rawAsyncValidators=M||[],this._composedAsyncValidatorFn=gn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(M){this._onDestroyCallbacks.push(M)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(M=>M()),this._onDestroyCallbacks=[]}reset(M=void 0){this.control&&this.control.reset(M)}hasError(M,K){return!!this.control&&this.control.hasError(M,K)}getError(M,K){return this.control?this.control.getError(M,K):null}}class un extends Tt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}const ti=new _.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>Oi}),Oi="always";function pa(B){return"number"==typeof B?B:parseFloat(B)}Promise.resolve(),Promise.resolve();let Hr=(()=>{var B;class M{constructor(){this._validator=Y}ngOnChanges(F){if(this.inputName in F){const de=this.normalizeInput(F[this.inputName].currentValue);this._enabled=this.enabled(de),this._validator=this._enabled?this.createValidator(de):Y,this._onChange&&this._onChange()}}validate(F){return this._validator(F)}registerOnValidatorChange(F){this._onChange=F}enabled(F){return null!=F}}return(B=M).\u0275fac=function(F){return new(F||B)},B.\u0275dir=_.FsC({type:B,features:[_.OA$]}),M})();const Ga={provide:at,useExisting:(0,_.Rfq)(()=>ss),multi:!0};let ss=(()=>{var B;class M extends Hr{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=F=>pa(F),this.createValidator=F=>function Ut(B){return M=>{if(Xe(M.value)||Xe(B))return null;const K=parseFloat(M.value);return!isNaN(K)&&K>B?{max:{max:B,actual:M.value}}:null}}(F)}}return(B=M).\u0275fac=(()=>{let K;return function(de){return(K||(K=_.xGo(B)))(de||B)}})(),B.\u0275dir=_.FsC({type:B,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(F,de){2&F&&_.BMQ("max",de._enabled?de.max:null)},inputs:{max:"max"},features:[_.Jv_([Ga]),_.Vt3]}),M})();const Wa={provide:at,useExisting:(0,_.Rfq)(()=>Gl),multi:!0};let Gl=(()=>{var B;class M extends Hr{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=F=>pa(F),this.createValidator=F=>function Pt(B){return M=>{if(Xe(M.value)||Xe(B))return null;const K=parseFloat(M.value);return!isNaN(K)&&K<B?{min:{min:B,actual:M.value}}:null}}(F)}}return(B=M).\u0275fac=(()=>{let K;return function(de){return(K||(K=_.xGo(B)))(de||B)}})(),B.\u0275dir=_.FsC({type:B,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(F,de){2&F&&_.BMQ("min",de._enabled?de.min:null)},inputs:{min:"min"},features:[_.Jv_([Wa]),_.Vt3]}),M})(),es=(()=>{var B;class M{}return(B=M).\u0275fac=function(F){return new(F||B)},B.\u0275mod=_.$C({type:B}),B.\u0275inj=_.G2t({}),M})(),hf=(()=>{var B;class M{static withConfig(F){var de;return{ngModule:M,providers:[{provide:ti,useValue:null!==(de=F.callSetDisabledState)&&void 0!==de?de:Oi}]}}}return(B=M).\u0275fac=function(F){return new(F||B)},B.\u0275mod=_.$C({type:B}),B.\u0275inj=_.G2t({imports:[es]}),M})()},345:(hn,rt,W)=>{"use strict";W.d(rt,{Bb:()=>Jn,hE:()=>$t,sG:()=>gn});var _=W(177),g=W(3953);class ae extends _.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class xe extends ae{static makeCurrent(){(0,_.ZD)(new xe)}onAndCancel($e,bt,ke){return $e.addEventListener(bt,ke),()=>{$e.removeEventListener(bt,ke)}}dispatchEvent($e,bt){$e.dispatchEvent(bt)}remove($e){$e.parentNode&&$e.parentNode.removeChild($e)}createElement($e,bt){return(bt=bt||this.getDefaultDocument()).createElement($e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode($e){return $e.nodeType===Node.ELEMENT_NODE}isShadowRoot($e){return $e instanceof DocumentFragment}getGlobalEventTarget($e,bt){return"window"===bt?window:"document"===bt?$e:"body"===bt?$e.body:null}getBaseHref($e){const bt=function C(){return X=X||document.querySelector("base"),X?X.getAttribute("href"):null}();return null==bt?null:function pe(gt){return new URL(gt,document.baseURI).pathname}(bt)}resetBaseElement(){X=null}getUserAgent(){return window.navigator.userAgent}getCookie($e){return(0,_._b)(document.cookie,$e)}}let X=null,Ke=(()=>{var gt;class $e{build(){return new XMLHttpRequest}}return(gt=$e).\u0275fac=function(ke){return new(ke||gt)},gt.\u0275prov=g.jDH({token:gt,factory:gt.\u0275fac}),$e})();const Qe=new g.nKC("");let ye=(()=>{var gt;class $e{constructor(ke,yt){this._zone=yt,this._eventNameToPlugin=new Map,ke.forEach(zt=>{zt.manager=this}),this._plugins=ke.slice().reverse()}addEventListener(ke,yt,zt){return this._findPluginFor(yt).addEventListener(ke,yt,zt)}getZone(){return this._zone}_findPluginFor(ke){let yt=this._eventNameToPlugin.get(ke);if(yt)return yt;if(yt=this._plugins.find(En=>En.supports(ke)),!yt)throw new g.wOt(5101,!1);return this._eventNameToPlugin.set(ke,yt),yt}}return(gt=$e).\u0275fac=function(ke){return new(ke||gt)(g.KVO(Qe),g.KVO(g.SKi))},gt.\u0275prov=g.jDH({token:gt,factory:gt.\u0275fac}),$e})();class Ve{constructor($e){this._doc=$e}}const Oe="ng-app-id";let Le=(()=>{var gt;class $e{constructor(ke,yt,zt,En={}){this.doc=ke,this.appId=yt,this.nonce=zt,this.platformId=En,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,_.Vy)(En),this.resetHostNodes()}addStyles(ke){for(const yt of ke)1===this.changeUsageCount(yt,1)&&this.onStyleAdded(yt)}removeStyles(ke){for(const yt of ke)this.changeUsageCount(yt,-1)<=0&&this.onStyleRemoved(yt)}ngOnDestroy(){const ke=this.styleNodesInDOM;ke&&(ke.forEach(yt=>yt.remove()),ke.clear());for(const yt of this.getAllStyles())this.onStyleRemoved(yt);this.resetHostNodes()}addHost(ke){this.hostNodes.add(ke);for(const yt of this.getAllStyles())this.addStyleToHost(ke,yt)}removeHost(ke){this.hostNodes.delete(ke)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(ke){for(const yt of this.hostNodes)this.addStyleToHost(yt,ke)}onStyleRemoved(ke){var yt;const zt=this.styleRef;null===(yt=zt.get(ke))||void 0===yt||null===(yt=yt.elements)||void 0===yt||yt.forEach(En=>En.remove()),zt.delete(ke)}collectServerRenderedStyles(){var ke;const yt=null===(ke=this.doc.head)||void 0===ke?void 0:ke.querySelectorAll(`style[${Oe}="${this.appId}"]`);if(null!=yt&&yt.length){const zt=new Map;return yt.forEach(En=>{null!=En.textContent&&zt.set(En.textContent,En)}),zt}return null}changeUsageCount(ke,yt){const zt=this.styleRef;if(zt.has(ke)){const En=zt.get(ke);return En.usage+=yt,En.usage}return zt.set(ke,{usage:yt,elements:[]}),yt}getStyleElement(ke,yt){const zt=this.styleNodesInDOM,En=null==zt?void 0:zt.get(yt);if((null==En?void 0:En.parentNode)===ke)return zt.delete(yt),En.removeAttribute(Oe),En;{const Ln=this.doc.createElement("style");return this.nonce&&Ln.setAttribute("nonce",this.nonce),Ln.textContent=yt,this.platformIsServer&&Ln.setAttribute(Oe,this.appId),ke.appendChild(Ln),Ln}}addStyleToHost(ke,yt){var zt;const En=this.getStyleElement(ke,yt),Ln=this.styleRef,vr=null===(zt=Ln.get(yt))||void 0===zt?void 0:zt.elements;vr?vr.push(En):Ln.set(yt,{elements:[En],usage:1})}resetHostNodes(){const ke=this.hostNodes;ke.clear(),ke.add(this.doc.head)}}return(gt=$e).\u0275fac=function(ke){return new(ke||gt)(g.KVO(_.qQ),g.KVO(g.sZ2),g.KVO(g.BIS,8),g.KVO(g.Agw))},gt.\u0275prov=g.jDH({token:gt,factory:gt.\u0275fac}),$e})();const Ze={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ot=/%COMP%/g,ut=new g.nKC("",{providedIn:"root",factory:()=>!0});function _t(gt,$e){return $e.map(bt=>bt.replace(ot,gt))}let at=(()=>{var gt;class $e{constructor(ke,yt,zt,En,Ln,vr,Xt,er=null){this.eventManager=ke,this.sharedStylesHost=yt,this.appId=zt,this.removeStylesOnCompDestroy=En,this.doc=Ln,this.platformId=vr,this.ngZone=Xt,this.nonce=er,this.rendererByCompId=new Map,this.platformIsServer=(0,_.Vy)(vr),this.defaultRenderer=new It(ke,Ln,Xt,this.platformIsServer)}createRenderer(ke,yt){if(!ke||!yt)return this.defaultRenderer;this.platformIsServer&&yt.encapsulation===g.gXe.ShadowDom&&(yt={...yt,encapsulation:g.gXe.Emulated});const zt=this.getOrCreateRenderer(ke,yt);return zt instanceof Wt?zt.applyToHost(ke):zt instanceof Gt&&zt.applyStyles(),zt}getOrCreateRenderer(ke,yt){const zt=this.rendererByCompId;let En=zt.get(yt.id);if(!En){const Ln=this.doc,vr=this.ngZone,Xt=this.eventManager,er=this.sharedStylesHost,Sr=this.removeStylesOnCompDestroy,pi=this.platformIsServer;switch(yt.encapsulation){case g.gXe.Emulated:En=new Wt(Xt,er,yt,this.appId,Sr,Ln,vr,pi);break;case g.gXe.ShadowDom:return new Ut(Xt,er,ke,yt,Ln,vr,this.nonce,pi);default:En=new Gt(Xt,er,yt,Sr,Ln,vr,pi)}zt.set(yt.id,En)}return En}ngOnDestroy(){this.rendererByCompId.clear()}}return(gt=$e).\u0275fac=function(ke){return new(ke||gt)(g.KVO(ye),g.KVO(Le),g.KVO(g.sZ2),g.KVO(ut),g.KVO(_.qQ),g.KVO(g.Agw),g.KVO(g.SKi),g.KVO(g.BIS))},gt.\u0275prov=g.jDH({token:gt,factory:gt.\u0275fac}),$e})();class It{constructor($e,bt,ke,yt){this.eventManager=$e,this.doc=bt,this.ngZone=ke,this.platformIsServer=yt,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement($e,bt){return bt?this.doc.createElementNS(Ze[bt]||bt,$e):this.doc.createElement($e)}createComment($e){return this.doc.createComment($e)}createText($e){return this.doc.createTextNode($e)}appendChild($e,bt){(Pt($e)?$e.content:$e).appendChild(bt)}insertBefore($e,bt,ke){$e&&(Pt($e)?$e.content:$e).insertBefore(bt,ke)}removeChild($e,bt){$e&&$e.removeChild(bt)}selectRootElement($e,bt){let ke="string"==typeof $e?this.doc.querySelector($e):$e;if(!ke)throw new g.wOt(-5104,!1);return bt||(ke.textContent=""),ke}parentNode($e){return $e.parentNode}nextSibling($e){return $e.nextSibling}setAttribute($e,bt,ke,yt){if(yt){bt=yt+":"+bt;const zt=Ze[yt];zt?$e.setAttributeNS(zt,bt,ke):$e.setAttribute(bt,ke)}else $e.setAttribute(bt,ke)}removeAttribute($e,bt,ke){if(ke){const yt=Ze[ke];yt?$e.removeAttributeNS(yt,bt):$e.removeAttribute(`${ke}:${bt}`)}else $e.removeAttribute(bt)}addClass($e,bt){$e.classList.add(bt)}removeClass($e,bt){$e.classList.remove(bt)}setStyle($e,bt,ke,yt){yt&(g.czy.DashCase|g.czy.Important)?$e.style.setProperty(bt,ke,yt&g.czy.Important?"important":""):$e.style[bt]=ke}removeStyle($e,bt,ke){ke&g.czy.DashCase?$e.style.removeProperty(bt):$e.style[bt]=""}setProperty($e,bt,ke){null!=$e&&($e[bt]=ke)}setValue($e,bt){$e.nodeValue=bt}listen($e,bt,ke){if("string"==typeof $e&&!($e=(0,_.QT)().getGlobalEventTarget(this.doc,$e)))throw new Error(`Unsupported event target ${$e} for event ${bt}`);return this.eventManager.addEventListener($e,bt,this.decoratePreventDefault(ke))}decoratePreventDefault($e){return bt=>{if("__ngUnwrap__"===bt)return $e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>$e(bt)):$e(bt))&&bt.preventDefault()}}}function Pt(gt){return"TEMPLATE"===gt.tagName&&void 0!==gt.content}class Ut extends It{constructor($e,bt,ke,yt,zt,En,Ln,vr){super($e,zt,En,vr),this.sharedStylesHost=bt,this.hostEl=ke,this.shadowRoot=ke.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Xt=_t(yt.id,yt.styles);for(const er of Xt){const Sr=document.createElement("style");Ln&&Sr.setAttribute("nonce",Ln),Sr.textContent=er,this.shadowRoot.appendChild(Sr)}}nodeOrShadowRoot($e){return $e===this.hostEl?this.shadowRoot:$e}appendChild($e,bt){return super.appendChild(this.nodeOrShadowRoot($e),bt)}insertBefore($e,bt,ke){return super.insertBefore(this.nodeOrShadowRoot($e),bt,ke)}removeChild($e,bt){return super.removeChild(this.nodeOrShadowRoot($e),bt)}parentNode($e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot($e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Gt extends It{constructor($e,bt,ke,yt,zt,En,Ln,vr){super($e,zt,En,Ln),this.sharedStylesHost=bt,this.removeStylesOnCompDestroy=yt,this.styles=vr?_t(vr,ke.styles):ke.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Wt extends Gt{constructor($e,bt,ke,yt,zt,En,Ln,vr){const Xt=yt+"-"+ke.id;super($e,bt,ke,zt,En,Ln,vr,Xt),this.contentAttr=function Re(gt){return"_ngcontent-%COMP%".replace(ot,gt)}(Xt),this.hostAttr=function Xe(gt){return"_nghost-%COMP%".replace(ot,gt)}(Xt)}applyToHost($e){this.applyStyles(),this.setAttribute($e,this.hostAttr,"")}createElement($e,bt){const ke=super.createElement($e,bt);return super.setAttribute(ke,this.contentAttr,""),ke}}let Sn=(()=>{var gt;class $e extends Ve{constructor(ke){super(ke)}supports(ke){return!0}addEventListener(ke,yt,zt){return ke.addEventListener(yt,zt,!1),()=>this.removeEventListener(ke,yt,zt)}removeEventListener(ke,yt,zt){return ke.removeEventListener(yt,zt)}}return(gt=$e).\u0275fac=function(ke){return new(ke||gt)(g.KVO(_.qQ))},gt.\u0275prov=g.jDH({token:gt,factory:gt.\u0275fac}),$e})(),Dt=(()=>{var gt;class $e extends Ve{constructor(ke){super(ke),this.delegate=(0,g.WQX)(g.zAP,{optional:!0})}supports(ke){return!!this.delegate&&this.delegate.supports(ke)}addEventListener(ke,yt,zt){return this.delegate.addEventListener(ke,yt,zt)}removeEventListener(ke,yt,zt){return this.delegate.removeEventListener(ke,yt,zt)}}return(gt=$e).\u0275fac=function(ke){return new(ke||gt)(g.KVO(_.qQ))},gt.\u0275prov=g.jDH({token:gt,factory:gt.\u0275fac}),$e})();const Te=["alt","control","meta","shift"],Z={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Y={alt:gt=>gt.altKey,control:gt=>gt.ctrlKey,meta:gt=>gt.metaKey,shift:gt=>gt.shiftKey};let oe=(()=>{var gt;class $e extends Ve{constructor(ke){super(ke)}supports(ke){return null!=$e.parseEventName(ke)}addEventListener(ke,yt,zt){const En=$e.parseEventName(yt),Ln=$e.eventCallback(En.fullKey,zt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,_.QT)().onAndCancel(ke,En.domEventName,Ln))}static parseEventName(ke){const yt=ke.toLowerCase().split("."),zt=yt.shift();if(0===yt.length||"keydown"!==zt&&"keyup"!==zt)return null;const En=$e._normalizeKey(yt.pop());let Ln="",vr=yt.indexOf("code");if(vr>-1&&(yt.splice(vr,1),Ln="code."),Te.forEach(er=>{const Sr=yt.indexOf(er);Sr>-1&&(yt.splice(Sr,1),Ln+=er+".")}),Ln+=En,0!=yt.length||0===En.length)return null;const Xt={};return Xt.domEventName=zt,Xt.fullKey=Ln,Xt}static matchEventFullKeyCode(ke,yt){let zt=Z[ke.key]||ke.key,En="";return yt.indexOf("code.")>-1&&(zt=ke.code,En="code."),!(null==zt||!zt)&&(zt=zt.toLowerCase()," "===zt?zt="space":"."===zt&&(zt="dot"),Te.forEach(Ln=>{Ln!==zt&&(0,Y[Ln])(ke)&&(En+=Ln+".")}),En+=zt,En===yt)}static eventCallback(ke,yt,zt){return En=>{$e.matchEventFullKeyCode(En,ke)&&zt.runGuarded(()=>yt(En))}}static _normalizeKey(ke){return"esc"===ke?"escape":ke}}return(gt=$e).\u0275fac=function(ke){return new(ke||gt)(g.KVO(_.qQ))},gt.\u0275prov=g.jDH({token:gt,factory:gt.\u0275fac}),$e})();const gn=(0,g.oH4)(g.fpN,"browser",[{provide:g.Agw,useValue:_.AJ},{provide:g.PLl,useValue:function qt(){xe.makeCurrent()},multi:!0},{provide:_.qQ,useFactory:function fn(){return(0,g.TL$)(document),document},deps:[]}]),_r=new g.nKC(""),Hn=[{provide:g.e01,useClass:class ue{addToWindow($e){g.JZv.getAngularTestability=(ke,yt=!0)=>{const zt=$e.findTestabilityInTree(ke,yt);if(null==zt)throw new g.wOt(5103,!1);return zt},g.JZv.getAllAngularTestabilities=()=>$e.getAllTestabilities(),g.JZv.getAllAngularRootElements=()=>$e.getAllRootElements(),g.JZv.frameworkStabilizers||(g.JZv.frameworkStabilizers=[]),g.JZv.frameworkStabilizers.push(ke=>{const yt=g.JZv.getAllAngularTestabilities();let zt=yt.length;const En=function(){zt--,0==zt&&ke()};yt.forEach(Ln=>{Ln.whenStable(En)})})}findTestabilityInTree($e,bt,ke){if(null==bt)return null;const yt=$e.getTestability(bt);return null!=yt?yt:ke?(0,_.QT)().isShadowRoot(bt)?this.findTestabilityInTree($e,bt.host,!0):this.findTestabilityInTree($e,bt.parentElement,!0):null}},deps:[]},{provide:g.WHO,useClass:g.NYb,deps:[g.SKi,g.giA,g.e01]},{provide:g.NYb,useClass:g.NYb,deps:[g.SKi,g.giA,g.e01]}],Gn=[{provide:g.H8p,useValue:"root"},{provide:g.zcH,useFactory:function On(){return new g.zcH},deps:[]},{provide:Qe,useClass:Sn,multi:!0,deps:[_.qQ,g.SKi,g.Agw]},{provide:Qe,useClass:oe,multi:!0,deps:[_.qQ]},{provide:Qe,useClass:Dt,multi:!0},at,Le,ye,{provide:g._9s,useExisting:at},{provide:_.N0,useClass:Ke,deps:[]},[]];let Jn=(()=>{var gt;class $e{constructor(ke){}static withServerTransition(ke){return{ngModule:$e,providers:[{provide:g.sZ2,useValue:ke.appId}]}}}return(gt=$e).\u0275fac=function(ke){return new(ke||gt)(g.KVO(_r,12))},gt.\u0275mod=g.$C({type:gt}),gt.\u0275inj=g.G2t({providers:[...Gn,...Hn],imports:[_.MD,g.Hbi]}),$e})(),$t=(()=>{var gt;class $e{constructor(ke){this._doc=ke}getTitle(){return this._doc.title}setTitle(ke){this._doc.title=ke||""}}return(gt=$e).\u0275fac=function(ke){return new(ke||gt)(g.KVO(_.qQ))},gt.\u0275prov=g.jDH({token:gt,factory:gt.\u0275fac,providedIn:"root"}),$e})()},70:(hn,rt,W)=>{"use strict";W.d(rt,{nX:()=>Ar,Zp:()=>Fe,Z:()=>Ro,Xk:()=>Kt,Kp:()=>Vg,b:()=>Hi,Ix:()=>Na,Wk:()=>zi,iI:()=>$g,Sd:()=>wi});var _=W(3953),g=W(1985),ae=W(8071),X=W(6648),C=W(7673),pe=W(4412),ue=W(4572);const Qe=(0,W(1853).L)(b=>function(){b(this),this.name="EmptyError",this.message="no elements in sequence"});var ye=W(1397),Ve=W(3669);function Oe(b=1/0){return(0,ye.Z)(Ve.D,b)}var Ze=W(3794);function ot(...b){return function Le(){return Oe(1)}()((0,X.H)(b,(0,Ze.lI)(b)))}var tt=W(8750);function nt(b){return new g.c(S=>{(0,tt.Tg)(b()).subscribe(S)})}var At=W(1203);function ct(b,S){const P=(0,ae.T)(b)?b:()=>b,T=k=>k.error(P());return new g.c(S?k=>S.schedule(T,0,k):T)}const ut=new g.c(b=>b.complete());var _t=W(8359),at=W(9974),It=W(4360);function Ne(){return(0,at.N)((b,S)=>{let P=null;b._refCount++;const T=(0,It._)(S,void 0,void 0,void 0,()=>{if(!b||b._refCount<=0||0<--b._refCount)return void(P=null);const k=b._connection,ee=P;P=null,k&&(!ee||k===ee)&&k.unsubscribe(),S.unsubscribe()});b.subscribe(T),T.closed||(P=b.connect())})}class ft extends g.c{constructor(S,P){super(),this.source=S,this.subjectFactory=P,this._subject=null,this._refCount=0,this._connection=null,(0,at.S)(S)&&(this.lift=S.lift)}_subscribe(S){return this.getSubject().subscribe(S)}getSubject(){const S=this._subject;return(!S||S.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:S}=this;this._subject=this._connection=null,null==S||S.unsubscribe()}connect(){let S=this._connection;if(!S){S=this._connection=new _t.yU;const P=this.getSubject();S.add(this.source.subscribe((0,It._)(P,void 0,()=>{this._teardown(),P.complete()},T=>{this._teardown(),P.error(T)},()=>this._teardown()))),S.closed&&(this._connection=null,S=_t.yU.EMPTY)}return S}refCount(){return Ne()(this)}}var Pt=W(1413),Ut=W(177),Gt=W(6354),Wt=W(5558);function Sn(b){return b<=0?()=>ut:(0,at.N)((S,P)=>{let T=0;S.subscribe((0,It._)(P,k=>{++T<=b&&(P.next(k),b<=T&&P.complete())}))})}var Te=W(5964);function Z(b){return(0,at.N)((S,P)=>{let T=!1;S.subscribe((0,It._)(P,k=>{T=!0,P.next(k)},()=>{T||P.next(b),P.complete()}))})}function Y(b=oe){return(0,at.N)((S,P)=>{let T=!1;S.subscribe((0,It._)(P,k=>{T=!0,P.next(k)},()=>T?P.complete():P.error(b())))})}function oe(){return new Qe}function Ie(b,S){const P=arguments.length>=2;return T=>T.pipe(b?(0,Te.p)((k,ee)=>b(k,ee,T)):Ve.D,Sn(1),P?Z(S):Y(()=>new Qe))}function We(b,S){return(0,ae.T)(S)?(0,ye.Z)(b,S,1):(0,ye.Z)(b,1)}function Ye(b,S,P){const T=(0,ae.T)(b)||S||P?{next:b,error:S,complete:P}:b;return T?(0,at.N)((k,ee)=>{var te;null===(te=T.subscribe)||void 0===te||te.call(T);let Ue=!0;k.subscribe((0,It._)(ee,Et=>{var Je;null===(Je=T.next)||void 0===Je||Je.call(T,Et),ee.next(Et)},()=>{var Et;Ue=!1,null===(Et=T.complete)||void 0===Et||Et.call(T),ee.complete()},Et=>{var Je;Ue=!1,null===(Je=T.error)||void 0===Je||Je.call(T,Et),ee.error(Et)},()=>{var Et,Je;Ue&&(null===(Et=T.unsubscribe)||void 0===Et||Et.call(T)),null===(Je=T.finalize)||void 0===Je||Je.call(T)}))}):Ve.D}function je(b){return(0,at.N)((S,P)=>{let ee,T=null,k=!1;T=S.subscribe((0,It._)(P,void 0,void 0,te=>{ee=(0,tt.Tg)(b(te,je(b)(S))),T?(T.unsubscribe(),T=null,ee.subscribe(P)):k=!0})),k&&(T.unsubscribe(),T=null,ee.subscribe(P))})}function fn(b){return b<=0?()=>ut:(0,at.N)((S,P)=>{let T=[];S.subscribe((0,It._)(P,k=>{T.push(k),b<T.length&&T.shift()},()=>{for(const k of T)P.next(k);P.complete()},void 0,()=>{T=null}))})}function _r(b){return(0,at.N)((S,P)=>{try{S.subscribe(P)}finally{P.add(b)}})}var Hn=W(5343),Jn=W(345);const Kt="primary",zn=Symbol("RouteTitle");class $t{constructor(S){this.params=S||{}}has(S){return Object.prototype.hasOwnProperty.call(this.params,S)}get(S){if(this.has(S)){const P=this.params[S];return Array.isArray(P)?P[0]:P}return null}getAll(S){if(this.has(S)){const P=this.params[S];return Array.isArray(P)?P:[P]}return[]}get keys(){return Object.keys(this.params)}}function Tt(b){return new $t(b)}function St(b,S,P){const T=P.path.split("/");if(T.length>b.length||"full"===P.pathMatch&&(S.hasChildren()||T.length<b.length))return null;const k={};for(let ee=0;ee<T.length;ee++){const te=T[ee],Ue=b[ee];if(":"===te[0])k[te.substring(1)]=Ue;else if(te!==Ue.path)return null}return{consumed:b.slice(0,T.length),posParams:k}}function pn(b,S){const P=b?yr(b):void 0,T=S?yr(S):void 0;if(!P||!T||P.length!=T.length)return!1;let k;for(let ee=0;ee<P.length;ee++)if(k=P[ee],!Zn(b[k],S[k]))return!1;return!0}function yr(b){return[...Object.keys(b),...Object.getOwnPropertySymbols(b)]}function Zn(b,S){if(Array.isArray(b)&&Array.isArray(S)){if(b.length!==S.length)return!1;const P=[...b].sort(),T=[...S].sort();return P.every((k,ee)=>T[ee]===k)}return b===S}function bn(b){return b.length>0?b[b.length-1]:null}function Ot(b){return function xe(b){return!!b&&(b instanceof g.c||(0,ae.T)(b.lift)&&(0,ae.T)(b.subscribe))}(b)?b:(0,_.jNT)(b)?(0,X.H)(Promise.resolve(b)):(0,C.of)(b)}const qr={exact:function ei(b,S,P){if(!qi(b.segments,S.segments)||!nr(b.segments,S.segments,P)||b.numberOfChildren!==S.numberOfChildren)return!1;for(const T in S.children)if(!b.children[T]||!ei(b.children[T],S.children[T],P))return!1;return!0},subset:hr},fi={exact:function Rr(b,S){return pn(b,S)},subset:function so(b,S){return Object.keys(S).length<=Object.keys(b).length&&Object.keys(S).every(P=>Zn(b[P],S[P]))},ignored:()=>!0};function Ir(b,S,P){return qr[P.paths](b.root,S.root,P.matrixParams)&&fi[P.queryParams](b.queryParams,S.queryParams)&&!("exact"===P.fragment&&b.fragment!==S.fragment)}function hr(b,S,P){return Ns(b,S,S.segments,P)}function Ns(b,S,P,T){if(b.segments.length>P.length){const k=b.segments.slice(0,P.length);return!(!qi(k,P)||S.hasChildren()||!nr(k,P,T))}if(b.segments.length===P.length){if(!qi(b.segments,P)||!nr(b.segments,P,T))return!1;for(const k in S.children)if(!b.children[k]||!hr(b.children[k],S.children[k],T))return!1;return!0}{const k=P.slice(0,b.segments.length),ee=P.slice(b.segments.length);return!!(qi(b.segments,k)&&nr(b.segments,k,T)&&b.children[Kt])&&Ns(b.children[Kt],S,ee,T)}}function nr(b,S,P){return S.every((T,k)=>fi[P](b[k].parameters,T.parameters))}class cr{constructor(S=new fr([],{}),P={},T=null){this.root=S,this.queryParams=P,this.fragment=T}get queryParamMap(){var S;return null!==(S=this._queryParamMap)&&void 0!==S||(this._queryParamMap=Tt(this.queryParams)),this._queryParamMap}toString(){return gt.serialize(this)}}class fr{constructor(S,P){this.segments=S,this.children=P,this.parent=null,Object.values(P).forEach(T=>T.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $e(this)}}class Dn{constructor(S,P){this.path=S,this.parameters=P}get parameterMap(){var S;return null!==(S=this._parameterMap)&&void 0!==S||(this._parameterMap=Tt(this.parameters)),this._parameterMap}toString(){return Xt(this)}}function qi(b,S){return b.length===S.length&&b.every((P,T)=>P.path===S[T].path)}let wi=(()=>{var b;class S{}return(b=S).\u0275fac=function(T){return new(T||b)},b.\u0275prov=_.jDH({token:b,factory:()=>new Ki,providedIn:"root"}),S})();class Ki{parse(S){const P=new go(S);return new cr(P.parseRootSegment(),P.parseQueryParams(),P.parseFragment())}serialize(S){const P=`/${bt(S.root,!0)}`,T=function Sr(b){const S=Object.entries(b).map(([P,T])=>Array.isArray(T)?T.map(k=>`${yt(P)}=${yt(k)}`).join("&"):`${yt(P)}=${yt(T)}`).filter(P=>P);return S.length?`?${S.join("&")}`:""}(S.queryParams);return`${P}${T}${"string"==typeof S.fragment?`#${function zt(b){return encodeURI(b)}(S.fragment)}`:""}`}}const gt=new Ki;function $e(b){return b.segments.map(S=>Xt(S)).join("/")}function bt(b,S){if(!b.hasChildren())return $e(b);if(S){const P=b.children[Kt]?bt(b.children[Kt],!1):"",T=[];return Object.entries(b.children).forEach(([k,ee])=>{k!==Kt&&T.push(`${k}:${bt(ee,!1)}`)}),T.length>0?`${P}(${T.join("//")})`:P}{const P=function Fr(b,S){let P=[];return Object.entries(b.children).forEach(([T,k])=>{T===Kt&&(P=P.concat(S(k,T)))}),Object.entries(b.children).forEach(([T,k])=>{T!==Kt&&(P=P.concat(S(k,T)))}),P}(b,(T,k)=>k===Kt?[bt(b.children[Kt],!1)]:[`${k}:${bt(T,!1)}`]);return 1===Object.keys(b.children).length&&null!=b.children[Kt]?`${$e(b)}/${P[0]}`:`${$e(b)}/(${P.join("//")})`}}function ke(b){return encodeURIComponent(b).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yt(b){return ke(b).replace(/%3B/gi,";")}function En(b){return ke(b).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ln(b){return decodeURIComponent(b)}function vr(b){return Ln(b.replace(/\+/g,"%20"))}function Xt(b){return`${En(b.path)}${function er(b){return Object.entries(b).map(([S,P])=>`;${En(S)}=${En(P)}`).join("")}(b.parameters)}`}const pi=/^[^\/()?;#]+/;function So(b){const S=b.match(pi);return S?S[0]:""}const Ni=/^[^\/()?;=#]+/,Pn=/^[^=?&#]+/,Xi=/^[^&#]+/;class go{constructor(S){this.url=S,this.remaining=S}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new fr([],{}):new fr([],this.parseChildren())}parseQueryParams(){const S={};if(this.consumeOptional("?"))do{this.parseQueryParam(S)}while(this.consumeOptional("&"));return S}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const S=[];for(this.peekStartsWith("(")||S.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),S.push(this.parseSegment());let P={};this.peekStartsWith("/(")&&(this.capture("/"),P=this.parseParens(!0));let T={};return this.peekStartsWith("(")&&(T=this.parseParens(!1)),(S.length>0||Object.keys(P).length>0)&&(T[Kt]=new fr(S,P)),T}parseSegment(){const S=So(this.remaining);if(""===S&&this.peekStartsWith(";"))throw new _.wOt(4009,!1);return this.capture(S),new Dn(Ln(S),this.parseMatrixParams())}parseMatrixParams(){const S={};for(;this.consumeOptional(";");)this.parseParam(S);return S}parseParam(S){const P=function fo(b){const S=b.match(Ni);return S?S[0]:""}(this.remaining);if(!P)return;this.capture(P);let T="";if(this.consumeOptional("=")){const k=So(this.remaining);k&&(T=k,this.capture(T))}S[Ln(P)]=Ln(T)}parseQueryParam(S){const P=function Nn(b){const S=b.match(Pn);return S?S[0]:""}(this.remaining);if(!P)return;this.capture(P);let T="";if(this.consumeOptional("=")){const te=function po(b){const S=b.match(Xi);return S?S[0]:""}(this.remaining);te&&(T=te,this.capture(T))}const k=vr(P),ee=vr(T);if(S.hasOwnProperty(k)){let te=S[k];Array.isArray(te)||(te=[te],S[k]=te),te.push(ee)}else S[k]=ee}parseParens(S){const P={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const T=So(this.remaining),k=this.remaining[T.length];if("/"!==k&&")"!==k&&";"!==k)throw new _.wOt(4010,!1);let ee;T.indexOf(":")>-1?(ee=T.slice(0,T.indexOf(":")),this.capture(ee),this.capture(":")):S&&(ee=Kt);const te=this.parseChildren();P[ee]=1===Object.keys(te).length?te[Kt]:new fr([],te),this.consumeOptional("//")}return P}peekStartsWith(S){return this.remaining.startsWith(S)}consumeOptional(S){return!!this.peekStartsWith(S)&&(this.remaining=this.remaining.substring(S.length),!0)}capture(S){if(!this.consumeOptional(S))throw new _.wOt(4011,!1)}}function Do(b){return b.segments.length>0?new fr([],{[Kt]:b}):b}function gi(b){const S={};for(const[T,k]of Object.entries(b.children)){const ee=gi(k);if(T===Kt&&0===ee.segments.length&&ee.hasChildren())for(const[te,Ue]of Object.entries(ee.children))S[te]=Ue;else(ee.segments.length>0||ee.hasChildren())&&(S[T]=ee)}return function Ho(b){if(1===b.numberOfChildren&&b.children[Kt]){const S=b.children[Kt];return new fr(b.segments.concat(S.segments),S.children)}return b}(new fr(b.segments,S))}function li(b){return b instanceof cr}function ti(b){var S;let P;const ee=Do(function T(te){const Ue={};for(const Je of te.children){const on=T(Je);Ue[Je.outlet]=on}const Et=new fr(te.url,Ue);return te===b&&(P=Et),Et}(b.root));return null!==(S=P)&&void 0!==S?S:ee}function Oi(b,S,P,T){let k=b;for(;k.parent;)k=k.parent;if(0===S.length)return Q(k,k,k,P,T);const ee=function J(b){if("string"==typeof b[0]&&1===b.length&&"/"===b[0])return new we(!0,0,b);let S=0,P=!1;const T=b.reduce((k,ee,te)=>{if("object"==typeof ee&&null!=ee){if(ee.outlets){const Ue={};return Object.entries(ee.outlets).forEach(([Et,Je])=>{Ue[Et]="string"==typeof Je?Je.split("/"):Je}),[...k,{outlets:Ue}]}if(ee.segmentPath)return[...k,ee.segmentPath]}return"string"!=typeof ee?[...k,ee]:0===te?(ee.split("/").forEach((Ue,Et)=>{0==Et&&"."===Ue||(0==Et&&""===Ue?P=!0:".."===Ue?S++:""!=Ue&&k.push(Ue))}),k):[...k,ee]},[]);return new we(P,S,T)}(S);if(ee.toRoot())return Q(k,k,new fr([],{}),P,T);const te=function et(b,S,P){if(b.isAbsolute)return new me(S,!0,0);if(!P)return new me(S,!1,NaN);if(null===P.parent)return new me(P,!0,0);const T=Ci(b.commands[0])?0:1;return function Vt(b,S,P){let T=b,k=S,ee=P;for(;ee>k;){if(ee-=k,T=T.parent,!T)throw new _.wOt(4005,!1);k=T.segments.length}return new me(T,!1,k-ee)}(P,P.segments.length-1+T,b.numberOfDoubleDots)}(ee,k,b),Ue=te.processChildren?lr(te.segmentGroup,te.index,ee.commands):Tn(te.segmentGroup,te.index,ee.commands);return Q(k,te.segmentGroup,Ue,P,T)}function Ci(b){return"object"==typeof b&&null!=b&&!b.outlets&&!b.segmentPath}function ao(b){return"object"==typeof b&&null!=b&&b.outlets}function Q(b,S,P,T,k){let te,ee={};T&&Object.entries(T).forEach(([Et,Je])=>{ee[Et]=Array.isArray(Je)?Je.map(on=>`${on}`):`${Je}`}),te=b===S?P:ne(b,S,P);const Ue=Do(gi(te));return new cr(Ue,ee,k)}function ne(b,S,P){const T={};return Object.entries(b.children).forEach(([k,ee])=>{T[k]=ee===S?P:ne(ee,S,P)}),new fr(b.segments,T)}class we{constructor(S,P,T){if(this.isAbsolute=S,this.numberOfDoubleDots=P,this.commands=T,S&&T.length>0&&Ci(T[0]))throw new _.wOt(4003,!1);const k=T.find(ao);if(k&&k!==bn(T))throw new _.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class me{constructor(S,P,T){this.segmentGroup=S,this.processChildren=P,this.index=T}}function Tn(b,S,P){var T;if(null!==(T=b)&&void 0!==T||(b=new fr([],{})),0===b.segments.length&&b.hasChildren())return lr(b,S,P);const k=function xr(b,S,P){let T=0,k=S;const ee={match:!1,pathIndex:0,commandIndex:0};for(;k<b.segments.length;){if(T>=P.length)return ee;const te=b.segments[k],Ue=P[T];if(ao(Ue))break;const Et=`${Ue}`,Je=T<P.length-1?P[T+1]:null;if(k>0&&void 0===Et)break;if(Et&&Je&&"object"==typeof Je&&void 0===Je.outlets){if(!mi(Et,Je,te))return ee;T+=2}else{if(!mi(Et,{},te))return ee;T++}k++}return{match:!0,pathIndex:k,commandIndex:T}}(b,S,P),ee=P.slice(k.commandIndex);if(k.match&&k.pathIndex<b.segments.length){const te=new fr(b.segments.slice(0,k.pathIndex),{});return te.children[Kt]=new fr(b.segments.slice(k.pathIndex),b.children),lr(te,0,ee)}return k.match&&0===ee.length?new fr(b.segments,{}):k.match&&!b.hasChildren()?ni(b,S,P):k.match?lr(b,0,ee):ni(b,S,P)}function lr(b,S,P){if(0===P.length)return new fr(b.segments,{});{const T=function rn(b){return ao(b[0])?b[0].outlets:{[Kt]:b}}(P),k={};if(Object.keys(T).some(ee=>ee!==Kt)&&b.children[Kt]&&1===b.numberOfChildren&&0===b.children[Kt].segments.length){const ee=lr(b.children[Kt],S,P);return new fr(b.segments,ee.children)}return Object.entries(T).forEach(([ee,te])=>{"string"==typeof te&&(te=[te]),null!==te&&(k[ee]=Tn(b.children[ee],S,te))}),Object.entries(b.children).forEach(([ee,te])=>{void 0===T[ee]&&(k[ee]=te)}),new fr(b.segments,k)}}function ni(b,S,P){const T=b.segments.slice(0,S);let k=0;for(;k<P.length;){const ee=P[k];if(ao(ee)){const Et=Ai(ee.outlets);return new fr(T,Et)}if(0===k&&Ci(P[0])){T.push(new Dn(b.segments[S].path,ci(P[0]))),k++;continue}const te=ao(ee)?ee.outlets[Kt]:`${ee}`,Ue=k<P.length-1?P[k+1]:null;te&&Ue&&Ci(Ue)?(T.push(new Dn(te,ci(Ue))),k+=2):(T.push(new Dn(te,{})),k++)}return new fr(T,{})}function Ai(b){const S={};return Object.entries(b).forEach(([P,T])=>{"string"==typeof T&&(T=[T]),null!==T&&(S[P]=ni(new fr([],{}),0,T))}),S}function ci(b){const S={};return Object.entries(b).forEach(([P,T])=>S[P]=`${T}`),S}function mi(b,S,P){return b==P.path&&pn(S,P.parameters)}const Fi="imperative";var Bn=function(b){return b[b.NavigationStart=0]="NavigationStart",b[b.NavigationEnd=1]="NavigationEnd",b[b.NavigationCancel=2]="NavigationCancel",b[b.NavigationError=3]="NavigationError",b[b.RoutesRecognized=4]="RoutesRecognized",b[b.ResolveStart=5]="ResolveStart",b[b.ResolveEnd=6]="ResolveEnd",b[b.GuardsCheckStart=7]="GuardsCheckStart",b[b.GuardsCheckEnd=8]="GuardsCheckEnd",b[b.RouteConfigLoadStart=9]="RouteConfigLoadStart",b[b.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",b[b.ChildActivationStart=11]="ChildActivationStart",b[b.ChildActivationEnd=12]="ChildActivationEnd",b[b.ActivationStart=13]="ActivationStart",b[b.ActivationEnd=14]="ActivationEnd",b[b.Scroll=15]="Scroll",b[b.NavigationSkipped=16]="NavigationSkipped",b}(Bn||{});class Ti{constructor(S,P){this.id=S,this.url=P}}class Ro extends Ti{constructor(S,P,T="imperative",k=null){super(S,P),this.type=Bn.NavigationStart,this.navigationTrigger=T,this.restoredState=k}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ee extends Ti{constructor(S,P,T){super(S,P),this.urlAfterRedirects=T,this.type=Bn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var _e=function(b){return b[b.Redirect=0]="Redirect",b[b.SupersededByNewNavigation=1]="SupersededByNewNavigation",b[b.NoDataFromResolver=2]="NoDataFromResolver",b[b.GuardRejected=3]="GuardRejected",b}(_e||{}),Se=function(b){return b[b.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",b[b.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",b}(Se||{});class ze extends Ti{constructor(S,P,T,k){super(S,P),this.reason=T,this.code=k,this.type=Bn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ht extends Ti{constructor(S,P,T,k){super(S,P),this.reason=T,this.code=k,this.type=Bn.NavigationSkipped}}class wn extends Ti{constructor(S,P,T,k){super(S,P),this.error=T,this.target=k,this.type=Bn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class $n extends Ti{constructor(S,P,T,k){super(S,P),this.urlAfterRedirects=T,this.state=k,this.type=Bn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rr extends Ti{constructor(S,P,T,k){super(S,P),this.urlAfterRedirects=T,this.state=k,this.type=Bn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _i extends Ti{constructor(S,P,T,k,ee){super(S,P),this.urlAfterRedirects=T,this.state=k,this.shouldActivate=ee,this.type=Bn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ri extends Ti{constructor(S,P,T,k){super(S,P),this.urlAfterRedirects=T,this.state=k,this.type=Bn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ui extends Ti{constructor(S,P,T,k){super(S,P),this.urlAfterRedirects=T,this.state=k,this.type=Bn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Si{constructor(S){this.route=S,this.type=Bn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Po{constructor(S){this.route=S,this.type=Bn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ks{constructor(S){this.snapshot=S,this.type=Bn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Os{constructor(S){this.snapshot=S,this.type=Bn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zo{constructor(S){this.snapshot=S,this.type=Bn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ys{constructor(S){this.snapshot=S,this.type=Bn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zo{constructor(S,P,T){this.routerEvent=S,this.position=P,this.anchor=T,this.type=Bn.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class os{}class Es{constructor(S,P){this.url=S,this.navigationBehaviorOptions=P}}function re(b){return b.outlet||Kt}function Pe(b){var S;if(!b)return null;if(null!==(S=b.routeConfig)&&void 0!==S&&S._injector)return b.routeConfig._injector;for(let P=b.parent;P;P=P.parent){const T=P.routeConfig;if(null!=T&&T._loadedInjector)return T._loadedInjector;if(null!=T&&T._injector)return T._injector}return null}class qe{get injector(){var S,P;return null!==(S=Pe(null===(P=this.route)||void 0===P?void 0:P.snapshot))&&void 0!==S?S:this.rootInjector}set injector(S){}constructor(S){this.rootInjector=S,this.outlet=null,this.route=null,this.children=new Fe(this.rootInjector),this.attachRef=null}}let Fe=(()=>{var b;class S{constructor(T){this.rootInjector=T,this.contexts=new Map}onChildOutletCreated(T,k){const ee=this.getOrCreateContext(T);ee.outlet=k,this.contexts.set(T,ee)}onChildOutletDestroyed(T){const k=this.getContext(T);k&&(k.outlet=null,k.attachRef=null)}onOutletDeactivated(){const T=this.contexts;return this.contexts=new Map,T}onOutletReAttached(T){this.contexts=T}getOrCreateContext(T){let k=this.getContext(T);return k||(k=new qe(this.rootInjector),this.contexts.set(T,k)),k}getContext(T){return this.contexts.get(T)||null}}return(b=S).\u0275fac=function(T){return new(T||b)(_.KVO(_.uvJ))},b.\u0275prov=_.jDH({token:b,factory:b.\u0275fac,providedIn:"root"}),S})();class Ft{constructor(S){this._root=S}get root(){return this._root.value}parent(S){const P=this.pathFromRoot(S);return P.length>1?P[P.length-2]:null}children(S){const P=Lt(S,this._root);return P?P.children.map(T=>T.value):[]}firstChild(S){const P=Lt(S,this._root);return P&&P.children.length>0?P.children[0].value:null}siblings(S){const P=Bt(S,this._root);return P.length<2?[]:P[P.length-2].children.map(k=>k.value).filter(k=>k!==S)}pathFromRoot(S){return Bt(S,this._root).map(P=>P.value)}}function Lt(b,S){if(b===S.value)return S;for(const P of S.children){const T=Lt(b,P);if(T)return T}return null}function Bt(b,S){if(b===S.value)return[S];for(const P of S.children){const T=Bt(b,P);if(T.length)return T.unshift(S),T}return[]}class Nt{constructor(S,P){this.value=S,this.children=P}toString(){return`TreeNode(${this.value})`}}function dn(b){const S={};return b&&b.children.forEach(P=>S[P.value.outlet]=P),S}class In extends Ft{constructor(S,P){super(S),this.snapshot=P,Vi(this,S)}toString(){return this.snapshot.toString()}}function xn(b){const S=function yn(b){const ee=new mr([],{},{},"",{},Kt,b,null,{});return new Li("",new Nt(ee,[]))}(b),P=new pe.t([new Dn("",{})]),T=new pe.t({}),k=new pe.t({}),ee=new pe.t({}),te=new pe.t(""),Ue=new Ar(P,T,ee,te,k,Kt,b,S.root);return Ue.snapshot=S.root,new In(new Nt(Ue,[]),S)}class Ar{constructor(S,P,T,k,ee,te,Ue,Et){var Je,on;this.urlSubject=S,this.paramsSubject=P,this.queryParamsSubject=T,this.fragmentSubject=k,this.dataSubject=ee,this.outlet=te,this.component=Ue,this._futureSnapshot=Et,this.title=null!==(Je=null===(on=this.dataSubject)||void 0===on?void 0:on.pipe((0,Gt.T)(Kn=>Kn[zn])))&&void 0!==Je?Je:(0,C.of)(void 0),this.url=S,this.params=P,this.queryParams=T,this.fragment=k,this.data=ee}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){var S;return null!==(S=this._paramMap)&&void 0!==S||(this._paramMap=this.params.pipe((0,Gt.T)(P=>Tt(P)))),this._paramMap}get queryParamMap(){var S;return null!==(S=this._queryParamMap)&&void 0!==S||(this._queryParamMap=this.queryParams.pipe((0,Gt.T)(P=>Tt(P)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Xr(b,S,P="emptyOnly"){var T;let k;const{routeConfig:ee}=b;var te;return k=null===S||"always"!==P&&""!==(null==ee?void 0:ee.path)&&(S.component||null!==(T=S.routeConfig)&&void 0!==T&&T.loadComponent)?{params:{...b.params},data:{...b.data},resolve:{...b.data,...null!==(te=b._resolvedData)&&void 0!==te?te:{}}}:{params:{...S.params,...b.params},data:{...S.data,...b.data},resolve:{...b.data,...S.data,...null==ee?void 0:ee.data,...b._resolvedData}},ee&&Qi(ee)&&(k.resolve[zn]=ee.title),k}class mr{get title(){var S;return null===(S=this.data)||void 0===S?void 0:S[zn]}constructor(S,P,T,k,ee,te,Ue,Et,Je){this.url=S,this.params=P,this.queryParams=T,this.fragment=k,this.data=ee,this.outlet=te,this.component=Ue,this.routeConfig=Et,this._resolve=Je}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){var S;return null!==(S=this._paramMap)&&void 0!==S||(this._paramMap=Tt(this.params)),this._paramMap}get queryParamMap(){var S;return null!==(S=this._queryParamMap)&&void 0!==S||(this._queryParamMap=Tt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(T=>T.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Li extends Ft{constructor(S,P){super(P),this.url=S,Vi(this,P)}toString(){return en(this._root)}}function Vi(b,S){S.value._routerState=b,S.children.forEach(P=>Vi(b,P))}function en(b){const S=b.children.length>0?` { ${b.children.map(en).join(", ")} } `:"";return`${b.value}${S}`}function Oo(b){if(b.snapshot){const S=b.snapshot,P=b._futureSnapshot;b.snapshot=P,pn(S.queryParams,P.queryParams)||b.queryParamsSubject.next(P.queryParams),S.fragment!==P.fragment&&b.fragmentSubject.next(P.fragment),pn(S.params,P.params)||b.paramsSubject.next(P.params),function un(b,S){if(b.length!==S.length)return!1;for(let P=0;P<b.length;++P)if(!pn(b[P],S[P]))return!1;return!0}(S.url,P.url)||b.urlSubject.next(P.url),pn(S.data,P.data)||b.dataSubject.next(P.data)}else b.snapshot=b._futureSnapshot,b.dataSubject.next(b._futureSnapshot.data)}function fa(b,S){const P=pn(b.params,S.params)&&function Kr(b,S){return qi(b,S)&&b.every((P,T)=>pn(P.parameters,S[T].parameters))}(b.url,S.url);return P&&!(!b.parent!=!S.parent)&&(!b.parent||fa(b.parent,S.parent))}function Qi(b){return"string"==typeof b.title||null===b.title}let yu=(()=>{var b;class S{constructor(){this.activated=null,this._activatedRoute=null,this.name=Kt,this.activateEvents=new _.bkB,this.deactivateEvents=new _.bkB,this.attachEvents=new _.bkB,this.detachEvents=new _.bkB,this.parentContexts=(0,_.WQX)(Fe),this.location=(0,_.WQX)(_.c1b),this.changeDetector=(0,_.WQX)(_.gRc),this.inputBinder=(0,_.WQX)(pa,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(T){if(T.name){const{firstChange:k,previousValue:ee}=T.name;if(k)return;this.isTrackedInParentContexts(ee)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(ee)),this.initializeOutletWithName()}}ngOnDestroy(){var T;this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),null===(T=this.inputBinder)||void 0===T||T.unsubscribeFromRouteData(this)}isTrackedInParentContexts(T){var k;return(null===(k=this.parentContexts.getContext(T))||void 0===k?void 0:k.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const T=this.parentContexts.getContext(this.name);null!=T&&T.route&&(T.attachRef?this.attach(T.attachRef,T.route):this.activateWith(T.route,T.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _.wOt(4012,!1);this.location.detach();const T=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(T.instance),T}attach(T,k){var ee;this.activated=T,this._activatedRoute=k,this.location.insert(T.hostView),null===(ee=this.inputBinder)||void 0===ee||ee.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(T.instance)}deactivate(){if(this.activated){const T=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,k){var ee;if(this.isActivated)throw new _.wOt(4013,!1);this._activatedRoute=T;const te=this.location,Et=T.snapshot.component,Je=this.parentContexts.getOrCreateContext(this.name).children,on=new zl(T,Je,te.injector);this.activated=te.createComponent(Et,{index:te.length,injector:on,environmentInjector:k}),this.changeDetector.markForCheck(),null===(ee=this.inputBinder)||void 0===ee||ee.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(b=S).\u0275fac=function(T){return new(T||b)},b.\u0275dir=_.FsC({type:b,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[_.OA$]}),S})();class zl{__ngOutletInjector(S){return new zl(this.route,this.childContexts,S)}constructor(S,P,T){this.route=S,this.childContexts=P,this.parent=T}get(S,P){return S===Ar?this.route:S===Fe?this.childContexts:this.parent.get(S,P)}}const pa=new _.nKC("");let Hr=(()=>{var b;class S{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(T){this.unsubscribeFromRouteData(T),this.subscribeToRouteData(T)}unsubscribeFromRouteData(T){var k;null===(k=this.outletDataSubscriptions.get(T))||void 0===k||k.unsubscribe(),this.outletDataSubscriptions.delete(T)}subscribeToRouteData(T){const{activatedRoute:k}=T,ee=(0,ue.z)([k.queryParams,k.params,k.data]).pipe((0,Wt.n)(([te,Ue,Et],Je)=>(Et={...te,...Ue,...Et},0===Je?(0,C.of)(Et):Promise.resolve(Et)))).subscribe(te=>{if(!T.isActivated||!T.activatedComponentRef||T.activatedRoute!==k||null===k.component)return void this.unsubscribeFromRouteData(T);const Ue=(0,_.HJs)(k.component);if(Ue)for(const{templateName:Et}of Ue.inputs)T.activatedComponentRef.setInput(Et,te[Et]);else this.unsubscribeFromRouteData(T)});this.outletDataSubscriptions.set(T,ee)}}return(b=S).\u0275fac=function(T){return new(T||b)},b.\u0275prov=_.jDH({token:b,factory:b.\u0275fac}),S})();function ss(b,S,P){if(P&&b.shouldReuseRoute(S.value,P.value.snapshot)){const T=P.value;T._futureSnapshot=S.value;const k=function Wa(b,S,P){return S.children.map(T=>{for(const k of P.children)if(b.shouldReuseRoute(T.value,k.value.snapshot))return ss(b,T,k);return ss(b,T)})}(b,S,P);return new Nt(T,k)}{if(b.shouldAttach(S.value)){const ee=b.retrieve(S.value);if(null!==ee){const te=ee.route;return te.value._futureSnapshot=S.value,te.children=S.children.map(Ue=>ss(b,Ue)),te}}const T=function Gl(b){return new Ar(new pe.t(b.url),new pe.t(b.params),new pe.t(b.queryParams),new pe.t(b.fragment),new pe.t(b.data),b.outlet,b.component,b)}(S.value),k=S.children.map(ee=>ss(b,ee));return new Nt(T,k)}}class Zs{constructor(S,P){this.redirectTo=S,this.navigationBehaviorOptions=P}}const ga="ngNavigationCancelingError";function hl(b,S){const{redirectTo:P,navigationBehaviorOptions:T}=li(S)?{redirectTo:S,navigationBehaviorOptions:void 0}:S,k=Di(!1,_e.Redirect);return k.url=P,k.navigationBehaviorOptions=T,k}function Di(b,S){const P=new Error(`NavigationCancelingError: ${b||""}`);return P[ga]=!0,P.cancellationCode=S,P}function xc(b){return!!b&&b[ga]}class Yi{constructor(S,P,T,k,ee){this.routeReuseStrategy=S,this.futureState=P,this.currState=T,this.forwardEvent=k,this.inputBindingEnabled=ee}activate(S){const P=this.futureState._root,T=this.currState?this.currState._root:null;this.deactivateChildRoutes(P,T,S),Oo(this.futureState.root),this.activateChildRoutes(P,T,S)}deactivateChildRoutes(S,P,T){const k=dn(P);S.children.forEach(ee=>{const te=ee.value.outlet;this.deactivateRoutes(ee,k[te],T),delete k[te]}),Object.values(k).forEach(ee=>{this.deactivateRouteAndItsChildren(ee,T)})}deactivateRoutes(S,P,T){const k=S.value,ee=P?P.value:null;if(k===ee)if(k.component){const te=T.getContext(k.outlet);te&&this.deactivateChildRoutes(S,P,te.children)}else this.deactivateChildRoutes(S,P,T);else ee&&this.deactivateRouteAndItsChildren(P,T)}deactivateRouteAndItsChildren(S,P){S.value.component&&this.routeReuseStrategy.shouldDetach(S.value.snapshot)?this.detachAndStoreRouteSubtree(S,P):this.deactivateRouteAndOutlet(S,P)}detachAndStoreRouteSubtree(S,P){const T=P.getContext(S.value.outlet),k=T&&S.value.component?T.children:P,ee=dn(S);for(const te of Object.values(ee))this.deactivateRouteAndItsChildren(te,k);if(T&&T.outlet){const te=T.outlet.detach(),Ue=T.children.onOutletDeactivated();this.routeReuseStrategy.store(S.value.snapshot,{componentRef:te,route:S,contexts:Ue})}}deactivateRouteAndOutlet(S,P){const T=P.getContext(S.value.outlet),k=T&&S.value.component?T.children:P,ee=dn(S);for(const te of Object.values(ee))this.deactivateRouteAndItsChildren(te,k);T&&(T.outlet&&(T.outlet.deactivate(),T.children.onOutletDeactivated()),T.attachRef=null,T.route=null)}activateChildRoutes(S,P,T){const k=dn(P);S.children.forEach(ee=>{this.activateRoutes(ee,k[ee.value.outlet],T),this.forwardEvent(new ys(ee.value.snapshot))}),S.children.length&&this.forwardEvent(new Os(S.value.snapshot))}activateRoutes(S,P,T){const k=S.value,ee=P?P.value:null;if(Oo(k),k===ee)if(k.component){const te=T.getOrCreateContext(k.outlet);this.activateChildRoutes(S,P,te.children)}else this.activateChildRoutes(S,P,T);else if(k.component){const te=T.getOrCreateContext(k.outlet);if(this.routeReuseStrategy.shouldAttach(k.snapshot)){const Ue=this.routeReuseStrategy.retrieve(k.snapshot);this.routeReuseStrategy.store(k.snapshot,null),te.children.onOutletReAttached(Ue.contexts),te.attachRef=Ue.componentRef,te.route=Ue.route.value,te.outlet&&te.outlet.attach(Ue.componentRef,Ue.route.value),Oo(Ue.route.value),this.activateChildRoutes(S,null,te.children)}else te.attachRef=null,te.route=k,te.outlet&&te.outlet.activateWith(k,te.injector),this.activateChildRoutes(S,null,te.children)}else this.activateChildRoutes(S,null,T)}}class fl{constructor(S){this.path=S,this.route=this.path[this.path.length-1]}}class Mc{constructor(S,P){this.component=S,this.route=P}}function bu(b,S,P){const T=b._root;return ma(T,S?S._root:null,P,[T.value])}function Wn(b,S){const P=Symbol(),T=S.get(b,P);return T===P?"function"!=typeof b||(0,_.LfX)(b)?S.get(b):b:T}function ma(b,S,P,T,k={canDeactivateChecks:[],canActivateChecks:[]}){const ee=dn(S);return b.children.forEach(te=>{(function es(b,S,P,T,k={canDeactivateChecks:[],canActivateChecks:[]}){const ee=b.value,te=S?S.value:null,Ue=P?P.getContext(b.value.outlet):null;if(te&&ee.routeConfig===te.routeConfig){const Et=function xg(b,S,P){if("function"==typeof P)return P(b,S);switch(P){case"pathParamsChange":return!qi(b.url,S.url);case"pathParamsOrQueryParamsChange":return!qi(b.url,S.url)||!pn(b.queryParams,S.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fa(b,S)||!pn(b.queryParams,S.queryParams);default:return!fa(b,S)}}(te,ee,ee.routeConfig.runGuardsAndResolvers);Et?k.canActivateChecks.push(new fl(T)):(ee.data=te.data,ee._resolvedData=te._resolvedData),ma(b,S,ee.component?Ue?Ue.children:null:P,T,k),Et&&Ue&&Ue.outlet&&Ue.outlet.isActivated&&k.canDeactivateChecks.push(new Mc(Ue.outlet.component,te))}else te&&pl(S,Ue,k),k.canActivateChecks.push(new fl(T)),ma(b,null,ee.component?Ue?Ue.children:null:P,T,k)})(te,ee[te.value.outlet],P,T.concat([te.value]),k),delete ee[te.value.outlet]}),Object.entries(ee).forEach(([te,Ue])=>pl(Ue,P.getContext(te),k)),k}function pl(b,S,P){const T=dn(b),k=b.value;Object.entries(T).forEach(([ee,te])=>{pl(te,k.component?S?S.children.getContext(ee):null:S,P)}),P.canDeactivateChecks.push(new Mc(k.component&&S&&S.outlet&&S.outlet.isActivated?S.outlet.component:null,k))}function Wl(b){return"function"==typeof b}function kg(b){return b instanceof Qe||"EmptyError"===(null==b?void 0:b.name)}const B=Symbol("INITIAL_VALUE");function M(){return(0,Wt.n)(b=>(0,ue.z)(b.map(S=>S.pipe(Sn(1),function Dt(...b){const S=(0,Ze.lI)(b);return(0,at.N)((P,T)=>{(S?ot(b,P,S):ot(b,P)).subscribe(T)})}(B)))).pipe((0,Gt.T)(S=>{for(const P of S)if(!0!==P){if(P===B)return B;if(!1===P||K(P))return P}return!0}),(0,Te.p)(S=>S!==B),Sn(1)))}function K(b){return li(b)||b instanceof Zs}function gl(b){return(0,At.F)(Ye(S=>{if("boolean"!=typeof S)throw hl(0,S)}),(0,Gt.T)(S=>!0===S))}class xd{constructor(S){this.segmentGroup=S||null}}class ql extends Error{constructor(S){super(),this.urlTree=S}}function Ri(b){return ct(new xd(b))}class Xl{constructor(S,P){this.urlSerializer=S,this.urlTree=P}lineralizeSegments(S,P){let T=[],k=P.root;for(;;){if(T=T.concat(k.segments),0===k.numberOfChildren)return(0,C.of)(T);if(k.numberOfChildren>1||!k.children[Kt])return ct(new _.wOt(4e3,!1));k=k.children[Kt]}}applyRedirectCommands(S,P,T,k,ee){if("string"!=typeof P){const Ue=P,{queryParams:Et,fragment:Je,routeConfig:on,url:Kn,outlet:zr,params:sr,data:co,title:us}=k,ds=(0,_.N4e)(ee,()=>Ue({params:sr,data:co,queryParams:Et,fragment:Je,routeConfig:on,url:Kn,outlet:zr,title:us}));if(ds instanceof cr)throw new ql(ds);P=ds}const te=this.applyRedirectCreateUrlTree(P,this.urlSerializer.parse(P),S,T);if("/"===P[0])throw new ql(te);return te}applyRedirectCreateUrlTree(S,P,T,k){const ee=this.createSegmentGroup(S,P.root,T,k);return new cr(ee,this.createQueryParams(P.queryParams,this.urlTree.queryParams),P.fragment)}createQueryParams(S,P){const T={};return Object.entries(S).forEach(([k,ee])=>{if("string"==typeof ee&&":"===ee[0]){const Ue=ee.substring(1);T[k]=P[Ue]}else T[k]=ee}),T}createSegmentGroup(S,P,T,k){const ee=this.createSegments(S,P.segments,T,k);let te={};return Object.entries(P.children).forEach(([Ue,Et])=>{te[Ue]=this.createSegmentGroup(S,Et,T,k)}),new fr(ee,te)}createSegments(S,P,T,k){return P.map(ee=>":"===ee.path[0]?this.findPosParam(S,ee,k):this.findOrReturn(ee,T))}findPosParam(S,P,T){const k=T[P.path.substring(1)];if(!k)throw new _.wOt(4001,!1);return k}findOrReturn(S,P){let T=0;for(const k of P){if(k.path===S.path)return P.splice(T),k;T++}return S}}const tr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function tn(b,S,P,T,k){const ee=Is(b,S,P);return ee.matched?(T=function R(b,S){var P;return b.providers&&!b._injector&&(b._injector=(0,_.Ol2)(b.providers,S,`Route: ${b.path}`)),null!==(P=b._injector)&&void 0!==P?P:S}(S,T),function Nc(b,S,P,T){const k=S.canMatch;if(!k||0===k.length)return(0,C.of)(!0);const ee=k.map(te=>{const Ue=Wn(te,b);return Ot(function hf(b){return b&&Wl(b.canMatch)}(Ue)?Ue.canMatch(S,P):(0,_.N4e)(b,()=>Ue(S,P)))});return(0,C.of)(ee).pipe(M(),gl())}(T,S,P).pipe((0,Gt.T)(te=>!0===te?ee:{...tr}))):(0,C.of)(ee)}function Is(b,S,P){var T,k;if("**"===S.path)return function ea(b){return{matched:!0,parameters:b.length>0?bn(b).parameters:{},consumedSegments:b,remainingSegments:[],positionalParamSegments:{}}}(P);if(""===S.path)return"full"===S.pathMatch&&(b.hasChildren()||P.length>0)?{...tr}:{matched:!0,consumedSegments:[],remainingSegments:P,parameters:{},positionalParamSegments:{}};const te=(S.matcher||St)(P,b,S);if(!te)return{...tr};const Ue={};Object.entries(null!==(T=te.posParams)&&void 0!==T?T:{}).forEach(([Je,on])=>{Ue[Je]=on.path});const Et=te.consumed.length>0?{...Ue,...te.consumed[te.consumed.length-1].parameters}:Ue;return{matched:!0,consumedSegments:te.consumed,remainingSegments:P.slice(te.consumed.length),parameters:Et,positionalParamSegments:null!==(k=te.posParams)&&void 0!==k?k:{}}}function ml(b,S,P,T){return P.length>0&&function SI(b,S,P){return P.some(T=>Ql(b,S,T)&&re(T)!==Kt)}(b,P,T)?{segmentGroup:new fr(S,Md(T,new fr(P,b.children))),slicedSegments:[]}:0===P.length&&function DI(b,S,P){return P.some(T=>Ql(b,S,T))}(b,P,T)?{segmentGroup:new fr(b.segments,ff(b,P,T,b.children)),slicedSegments:P}:{segmentGroup:new fr(b.segments,b.children),slicedSegments:P}}function ff(b,S,P,T){const k={};for(const ee of P)if(Ql(b,S,ee)&&!T[re(ee)]){const te=new fr([],{});k[re(ee)]=te}return{...T,...k}}function Md(b,S){const P={};P[Kt]=S;for(const T of b)if(""===T.path&&re(T)!==Kt){const k=new fr([],{});P[re(T)]=k}return P}function Ql(b,S,P){return(!(b.hasChildren()||S.length>0)||"full"!==P.pathMatch)&&""===P.path}class kc{}class Pi{constructor(S,P,T,k,ee,te,Ue){this.injector=S,this.configLoader=P,this.rootComponentType=T,this.config=k,this.urlTree=ee,this.paramsInheritanceStrategy=te,this.urlSerializer=Ue,this.applyRedirects=new Xl(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(S){return new _.wOt(4002,`'${S.segmentGroup}'`)}recognize(){const S=ml(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(S).pipe((0,Gt.T)(({children:P,rootSnapshot:T})=>{const k=new Nt(T,P),ee=new Li("",k),te=function Jo(b,S,P=null,T=null){return Oi(ti(b),S,P,T)}(T,[],this.urlTree.queryParams,this.urlTree.fragment);return te.queryParams=this.urlTree.queryParams,ee.url=this.urlSerializer.serialize(te),{state:ee,tree:te}}))}match(S){const P=new mr([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),Kt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,S,Kt,P).pipe((0,Gt.T)(T=>({children:T,rootSnapshot:P})),je(T=>{if(T instanceof ql)return this.urlTree=T.urlTree,this.match(T.urlTree.root);throw T instanceof xd?this.noMatchError(T):T}))}processSegmentGroup(S,P,T,k,ee){return 0===T.segments.length&&T.hasChildren()?this.processChildren(S,P,T,ee):this.processSegment(S,P,T,T.segments,k,!0,ee).pipe((0,Gt.T)(te=>te instanceof Nt?[te]:[]))}processChildren(S,P,T,k){const ee=[];for(const te of Object.keys(T.children))"primary"===te?ee.unshift(te):ee.push(te);return(0,X.H)(ee).pipe(We(te=>{const Ue=T.children[te],Et=function ve(b,S){const P=b.filter(T=>re(T)===S);return P.push(...b.filter(T=>re(T)!==S)),P}(P,te);return this.processSegmentGroup(S,Et,Ue,te,k)}),function On(b,S){return(0,at.N)(function qt(b,S,P,T,k){return(ee,te)=>{let Ue=P,Et=S,Je=0;ee.subscribe((0,It._)(te,on=>{const Kn=Je++;Et=Ue?b(Et,on,Kn):(Ue=!0,on),T&&te.next(Et)},k&&(()=>{Ue&&te.next(Et),te.complete()})))}}(b,S,arguments.length>=2,!0))}((te,Ue)=>(te.push(...Ue),te)),Z(null),function Fn(b,S){const P=arguments.length>=2;return T=>T.pipe(b?(0,Te.p)((k,ee)=>b(k,ee,T)):Ve.D,fn(1),P?Z(S):Y(()=>new Qe))}(),(0,ye.Z)(te=>{if(null===te)return Ri(T);const Ue=Au(te);return function ta(b){b.sort((S,P)=>S.value.outlet===Kt?-1:P.value.outlet===Kt?1:S.value.outlet.localeCompare(P.value.outlet))}(Ue),(0,C.of)(Ue)}))}processSegment(S,P,T,k,ee,te,Ue){return(0,X.H)(P).pipe(We(Et=>{var Je;return this.processSegmentAgainstRoute(null!==(Je=Et._injector)&&void 0!==Je?Je:S,P,Et,T,k,ee,te,Ue).pipe(je(on=>{if(on instanceof xd)return(0,C.of)(null);throw on}))}),Ie(Et=>!!Et),je(Et=>{if(kg(Et))return function Cu(b,S,P){return 0===S.length&&!b.children[P]}(T,k,ee)?(0,C.of)(new kc):Ri(T);throw Et}))}processSegmentAgainstRoute(S,P,T,k,ee,te,Ue,Et){return function pf(b,S,P,T){return!!(re(b)===T||T!==Kt&&Ql(S,P,b))&&Is(S,b,P).matched}(T,k,ee,te)?void 0===T.redirectTo?this.matchSegmentAgainstRoute(S,k,T,ee,te,Et):this.allowRedirects&&Ue?this.expandSegmentAgainstRouteUsingRedirect(S,k,P,T,ee,te,Et):Ri(k):Ri(k)}expandSegmentAgainstRouteUsingRedirect(S,P,T,k,ee,te,Ue){var Et,Je;const{matched:on,parameters:Kn,consumedSegments:zr,positionalParamSegments:sr,remainingSegments:co}=Is(P,k,ee);if(!on)return Ri(P);"string"==typeof k.redirectTo&&"/"===k.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const us=new mr(ee,Kn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ur(k),re(k),null!==(Et=null!==(Je=k.component)&&void 0!==Je?Je:k._loadedComponent)&&void 0!==Et?Et:null,k,Og(k)),ds=Xr(us,Ue,this.paramsInheritanceStrategy);us.params=Object.freeze(ds.params),us.data=Object.freeze(ds.data);const Fc=this.applyRedirects.applyRedirectCommands(zr,k.redirectTo,sr,us,S);return this.applyRedirects.lineralizeSegments(k,Fc).pipe((0,ye.Z)(ns=>this.processSegment(S,T,P,ns.concat(co),te,!1,Ue)))}matchSegmentAgainstRoute(S,P,T,k,ee,te){const Ue=tn(P,T,k,S);return"**"===T.path&&(P.children={}),Ue.pipe((0,Wt.n)(Et=>{var Je;return Et.matched?(S=null!==(Je=T._injector)&&void 0!==Je?Je:S,this.getChildConfig(S,T,k).pipe((0,Wt.n)(({routes:on})=>{var Kn,zr,sr;const co=null!==(Kn=T._loadedInjector)&&void 0!==Kn?Kn:S,{parameters:us,consumedSegments:ds,remainingSegments:Fc}=Et,ns=new mr(ds,us,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ur(T),re(T),null!==(zr=null!==(sr=T.component)&&void 0!==sr?sr:T._loadedComponent)&&void 0!==zr?zr:null,T,Og(T)),Lc=Xr(ns,te,this.paramsInheritanceStrategy);ns.params=Object.freeze(Lc.params),ns.data=Object.freeze(Lc.data);const{segmentGroup:Mu,slicedSegments:yf}=ml(P,ds,Fc,on);if(0===yf.length&&Mu.hasChildren())return this.processChildren(co,on,Mu,ns).pipe((0,Gt.T)(Nu=>new Nt(ns,Nu)));if(0===on.length&&0===yf.length)return(0,C.of)(new Nt(ns,[]));const Gg=re(T)===ee;return this.processSegment(co,on,Mu,yf,Gg?Kt:ee,!0,ns).pipe((0,Gt.T)(Nu=>new Nt(ns,Nu instanceof Nt?[Nu]:[])))}))):Ri(P)}))}getChildConfig(S,P,T){return P.children?(0,C.of)({routes:P.children,injector:S}):P.loadChildren?void 0!==P._loadedRoutes?(0,C.of)({routes:P._loadedRoutes,injector:P._loadedInjector}):function Ka(b,S,P,T){const k=S.canLoad;if(void 0===k||0===k.length)return(0,C.of)(!0);const ee=k.map(te=>{const Ue=Wn(te,b);return Ot(function Mg(b){return b&&Wl(b.canLoad)}(Ue)?Ue.canLoad(S,P):(0,_.N4e)(b,()=>Ue(S,P)))});return(0,C.of)(ee).pipe(M(),gl())}(S,P,T).pipe((0,ye.Z)(k=>k?this.configLoader.loadChildren(S,P).pipe(Ye(ee=>{P._loadedRoutes=ee.routes,P._loadedInjector=ee.injector})):function lo(b){return ct(Di(!1,_e.GuardRejected))}())):(0,C.of)({routes:[],injector:S})}}function Yl(b){const S=b.value.routeConfig;return S&&""===S.path}function Au(b){const S=[],P=new Set;for(const T of b){if(!Yl(T)){S.push(T);continue}const k=S.find(ee=>T.value.routeConfig===ee.value.routeConfig);void 0!==k?(k.children.push(...T.children),P.add(k)):S.push(T)}for(const T of P){const k=Au(T.children);S.push(new Nt(T.value,k))}return S.filter(T=>!P.has(T))}function Ur(b){return b.data||{}}function Og(b){return b.resolve||{}}function Tu(b){const S=b.children.map(P=>Tu(P)).flat();return[b,...S]}function Su(b){return(0,Wt.n)(S=>{const P=b(S);return P?(0,X.H)(P).pipe((0,Gt.T)(()=>S)):(0,C.of)(S)})}let _l=(()=>{var b;class S{buildTitle(T){let k,ee=T.root;for(;void 0!==ee;){var te;k=null!==(te=this.getResolvedTitleForRoute(ee))&&void 0!==te?te:k,ee=ee.children.find(Ue=>Ue.outlet===Kt)}return k}getResolvedTitleForRoute(T){return T.data[zn]}}return(b=S).\u0275fac=function(T){return new(T||b)},b.\u0275prov=_.jDH({token:b,factory:()=>(0,_.WQX)(as),providedIn:"root"}),S})(),as=(()=>{var b;class S extends _l{constructor(T){super(),this.title=T}updateTitle(T){const k=this.buildTitle(T);void 0!==k&&this.title.setTitle(k)}}return(b=S).\u0275fac=function(T){return new(T||b)(_.KVO(Jn.hE))},b.\u0275prov=_.jDH({token:b,factory:b.\u0275fac,providedIn:"root"}),S})();const Fs=new _.nKC("",{providedIn:"root",factory:()=>({})});let xv=(()=>{var b;class S{}return(b=S).\u0275fac=function(T){return new(T||b)},b.\u0275cmp=_.VBU({type:b,selectors:[["ng-component"]],standalone:!0,features:[_.aNF],decls:1,vars:0,template:function(T,k){1&T&&_.nrm(0,"router-outlet")},dependencies:[yu],encapsulation:2}),S})();function kd(b){const S=b.children&&b.children.map(kd),P=S?{...b,children:S}:{...b};return!P.component&&!P.loadComponent&&(S||P.loadChildren)&&P.outlet&&P.outlet!==Kt&&(P.component=xv),P}const D=new _.nKC("");let U=(()=>{var b;class S{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,_.WQX)(_.Ql9)}loadComponent(T){if(this.componentLoaders.get(T))return this.componentLoaders.get(T);if(T._loadedComponent)return(0,C.of)(T._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(T);const k=Ot(T.loadComponent()).pipe((0,Gt.T)(ie),Ye(te=>{this.onLoadEndListener&&this.onLoadEndListener(T),T._loadedComponent=te}),_r(()=>{this.componentLoaders.delete(T)})),ee=new ft(k,()=>new Pt.B).pipe(Ne());return this.componentLoaders.set(T,ee),ee}loadChildren(T,k){if(this.childrenLoaders.get(k))return this.childrenLoaders.get(k);if(k._loadedRoutes)return(0,C.of)({routes:k._loadedRoutes,injector:k._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(k);const te=function fe(b,S,P,T){return Ot(b.loadChildren()).pipe((0,Gt.T)(ie),(0,ye.Z)(k=>k instanceof _.Co$||Array.isArray(k)?(0,C.of)(k):(0,X.H)(S.compileModuleAsync(k))),(0,Gt.T)(k=>{T&&T(b);let ee,te,Ue=!1;return Array.isArray(k)?(te=k,!0):(ee=k.create(P).injector,te=ee.get(D,[],{optional:!0,self:!0}).flat()),{routes:te.map(kd),injector:ee}}))}(k,this.compiler,T,this.onLoadEndListener).pipe(_r(()=>{this.childrenLoaders.delete(k)})),Ue=new ft(te,()=>new Pt.B).pipe(Ne());return this.childrenLoaders.set(k,Ue),Ue}}return(b=S).\u0275fac=function(T){return new(T||b)},b.\u0275prov=_.jDH({token:b,factory:b.\u0275fac,providedIn:"root"}),S})();function ie(b){return function V(b){return b&&"object"==typeof b&&"default"in b}(b)?b.default:b}let be=(()=>{var b;class S{}return(b=S).\u0275fac=function(T){return new(T||b)},b.\u0275prov=_.jDH({token:b,factory:()=>(0,_.WQX)(xt),providedIn:"root"}),S})(),xt=(()=>{var b;class S{shouldProcessUrl(T){return!0}extract(T){return T}merge(T,k){return T}}return(b=S).\u0275fac=function(T){return new(T||b)},b.\u0275prov=_.jDH({token:b,factory:b.\u0275fac,providedIn:"root"}),S})();const Qt=new _.nKC(""),ir=new _.nKC("");function or(b,S,P){const T=b.get(ir),k=b.get(Ut.qQ);return b.get(_.SKi).runOutsideAngular(()=>{if(!k.startViewTransition||T.skipNextTransition)return T.skipNextTransition=!1,new Promise(Je=>setTimeout(Je));let ee;const te=new Promise(Je=>{ee=Je}),Ue=k.startViewTransition(()=>(ee(),function Br(b){return new Promise(S=>{(0,_.mal)({read:()=>setTimeout(S)},{injector:b})})}(b))),{onViewTransitionCreated:Et}=T;return Et&&(0,_.N4e)(b,()=>Et({transition:Ue,from:S,to:P})),te})}const Mn=new _.nKC("");let Lr=(()=>{var b;class S{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Pt.B,this.transitionAbortSubject=new Pt.B,this.configLoader=(0,_.WQX)(U),this.environmentInjector=(0,_.WQX)(_.uvJ),this.urlSerializer=(0,_.WQX)(wi),this.rootContexts=(0,_.WQX)(Fe),this.location=(0,_.WQX)(Ut.aZ),this.inputBindingEnabled=null!==(0,_.WQX)(pa,{optional:!0}),this.titleStrategy=(0,_.WQX)(_l),this.options=(0,_.WQX)(Fs,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,_.WQX)(be),this.createViewTransition=(0,_.WQX)(Qt,{optional:!0}),this.navigationErrorHandler=(0,_.WQX)(Mn,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,C.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=ee=>this.events.next(new Po(ee)),this.configLoader.onLoadStartListener=ee=>this.events.next(new Si(ee))}complete(){var T;null===(T=this.transitions)||void 0===T||T.complete()}handleNavigationRequest(T){var k;const ee=++this.navigationId;null===(k=this.transitions)||void 0===k||k.next({...this.transitions.value,...T,id:ee})}setupNavigations(T,k,ee){return this.transitions=new pe.t({id:0,currentUrlTree:k,currentRawUrl:k,extractedUrl:this.urlHandlingStrategy.extract(k),urlAfterRedirects:this.urlHandlingStrategy.extract(k),rawUrl:k,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Fi,restoredState:null,currentSnapshot:ee.snapshot,targetSnapshot:null,currentRouterState:ee,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Te.p)(te=>0!==te.id),(0,Gt.T)(te=>({...te,extractedUrl:this.urlHandlingStrategy.extract(te.rawUrl)})),(0,Wt.n)(te=>{let Ue=!1,Et=!1;return(0,C.of)(te).pipe((0,Wt.n)(Je=>{var on;if(this.navigationId>te.id)return this.cancelNavigationTransition(te,"",_e.SupersededByNewNavigation),ut;this.currentTransition=te,this.currentNavigation={id:Je.id,initialUrl:Je.rawUrl,extractedUrl:Je.extractedUrl,targetBrowserUrl:"string"==typeof Je.extras.browserUrl?this.urlSerializer.parse(Je.extras.browserUrl):Je.extras.browserUrl,trigger:Je.source,extras:Je.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const Kn=!T.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),zr=null!==(on=Je.extras.onSameUrlNavigation)&&void 0!==on?on:T.onSameUrlNavigation;if(!Kn&&"reload"!==zr){const sr="";return this.events.next(new Ht(Je.id,this.urlSerializer.serialize(Je.rawUrl),sr,Se.IgnoredSameUrlNavigation)),Je.resolve(!1),ut}if(this.urlHandlingStrategy.shouldProcessUrl(Je.rawUrl))return(0,C.of)(Je).pipe((0,Wt.n)(sr=>{var co,us;const ds=null===(co=this.transitions)||void 0===co?void 0:co.getValue();return this.events.next(new Ro(sr.id,this.urlSerializer.serialize(sr.extractedUrl),sr.source,sr.restoredState)),ds!==(null===(us=this.transitions)||void 0===us?void 0:us.getValue())?ut:Promise.resolve(sr)}),function Rv(b,S,P,T,k,ee){return(0,ye.Z)(te=>function gf(b,S,P,T,k,ee,te="emptyOnly"){return new Pi(b,S,P,T,k,te,ee).recognize()}(b,S,P,T,te.extractedUrl,k,ee).pipe((0,Gt.T)(({state:Ue,tree:Et})=>({...te,targetSnapshot:Ue,urlAfterRedirects:Et}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,T.config,this.urlSerializer,this.paramsInheritanceStrategy),Ye(sr=>{te.targetSnapshot=sr.targetSnapshot,te.urlAfterRedirects=sr.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:sr.urlAfterRedirects};const co=new $n(sr.id,this.urlSerializer.serialize(sr.extractedUrl),this.urlSerializer.serialize(sr.urlAfterRedirects),sr.targetSnapshot);this.events.next(co)}));if(Kn&&this.urlHandlingStrategy.shouldProcessUrl(Je.currentRawUrl)){const{id:sr,extractedUrl:co,source:us,restoredState:ds,extras:Fc}=Je,ns=new Ro(sr,this.urlSerializer.serialize(co),us,ds);this.events.next(ns);const Lc=xn(this.rootComponentType).snapshot;return this.currentTransition=te={...Je,targetSnapshot:Lc,urlAfterRedirects:co,extras:{...Fc,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=co,(0,C.of)(te)}{const sr="";return this.events.next(new Ht(Je.id,this.urlSerializer.serialize(Je.extractedUrl),sr,Se.IgnoredByUrlHandlingStrategy)),Je.resolve(!1),ut}}),Ye(Je=>{const on=new rr(Je.id,this.urlSerializer.serialize(Je.extractedUrl),this.urlSerializer.serialize(Je.urlAfterRedirects),Je.targetSnapshot);this.events.next(on)}),(0,Gt.T)(Je=>(this.currentTransition=te={...Je,guards:bu(Je.targetSnapshot,Je.currentSnapshot,this.rootContexts)},te)),function F(b,S){return(0,ye.Z)(P=>{const{targetSnapshot:T,currentSnapshot:k,guards:{canActivateChecks:ee,canDeactivateChecks:te}}=P;return 0===te.length&&0===ee.length?(0,C.of)({...P,guardsResult:!0}):function de(b,S,P,T){return(0,X.H)(b).pipe((0,ye.Z)(k=>function qa(b,S,P,T,k){const ee=S&&S.routeConfig?S.routeConfig.canDeactivate:null;if(!ee||0===ee.length)return(0,C.of)(!0);const te=ee.map(Ue=>{var Et;const Je=null!==(Et=Pe(S))&&void 0!==Et?Et:k,on=Wn(Ue,Je);return Ot(function Dv(b){return b&&Wl(b.canDeactivate)}(on)?on.canDeactivate(b,S,P,T):(0,_.N4e)(Je,()=>on(b,S,P,T))).pipe(Ie())});return(0,C.of)(te).pipe(M())}(k.component,k.route,P,S,T)),Ie(k=>!0!==k,!0))}(te,T,k,b).pipe((0,ye.Z)(Ue=>Ue&&function Mr(b){return"boolean"==typeof b}(Ue)?function Yt(b,S,P,T){return(0,X.H)(S).pipe(We(k=>ot(function Ui(b,S){return null!==b&&S&&S(new ks(b)),(0,C.of)(!0)}(k.route.parent,T),function Vn(b,S){return null!==b&&S&&S(new Zo(b)),(0,C.of)(!0)}(k.route,T),function br(b,S,P){const T=S[S.length-1],ee=S.slice(0,S.length-1).reverse().map(te=>function wu(b){const S=b.routeConfig?b.routeConfig.canActivateChild:null;return S&&0!==S.length?{node:b,guards:S}:null}(te)).filter(te=>null!==te).map(te=>nt(()=>{const Ue=te.guards.map(Et=>{var Je;const on=null!==(Je=Pe(te.node))&&void 0!==Je?Je:P,Kn=Wn(Et,on);return Ot(function Ng(b){return b&&Wl(b.canActivateChild)}(Kn)?Kn.canActivateChild(T,b):(0,_.N4e)(on,()=>Kn(T,b))).pipe(Ie())});return(0,C.of)(Ue).pipe(M())}));return(0,C.of)(ee).pipe(M())}(b,k.path,P),function Go(b,S,P){const T=S.routeConfig?S.routeConfig.canActivate:null;if(!T||0===T.length)return(0,C.of)(!0);const k=T.map(ee=>nt(()=>{var te;const Ue=null!==(te=Pe(S))&&void 0!==te?te:P,Et=Wn(ee,Ue);return Ot(function Sv(b){return b&&Wl(b.canActivate)}(Et)?Et.canActivate(S,b):(0,_.N4e)(Ue,()=>Et(S,b))).pipe(Ie())}));return(0,C.of)(k).pipe(M())}(b,k.route,P))),Ie(k=>!0!==k,!0))}(T,ee,b,S):(0,C.of)(Ue)),(0,Gt.T)(Ue=>({...P,guardsResult:Ue})))})}(this.environmentInjector,Je=>this.events.next(Je)),Ye(Je=>{if(te.guardsResult=Je.guardsResult,Je.guardsResult&&"boolean"!=typeof Je.guardsResult)throw hl(0,Je.guardsResult);const on=new _i(Je.id,this.urlSerializer.serialize(Je.extractedUrl),this.urlSerializer.serialize(Je.urlAfterRedirects),Je.targetSnapshot,!!Je.guardsResult);this.events.next(on)}),(0,Te.p)(Je=>!!Je.guardsResult||(this.cancelNavigationTransition(Je,"",_e.GuardRejected),!1)),Su(Je=>{if(Je.guards.canActivateChecks.length)return(0,C.of)(Je).pipe(Ye(on=>{const Kn=new ri(on.id,this.urlSerializer.serialize(on.extractedUrl),this.urlSerializer.serialize(on.urlAfterRedirects),on.targetSnapshot);this.events.next(Kn)}),(0,Wt.n)(on=>{let Kn=!1;return(0,C.of)(on).pipe(function Pv(b,S){return(0,ye.Z)(P=>{const{targetSnapshot:T,guards:{canActivateChecks:k}}=P;if(!k.length)return(0,C.of)(P);const ee=new Set(k.map(Et=>Et.route)),te=new Set;for(const Et of ee)if(!te.has(Et))for(const Je of Tu(Et))te.add(Je);let Ue=0;return(0,X.H)(te).pipe(We(Et=>ee.has(Et)?function Fg(b,S,P,T){const k=b.routeConfig,ee=b._resolve;return void 0!==(null==k?void 0:k.title)&&!Qi(k)&&(ee[zn]=k.title),function Nd(b,S,P,T){const k=yr(b);if(0===k.length)return(0,C.of)({});const ee={};return(0,X.H)(k).pipe((0,ye.Z)(te=>function Dr(b,S,P,T){var k;const ee=null!==(k=Pe(S))&&void 0!==k?k:T,te=Wn(b,ee);return Ot(te.resolve?te.resolve(S,P):(0,_.N4e)(ee,()=>te(S,P)))}(b[te],S,P,T).pipe(Ie(),Ye(Ue=>{if(Ue instanceof Zs)throw hl(new Ki,Ue);ee[te]=Ue}))),fn(1),function gn(b){return(0,Gt.T)(()=>b)}(ee),je(te=>kg(te)?ut:ct(te)))}(ee,b,S,T).pipe((0,Gt.T)(te=>(b._resolvedData=te,b.data=Xr(b,b.parent,P).resolve,null)))}(Et,T,b,S):(Et.data=Xr(Et,Et.parent,b).resolve,(0,C.of)(void 0))),Ye(()=>Ue++),fn(1),(0,ye.Z)(Et=>Ue===te.size?(0,C.of)(P):ut))})}(this.paramsInheritanceStrategy,this.environmentInjector),Ye({next:()=>Kn=!0,complete:()=>{Kn||this.cancelNavigationTransition(on,"",_e.NoDataFromResolver)}}))}),Ye(on=>{const Kn=new ui(on.id,this.urlSerializer.serialize(on.extractedUrl),this.urlSerializer.serialize(on.urlAfterRedirects),on.targetSnapshot);this.events.next(Kn)}))}),Su(Je=>{const on=Kn=>{var zr;const sr=[];null!==(zr=Kn.routeConfig)&&void 0!==zr&&zr.loadComponent&&!Kn.routeConfig._loadedComponent&&sr.push(this.configLoader.loadComponent(Kn.routeConfig).pipe(Ye(co=>{Kn.component=co}),(0,Gt.T)(()=>{})));for(const co of Kn.children)sr.push(...on(co));return sr};return(0,ue.z)(on(Je.targetSnapshot.root)).pipe(Z(null),Sn(1))}),Su(()=>this.afterPreactivation()),(0,Wt.n)(()=>{var Je;const{currentSnapshot:on,targetSnapshot:Kn}=te,zr=null===(Je=this.createViewTransition)||void 0===Je?void 0:Je.call(this,this.environmentInjector,on.root,Kn.root);return zr?(0,X.H)(zr).pipe((0,Gt.T)(()=>te)):(0,C.of)(te)}),(0,Gt.T)(Je=>{const on=function Ga(b,S,P){const T=ss(b,S._root,P?P._root:void 0);return new In(T,S)}(T.routeReuseStrategy,Je.targetSnapshot,Je.currentRouterState);return this.currentTransition=te={...Je,targetRouterState:on},this.currentNavigation.targetRouterState=on,te}),Ye(()=>{this.events.next(new os)}),((b,S,P,T)=>(0,Gt.T)(k=>(new Yi(S,k.targetRouterState,k.currentRouterState,P,T).activate(b),k)))(this.rootContexts,T.routeReuseStrategy,Je=>this.events.next(Je),this.inputBindingEnabled),Sn(1),Ye({next:Je=>{var on;Ue=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ee(Je.id,this.urlSerializer.serialize(Je.extractedUrl),this.urlSerializer.serialize(Je.urlAfterRedirects))),null===(on=this.titleStrategy)||void 0===on||on.updateTitle(Je.targetRouterState.snapshot),Je.resolve(!0)},complete:()=>{Ue=!0}}),function Gn(b){return(0,at.N)((S,P)=>{(0,tt.Tg)(b).subscribe((0,It._)(P,()=>P.complete(),Hn.l)),!P.closed&&S.subscribe(P)})}(this.transitionAbortSubject.pipe(Ye(Je=>{throw Je}))),_r(()=>{var Je;!Ue&&!Et&&this.cancelNavigationTransition(te,"",_e.SupersededByNewNavigation),(null===(Je=this.currentTransition)||void 0===Je?void 0:Je.id)===te.id&&(this.currentNavigation=null,this.currentTransition=null)}),je(Je=>{if(Et=!0,xc(Je))this.events.next(new ze(te.id,this.urlSerializer.serialize(te.extractedUrl),Je.message,Je.cancellationCode)),function Eu(b){return xc(b)&&li(b.url)}(Je)?this.events.next(new Es(Je.url,Je.navigationBehaviorOptions)):te.resolve(!1);else{var on;const Kn=new wn(te.id,this.urlSerializer.serialize(te.extractedUrl),Je,null!==(on=te.targetSnapshot)&&void 0!==on?on:void 0);try{const zr=(0,_.N4e)(this.environmentInjector,()=>{var sr;return null===(sr=this.navigationErrorHandler)||void 0===sr?void 0:sr.call(this,Kn)});if(zr instanceof Zs){const{message:sr,cancellationCode:co}=hl(0,zr);this.events.next(new ze(te.id,this.urlSerializer.serialize(te.extractedUrl),sr,co)),this.events.next(new Es(zr.redirectTo,zr.navigationBehaviorOptions))}else{this.events.next(Kn);const sr=T.errorHandler(Je);te.resolve(!!sr)}}catch(zr){this.options.resolveNavigationPromiseOnError?te.resolve(!1):te.reject(zr)}}return ut}))}))}cancelNavigationTransition(T,k,ee){const te=new ze(T.id,this.urlSerializer.serialize(T.extractedUrl),k,ee);this.events.next(te),T.resolve(!1)}isUpdatingInternalState(){var T,k;return(null===(T=this.currentTransition)||void 0===T?void 0:T.extractedUrl.toString())!==(null===(k=this.currentTransition)||void 0===k?void 0:k.currentUrlTree.toString())}isUpdatedBrowserUrl(){var T,k,ee,te;const Ue=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),Et=null!==(T=null===(k=this.currentNavigation)||void 0===k?void 0:k.targetBrowserUrl)&&void 0!==T?T:null===(ee=this.currentNavigation)||void 0===ee?void 0:ee.extractedUrl;return Ue.toString()!==(null==Et?void 0:Et.toString())&&!(null!==(te=this.currentNavigation)&&void 0!==te&&te.extras.skipLocationChange)}}return(b=S).\u0275fac=function(T){return new(T||b)},b.\u0275prov=_.jDH({token:b,factory:b.\u0275fac,providedIn:"root"}),S})();function sn(b){return b!==Fi}let Hi=(()=>{var b;class S{}return(b=S).\u0275fac=function(T){return new(T||b)},b.\u0275prov=_.jDH({token:b,factory:()=>(0,_.WQX)(xo),providedIn:"root"}),S})();class Ls{shouldDetach(S){return!1}store(S,P){}shouldAttach(S){return!1}retrieve(S){return null}shouldReuseRoute(S,P){return S.routeConfig===P.routeConfig}}let xo=(()=>{var b;class S extends Ls{}return(b=S).\u0275fac=(()=>{let P;return function(k){return(P||(P=_.xGo(b)))(k||b)}})(),b.\u0275prov=_.jDH({token:b,factory:b.\u0275fac,providedIn:"root"}),S})(),xa=(()=>{var b;class S{}return(b=S).\u0275fac=function(T){return new(T||b)},b.\u0275prov=_.jDH({token:b,factory:()=>(0,_.WQX)(Xa),providedIn:"root"}),S})(),Xa=(()=>{var b;class S extends xa{constructor(){super(...arguments),this.location=(0,_.WQX)(Ut.aZ),this.urlSerializer=(0,_.WQX)(wi),this.options=(0,_.WQX)(Fs,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,_.WQX)(be),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new cr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=xn(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){var T,k;return"computed"!==this.canceledNavigationResolution?this.currentPageId:null!==(T=null===(k=this.restoredState())||void 0===k?void 0:k.\u0275routerPageId)&&void 0!==T?T:this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(T){return this.location.subscribe(k=>{"popstate"===k.type&&T(k.url,k.state)})}handleRouterEvent(T,k){if(T instanceof Ro)this.stateMemento=this.createStateMemento();else if(T instanceof Ht)this.rawUrlTree=k.initialUrl;else if(T instanceof $n){if("eager"===this.urlUpdateStrategy&&!k.extras.skipLocationChange){var ee;const Ue=this.urlHandlingStrategy.merge(k.finalUrl,k.initialUrl);this.setBrowserUrl(null!==(ee=k.targetBrowserUrl)&&void 0!==ee?ee:Ue,k)}}else if(T instanceof os){var te;this.currentUrlTree=k.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(k.finalUrl,k.initialUrl),this.routerState=k.targetRouterState,"deferred"!==this.urlUpdateStrategy||k.extras.skipLocationChange||this.setBrowserUrl(null!==(te=k.targetBrowserUrl)&&void 0!==te?te:this.rawUrlTree,k)}else T instanceof ze&&(T.code===_e.GuardRejected||T.code===_e.NoDataFromResolver)?this.restoreHistory(k):T instanceof wn?this.restoreHistory(k,!0):T instanceof Ee&&(this.lastSuccessfulId=T.id,this.currentPageId=this.browserPageId)}setBrowserUrl(T,k){const ee=T instanceof cr?this.urlSerializer.serialize(T):T;if(this.location.isCurrentPathEqualTo(ee)||k.extras.replaceUrl){const Ue={...k.extras.state,...this.generateNgRouterState(k.id,this.browserPageId)};this.location.replaceState(ee,"",Ue)}else{const te={...k.extras.state,...this.generateNgRouterState(k.id,this.browserPageId+1)};this.location.go(ee,"",te)}}restoreHistory(T,k=!1){if("computed"===this.canceledNavigationResolution){const te=this.currentPageId-this.browserPageId;0!==te?this.location.historyGo(te):this.currentUrlTree===T.finalUrl&&0===te&&(this.resetState(T),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(k&&this.resetState(T),this.resetUrlToCurrentUrlTree())}resetState(T){var k;this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,null!==(k=T.finalUrl)&&void 0!==k?k:this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(T,k){return"computed"===this.canceledNavigationResolution?{navigationId:T,\u0275routerPageId:k}:{navigationId:T}}}return(b=S).\u0275fac=(()=>{let P;return function(k){return(P||(P=_.xGo(b)))(k||b)}})(),b.\u0275prov=_.jDH({token:b,factory:b.\u0275fac,providedIn:"root"}),S})();var bs=function(b){return b[b.COMPLETE=0]="COMPLETE",b[b.FAILED=1]="FAILED",b[b.REDIRECTING=2]="REDIRECTING",b}(bs||{});function Ma(b,S){b.events.pipe((0,Te.p)(P=>P instanceof Ee||P instanceof ze||P instanceof wn||P instanceof Ht),(0,Gt.T)(P=>P instanceof Ee||P instanceof Ht?bs.COMPLETE:P instanceof ze&&(P.code===_e.Redirect||P.code===_e.SupersededByNewNavigation)?bs.REDIRECTING:bs.FAILED),(0,Te.p)(P=>P!==bs.REDIRECTING),Sn(1)).subscribe(()=>{S()})}function _a(b){throw b}const Od={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Du={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Na=(()=>{var b;class S{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){var T,k;this.disposed=!1,this.console=(0,_.WQX)(_.H3F),this.stateManager=(0,_.WQX)(xa),this.options=(0,_.WQX)(Fs,{optional:!0})||{},this.pendingTasks=(0,_.WQX)(_.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,_.WQX)(Lr),this.urlSerializer=(0,_.WQX)(wi),this.location=(0,_.WQX)(Ut.aZ),this.urlHandlingStrategy=(0,_.WQX)(be),this._events=new Pt.B,this.errorHandler=this.options.errorHandler||_a,this.navigated=!1,this.routeReuseStrategy=(0,_.WQX)(Hi),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=null!==(T=null===(k=(0,_.WQX)(D,{optional:!0}))||void 0===k?void 0:k.flat())&&void 0!==T?T:[],this.componentInputBindingEnabled=!!(0,_.WQX)(pa,{optional:!0}),this.eventsSubscription=new _t.yU,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:ee=>{this.console.warn(ee)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const T=this.navigationTransitions.events.subscribe(k=>{try{const ee=this.navigationTransitions.currentTransition,te=this.navigationTransitions.currentNavigation;if(null!==ee&&null!==te)if(this.stateManager.handleRouterEvent(k,te),k instanceof ze&&k.code!==_e.Redirect&&k.code!==_e.SupersededByNewNavigation)this.navigated=!0;else if(k instanceof Ee)this.navigated=!0;else if(k instanceof Es){const Ue=k.navigationBehaviorOptions,Et=this.urlHandlingStrategy.merge(k.url,ee.currentRawUrl),Je={browserUrl:ee.extras.browserUrl,info:ee.extras.info,skipLocationChange:ee.extras.skipLocationChange,replaceUrl:ee.extras.replaceUrl||"eager"===this.urlUpdateStrategy||sn(ee.source),...Ue};this.scheduleNavigation(Et,Fi,null,Je,{resolve:ee.resolve,reject:ee.reject,promise:ee.promise})}(function Ru(b){return!(b instanceof os||b instanceof Es)})(k)&&this._events.next(k)}catch(ee){this.navigationTransitions.transitionAbortSubject.next(ee)}});this.eventsSubscription.add(T)}resetRootComponentType(T){this.routerState.root.component=T,this.navigationTransitions.rootComponentType=T}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Fi,this.stateManager.restoredState())}setUpLocationChangeListener(){var T;null!==(T=this.nonRouterCurrentEntryChangeSubscription)&&void 0!==T||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((k,ee)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(k,"popstate",ee)},0)}))}navigateToSyncWithBrowser(T,k,ee){const te={replaceUrl:!0},Ue=null!=ee&&ee.navigationId?ee:null;if(ee){const Je={...ee};delete Je.navigationId,delete Je.\u0275routerPageId,0!==Object.keys(Je).length&&(te.state=Je)}const Et=this.parseUrl(T);this.scheduleNavigation(Et,k,Ue,te)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(T){this.config=T.map(kd),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(T,k={}){const{relativeTo:ee,queryParams:te,fragment:Ue,queryParamsHandling:Et,preserveFragment:Je}=k,on=Je?this.currentUrlTree.fragment:Ue;let zr,Kn=null;switch(Et){case"merge":Kn={...this.currentUrlTree.queryParams,...te};break;case"preserve":Kn=this.currentUrlTree.queryParams;break;default:Kn=te||null}null!==Kn&&(Kn=this.removeEmptyProps(Kn));try{zr=ti(ee?ee.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof T[0]||"/"!==T[0][0])&&(T=[]),zr=this.currentUrlTree.root}return Oi(zr,T,Kn,null!=on?on:null)}navigateByUrl(T,k={skipLocationChange:!1}){const ee=li(T)?T:this.parseUrl(T),te=this.urlHandlingStrategy.merge(ee,this.rawUrlTree);return this.scheduleNavigation(te,Fi,null,k)}navigate(T,k={skipLocationChange:!1}){return function vl(b){for(let S=0;S<b.length;S++)if(null==b[S])throw new _.wOt(4008,!1)}(T),this.navigateByUrl(this.createUrlTree(T,k),k)}serializeUrl(T){return this.urlSerializer.serialize(T)}parseUrl(T){try{return this.urlSerializer.parse(T)}catch{return this.urlSerializer.parse("/")}}isActive(T,k){let ee;if(ee=!0===k?{...Od}:!1===k?{...Du}:k,li(T))return Ir(this.currentUrlTree,T,ee);const te=this.parseUrl(T);return Ir(this.currentUrlTree,te,ee)}removeEmptyProps(T){return Object.entries(T).reduce((k,[ee,te])=>(null!=te&&(k[ee]=te),k),{})}scheduleNavigation(T,k,ee,te,Ue){if(this.disposed)return Promise.resolve(!1);let Et,Je,on;Ue?(Et=Ue.resolve,Je=Ue.reject,on=Ue.promise):on=new Promise((zr,sr)=>{Et=zr,Je=sr});const Kn=this.pendingTasks.add();return Ma(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Kn))}),this.navigationTransitions.handleNavigationRequest({source:k,restoredState:ee,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:T,extras:te,resolve:Et,reject:Je,promise:on,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),on.catch(zr=>Promise.reject(zr))}}return(b=S).\u0275fac=function(T){return new(T||b)},b.\u0275prov=_.jDH({token:b,factory:b.\u0275fac,providedIn:"root"}),S})(),zi=(()=>{var b;class S{constructor(T,k,ee,te,Ue,Et){var Je;this.router=T,this.route=k,this.tabIndexAttribute=ee,this.renderer=te,this.el=Ue,this.locationStrategy=Et,this.href=null,this.onChanges=new Pt.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;const on=null===(Je=Ue.nativeElement.tagName)||void 0===Je?void 0:Je.toLowerCase();this.isAnchorElement="a"===on||"area"===on,this.isAnchorElement?this.subscription=T.events.subscribe(Kn=>{Kn instanceof Ee&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(T){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",T)}ngOnChanges(T){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(T){null==T?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=li(T)||Array.isArray(T)?T:[T],this.setTabIndexIfNotOnNativeEl("0"))}onClick(T,k,ee,te,Ue){const Et=this.urlTree;return!!(null===Et||this.isAnchorElement&&(0!==T||k||ee||te||Ue||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(Et,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){var T;null===(T=this.subscription)||void 0===T||T.unsubscribe()}updateHref(){var T;const k=this.urlTree;this.href=null!==k&&this.locationStrategy?null===(T=this.locationStrategy)||void 0===T?void 0:T.prepareExternalUrl(this.router.serializeUrl(k)):null;const ee=null===this.href?null:(0,_.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",ee)}applyAttributeValue(T,k){const ee=this.renderer,te=this.el.nativeElement;null!==k?ee.setAttribute(te,T,k):ee.removeAttribute(te,T)}get urlTree(){return null===this.routerLinkInput?null:li(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return(b=S).\u0275fac=function(T){return new(T||b)(_.rXU(Na),_.rXU(Ar),_.kS0("tabindex"),_.rXU(_.sFG),_.rXU(_.aKT),_.rXU(Ut.hb))},b.\u0275dir=_.FsC({type:b,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(T,k){1&T&&_.bIt("click",function(te){return k.onClick(te.button,te.ctrlKey,te.shiftKey,te.altKey,te.metaKey)}),2&T&&_.BMQ("target",k.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",_.L39],skipLocationChange:[2,"skipLocationChange","skipLocationChange",_.L39],replaceUrl:[2,"replaceUrl","replaceUrl",_.L39],routerLink:"routerLink"},standalone:!0,features:[_.GFd,_.OA$]}),S})();class ts{}let Vg=(()=>{var b;class S{preload(T,k){return k().pipe(je(()=>(0,C.of)(null)))}}return(b=S).\u0275fac=function(T){return new(T||b)},b.\u0275prov=_.jDH({token:b,factory:b.\u0275fac,providedIn:"root"}),S})(),Pu=(()=>{var b;class S{constructor(T,k,ee,te,Ue){this.router=T,this.injector=ee,this.preloadingStrategy=te,this.loader=Ue}setUpPreloading(){this.subscription=this.router.events.pipe((0,Te.p)(T=>T instanceof Ee),We(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(T,k){const ee=[];for(const Je of k){var te,Ue;Je.providers&&!Je._injector&&(Je._injector=(0,_.Ol2)(Je.providers,T,`Route: ${Je.path}`));const on=null!==(te=Je._injector)&&void 0!==te?te:T,Kn=null!==(Ue=Je._loadedInjector)&&void 0!==Ue?Ue:on;var Et;(Je.loadChildren&&!Je._loadedRoutes&&void 0===Je.canLoad||Je.loadComponent&&!Je._loadedComponent)&&ee.push(this.preloadConfig(on,Je)),(Je.children||Je._loadedRoutes)&&ee.push(this.processRoutes(Kn,null!==(Et=Je.children)&&void 0!==Et?Et:Je._loadedRoutes))}return(0,X.H)(ee).pipe(Oe())}preloadConfig(T,k){return this.preloadingStrategy.preload(k,()=>{let ee;ee=k.loadChildren&&void 0===k.canLoad?this.loader.loadChildren(T,k):(0,C.of)(null);const te=ee.pipe((0,ye.Z)(Ue=>{var Et;return null===Ue?(0,C.of)(void 0):(k._loadedRoutes=Ue.routes,k._loadedInjector=Ue.injector,this.processRoutes(null!==(Et=Ue.injector)&&void 0!==Et?Et:T,Ue.routes))}));if(k.loadComponent&&!k._loadedComponent){const Ue=this.loader.loadComponent(k);return(0,X.H)([te,Ue]).pipe(Oe())}return te})}}return(b=S).\u0275fac=function(T){return new(T||b)(_.KVO(Na),_.KVO(_.Ql9),_.KVO(_.uvJ),_.KVO(ts),_.KVO(U))},b.\u0275prov=_.jDH({token:b,factory:b.\u0275fac,providedIn:"root"}),S})();const yl=new _.nKC("");let Mv=(()=>{var b;class S{constructor(T,k,ee,te,Ue={}){this.urlSerializer=T,this.transitions=k,this.viewportScroller=ee,this.zone=te,this.options=Ue,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Ue.scrollPositionRestoration||(Ue.scrollPositionRestoration="disabled"),Ue.anchorScrolling||(Ue.anchorScrolling="disabled")}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(T=>{T instanceof Ro?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=T.navigationTrigger,this.restoredId=T.restoredState?T.restoredState.navigationId:0):T instanceof Ee?(this.lastId=T.id,this.scheduleScrollEvent(T,this.urlSerializer.parse(T.urlAfterRedirects).fragment)):T instanceof Ht&&T.code===Se.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(T,this.urlSerializer.parse(T.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(T=>{T instanceof zo&&(T.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(T.position):T.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(T.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(T,k){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new zo(T,"popstate"===this.lastSource?this.store[this.restoredId]:null,k))})},0)})}ngOnDestroy(){var T,k;null===(T=this.routerEventsSubscription)||void 0===T||T.unsubscribe(),null===(k=this.scrollEventsSubscription)||void 0===k||k.unsubscribe()}}return(b=S).\u0275fac=function(T){_.QTQ()},b.\u0275prov=_.jDH({token:b,factory:b.\u0275fac}),S})();function ls(b,S){return{\u0275kind:b,\u0275providers:S}}function cs(){const b=(0,_.WQX)(_.zZn);return S=>{var P,T;const k=b.get(_.o8S);if(S!==k.components[0])return;const ee=b.get(Na),te=b.get(Ug);1===b.get(Vd)&&ee.initialNavigation(),null===(P=b.get(El,null,_.$GK.Optional))||void 0===P||P.setUpPreloading(),null===(T=b.get(yl,null,_.$GK.Optional))||void 0===T||T.init(),ee.resetRootComponentType(k.componentTypes[0]),te.closed||(te.next(),te.complete(),te.unsubscribe())}}const Ug=new _.nKC("",{factory:()=>new Pt.B}),Vd=new _.nKC("",{providedIn:"root",factory:()=>1}),El=new _.nKC("");function PI(b){return ls(0,[{provide:El,useExisting:Pu},{provide:ts,useExisting:b}])}function ki(b){return ls(9,[{provide:Qt,useValue:or},{provide:ir,useValue:{skipNextTransition:!(null==b||!b.skipInitialTransition),...b}}])}const xu=new _.nKC("ROUTER_FORROOT_GUARD"),Bg=[Ut.aZ,{provide:wi,useClass:Ki},Na,Fe,{provide:Ar,useFactory:function Fd(b){return b.routerState.root},deps:[Na]},U,[]];let $g=(()=>{var b;class S{constructor(T){}static forRoot(T,k){return{ngModule:S,providers:[Bg,[],{provide:D,multi:!0,useValue:T},{provide:xu,useFactory:jg,deps:[[Na,new _.Xx1,new _.kdw]]},{provide:Fs,useValue:k||{}},null!=k&&k.useHash?{provide:Ut.hb,useClass:Ut.fw}:{provide:Ut.hb,useClass:Ut.Sm},{provide:yl,useFactory:()=>{const b=(0,_.WQX)(Ut.Xr),S=(0,_.WQX)(_.SKi),P=(0,_.WQX)(Fs),T=(0,_.WQX)(Lr),k=(0,_.WQX)(wi);return P.scrollOffset&&b.setOffset(P.scrollOffset),new Mv(k,T,b,S,P)}},null!=k&&k.preloadingStrategy?PI(k.preloadingStrategy).\u0275providers:[],null!=k&&k.initialNavigation?OI(k):[],null!=k&&k.bindToComponentInputs?ls(8,[Hr,{provide:pa,useExisting:Hr}]).\u0275providers:[],null!=k&&k.enableViewTransitions?ki().\u0275providers:[],[{provide:kv,useFactory:cs},{provide:_.iLQ,multi:!0,useExisting:kv}]]}}static forChild(T){return{ngModule:S,providers:[{provide:D,multi:!0,useValue:T}]}}}return(b=S).\u0275fac=function(T){return new(T||b)(_.KVO(xu,8))},b.\u0275mod=_.$C({type:b}),b.\u0275inj=_.G2t({}),S})();function jg(b){return"guarded"}function OI(b){return["disabled"===b.initialNavigation?ls(3,[{provide:_.hnV,multi:!0,useFactory:()=>{const S=(0,_.WQX)(Na);return()=>{S.setUpLocationChangeListener()}}},{provide:Vd,useValue:2}]).\u0275providers:[],"enabledBlocking"===b.initialNavigation?ls(2,[{provide:Vd,useValue:0},{provide:_.hnV,multi:!0,deps:[_.zZn],useFactory:S=>{const P=S.get(Ut.hj,Promise.resolve());return()=>P.then(()=>new Promise(T=>{const k=S.get(Na),ee=S.get(Ug);Ma(k,()=>{T(!0)}),S.get(Lr).afterPreactivation=()=>(T(!0),ee.closed?(0,C.of)(void 0):ee),k.initialNavigation()}))}}]).\u0275providers:[]]}const kv=new _.nKC("")},3656:(hn,rt,W)=>{"use strict";W.d(rt,{Yq:()=>pn,TS:()=>$t,sR:()=>Tt,el:()=>fo,Sb:()=>Kr,QE:()=>go,CF:()=>cr,Rg:()=>vr,p4:()=>Do,jM:()=>Ci,q9:()=>Gn,Kb:()=>ao,CE:()=>Pn,pF:()=>Nn,fL:()=>Ho,YV:()=>pi,er:()=>gi,z3:()=>li});var _=W(467),g=W(9842),ae=W(3953),xe=W(70),X=W(177),C=W(5531),pe=W(4442);var Pt=W(1413),Ut=W(3726),Gt=W(4412),Wt=W(4572),Sn=W(7673),Dt=W(1635),Te=W(5964),Z=W(5558),Y=W(3669),oe=W(9974),Ie=W(4360);function Ye(Q,ne){return Q===ne}var je=W(4341);const qt=["tabsInner"];let gn=(()=>{var Q;class ne{constructor(J,me){(0,g.A)(this,"doc",void 0),(0,g.A)(this,"_readyPromise",void 0),(0,g.A)(this,"win",void 0),(0,g.A)(this,"backButton",new Pt.B),(0,g.A)(this,"keyboardDidShow",new Pt.B),(0,g.A)(this,"keyboardDidHide",new Pt.B),(0,g.A)(this,"pause",new Pt.B),(0,g.A)(this,"resume",new Pt.B),(0,g.A)(this,"resize",new Pt.B),this.doc=J,me.run(()=>{var et;let Vt;this.win=J.defaultView,this.backButton.subscribeWithPriority=function(rn,Tn){return this.subscribe(lr=>lr.register(rn,xr=>me.run(()=>Tn(xr))))},Hn(this.pause,J,"pause",me),Hn(this.resume,J,"resume",me),Hn(this.backButton,J,"ionBackButton",me),Hn(this.resize,this.win,"resize",me),Hn(this.keyboardDidShow,this.win,"ionKeyboardDidShow",me),Hn(this.keyboardDidHide,this.win,"ionKeyboardDidHide",me),this._readyPromise=new Promise(rn=>{Vt=rn}),null!==(et=this.win)&&void 0!==et&&et.cordova?J.addEventListener("deviceready",()=>{Vt("cordova")},{once:!0}):Vt("dom")})}is(J){return(0,C.a)(this.win,J)}platforms(){return(0,C.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(J){return _r(this.win.location.href,J)}isLandscape(){return!this.isPortrait()}isPortrait(){var J,me;return null===(J=(me=this.win).matchMedia)||void 0===J?void 0:J.call(me,"(orientation: portrait)").matches}testUserAgent(J){const me=this.win.navigator;return!!(null!=me&&me.userAgent&&me.userAgent.indexOf(J)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return Q=ne,(0,g.A)(ne,"\u0275fac",function(J){return new(J||Q)(ae.KVO(X.qQ),ae.KVO(ae.SKi))}),(0,g.A)(ne,"\u0275prov",ae.jDH({token:Q,factory:Q.\u0275fac,providedIn:"root"})),ne})();const _r=(Q,ne)=>{ne=ne.replace(/[[\]\\]/g,"\\$&");const J=new RegExp("[\\?&]"+ne+"=([^&#]*)").exec(Q);return J?decodeURIComponent(J[1].replace(/\+/g," ")):null},Hn=(Q,ne,we,J)=>{ne&&ne.addEventListener(we,me=>{J.run(()=>{Q.next(null!=me?me.detail:void 0)})})};let Gn=(()=>{var Q;class ne{constructor(J,me,et,Vt){(0,g.A)(this,"location",void 0),(0,g.A)(this,"serializer",void 0),(0,g.A)(this,"router",void 0),(0,g.A)(this,"topOutlet",void 0),(0,g.A)(this,"direction",Kt),(0,g.A)(this,"animated",zn),(0,g.A)(this,"animationBuilder",void 0),(0,g.A)(this,"guessDirection","forward"),(0,g.A)(this,"guessAnimation",void 0),(0,g.A)(this,"lastNavId",-1),this.location=me,this.serializer=et,this.router=Vt,Vt&&Vt.events.subscribe(rn=>{if(rn instanceof xe.Z){const Tn=rn.restoredState?rn.restoredState.navigationId:rn.id;this.guessDirection=this.guessAnimation=Tn<this.lastNavId?"back":"forward",this.lastNavId="forward"===this.guessDirection?rn.id:Tn}}),J.backButton.subscribeWithPriority(0,rn=>{this.pop(),rn()})}navigateForward(J,me={}){return this.setDirection("forward",me.animated,me.animationDirection,me.animation),this.navigate(J,me)}navigateBack(J,me={}){return this.setDirection("back",me.animated,me.animationDirection,me.animation),this.navigate(J,me)}navigateRoot(J,me={}){return this.setDirection("root",me.animated,me.animationDirection,me.animation),this.navigate(J,me)}back(J={animated:!0,animationDirection:"back"}){return this.setDirection("back",J.animated,J.animationDirection,J.animation),this.location.back()}pop(){var J=this;return(0,_.A)(function*(){let me=J.topOutlet;for(;me;){if(yield me.pop())return!0;me=me.parentOutlet}return!1})()}setDirection(J,me,et,Vt){this.direction=J,this.animated=Jn(J,me,et),this.animationBuilder=Vt}setTopOutlet(J){this.topOutlet=J}consumeTransition(){let me,J="root";const et=this.animationBuilder;return"auto"===this.direction?(J=this.guessDirection,me=this.guessAnimation):(me=this.animated,J=this.direction),this.direction=Kt,this.animated=zn,this.animationBuilder=void 0,{direction:J,animation:me,animationBuilder:et}}navigate(J,me){if(Array.isArray(J))return this.router.navigate(J,me);{const et=this.serializer.parse(J.toString());return void 0!==me.queryParams&&(et.queryParams={...me.queryParams}),void 0!==me.fragment&&(et.fragment=me.fragment),this.router.navigateByUrl(et,me)}}}return Q=ne,(0,g.A)(ne,"\u0275fac",function(J){return new(J||Q)(ae.KVO(gn),ae.KVO(X.aZ),ae.KVO(xe.Sd),ae.KVO(xe.Ix,8))}),(0,g.A)(ne,"\u0275prov",ae.jDH({token:Q,factory:Q.\u0275fac,providedIn:"root"})),ne})();const Jn=(Q,ne,we)=>{if(!1!==ne){if(void 0!==we)return we;if("forward"===Q||"back"===Q)return Q;if("root"===Q&&!0===ne)return"forward"}},Kt="auto",zn=void 0;let $t=(()=>{var Q;class ne{get(J,me){const et=St();return et?et.get(J,me):null}getBoolean(J,me){const et=St();return!!et&&et.getBoolean(J,me)}getNumber(J,me){const et=St();return et?et.getNumber(J,me):0}}return Q=ne,(0,g.A)(ne,"\u0275fac",function(J){return new(J||Q)}),(0,g.A)(ne,"\u0275prov",ae.jDH({token:Q,factory:Q.\u0275fac,providedIn:"root"})),ne})();const Tt=new ae.nKC("USERCONFIG"),St=()=>{if(typeof window<"u"){const Q=window.Ionic;if(null!=Q&&Q.config)return Q.config}return null};class un{constructor(ne={}){(0,g.A)(this,"data",void 0),this.data=ne,console.warn("[Ionic Warning]: NavParams has been deprecated in favor of using Angular's input API. Developers should migrate to either the @Input decorator or the Signals-based input API.")}get(ne){return this.data[ne]}}let pn=(()=>{var Q;class ne{constructor(){(0,g.A)(this,"zone",(0,ae.WQX)(ae.SKi)),(0,g.A)(this,"applicationRef",(0,ae.WQX)(ae.o8S)),(0,g.A)(this,"config",(0,ae.WQX)(Tt))}create(J,me,et){var Vt;return new yr(J,me,this.applicationRef,this.zone,et,null!==(Vt=this.config.useSetInputAPI)&&void 0!==Vt&&Vt)}}return Q=ne,(0,g.A)(ne,"\u0275fac",function(J){return new(J||Q)}),(0,g.A)(ne,"\u0275prov",ae.jDH({token:Q,factory:Q.\u0275fac})),ne})();class yr{constructor(ne,we,J,me,et,Vt){(0,g.A)(this,"environmentInjector",void 0),(0,g.A)(this,"injector",void 0),(0,g.A)(this,"applicationRef",void 0),(0,g.A)(this,"zone",void 0),(0,g.A)(this,"elementReferenceKey",void 0),(0,g.A)(this,"enableSignalsSupport",void 0),(0,g.A)(this,"elRefMap",new WeakMap),(0,g.A)(this,"elEventsMap",new WeakMap),this.environmentInjector=ne,this.injector=we,this.applicationRef=J,this.zone=me,this.elementReferenceKey=et,this.enableSignalsSupport=Vt}attachViewToDom(ne,we,J,me){return this.zone.run(()=>new Promise(et=>{const Vt={...J};void 0!==this.elementReferenceKey&&(Vt[this.elementReferenceKey]=ne),et(Zn(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,ne,we,Vt,me,this.elementReferenceKey,this.enableSignalsSupport))}))}removeViewFromDom(ne,we){return this.zone.run(()=>new Promise(J=>{const me=this.elRefMap.get(we);if(me){me.destroy(),this.elRefMap.delete(we);const et=this.elEventsMap.get(we);et&&(et(),this.elEventsMap.delete(we))}J()}))}}const Zn=(Q,ne,we,J,me,et,Vt,rn,Tn,lr,xr,ni)=>{const Ai=ae.zZn.create({providers:fi(Tn),parent:we}),ci=(0,ae.a0P)(rn,{environmentInjector:ne,elementInjector:Ai}),mi=ci.instance,Fi=ci.location.nativeElement;if(Tn)if(xr&&void 0!==mi[xr]&&console.error(`[Ionic Error]: ${xr} is a reserved property when using ${Vt.tagName.toLowerCase()}. Rename or remove the "${xr}" property from ${rn.name}.`),!0===ni&&void 0!==ci.setInput){const{modal:Ti,popover:Ro,...Ee}=Tn;for(const _e in Ee)ci.setInput(_e,Ee[_e]);void 0!==Ti&&Object.assign(mi,{modal:Ti}),void 0!==Ro&&Object.assign(mi,{popover:Ro})}else Object.assign(mi,Tn);if(lr)for(const Ti of lr)Fi.classList.add(Ti);const Bn=Ot(Q,mi,Fi);return Vt.appendChild(Fi),J.attachView(ci.hostView),me.set(Fi,ci),et.set(Fi,Bn),Fi},bn=[pe.L,pe.a,pe.b,pe.c,pe.d],Ot=(Q,ne,we)=>Q.run(()=>{const J=bn.filter(me=>"function"==typeof ne[me]).map(me=>{const et=Vt=>ne[me](Vt.detail);return we.addEventListener(me,et),()=>we.removeEventListener(me,et)});return()=>J.forEach(me=>me())}),qr=new ae.nKC("NavParamsToken"),fi=Q=>[{provide:qr,useValue:Q},{provide:un,useFactory:Ir,deps:[qr]}],Ir=Q=>new un(Q),Rr=(Q,ne)=>{const we=Q.prototype;ne.forEach(J=>{Object.defineProperty(we,J,{get(){return this.el[J]},set(me){this.z.runOutsideAngular(()=>this.el[J]=me)}})})},ei=(Q,ne)=>{const we=Q.prototype;ne.forEach(J=>{we[J]=function(){const me=arguments;return this.z.runOutsideAngular(()=>this.el[J].apply(this.el,me))}})},so=(Q,ne,we)=>{we.forEach(J=>Q[J]=(0,Ut.R)(ne,J))};function hr(Q){return function(we){const{defineCustomElementFn:J,inputs:me,methods:et}=Q;return void 0!==J&&J(),me&&Rr(we,me),et&&ei(we,et),we}}const Ns=["alignment","animated","arrow","keepContentsMounted","backdropDismiss","cssClass","dismissOnSelect","enterAnimation","event","focusTrap","isOpen","keyboardClose","leaveAnimation","mode","showBackdrop","translucent","trigger","triggerAction","reference","size","side"],nr=["present","dismiss","onDidDismiss","onWillDismiss"];let cr=(()=>{var Q;let ne=((0,g.A)(Q=class{constructor(J,me,et){(0,g.A)(this,"z",void 0),(0,g.A)(this,"template",void 0),(0,g.A)(this,"isCmpOpen",!1),(0,g.A)(this,"el",void 0),this.z=et,this.el=me.nativeElement,this.el.addEventListener("ionMount",()=>{this.isCmpOpen=!0,J.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,J.detectChanges()}),so(this,this.el,["ionPopoverDidPresent","ionPopoverWillPresent","ionPopoverWillDismiss","ionPopoverDidDismiss","didPresent","willPresent","willDismiss","didDismiss"])}},"\u0275fac",function(J){return new(J||Q)(ae.rXU(ae.gRc),ae.rXU(ae.aKT),ae.rXU(ae.SKi))}),(0,g.A)(Q,"\u0275dir",ae.FsC({type:Q,selectors:[["ion-popover"]],contentQueries:function(J,me,et){if(1&J&&ae.wni(et,ae.C4Q,5),2&J){let Vt;ae.mGM(Vt=ae.lsd())&&(me.template=Vt.first)}},inputs:{alignment:"alignment",animated:"animated",arrow:"arrow",keepContentsMounted:"keepContentsMounted",backdropDismiss:"backdropDismiss",cssClass:"cssClass",dismissOnSelect:"dismissOnSelect",enterAnimation:"enterAnimation",event:"event",focusTrap:"focusTrap",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",showBackdrop:"showBackdrop",translucent:"translucent",trigger:"trigger",triggerAction:"triggerAction",reference:"reference",size:"size",side:"side"}})),Q);return ne=(0,Dt.Cg)([hr({inputs:Ns,methods:nr})],ne),ne})();const fr=["animated","keepContentsMounted","backdropBreakpoint","backdropDismiss","breakpoints","canDismiss","cssClass","enterAnimation","event","focusTrap","handle","handleBehavior","initialBreakpoint","isOpen","keyboardClose","leaveAnimation","mode","presentingElement","showBackdrop","translucent","trigger"],Dn=["present","dismiss","onDidDismiss","onWillDismiss","setCurrentBreakpoint","getCurrentBreakpoint"];let Kr=(()=>{var Q;let ne=((0,g.A)(Q=class{constructor(J,me,et){(0,g.A)(this,"z",void 0),(0,g.A)(this,"template",void 0),(0,g.A)(this,"isCmpOpen",!1),(0,g.A)(this,"el",void 0),this.z=et,this.el=me.nativeElement,this.el.addEventListener("ionMount",()=>{this.isCmpOpen=!0,J.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,J.detectChanges()}),so(this,this.el,["ionModalDidPresent","ionModalWillPresent","ionModalWillDismiss","ionModalDidDismiss","ionBreakpointDidChange","didPresent","willPresent","willDismiss","didDismiss"])}},"\u0275fac",function(J){return new(J||Q)(ae.rXU(ae.gRc),ae.rXU(ae.aKT),ae.rXU(ae.SKi))}),(0,g.A)(Q,"\u0275dir",ae.FsC({type:Q,selectors:[["ion-modal"]],contentQueries:function(J,me,et){if(1&J&&ae.wni(et,ae.C4Q,5),2&J){let Vt;ae.mGM(Vt=ae.lsd())&&(me.template=Vt.first)}},inputs:{animated:"animated",keepContentsMounted:"keepContentsMounted",backdropBreakpoint:"backdropBreakpoint",backdropDismiss:"backdropDismiss",breakpoints:"breakpoints",canDismiss:"canDismiss",cssClass:"cssClass",enterAnimation:"enterAnimation",event:"event",focusTrap:"focusTrap",handle:"handle",handleBehavior:"handleBehavior",initialBreakpoint:"initialBreakpoint",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",presentingElement:"presentingElement",showBackdrop:"showBackdrop",translucent:"translucent",trigger:"trigger"}})),Q);return ne=(0,Dt.Cg)([hr({inputs:fr,methods:Dn})],ne),ne})();const Fr=(Q,ne)=>((Q=Q.filter(we=>we.stackId!==ne.stackId)).push(ne),Q),gt=(Q,ne)=>{const we=Q.createUrlTree(["."],{relativeTo:ne});return Q.serializeUrl(we)},$e=(Q,ne)=>!ne||Q.stackId!==ne.stackId,bt=(Q,ne)=>{if(!Q)return;const we=ke(ne);for(let J=0;J<we.length;J++){if(J>=Q.length)return we[J];if(we[J]!==Q[J])return}},ke=Q=>Q.split("/").map(ne=>ne.trim()).filter(ne=>""!==ne),yt=Q=>{Q&&(Q.ref.destroy(),Q.unlistenEvents())};class zt{constructor(ne,we,J,me,et,Vt){(0,g.A)(this,"containerEl",void 0),(0,g.A)(this,"router",void 0),(0,g.A)(this,"navCtrl",void 0),(0,g.A)(this,"zone",void 0),(0,g.A)(this,"location",void 0),(0,g.A)(this,"views",[]),(0,g.A)(this,"runningTask",void 0),(0,g.A)(this,"skipTransition",!1),(0,g.A)(this,"tabsPrefix",void 0),(0,g.A)(this,"activeView",void 0),(0,g.A)(this,"nextId",0),this.containerEl=we,this.router=J,this.navCtrl=me,this.zone=et,this.location=Vt,this.tabsPrefix=void 0!==ne?ke(ne):void 0}createView(ne,we){var J;const me=gt(this.router,we),et=null==ne||null===(J=ne.location)||void 0===J?void 0:J.nativeElement,Vt=Ot(this.zone,ne.instance,et);return{id:this.nextId++,stackId:bt(this.tabsPrefix,me),unlistenEvents:Vt,element:et,ref:ne,url:me}}getExistingView(ne){const we=gt(this.router,ne),J=this.views.find(me=>me.url===we);return J&&J.ref.changeDetectorRef.reattach(),J}setActive(ne){var we,J;const me=this.navCtrl.consumeTransition();let{direction:et,animation:Vt,animationBuilder:rn}=me;const Tn=this.activeView,lr=$e(ne,Tn);lr&&(et="back",Vt=void 0);const xr=this.views.slice();let ni;const Ai=this.router;Ai.getCurrentNavigation?ni=Ai.getCurrentNavigation():null!==(we=Ai.navigations)&&void 0!==we&&we.value&&(ni=Ai.navigations.value),null!==(J=ni)&&void 0!==J&&null!==(J=J.extras)&&void 0!==J&&J.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const ci=this.views.includes(ne),mi=this.insertView(ne,et);ci||ne.ref.changeDetectorRef.detectChanges();const Fi=ne.animationBuilder;return void 0===rn&&"back"===et&&!lr&&void 0!==Fi&&(rn=Fi),Tn&&(Tn.animationBuilder=rn),this.zone.runOutsideAngular(()=>this.wait(()=>(Tn&&Tn.ref.changeDetectorRef.detach(),ne.ref.changeDetectorRef.reattach(),this.transition(ne,Tn,Vt,this.canGoBack(1),!1,rn).then(()=>En(ne,mi,xr,this.location,this.zone)).then(()=>({enteringView:ne,direction:et,animation:Vt,tabSwitch:lr})))))}canGoBack(ne,we=this.getActiveStackId()){return this.getStack(we).length>ne}pop(ne,we=this.getActiveStackId()){return this.zone.run(()=>{const J=this.getStack(we);if(J.length<=ne)return Promise.resolve(!1);const me=J[J.length-ne-1];let et=me.url;const Vt=me.savedData;if(Vt){var rn;const lr=Vt.get("primary");null!=lr&&null!==(rn=lr.route)&&void 0!==rn&&null!==(rn=rn._routerState)&&void 0!==rn&&rn.snapshot.url&&(et=lr.route._routerState.snapshot.url)}const{animationBuilder:Tn}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(et,{...me.savedExtras,animation:Tn}).then(()=>!0)})}startBackTransition(){const ne=this.activeView;if(ne){const we=this.getStack(ne.stackId),J=we[we.length-2],me=J.animationBuilder;return this.wait(()=>this.transition(J,ne,"back",this.canGoBack(2),!0,me))}return Promise.resolve()}endBackTransition(ne){ne?(this.skipTransition=!0,this.pop(1)):this.activeView&&Ln(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(ne){const we=this.getStack(ne);return we.length>0?we[we.length-1]:void 0}getRootUrl(ne){const we=this.getStack(ne);return we.length>0?we[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}getActiveView(){return this.activeView}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(yt),this.activeView=void 0,this.views=[]}getStack(ne){return this.views.filter(we=>we.stackId===ne)}insertView(ne,we){return this.activeView=ne,this.views=((Q,ne,we)=>"root"===we?Fr(Q,ne):"forward"===we?((Q,ne)=>(Q.indexOf(ne)>=0?Q=Q.filter(J=>J.stackId!==ne.stackId||J.id<=ne.id):Q.push(ne),Q))(Q,ne):((Q,ne)=>Q.indexOf(ne)>=0?Q.filter(J=>J.stackId!==ne.stackId||J.id<=ne.id):Fr(Q,ne))(Q,ne))(this.views,ne,we),this.views.slice()}transition(ne,we,J,me,et,Vt){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(we===ne)return Promise.resolve(!1);const rn=ne?ne.element:void 0,Tn=we?we.element:void 0,lr=this.containerEl;return rn&&rn!==Tn&&(rn.classList.add("ion-page"),rn.classList.add("ion-page-invisible"),lr.commit)?lr.commit(rn,Tn,{duration:void 0===J?0:void 0,direction:J,showGoBack:me,progressAnimation:et,animationBuilder:Vt}):Promise.resolve(!1)}wait(ne){var we=this;return(0,_.A)(function*(){void 0!==we.runningTask&&(yield we.runningTask,we.runningTask=void 0);const J=we.runningTask=ne();return J.finally(()=>we.runningTask=void 0),J})()}}const En=(Q,ne,we,J,me)=>"function"==typeof requestAnimationFrame?new Promise(et=>{requestAnimationFrame(()=>{Ln(Q,ne,we,J,me),et()})}):Promise.resolve(),Ln=(Q,ne,we,J,me)=>{me.run(()=>we.filter(et=>!ne.includes(et)).forEach(yt)),ne.forEach(et=>{const rn=J.path().split("?")[0].split("#")[0];if(et!==Q&&et.url!==rn){const Tn=et.element;Tn.setAttribute("aria-hidden","true"),Tn.classList.add("ion-page-hidden"),et.ref.changeDetectorRef.detach()}})};let vr=(()=>{var Q;class ne{get activatedComponentRef(){return this.activated}set animation(J){this.nativeEl.animation=J}set animated(J){this.nativeEl.animated=J}set swipeGesture(J){this._swipeGesture=J,this.nativeEl.swipeHandler=J?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:me=>this.stackCtrl.endBackTransition(me)}:void 0}constructor(J,me,et,Vt,rn,Tn,lr,xr){(0,g.A)(this,"parentOutlet",void 0),(0,g.A)(this,"nativeEl",void 0),(0,g.A)(this,"activatedView",null),(0,g.A)(this,"tabsPrefix",void 0),(0,g.A)(this,"_swipeGesture",void 0),(0,g.A)(this,"stackCtrl",void 0),(0,g.A)(this,"proxyMap",new WeakMap),(0,g.A)(this,"currentActivatedRoute$",new Gt.t(null)),(0,g.A)(this,"activated",null),(0,g.A)(this,"_activatedRoute",null),(0,g.A)(this,"name",xe.Xk),(0,g.A)(this,"stackWillChange",new ae.bkB),(0,g.A)(this,"stackDidChange",new ae.bkB),(0,g.A)(this,"activateEvents",new ae.bkB),(0,g.A)(this,"deactivateEvents",new ae.bkB),(0,g.A)(this,"parentContexts",(0,ae.WQX)(xe.Zp)),(0,g.A)(this,"location",(0,ae.WQX)(ae.c1b)),(0,g.A)(this,"environmentInjector",(0,ae.WQX)(ae.uvJ)),(0,g.A)(this,"inputBinder",(0,ae.WQX)(er,{optional:!0})),(0,g.A)(this,"supportsBindingToComponentInputs",!0),(0,g.A)(this,"config",(0,ae.WQX)($t)),(0,g.A)(this,"navCtrl",(0,ae.WQX)(Gn)),this.parentOutlet=xr,this.nativeEl=Vt.nativeElement,this.name=J||xe.Xk,this.tabsPrefix="true"===me?gt(rn,lr):void 0,this.stackCtrl=new zt(this.tabsPrefix,this.nativeEl,rn,this.navCtrl,Tn,et),this.parentContexts.onChildOutletCreated(this.name,this)}ngOnDestroy(){var J;this.stackCtrl.destroy(),null===(J=this.inputBinder)||void 0===J||J.unsubscribeFromRouteData(this)}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(!this.activated){const J=this.getContext();null!=J&&J.route&&this.activateWith(J.route,J.injector)}new Promise(J=>((Q,ne)=>{Q.componentOnReady?Q.componentOnReady().then(we=>ne(we)):(Q=>{"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Q):"function"==typeof requestAnimationFrame?requestAnimationFrame(Q):setTimeout(Q)})(()=>ne(Q))})(this.nativeEl,J)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(J,me){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const me=this.getContext();this.activatedView.savedData=new Map(me.children.contexts);const et=this.activatedView.savedData.get("primary");if(et&&me.route&&(et.route={...me.route}),this.activatedView.savedExtras={},me.route){const Vt=me.route.snapshot;this.activatedView.savedExtras.queryParams=Vt.queryParams,this.activatedView.savedExtras.fragment=Vt.fragment}}const J=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(J)}}activateWith(J,me){var et;if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=J;let Vt,rn=this.stackCtrl.getExistingView(J);if(rn){Vt=this.activated=rn.ref;const xr=rn.savedData;xr&&(this.getContext().children.contexts=xr),this.updateActivatedRouteProxy(Vt.instance,J)}else{var Tn;const xr=J._futureSnapshot,ni=this.parentContexts.getOrCreateContext(this.name).children,Ai=new Gt.t(null),ci=this.createActivatedRouteProxy(Ai,J),mi=new Xt(ci,ni,this.location.injector),Fi=null!==(Tn=xr.routeConfig.component)&&void 0!==Tn?Tn:xr.component;Vt=this.activated=this.outletContent.createComponent(Fi,{index:this.outletContent.length,injector:mi,environmentInjector:null!=me?me:this.environmentInjector}),Ai.next(Vt.instance),rn=this.stackCtrl.createView(this.activated,J),this.proxyMap.set(Vt.instance,ci),this.currentActivatedRoute$.next({component:Vt.instance,activatedRoute:J})}null===(et=this.inputBinder)||void 0===et||et.bindActivatedRouteToOutletComponent(this),this.activatedView=rn,this.navCtrl.setTopOutlet(this);const lr=this.stackCtrl.getActiveView();this.stackWillChange.emit({enteringView:rn,tabSwitch:$e(rn,lr)}),this.stackCtrl.setActive(rn).then(xr=>{this.activateEvents.emit(Vt.instance),this.stackDidChange.emit(xr)})}canGoBack(J=1,me){return this.stackCtrl.canGoBack(J,me)}pop(J=1,me){return this.stackCtrl.pop(J,me)}getLastUrl(J){const me=this.stackCtrl.getLastUrl(J);return me?me.url:void 0}getLastRouteView(J){return this.stackCtrl.getLastUrl(J)}getRootView(J){return this.stackCtrl.getRootUrl(J)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(J,me){const et=new xe.nX;return et._futureSnapshot=me._futureSnapshot,et._routerState=me._routerState,et.snapshot=me.snapshot,et.outlet=me.outlet,et.component=me.component,et._paramMap=this.proxyObservable(J,"paramMap"),et._queryParamMap=this.proxyObservable(J,"queryParamMap"),et.url=this.proxyObservable(J,"url"),et.params=this.proxyObservable(J,"params"),et.queryParams=this.proxyObservable(J,"queryParams"),et.fragment=this.proxyObservable(J,"fragment"),et.data=this.proxyObservable(J,"data"),et}proxyObservable(J,me){return J.pipe((0,Te.p)(et=>!!et),(0,Z.n)(et=>this.currentActivatedRoute$.pipe((0,Te.p)(Vt=>null!==Vt&&Vt.component===et),(0,Z.n)(Vt=>Vt&&Vt.activatedRoute[me]),function We(Q,ne=Y.D){return Q=null!=Q?Q:Ye,(0,oe.N)((we,J)=>{let me,et=!0;we.subscribe((0,Ie._)(J,Vt=>{const rn=ne(Vt);(et||!Q(me,rn))&&(et=!1,me=rn,J.next(Vt))}))})}())))}updateActivatedRouteProxy(J,me){const et=this.proxyMap.get(J);if(!et)throw new Error("Could not find activated route proxy for view");et._futureSnapshot=me._futureSnapshot,et._routerState=me._routerState,et.snapshot=me.snapshot,et.outlet=me.outlet,et.component=me.component,this.currentActivatedRoute$.next({component:J,activatedRoute:me})}}return Q=ne,(0,g.A)(ne,"\u0275fac",function(J){return new(J||Q)(ae.kS0("name"),ae.kS0("tabs"),ae.rXU(X.aZ),ae.rXU(ae.aKT),ae.rXU(xe.Ix),ae.rXU(ae.SKi),ae.rXU(xe.nX),ae.rXU(Q,12))}),(0,g.A)(ne,"\u0275dir",ae.FsC({type:Q,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture",name:"name"},outputs:{stackWillChange:"stackWillChange",stackDidChange:"stackDidChange",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]})),ne})();class Xt{constructor(ne,we,J){(0,g.A)(this,"route",void 0),(0,g.A)(this,"childContexts",void 0),(0,g.A)(this,"parent",void 0),this.route=ne,this.childContexts=we,this.parent=J}get(ne,we){return ne===xe.nX?this.route:ne===xe.Zp?this.childContexts:this.parent.get(ne,we)}}const er=new ae.nKC("");let Sr=(()=>{var Q;class ne{constructor(){(0,g.A)(this,"outletDataSubscriptions",new Map)}bindActivatedRouteToOutletComponent(J){this.unsubscribeFromRouteData(J),this.subscribeToRouteData(J)}unsubscribeFromRouteData(J){var me;null===(me=this.outletDataSubscriptions.get(J))||void 0===me||me.unsubscribe(),this.outletDataSubscriptions.delete(J)}subscribeToRouteData(J){const{activatedRoute:me}=J,et=(0,Wt.z)([me.queryParams,me.params,me.data]).pipe((0,Z.n)(([Vt,rn,Tn],lr)=>(Tn={...Vt,...rn,...Tn},0===lr?(0,Sn.of)(Tn):Promise.resolve(Tn)))).subscribe(Vt=>{if(!J.isActivated||!J.activatedComponentRef||J.activatedRoute!==me||null===me.component)return void this.unsubscribeFromRouteData(J);const rn=(0,ae.HJs)(me.component);if(rn)for(const{templateName:Tn}of rn.inputs)J.activatedComponentRef.setInput(Tn,Vt[Tn]);else this.unsubscribeFromRouteData(J)});this.outletDataSubscriptions.set(J,et)}}return Q=ne,(0,g.A)(ne,"\u0275fac",function(J){return new(J||Q)}),(0,g.A)(ne,"\u0275prov",ae.jDH({token:Q,factory:Q.\u0275fac})),ne})();const pi=()=>({provide:er,useFactory:So,deps:[xe.Ix]});function So(Q){return null!=Q&&Q.componentInputBindingEnabled?new Sr:null}const Ni=["color","defaultHref","disabled","icon","mode","routerAnimation","text","type"];let fo=(()=>{var Q;let ne=((0,g.A)(Q=class{constructor(J,me,et,Vt,rn,Tn){(0,g.A)(this,"routerOutlet",void 0),(0,g.A)(this,"navCtrl",void 0),(0,g.A)(this,"config",void 0),(0,g.A)(this,"r",void 0),(0,g.A)(this,"z",void 0),(0,g.A)(this,"el",void 0),this.routerOutlet=J,this.navCtrl=me,this.config=et,this.r=Vt,this.z=rn,Tn.detach(),this.el=this.r.nativeElement}onClick(J){var me;const et=this.defaultHref||this.config.get("backButtonDefaultHref");null!==(me=this.routerOutlet)&&void 0!==me&&me.canGoBack()?(this.navCtrl.setDirection("back",void 0,void 0,this.routerAnimation),this.routerOutlet.pop(),J.preventDefault()):null!=et&&(this.navCtrl.navigateBack(et,{animation:this.routerAnimation}),J.preventDefault())}},"\u0275fac",function(J){return new(J||Q)(ae.rXU(vr,8),ae.rXU(Gn),ae.rXU($t),ae.rXU(ae.aKT),ae.rXU(ae.SKi),ae.rXU(ae.gRc))}),(0,g.A)(Q,"\u0275dir",ae.FsC({type:Q,hostBindings:function(J,me){1&J&&ae.bIt("click",function(Vt){return me.onClick(Vt)})},inputs:{color:"color",defaultHref:"defaultHref",disabled:"disabled",icon:"icon",mode:"mode",routerAnimation:"routerAnimation",text:"text",type:"type"}})),Q);return ne=(0,Dt.Cg)([hr({inputs:Ni})],ne),ne})(),Pn=(()=>{var Q;class ne{constructor(J,me,et,Vt,rn){(0,g.A)(this,"locationStrategy",void 0),(0,g.A)(this,"navCtrl",void 0),(0,g.A)(this,"elementRef",void 0),(0,g.A)(this,"router",void 0),(0,g.A)(this,"routerLink",void 0),(0,g.A)(this,"routerDirection","forward"),(0,g.A)(this,"routerAnimation",void 0),this.locationStrategy=J,this.navCtrl=me,this.elementRef=et,this.router=Vt,this.routerLink=rn}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var J;if(null!==(J=this.routerLink)&&void 0!==J&&J.urlTree){const me=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=me}}onClick(J){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),J.preventDefault()}}return Q=ne,(0,g.A)(ne,"\u0275fac",function(J){return new(J||Q)(ae.rXU(X.hb),ae.rXU(Gn),ae.rXU(ae.aKT),ae.rXU(xe.Ix),ae.rXU(xe.Wk,8))}),(0,g.A)(ne,"\u0275dir",ae.FsC({type:Q,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(J,me){1&J&&ae.bIt("click",function(Vt){return me.onClick(Vt)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[ae.OA$]})),ne})(),Nn=(()=>{var Q;class ne{constructor(J,me,et,Vt,rn){(0,g.A)(this,"locationStrategy",void 0),(0,g.A)(this,"navCtrl",void 0),(0,g.A)(this,"elementRef",void 0),(0,g.A)(this,"router",void 0),(0,g.A)(this,"routerLink",void 0),(0,g.A)(this,"routerDirection","forward"),(0,g.A)(this,"routerAnimation",void 0),this.locationStrategy=J,this.navCtrl=me,this.elementRef=et,this.router=Vt,this.routerLink=rn}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var J;if(null!==(J=this.routerLink)&&void 0!==J&&J.urlTree){const me=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=me}}onClick(){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation)}}return Q=ne,(0,g.A)(ne,"\u0275fac",function(J){return new(J||Q)(ae.rXU(X.hb),ae.rXU(Gn),ae.rXU(ae.aKT),ae.rXU(xe.Ix),ae.rXU(xe.Wk,8))}),(0,g.A)(ne,"\u0275dir",ae.FsC({type:Q,selectors:[["a","routerLink",""],["area","routerLink",""]],hostBindings:function(J,me){1&J&&ae.bIt("click",function(){return me.onClick()})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[ae.OA$]})),ne})();const Xi=["animated","animation","root","rootParams","swipeGesture"],po=["push","insert","insertPages","pop","popTo","popToRoot","removeIndex","setRoot","setPages","getActive","getByIndex","canGoBack","getPrevious"];let go=(()=>{var Q;let ne=((0,g.A)(Q=class{constructor(J,me,et,Vt,rn,Tn){(0,g.A)(this,"z",void 0),(0,g.A)(this,"el",void 0),this.z=rn,Tn.detach(),this.el=J.nativeElement,J.nativeElement.delegate=Vt.create(me,et),so(this,this.el,["ionNavDidChange","ionNavWillChange"])}},"\u0275fac",function(J){return new(J||Q)(ae.rXU(ae.aKT),ae.rXU(ae.uvJ),ae.rXU(ae.zZn),ae.rXU(pn),ae.rXU(ae.SKi),ae.rXU(ae.gRc))}),(0,g.A)(Q,"\u0275dir",ae.FsC({type:Q,inputs:{animated:"animated",animation:"animation",root:"root",rootParams:"rootParams",swipeGesture:"swipeGesture"}})),Q);return ne=(0,Dt.Cg)([hr({inputs:Xi,methods:po})],ne),ne})(),Do=(()=>{var Q;class ne{constructor(J){(0,g.A)(this,"navCtrl",void 0),(0,g.A)(this,"tabsInner",void 0),(0,g.A)(this,"ionTabsWillChange",new ae.bkB),(0,g.A)(this,"ionTabsDidChange",new ae.bkB),(0,g.A)(this,"tabBarSlot","bottom"),this.navCtrl=J}ngAfterContentInit(){this.detectSlotChanges()}ngAfterContentChecked(){this.detectSlotChanges()}onStackWillChange({enteringView:J,tabSwitch:me}){const et=J.stackId;me&&void 0!==et&&this.ionTabsWillChange.emit({tab:et})}onStackDidChange({enteringView:J,tabSwitch:me}){const et=J.stackId;me&&void 0!==et&&(this.tabBar&&(this.tabBar.selectedTab=et),this.ionTabsDidChange.emit({tab:et}))}select(J){const me="string"==typeof J,et=me?J:J.detail.tab,Vt=this.outlet.getActiveStackId()===et,rn=`${this.outlet.tabsPrefix}/${et}`;if(me||J.stopPropagation(),Vt){const Tn=this.outlet.getActiveStackId(),lr=this.outlet.getLastRouteView(Tn);if((null==lr?void 0:lr.url)===rn)return;const xr=this.outlet.getRootView(et);return this.navCtrl.navigateRoot(rn,{...xr&&rn===xr.url&&xr.savedExtras,animated:!0,animationDirection:"back"})}{const Tn=this.outlet.getLastRouteView(et);return this.navCtrl.navigateRoot((null==Tn?void 0:Tn.url)||rn,{...null==Tn?void 0:Tn.savedExtras,animated:!0,animationDirection:"back"})}}getSelected(){return this.outlet.getActiveStackId()}detectSlotChanges(){this.tabBars.forEach(J=>{const me=J.el.getAttribute("slot");me!==this.tabBarSlot&&(this.tabBarSlot=me,this.relocateTabBar())})}relocateTabBar(){const J=this.tabBar.el;"top"===this.tabBarSlot?this.tabsInner.nativeElement.before(J):this.tabsInner.nativeElement.after(J)}}return Q=ne,(0,g.A)(ne,"\u0275fac",function(J){return new(J||Q)(ae.rXU(Gn))}),(0,g.A)(ne,"\u0275dir",ae.FsC({type:Q,selectors:[["ion-tabs"]],viewQuery:function(J,me){if(1&J&&ae.GBs(qt,7,ae.aKT),2&J){let et;ae.mGM(et=ae.lsd())&&(me.tabsInner=et.first)}},hostBindings:function(J,me){1&J&&ae.bIt("ionTabButtonClick",function(Vt){return me.select(Vt)})},outputs:{ionTabsWillChange:"ionTabsWillChange",ionTabsDidChange:"ionTabsDidChange"}})),ne})();const gi=Q=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Q):"function"==typeof requestAnimationFrame?requestAnimationFrame(Q):setTimeout(Q);let Ho=(()=>{var Q;class ne{constructor(J,me){(0,g.A)(this,"injector",void 0),(0,g.A)(this,"elementRef",void 0),(0,g.A)(this,"onChange",()=>{}),(0,g.A)(this,"onTouched",()=>{}),(0,g.A)(this,"lastValue",void 0),(0,g.A)(this,"statusChanges",void 0),this.injector=J,this.elementRef=me}writeValue(J){this.elementRef.nativeElement.value=this.lastValue=J,li(this.elementRef)}handleValueChange(J,me){J===this.elementRef.nativeElement&&(me!==this.lastValue&&(this.lastValue=me,this.onChange(me)),li(this.elementRef))}_handleBlurEvent(J){J===this.elementRef.nativeElement&&(this.onTouched(),li(this.elementRef))}registerOnChange(J){this.onChange=J}registerOnTouched(J){this.onTouched=J}setDisabledState(J){this.elementRef.nativeElement.disabled=J}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let J;try{J=this.injector.get(je.vO)}catch{}if(!J)return;J.statusChanges&&(this.statusChanges=J.statusChanges.subscribe(()=>li(this.elementRef)));const me=J.control;me&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(Vt=>{if(typeof me[Vt]<"u"){const rn=me[Vt].bind(me);me[Vt]=(...Tn)=>{rn(...Tn),li(this.elementRef)}}})}}return Q=ne,(0,g.A)(ne,"\u0275fac",function(J){return new(J||Q)(ae.rXU(ae.zZn),ae.rXU(ae.aKT))}),(0,g.A)(ne,"\u0275dir",ae.FsC({type:Q,hostBindings:function(J,me){1&J&&ae.bIt("ionBlur",function(Vt){return me._handleBlurEvent(Vt.target)})}})),ne})();const li=Q=>{gi(()=>{const ne=Q.nativeElement,we=null!=ne.value&&ne.value.toString().length>0,J=Jo(ne);ti(ne,J);const me=ne.closest("ion-item");me&&ti(me,we?[...J,"item-has-value"]:J)})},Jo=Q=>{const ne=Q.classList,we=[];for(let J=0;J<ne.length;J++){const me=ne.item(J);null!==me&&Oi(me,"ng-")&&we.push(`ion-${me.substring(3)}`)}return we},ti=(Q,ne)=>{const we=Q.classList;we.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),we.add(...ne)},Oi=(Q,ne)=>Q.substring(0,ne.length)===ne;class Ci{shouldDetach(ne){return!1}shouldAttach(ne){return!1}store(ne,we){}retrieve(ne){return null}shouldReuseRoute(ne,we){if(ne.routeConfig!==we.routeConfig)return!1;const J=ne.params,me=we.params,et=Object.keys(J),Vt=Object.keys(me);if(et.length!==Vt.length)return!1;for(const rn of et)if(me[rn]!==J[rn])return!1;return!0}}class ao{constructor(ne){(0,g.A)(this,"ctrl",void 0),this.ctrl=ne}create(ne){return this.ctrl.create(ne||{})}dismiss(ne,we,J){return this.ctrl.dismiss(ne,we,J)}getTop(){return this.ctrl.getTop()}}},9465:(hn,rt,W)=>{"use strict";W.d(rt,{U1:()=>gn,he:()=>yt,Rg:()=>mi,bv:()=>ha,N7:()=>Ro,K_:()=>ys});var _=W(9842),g=W(3953),ae=W(4341),xe=W(3656),X=W(1635),pe=(W(3726),W(177)),ue=W(70),Le=(W(9986),W(1331),W(9856),W(361),W(8607),W(4921)),Ze=W(464),tt=(W(6073),W(1070)),At=(W(8476),W(8393));W(1970),W(8669);var _t=W(467);const at=Le.i,It=function(){var R=(0,_t.A)(function*(z,se){if(!(typeof window>"u"))return yield at(),(0,At.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"]],{"type":["typeChanged"],"disabled":["disabledChanged"],"side":["sideChanged"],"swipeGesture":["swipeGestureChanged"]}],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-input-password-toggle",[[33,"ion-input-password-toggle",{"color":[513],"showIcon":[1,"show-icon"],"hideIcon":[1,"hide-icon"],"type":[1025]},null,{"type":["onTypeChange"]}]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]},null,{"activated":["activatedChanged"]}],[1,"ion-fab-list",{"activated":[4],"side":[1]},null,{"activated":["activatedChanged"]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"positionAnchor":[1,"position-anchor"],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"swipeGesture":[1,"swipe-gesture"],"isOpen":[4,"is-open"],"trigger":[1],"revealContentToScreenReader":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"swipeGesture":["swipeGestureChanged"],"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]},null,{"value":["valueChanged"]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]],{"value":["valueChanged"],"disabled":["disabledChanged"],"readonly":["readonlyChanged"]}]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]},null,{"threshold":["thresholdChanged"],"disabled":["disabledChanged"]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[1028],"layout":[1],"type":[1],"value":[8],"checked":[32],"setFocus":[64]},null,{"value":["valueChanged"]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1032],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]],{"color":["colorChanged"],"swipeGesture":["swipeGestureChanged"],"value":["valueChanged"],"disabled":["disabledChanged"]}]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]},null,{"selectedTab":["selectedTabChanged"]}]]],["ion-chip",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[38,"ion-input",{"color":[513],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearInputIcon":[1,"clear-input-icon"],"clearOnEdit":[4,"clear-on-edit"],"counter":[4],"counterFormatter":[16],"debounce":[2],"disabled":[516],"enterkeyhint":[1],"errorText":[1,"error-text"],"fill":[1],"inputmode":[1],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[516],"required":[4],"shape":[1],"spellcheck":[4],"step":[1],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"type":["onTypeChange"],"value":["valueChanged"]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]},null,{"lang":["onLangChanged"],"dir":["onDirChanged"],"debounce":["debounceChanged"],"value":["valueChanged"],"showCancelButton":["showCancelButtonChanged"]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1],"activated":[32]},null,{"disabled":["disabledChanged"]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64],"getLength":[64]},null,{"swipeGesture":["swipeGestureChanged"],"root":["rootChanged"]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-textarea",[[38,"ion-textarea",{"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"fill":[1],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[514],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"counter":[4],"counterFormatter":[16],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"shape":[1],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"value":["valueChanged"]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[513],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]],{"maxItems":["maxItemsChanged"],"itemsBeforeCollapse":["maxItemsChanged"],"itemsAfterCollapse":["maxItemsChanged"]}]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"focusTrap":[4,"focus-trap"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]},null,{"url":["onUpdate"],"component":["onUpdate"],"componentProps":["onComponentProps"]}],[0,"ion-route-redirect",{"from":[1],"to":[1]},null,{"from":["propDidChange"],"to":["propDidChange"]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]},null,{"active":["changeActive"]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]},null,{"src":["srcChanged"]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"label":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"labelPlacement":[1,"label-placement"],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]},null,{"debounce":["debounceChanged"],"min":["minChanged"],"max":["maxChanged"],"activeBarStart":["activeBarStartChanged"],"disabled":["disabledChanged"],"value":["valueChanged"]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32],"isVisible":[64]},null,{"visible":["visibleChanged"],"disabled":["updateState"],"when":["updateState"]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-select_3",[[33,"ion-select",{"cancelText":[1,"cancel-text"],"color":[513],"compareWith":[1,"compare-with"],"disabled":[4],"fill":[1],"interface":[1],"interfaceOptions":[8,"interface-options"],"justify":[1],"label":[1],"labelPlacement":[1,"label-placement"],"multiple":[4],"name":[1],"okText":[1,"ok-text"],"placeholder":[1],"selectedText":[1,"selected-text"],"toggleIcon":[1,"toggle-icon"],"expandedIcon":[1,"expanded-icon"],"shape":[1],"value":[1032],"isExpanded":[32],"open":[64]},null,{"disabled":["styleChanged"],"isExpanded":["styleChanged"],"placeholder":["styleChanged"],"value":["styleChanged"]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]}]]],["ion-picker",[[33,"ion-picker",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-picker-column",[[1,"ion-picker-column",{"disabled":[4],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"ariaLabel":[32],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64],"setFocus":[64]},null,{"aria-label":["ariaLabelChanged"],"value":["valueChange"]}]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"formatOptions":[16],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isTimePopoverOpen":[32],"forceRenderDate":[32],"confirm":[64],"reset":[64],"cancel":[64]},null,{"formatOptions":["formatOptionsChanged"],"disabled":["disabledChanged"],"min":["minChanged"],"max":["maxChanged"],"presentation":["presentationChanged"],"yearValues":["yearValuesChanged"],"monthValues":["monthValuesChanged"],"dayValues":["dayValuesChanged"],"hourValues":["hourValuesChanged"],"minuteValues":["minuteValuesChanged"],"value":["valueChanged"]}],[34,"ion-picker-legacy",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}],[32,"ion-picker-legacy-column",{"col":[16]},null,{"col":["colChanged"]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]},null,{"value":["valueChanged"]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"compareWith":[1,"compare-with"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]],{"value":["valueChanged"]}]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1],"isCircle":[32]},null,{"disabled":["disabledChanged"]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]},null,{"name":["loadIcon"],"src":["loadIcon"],"icon":["loadIcon"],"ios":["loadIcon"],"md":["loadIcon"]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]],{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"],"buttons":["buttonsChanged"],"inputs":["inputsChanged"]}]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"fixedSlotPlacement":[1,"fixed-slot-placement"],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]},null,{"swipeHandler":["swipeHandlerChanged"]}],[33,"ion-title",{"color":[513],"size":[1]},null,{"size":["sizeChanged"]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[38,"ion-buttons",{"collapse":[4]}]]],["ion-picker-column-option",[[33,"ion-picker-column-option",{"disabled":[4],"value":[8],"color":[513],"ariaLabel":[32]},null,{"aria-label":["onAriaLabelChange"]}]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"focusTrap":[4,"focus-trap"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"trigger":["onTriggerChange"],"triggerAction":["onTriggerChange"],"isOpen":["onIsOpenChange"]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[33,"ion-note",{"color":[513]}],[1,"ion-skeleton-text",{"animated":[4]}],[33,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[516],"download":[1],"href":[1],"rel":[1],"lines":[1],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"multipleInputs":[32],"focusable":[32]},[[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]],{"button":["buttonChanged"]}],[38,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]},null,{"color":["colorChanged"],"position":["positionChanged"]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}]]]]'),se)});return function(se,N){return R.apply(this,arguments)}}(),Ne=["*"],ft=["outletContent"],oe=(R,z)=>{const se=R.prototype;z.forEach(N=>{Object.defineProperty(se,N,{get(){return this.el[N]},set(le){this.z.runOutsideAngular(()=>this.el[N]=le)},configurable:!0})})},Ie=(R,z)=>{const se=R.prototype;z.forEach(N=>{se[N]=function(){const le=arguments;return this.z.runOutsideAngular(()=>this.el[N].apply(this.el,le))}})};function je(R){return function(se){const{defineCustomElementFn:N,inputs:le,methods:Ge}=R;return void 0!==N&&N(),le&&oe(se,le),Ge&&Ie(se,Ge),se}}let gn=(()=>{var R;let z=((0,_.A)(R=class{constructor(N,le,Ge){(0,_.A)(this,"z",void 0),(0,_.A)(this,"el",void 0),this.z=Ge,N.detach(),this.el=le.nativeElement}},"\u0275fac",function(N){return new(N||R)(g.rXU(g.gRc),g.rXU(g.aKT),g.rXU(g.SKi))}),(0,_.A)(R,"\u0275cmp",g.VBU({type:R,selectors:[["ion-app"]],ngContentSelectors:Ne,decls:1,vars:0,template:function(N,le){1&N&&(g.NAR(),g.SdG(0))},encapsulation:2,changeDetection:0})),R);return z=(0,X.Cg)([je({})],z),z})(),yt=(()=>{var R;let z=((0,_.A)(R=class{constructor(N,le,Ge){(0,_.A)(this,"z",void 0),(0,_.A)(this,"el",void 0),this.z=Ge,N.detach(),this.el=le.nativeElement}},"\u0275fac",function(N){return new(N||R)(g.rXU(g.gRc),g.rXU(g.aKT),g.rXU(g.SKi))}),(0,_.A)(R,"\u0275cmp",g.VBU({type:R,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:Ne,decls:1,vars:0,template:function(N,le){1&N&&(g.NAR(),g.SdG(0))},encapsulation:2,changeDetection:0})),R);return z=(0,X.Cg)([je({inputs:["color","mode","position"]})],z),z})(),mi=(()=>{var R;class z extends xe.Rg{constructor(N,le,Ge,jr,vi,j,re,ve){super(N,le,Ge,jr,vi,j,re,ve),(0,_.A)(this,"parentOutlet",void 0),(0,_.A)(this,"outletContent",void 0),this.parentOutlet=ve}}return R=z,(0,_.A)(z,"\u0275fac",function(N){return new(N||R)(g.kS0("name"),g.kS0("tabs"),g.rXU(pe.aZ),g.rXU(g.aKT),g.rXU(ue.Ix),g.rXU(g.SKi),g.rXU(ue.nX),g.rXU(R,12))}),(0,_.A)(z,"\u0275cmp",g.VBU({type:R,selectors:[["ion-router-outlet"]],viewQuery:function(N,le){if(1&N&&g.GBs(ft,7,g.c1b),2&N){let Ge;g.mGM(Ge=g.lsd())&&(le.outletContent=Ge.first)}},features:[g.Vt3],ngContentSelectors:Ne,decls:3,vars:0,consts:[["outletContent",""]],template:function(N,le){1&N&&(g.NAR(),g.qex(0,null,0),g.SdG(2),g.bVm())},encapsulation:2})),z})(),Ro=(()=>{var R;class z extends xe.CE{}return R=z,(0,_.A)(z,"\u0275fac",(()=>{let se;return function(le){return(se||(se=g.xGo(R)))(le||R)}})()),(0,_.A)(z,"\u0275dir",g.FsC({type:R,selectors:[["","routerLink","",5,"a",5,"area"]],features:[g.Vt3]})),z})();const ze={provide:ae.cz,useExisting:(0,g.Rfq)(()=>Ht),multi:!0};let Ht=(()=>{var R;class z extends ae.zX{}return R=z,(0,_.A)(z,"\u0275fac",(()=>{let se;return function(le){return(se||(se=g.xGo(R)))(le||R)}})()),(0,_.A)(z,"\u0275dir",g.FsC({type:R,selectors:[["ion-input","type","number","max","","formControlName",""],["ion-input","type","number","max","","formControl",""],["ion-input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(N,le){2&N&&g.BMQ("max",le._enabled?le.max:null)},features:[g.Jv_([ze]),g.Vt3]})),z})();const wn={provide:ae.cz,useExisting:(0,g.Rfq)(()=>$n),multi:!0};let $n=(()=>{var R;class z extends ae.VZ{}return R=z,(0,_.A)(z,"\u0275fac",(()=>{let se;return function(le){return(se||(se=g.xGo(R)))(le||R)}})()),(0,_.A)(z,"\u0275dir",g.FsC({type:R,selectors:[["ion-input","type","number","min","","formControlName",""],["ion-input","type","number","min","","formControl",""],["ion-input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(N,le){2&N&&g.BMQ("min",le._enabled?le.min:null)},features:[g.Jv_([wn]),g.Vt3]})),z})(),ks=(()=>{var R;class z extends xe.Kb{constructor(){super(tt.m),(0,_.A)(this,"angularDelegate",(0,g.WQX)(xe.Yq)),(0,_.A)(this,"injector",(0,g.WQX)(g.zZn)),(0,_.A)(this,"environmentInjector",(0,g.WQX)(g.uvJ))}create(N){return super.create({...N,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return R=z,(0,_.A)(z,"\u0275fac",function(N){return new(N||R)}),(0,_.A)(z,"\u0275prov",g.jDH({token:R,factory:R.\u0275fac})),z})();class Zo extends xe.Kb{constructor(){super(tt.c),(0,_.A)(this,"angularDelegate",(0,g.WQX)(xe.Yq)),(0,_.A)(this,"injector",(0,g.WQX)(g.zZn)),(0,_.A)(this,"environmentInjector",(0,g.WQX)(g.uvJ))}create(z){return super.create({...z,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}let ys=(()=>{var R;class z extends xe.Kb{constructor(){super(tt.t)}}return R=z,(0,_.A)(z,"\u0275fac",function(N){return new(N||R)}),(0,_.A)(z,"\u0275prov",g.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})),z})();const zo=(R,z,se)=>()=>{const N=z.defaultView;if(N&&typeof window<"u"){(0,Ze.s)({...R,_zoneGate:Ge=>se.run(Ge)});const le="__zone_symbol__addEventListener"in z.body?"__zone_symbol__addEventListener":"addEventListener";return function Xe(){var R=[];if(typeof window<"u"){var z=window;(!z.customElements||z.Element&&(!z.Element.prototype.closest||!z.Element.prototype.matches||!z.Element.prototype.remove||!z.Element.prototype.getRootNode))&&R.push(W.e(7278).then(W.t.bind(W,2190,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||z.NodeList&&!z.NodeList.prototype.forEach||!z.fetch||!function(){try{var N=new URL("b","http://a");return N.pathname="c%20d","http://a/c%20d"===N.href&&N.searchParams}catch{return!1}}()||typeof WeakMap>"u")&&R.push(W.e(9329).then(W.t.bind(W,7783,23)))}return Promise.all(R)}().then(()=>It(N,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:xe.er,jmp:Ge=>se.runOutsideAngular(Ge),ael(Ge,jr,vi,j){Ge[le](jr,vi,j)},rel(Ge,jr,vi,j){Ge.removeEventListener(jr,vi,j)}}))}};let ha=(()=>{var R;class z{static forRoot(N={}){return{ngModule:z,providers:[{provide:xe.sR,useValue:N},{provide:g.hnV,useFactory:zo,multi:!0,deps:[xe.sR,pe.qQ,g.SKi]},xe.Yq,(0,xe.YV)()]}}}return R=z,(0,_.A)(z,"\u0275fac",function(N){return new(N||R)}),(0,_.A)(z,"\u0275mod",g.$C({type:R})),(0,_.A)(z,"\u0275inj",g.G2t({providers:[ks,Zo],imports:[pe.MD]})),z})()},467:(hn,rt,W)=>{"use strict";function _(ae,xe,X,C,pe,ue,Ke){try{var Qe=ae[ue](Ke),ye=Qe.value}catch(Ve){return void X(Ve)}Qe.done?xe(ye):Promise.resolve(ye).then(C,pe)}function g(ae){return function(){var xe=this,X=arguments;return new Promise(function(C,pe){var ue=ae.apply(xe,X);function Ke(ye){_(ue,C,pe,Ke,Qe,"next",ye)}function Qe(ye){_(ue,C,pe,Ke,Qe,"throw",ye)}Ke(void 0)})}}W.d(rt,{A:()=>g})},9842:(hn,rt,W)=>{"use strict";function _(X){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(C){return typeof C}:function(C){return C&&"function"==typeof Symbol&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(X)}function xe(X,C,pe){return(C=function ae(X){var C=function g(X,C){if("object"!=_(X)||!X)return X;var pe=X[Symbol.toPrimitive];if(void 0!==pe){var ue=pe.call(X,C||"default");if("object"!=_(ue))return ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===C?String:Number)(X)}(X,"string");return"symbol"==_(C)?C:C+""}(C))in X?Object.defineProperty(X,C,{value:pe,enumerable:!0,configurable:!0,writable:!0}):X[C]=pe,X}W.d(rt,{A:()=>xe})},1635:(hn,rt,W)=>{"use strict";function xe(Z,Y){var oe={};for(var Ie in Z)Object.prototype.hasOwnProperty.call(Z,Ie)&&Y.indexOf(Ie)<0&&(oe[Ie]=Z[Ie]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var We=0;for(Ie=Object.getOwnPropertySymbols(Z);We<Ie.length;We++)Y.indexOf(Ie[We])<0&&Object.prototype.propertyIsEnumerable.call(Z,Ie[We])&&(oe[Ie[We]]=Z[Ie[We]])}return oe}function X(Z,Y,oe,Ie){var je,We=arguments.length,Ye=We<3?Y:null===Ie?Ie=Object.getOwnPropertyDescriptor(Y,oe):Ie;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ye=Reflect.decorate(Z,Y,oe,Ie);else for(var qt=Z.length-1;qt>=0;qt--)(je=Z[qt])&&(Ye=(We<3?je(Ye):We>3?je(Y,oe,Ye):je(Y,oe))||Ye);return We>3&&Ye&&Object.defineProperty(Y,oe,Ye),Ye}function Ve(Z,Y,oe,Ie){return new(oe||(oe=Promise))(function(Ye,je){function qt(Fn){try{fn(Ie.next(Fn))}catch(gn){je(gn)}}function On(Fn){try{fn(Ie.throw(Fn))}catch(gn){je(gn)}}function fn(Fn){Fn.done?Ye(Fn.value):function We(Ye){return Ye instanceof oe?Ye:new oe(function(je){je(Ye)})}(Fn.value).then(qt,On)}fn((Ie=Ie.apply(Z,Y||[])).next())})}function ut(Z){return this instanceof ut?(this.v=Z,this):new ut(Z)}function Re(Z,Y,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var We,Ie=oe.apply(Z,Y||[]),Ye=[];return We={},qt("next"),qt("throw"),qt("return",function je(Hn){return function(Gn){return Promise.resolve(Gn).then(Hn,gn)}}),We[Symbol.asyncIterator]=function(){return this},We;function qt(Hn,Gn){Ie[Hn]&&(We[Hn]=function(Jn){return new Promise(function(Kt,zn){Ye.push([Hn,Jn,Kt,zn])>1||On(Hn,Jn)})},Gn&&(We[Hn]=Gn(We[Hn])))}function On(Hn,Gn){try{!function fn(Hn){Hn.value instanceof ut?Promise.resolve(Hn.value.v).then(Fn,gn):_r(Ye[0][2],Hn)}(Ie[Hn](Gn))}catch(Jn){_r(Ye[0][3],Jn)}}function Fn(Hn){On("next",Hn)}function gn(Hn){On("throw",Hn)}function _r(Hn,Gn){Hn(Gn),Ye.shift(),Ye.length&&On(Ye[0][0],Ye[0][1])}}function _t(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,Y=Z[Symbol.asyncIterator];return Y?Y.call(Z):(Z=function ot(Z){var Y="function"==typeof Symbol&&Symbol.iterator,oe=Y&&Z[Y],Ie=0;if(oe)return oe.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&Ie>=Z.length&&(Z=void 0),{value:Z&&Z[Ie++],done:!Z}}};throw new TypeError(Y?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),oe={},Ie("next"),Ie("throw"),Ie("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function Ie(Ye){oe[Ye]=Z[Ye]&&function(je){return new Promise(function(qt,On){!function We(Ye,je,qt,On){Promise.resolve(On).then(function(fn){Ye({value:fn,done:qt})},je)}(qt,On,(je=Z[Ye](je)).done,je.value)})}}}W.d(rt,{AQ:()=>Re,Cg:()=>X,N3:()=>ut,Tt:()=>xe,sH:()=>Ve,xN:()=>_t}),"function"==typeof SuppressedError&&SuppressedError}},hn=>{hn(hn.s=738)}]);